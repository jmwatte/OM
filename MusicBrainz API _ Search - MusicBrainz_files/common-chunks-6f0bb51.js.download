(self.webpackChunkmusicbrainz_server=self.webpackChunkmusicbrainz_server||[]).push([[9251],{"+5o7Rtt":(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var i=s("84yo5bY"),r=s.n(i),n=s("EdqsaKW"),a=(s("6g1DHTE"),s("DNaZxvn"),s("TZv5lnH")),o=s("B21npvo"),l=s("cGbttel");const c=function(e){let{area:t,showCreditedAs:s=!0,showDisambiguation:i=!0,showEditsPending:r=!0,showIcon:n=!1,...c}=e;const u={showCreditedAs:s,showDisambiguation:i,showEditsPending:r,showIcon:n},d=(0,l.jsx)(o.A,{entity:t,...c,...u},0);return t.containment?(0,a.A)([d].concat(t.containment.map(((e,t)=>(0,l.jsx)(o.A,{entity:e,...u},t+1))))):d};var u=s("8alVwqN"),d=s("HkNzj3j").l;const h=function(e){let{allowNew:t,className:s,content:i,customArtistCredit:a,deletedCaption:h,disableLink:p=!1,entity:m,showCreditedAs:g=!1,showDeletedArtists:f=!0,showDisambiguation:b=!0,showEditsPending:y=!0,showIcon:w=!1,subPath:v,target:_}=e;const T={showDisambiguation:b,showEditsPending:y,showIcon:w,target:_},k={allowNew:t,className:s,content:i,deletedCaption:h,disableLink:p,showCreditedAs:g,subPath:v,target:_,...T},x=r().unwrap(a||m.artistCredit);if("area"===m.entityType&&m.gid)return(0,l.jsx)(c,{area:m,...k});const A=(0,l.jsx)(o.A,{entity:m,...k});return(0,n.Nx)(x)?d("{entity} by {artist}",{artist:(0,l.jsx)(u.A,{artistCredit:x,showDeleted:f,...T}),entity:A}):"place"===m.entityType&&m.area?d("{place} in {area}",{area:(0,l.jsx)(c,{area:m.area,showIcon:w,...T}),place:A}):A}},"+yGjBxw":(e,t,s)=>{"use strict";s.d(t,{A:()=>a});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n"),s("smZuR9W");var i=s("75GVkWN"),r=s("cGbttel");function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=t;return""!==t&&(s="("+t+")"),e.split(new RegExp(s,"u"))}const a=function(e){let{filter:t,newText:s,oldText:a,split:o=""}=e;const l=[],c=new RegExp("^(?:"+o+")$");let u;u=""===o||a.length>1024||s.length>1024?(0,i.pJ)(a,s):(0,i.Ay)(n(a,o),n(s,o));for(let e=0;e<u.length;e++){const s=u[e],r=s.type;if(r!==i.PL&&r!==i.TG&&r!==t)continue;const n=s.oldItems?s.oldItems.join(""):s.oldText,a=s.newItems?s.newItems.join(""):s.newText,d=l.length>0&&l[l.length-1].type===r;let h;e+1<u.length&&(h=u[e+1].type);const p=l.length>0&&null!=h&&l[l.length-1].type===h&&""!==o&&r===i.TG&&c.test(a);d||p||l.push({text:"",type:r}),r===i.PL?l[l.length-1].text+=t===i.i?a:n:l[l.length-1].text+=r===i.i?a:n}const d=l.map(((e,s)=>{const n=e.type===i.PL?i.WJ[t]:i.WJ[e.type];return n?(0,r.jsx)("span",{className:n,children:e.text},s):e.text}));return d.length>1?d:d.length?d[0]:""}},"/DEQ4/f":(e,t,s)=>{"use strict";s.d(t,{lQ:()=>A,jN:()=>O,Ay:()=>Y});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n"),s("AXfG3Yq"),s("DNaZxvn"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("KmaOXyL"),r=s("LCA85s6"),n=s("oEgauXb"),a=s("HMcOWk2"),o=s("52XjgTZ"),l=s("YDxZ9xi"),c=s("xrv16+S"),u=s("93z9/8f"),d=s("jhqsV7L"),h=s("GXDjtXZ");function p(e){return h.A[e.entityType].sort_name?e.sort_name:e.name}var m=s("d/wSL5Q"),g=s("WN/X9IS"),f=s("cGbttel"),b=s("SKGBikk").l,y=s("HkNzj3j").l;const w="";function v(e,t){return(0,u.K)(e.targetType,t.targetType)}const _=(e,t)=>e.typeId-t.typeId||(0,n.UD)(e.textPhrase,t.textPhrase)||(e.backward?1:0)-(t.backward?1:0);function T(e,t){return _(e.linkTypeInfo[0],t.linkTypeInfo[0])}function k(e,t){return(0,d.k)(e.datePeriods[0]??null,t.datePeriods[0]??null)}const x=(e,t)=>(e.linkOrder??0)-(t.linkOrder??0)||(0,d.k)(e.earliestDatePeriod,t.earliestDatePeriod)||(0,n.UD)(e.targetCredit||p(e.target),t.targetCredit||p(t.target))||e.target.id-t.target.id,A=(e,t)=>e.typeID===t.typeID&&(e.text_value??"")===(t.text_value??"")&&(e.credited_as??"")===(t.credited_as??""),E=(e,t)=>(0,c.r1)(e.datePeriods,t.datePeriods,l.A)&&(0,c.r1)(e.attributes,t.attributes,A),I=(e,t,s)=>e.target.id===t.target.id&&e.targetCredit===t.targetCredit&&e.linkOrder===t.linkOrder&&e.hasAttributes===t.hasAttributes&&(!s.compareTracks||(null==e.tracks&&null==t.tracks||null!=e.tracks&&null!=t.tracks&&function(e,t){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}(e.tracks,t.tracks)))&&(!s.compareDatedExtraAttributesLists||(0,c.r1)(e.datedExtraAttributesList,t.datedExtraAttributesList,E)),N={compareDatedExtraAttributesLists:!1,compareTracks:!0},j=(e,t)=>I(e,t,N),S={compareDatedExtraAttributesLists:!0,compareTracks:!1},C=(e,t)=>I(e,t,S),R={compareDatedExtraAttributesLists:!0,compareTracks:!0},L=(e,t)=>I(e,t,R);function P(e){const t=e.phrase;return e.editsPending?(0,f.jsx)("span",{className:"mp",children:t},e.textPhrase):t}function $(e){const t=o.Ay.link_attribute_type[e.typeID];return t.root_id!==r.INSTRUMENT_ROOT_ID&&t.root_id!==r.VOCAL_ROOT_ID}function D(e){for(let r=0;r<e.length;r++){const n=e[r];for(let a=r+1;a<e.length;a++){const r=e[a];(0,l.A)(n.datePeriods[0],r.datePeriods[0])&&(t=n.attributes,s=r.attributes,(0,c.r1)(t.filter($),s.filter($),A))&&((0,c.DZ)(n.attributes,r.attributes,i.L$),e.splice(a,1),a--)}}var t,s;for(let t=0;t<e.length;t++){const s=e[t];for(let i=t+1;i<e.length;i++){const t=e[i];(0,c.r1)(s.attributes,t.attributes,A)&&((0,c.DZ)(s.datePeriods,t.datePeriods,d.k),e.splice(i,1),i--)}}}function O(e,t){return e.position-t.position}function z(e){for(let t=0;t<e.length;t++)for(let s=t+1;s<e.length;s++){const i=e[t],r=e[s];C(i,r)&&(i.tracks=new Set([...i.tracks||[],...r.tracks||[]].sort(O)),e.splice(s,1),s--)}}function Y(e,t){if(!e)return[];let s,n,l,u;t&&(s=t.filter,n=t.result,l=t.trackMapping,u=t.types);const h=n??[];for(let t=0;t<e.length;t++){const n=e[t],a=n.target,p=a.entityType;if(u&&!u.includes(p))continue;if(s&&!s(n,a,p))continue;const f=(0,c.jm)(h,{relationshipPhraseGroups:[],targetType:p},v),_=n.backward,k=o.Ay.link_type[n.linkTypeID];let x=!1;const A=n.attributes;if(A)for(let e=0;e<A.length;e++){const t=A[e];if(o.Ay.link_attribute_type[t.typeID].root_id===r.INSTRUMENT_ROOT_ID){x=!0;break}}const E=[k,A,_?"reverse_link_phrase":"link_phrase",!0];let I,N=(0,i.B3)(...E);x&&(I=(0,i.GW)(...E));const S=_?n.entity1_credit:n.entity0_credit;S&&(N=b("{role} (as {credited_name})",{credited_name:S,role:N}),x&&(I=y("{role} (as {credited_name})",{credited_name:S,role:I})));const C=(0,c.jm)(f.relationshipPhraseGroups,{combinedPhrase:"",key:String(k.id)+w+N,linkTypeInfo:[{backward:n.backward,editsPending:n.editsPending,phrase:I??N,rootTypeId:k.root_id,textPhrase:N,typeId:k.id}],targetGroups:[]},T);C.linkTypeInfo[0].editsPending||=n.editsPending;const R=_?n.entity0_credit:n.entity1_credit,L=(0,m.A)(k,_),P=n.linkOrder,$={begin_date:n.begin_date,end_date:n.end_date,ended:n.ended},D=!!n.attributes&&n.attributes.length>0;let O=null;if(l){const e=n.linkTypeID+"-"+n.id;O=l.get(e)||null}let z={datedExtraAttributesList:[],earliestDatePeriod:$,editsPending:n.editsPending,hasAttributes:D,isOrderable:L,key:(0,g.NF)(),linkOrder:P,target:a,targetCredit:R,tracks:O};const Y=C.targetGroups.find((e=>j(z,e)));Y?z=Y:C.targetGroups.push(z),$!==z.earliestDatePeriod&&(0,d.k)($,z.earliestDatePeriod)<0&&(z.earliestDatePeriod=$),z.datedExtraAttributesList.push({attributes:[...(0,i.A0)(...E)],datePeriods:[$]}),z.editsPending||=n.editsPending}for(const e of h){const t=e.relationshipPhraseGroups;for(let e=0;e<t.length;e++){const s=t[e].targetGroups;for(let e=0;e<s.length;e++){const t=s[e].datedExtraAttributesList;D(t),t.sort(k)}l&&z(s),s.sort(x)}for(let e=0;e<t.length;e++){const s=t[e],i=s.linkTypeInfo;for(let r=e+1;r<t.length;r++){const e=t[r],n=e.linkTypeInfo[0],a=i.find((e=>e.rootTypeId===n.rootTypeId)),o=s.targetGroups,l=e.targetGroups;if(a&&(0,c.r1)(o,l,L)){for(let e=0;e<o.length;e++){const t=o[e];t.editsPending||=l[e].editsPending}const[a,u]=(0,c.eG)(i,n,_);u||(s.key+=w+e.key,i.splice(a,0,n),t.splice(r,1),r--)}}s.combinedPhrase=i.length>1?(0,a.A)(i.map(P)):P(i[0])}}return h}},"/FT4qLG":(e,t,s)=>{"use strict";s.d(t,{A9:()=>r});var i=s("smZuR9W");i.createContext({action:{name:""},flash:{},relative_uri:"",req:{body_params:{},headers:{},method:"",query_params:{},secure:!1,uri:""},session:null,sessionid:null,stash:{current_language:"en",current_language_html:"en"}});const r=i.createContext({action:{name:""},relative_uri:"",req:{method:"",query_params:{},uri:""},session:null,stash:{current_language:"en"},user:null})},"/wdNxGF":(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s("smZuR9W"),r=s("cGbttel"),n=s("oEgauXb").l;const a=i.memo((function(e){let{isDoneDisabled:t,onCancel:s,onDone:i}=e;return(0,r.jsxs)("div",{className:"buttons",style:{marginTop:"1em"},children:[(0,r.jsx)("button",{className:"negative",onClick:s,type:"button",children:n("Cancel")}),(0,r.jsx)("div",{className:"buttons-right",children:(0,r.jsx)("button",{className:"positive",disabled:t,onClick:i,type:"button",children:n("Done")})})]})}))},"0+uOLSc":(e,t,s)=>{"use strict";s.d(t,{A:()=>c,S:()=>l});var i=s("zzNunOx"),r=s("YRn3CNN"),n=s("PstwrNQ"),a=s("6xVzkbe"),o=s("cGbttel");const l=a.S;const c=function(e){let{children:t,disabled:s=!1,field:l,label:c,required:u=!1,yearInputRef:d,...h}=e;return(0,o.jsxs)(n.A,{children:[(0,o.jsx)(r.A,{forField:l.field.year,label:c,required:u}),(0,o.jsx)(a.A,{disabled:s,field:l,yearInputRef:d,...h}),t,(0,o.jsx)(i.A,{field:l})]})}},"040n2o8":(e,t,s)=>{"use strict";s.d(t,{LA:()=>f,Qq:()=>y,f7:()=>p,i5:()=>b,qp:()=>g,qq:()=>h,xf:()=>m});var i=s("oEgauXb").g,r=s("oEgauXb").en;const n=1,a=2,o=4,l=8,c=16,u=64,d=128,h=(i("View and modify your private collections"),i("View your email address"),i("View your public account information"),i("View and modify your private ratings"),i("Submit new barcodes to the database"),i("Submit new ISRCs to the database"),r("View and modify your private tags","folksonomy"),8),p=256,m=1024,g=2048,f=4096,b=8192,y=16384},"07/sqP2":(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s("zzNunOx"),r=s("YRn3CNN"),n=s("PstwrNQ"),a=s("cGbttel");const o=function(e){let{autoComplete:t,children:s,className:o,disabled:l=!1,field:c,inputRef:u,label:d,placeholder:h,preview:p=null,required:m=!1,size:g,type:f="text",...b}=e;const y={autoComplete:t,className:o,disabled:l,id:"id-"+c.html_name,name:c.html_name,placeholder:h??"",ref:u,required:m,size:g,type:f},w=p??c.value??"";return b.uncontrolled?y.defaultValue=w:(y.onChange=b.onChange,y.value=w),(0,a.jsxs)(n.A,{children:[(0,a.jsx)(r.A,{forField:c,label:d,required:m}),(0,a.jsx)("input",{...y}),s,(0,a.jsx)(i.A,{field:c})]})}},"0LgDPGm":(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const i=/^[1-9][0-9]*$/;const r=function(e){return i.test(e)}},"127s6Wg":(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("dL1OOKd");const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=(0,i.A)(e);return"1"===s||"true"===s||"0"!==s&&"false"!==s&&t}},"1OgwVw9":(e,t,s)=>{"use strict";s.d(t,{Ay:()=>T,Ff:()=>_,SH:()=>v,sm:()=>b});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n");var i=s("++R3FlW"),r=s("smZuR9W"),n=s("Vg37ZR/"),a=s("IIDwFGn"),o=s("UQkXO+Y"),l=s("gtppAbj"),c=s("NwGYEf3"),u=s("zzNunOx"),d=s("cJF07Nt"),h=s("0+uOLSc"),p=s("cGbttel"),m=s("oEgauXb").l,g=s("H+29DOL").O,f=s("8YlDuzw").A;function b(e){const t=e.field;return{day:(0,a.A)(t.day.value),month:(0,a.A)(t.month.value),year:(0,a.A)(t.year.value)}}function y(e){const t=e.read(),s=t.field.begin_date,i=t.field.end_date,r=[];s.pendingErrors?.length||i.pendingErrors?.length||(0,l.uJ)(b(s),b(i))||r.push(m("The end date cannot precede the begin date.")),e.set("errors",t.errors.filter((e=>r.includes(e)))).set("pendingErrors",r)}function w(e,t,s){if((0,h.S)(e,t),("object"!=typeof t||null===t)&&"function"!=typeof t||"set-date"!==t.type){if(("object"!=typeof t||null===t)&&"function"!=typeof t||"show-pending-errors"!==t.type)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t);(0,c.oC)(s)}else y(s)}function v(e,t){const s=e.get("field");{const i=t;if(("object"==typeof i&&null!==i||"function"==typeof i)&&"update-begin-date"===i.type&&"action"in i){const t=i.action;w(s.get("begin_date"),t,e)}else if(("object"==typeof i&&null!==i||"function"==typeof i)&&"update-end-date"===i.type&&"action"in i){const t=i.action;if(w(s.get("end_date"),t,e),"set-date"===t.type){const s=t.date;(0,n.Z)(s)&&v(e,{enabled:!0,type:"set-ended"})}}else if(("object"==typeof i&&null!==i||"function"==typeof i)&&"set-ended"===i.type&&"enabled"in i){const e=i.enabled;s.set("ended","value",e)}else{if(("object"!=typeof i||null===i)&&"function"!=typeof i||"copy-date"!==i.type)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i);{const t=s.read().begin_date.field,i=String(t.year.value??""),r=String(t.month.value??""),a={day:String(t.day.value??""),month:r,year:i};(0,h.S)(s.get("end_date"),{date:a,type:"set-date"}),(0,n.Z)(a)&&v(e,{enabled:!0,type:"set-ended"}),y(e),(0,c.oC)(e)}}}}function _(e,t){const s=(0,i.A)(e);return v(s,t),s.final()}const T=r.memo((function(e){let{children:t,disabled:s=!1,dispatch:i,endedLabel:r,field:a}=e;const l=a.field,c=(0,o.A)(i);return(0,p.jsxs)("fieldset",{children:[(0,p.jsx)("legend",{children:m("Date period")}),(0,p.jsx)("p",{children:m("Dates are in the format YYYY-MM-DD.\n            Partial dates such as YYYY-MM or just YYYY are OK,\n            or you can omit the date entirely.")}),(0,p.jsx)(h.A,{disabled:s,dispatch:c.beginDateDispatch,field:l.begin_date,label:g(m("Begin date")),yearInputRef:c.beginYearInputRef,children:(0,p.jsx)("button",{className:"icon copy-date",disabled:s,onClick:c.handleDateCopy,title:m("Copy to end date"),type:"button"})}),(0,p.jsx)(h.A,{disabled:s,dispatch:c.endDateDispatch,field:l.end_date,label:g(m("End date")),yearInputRef:c.endYearInputRef}),(0,p.jsx)(u.A,{field:a,includeSubFields:!1}),f(r)?(0,p.jsx)(d.A,{disabled:s||(0,n.Z)(b(l.end_date)),field:l.ended,label:r,onChange:c.handleEndedChange}):null,t]})}))},"1hBcSWX":(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("cGbttel"),r=s("8YlDuzw").A;const n=function(e){let{id:t,onClick:s,label:n}=e;return(0,i.jsx)("button",{className:"add-item"+(r(n)?" with-label":""),id:t,onClick:s,type:"button",children:r(n)?n:null})}},"1viFeHS":(e,t,s)=>{"use strict";s.d(t,{wI:()=>xe,IS:()=>$e,mb:()=>De,Dc:()=>Le,Bt:()=>Oe});s("60ocjtt"),s("6g1DHTE"),s("Kqb1L/m"),s("70YSc4n"),s("AXfG3Yq"),s("XteD3uf"),s("DNaZxvn"),s("NKd1yOY"),s("gdf1lGT"),s("PkUg7wA"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO"),s("kvaNrFd"),s("o5/UKe6"),s("paccsHs");var i=s("bv+x2iX"),r=s("EVdnBjI"),n=s.n(r),a=s("84yo5bY"),o=s.n(a),l=s("smZuR9W"),c=s("pKdT8YG"),u=s("Ui1Lssl"),d=s("LCA85s6"),h=s("oEgauXb"),p=s("HkNzj3j"),m=s("52XjgTZ"),g=s("VHUgtNR"),f=s("xrv16+S"),b=s("xNKEMJr"),y=s("cbdMZik"),w=s("jhqsV7L"),v=s("yUJAgX5"),_=s("e3+xVn3"),T=s("Vg37ZR/"),k=s("HfEq/qN"),x=s("WN/X9IS"),A=s("VNyMmCx"),E=s("rAs4fSN"),I=s("n4qWIJf"),N=s("++R3FlW"),j=s("PzvTjBu"),S=s("JMEfy8P"),C=s("l8ZfC6+"),R=s("NwGYEf3"),L=s("1OgwVw9"),P=s("zzNunOx"),$=s("07/sqP2"),D=s("cGbttel"),O=s("oEgauXb").l,z=s("H+29DOL").O;const Y=function(e){let{dispatch:t,field:s}=e;return(0,D.jsxs)("fieldset",{children:[(0,D.jsx)("legend",{children:O("Credit")}),(0,D.jsx)($.A,{field:s,label:z(O("Credited to")),onChange:function(e){t({credit:e.currentTarget.value,type:"update-relationship-credit"})}}),(0,D.jsx)(P.A,{field:s,includeSubFields:!1})]})};var U=s("oEgauXb").l,W=s("oEgauXb").lp;const H=e=>{const t=e.relationship,s=t.begin_date,i=t.end_date,r=(0,C.Fv)("credit",e.creditableEntityProp?t[e.creditableEntityProp]:null),n={errors:[],field:{begin_date:(0,C.tN)("period.begin_date",{day:s?.day??null,month:s?.month??null,year:s?.year??null}),end_date:(0,C.tN)("period.end_date",{day:i?.day??null,month:i?.month??null,year:i?.year??null}),ended:(0,C.Fv)("period.ended",t.ended)},has_errors:!1,html_name:"",id:0,type:"compound_field"};return{credit:r,datePeriodField:n,initialDatePeriodField:n}},M=(e,t)=>{const s=(0,N.A)(e);{const e=t;if(("object"==typeof e&&null!==e||"function"==typeof e)&&"update-date-period"===e.type&&"action"in e){const t=e.action;(0,L.SH)(s.get("datePeriodField"),t)}else if(("object"==typeof e&&null!==e||"function"==typeof e)&&"update-initial-date-period"===e.type&&"props"in e){const t=e.props;(0,S.Pu)(H(t).initialDatePeriodField,s.get("initialDatePeriodField"))}else if(("object"!=typeof e||null===e)&&"function"!=typeof e||"reset"!==e.type)if(("object"!=typeof e||null===e)&&"function"!=typeof e||"show-all-pending-errors"!==e.type){if(("object"!=typeof e||null===e)&&"function"!=typeof e||"update-relationship-credit"!==e.type||!("credit"in e))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e);{const t=e.credit;s.set("credit","value",t)}}else(0,R.oC)(s.get("datePeriodField"));else(0,S.Pu)(s.get("initialDatePeriodField").read(),s.get("datePeriodField"))}return s.final()};const B=function(e){const[t,s]=l.useState(!1),[i,r]=l.useReducer(M,e,H),n=(0,R.mJ)(i.datePeriodField);l.useEffect((()=>{r({props:e,type:"update-initial-date-period"})}),[e]);const a=l.useCallback((e=>{r({action:e,type:"update-date-period"})}),[r]),o=e=>{"Enter"===e.key&&n&&(r({type:"show-all-pending-errors"}),e.preventDefault())},c=(t,s)=>{t.stopPropagation(),t.preventDefault(),n?r({type:"show-all-pending-errors"}):(t=>{if(n)return;const s=i.datePeriodField.field,r={begin_date:(0,L.sm)(s.begin_date),end_date:(0,L.sm)(s.end_date),ended:s.ended.value};e.creditableEntityProp&&(r[e.creditableEntityProp]=i.credit.value),e.onConfirm(r),t()})(s)};return(0,D.jsx)(j.A,{buildChildren:t=>(0,D.jsxs)("form",{className:"external-link-attribute-dialog",onKeyDown:o,onSubmit:e=>c(e,t),children:[(0,D.jsx)(L.Ay,{dispatch:a,endedLabel:U("This relationship has ended."),field:i.datePeriodField}),e.creditableEntityProp?(0,D.jsx)(Y,{dispatch:r,field:i.credit}):null,(0,D.jsxs)("div",{className:"buttons",style:{display:"block",marginTop:"1em"},children:[(0,D.jsx)("button",{className:"negative",onClick:t,type:"button",children:U("Cancel")}),(0,D.jsx)("div",{className:"buttons-right",children:(0,D.jsx)("button",{className:"positive",disabled:n,type:"submit",children:U("Done")})})]})]}),buttonContent:null,buttonProps:{className:"icon edit-item",title:W("Edit attributes","interactive")},id:"external-link-attribute-dialog",isOpen:t,toggle:e=>{e&&r({type:"reset"}),s(e)}})};var F=s("Ez3XeuZ"),G=s("QBOBohR"),X=s("6lYEAin"),K=s("TeVBGSm"),V=s("H+29DOL").O,q=s("oEgauXb").l,Z=s("oEgauXb").lp;const J=function(e){let{cleanupUrl:t,link:s,onConfirm:i,validateLink:r}=e;const[n,a]=l.useState(!1),[o,c]=l.useState(s);l.useEffect((()=>{c(s)}),[s]);const u=e=>{const s=e.currentTarget.value;c({...o,rawUrl:s,url:t(s)})},d=e=>{i(o.rawUrl),e()};return(0,D.jsx)(j.A,{buildChildren:e=>{const t=r(o);return(0,D.jsxs)("form",{onSubmit:t=>{t.preventDefault(),t.stopPropagation(),d(e)},children:[(0,D.jsx)("table",{children:(0,D.jsxs)("tbody",{children:[(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"section",children:V(q("URL"))}),(0,D.jsxs)("td",{children:[(0,D.jsx)("input",{className:"value raw-url",onChange:u,style:{width:"336px"},value:o.rawUrl}),t&&t.target===K.Yb.URL?(0,D.jsx)("div",{className:"error field-error target-url","data-visible":"1",children:t.message}):null]})]}),o.url?(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"section",style:{whiteSpace:"nowrap"},children:V(q("Cleaned up to"))}),(0,D.jsx)("td",{children:t?o.url:(0,D.jsx)("a",{className:"clean-url",href:o.url,rel:"noreferrer",style:{overflowWrap:"anywhere"},target:"_blank",children:o.url})})]}):null]})}),(0,D.jsxs)("div",{className:"buttons",style:{display:"block",marginTop:"1em"},children:[(0,D.jsx)("button",{className:"negative",onClick:()=>{c(s),a(!1)},type:"button",children:q("Cancel")}),(0,D.jsx)("div",{className:"buttons-right",children:(0,D.jsx)("button",{className:"positive",onClick:()=>d(e),type:"button",children:q("Done")})})]})]})},buttonContent:null,buttonProps:{className:"icon edit-item",title:Z("Edit URL","interactive")},id:"url-input-popover",isOpen:n,toggle:e=>{e||i(o.rawUrl),a(e)}})};var Q=s("2ath9Yi"),ee=s("KzhY9EY"),te=s("0LgDPGm"),se=s("hJIxiGq");const ie=["bruit.app","distrokid.com","trac.co"],re=["adf.ly","album.link","allmylinks.com","ampl.ink","amu.se","artist.link","band.link","bfan.link","biglink.to","bio.link","bit.ly","bitly.com","backl.ink","bruit.app","bstlnk.to","cli.gs","deck.ly","distrokid.com","ditto.fm","eventlink.to","fanlink.to","ffm.to","found.ee","fty.li","fur.ly","g.co","gate.fm","geni.us","goo.gl","hypeddit.com","hypel.ink","hyperfollow.com","hyperurl.co","is.gd","kl.am","koji.game","koji.sh","laburbain.com","li.sten.to","linkco.re","lnkfi.re","linkfly.to","linktr.ee","listen.lt","lnk.bio","lnk.co","lnk.site","lnk.to","lsnto.me","many.link","mcaf.ee","mez.ink","moourl.com","music.indiefy.net","musics.link","mylink.page","myurls.bio","odesli.co","onerpm.link","orcd.co","owl.ly","page.link","pandora.app.link","podlink.to","pods.link","push.fm","rb.gy","rubyurl.com","share.amuse.io","smarturl.it","snd.click","song.link","songwhip.com","spinnup.link","spoti.fi","sptfy.com","spread.link","streamerlinks.com","streamlink.to","strm.to","su.pr","t.co","tiny.cc","tinyurl.com","tourlink.to","trac.co","u.nu","unitedmasters.com","untd.io","vyd.co","withkoji.com","yep.it"].map((e=>new RegExp("^https?://([^/]+\\.)?"+(0,se.A)(e)+(ie.includes(e)?"/.+":"(?:/.*)?$"),"i")));var ne=s("KmaOXyL"),ae=s("r1ucMe4"),oe=s("x5U3UhS"),le=s("8YlDuzw").A,ce=s("2k2mX3K").RL,ue=s("HkNzj3j").l,de=s("SKGBikk").l,he=s("oEgauXb").lp,pe=s("H+29DOL").O,me=s("SKGBikk").lp;const ge="rel-add",fe="rel-edit",be="",ye="rel-remove";class we extends l.Component{constructor(e){super(e);const t=e.sourceData,s=t.entityType,i=[s,"url"].sort().join("-");let r=function(e){const t=e?.relationships;if(!t)return[];return t.reduce((function(t,s){const i=s.target;return"url"===i.entityType&&t.push({begin_date:s.begin_date||d.EMPTY_PARTIAL_DATE,deleted:!1,editsPending:s.editsPending,end_date:s.end_date||d.EMPTY_PARTIAL_DATE,ended:s.ended||!1,entity0:e||null,entity0_credit:s.entity0_credit||"",entity1:i,entity1_credit:s.entity1_credit||"",pendingTypes:null,rawUrl:i.name,relationship:s.id,submitted:!0,type:s.linkTypeID??null,url:i.name,video:!!s.attributes&&s.attributes.some(Se)}),t}),[])}(t);r.sort((function(e,t){const s=e.type&&m.Ay.link_type[e.type],i=t.type&&m.Ay.link_type[t.type];return(0,h.UD)(s?ce(s.link_phrase).toLowerCase():"",i?ce(i.link_phrase).toLowerCase():"")}));const n=`submittedLinks_${s}_${(0,_.A)(t.id)?t.id:"new"}`;if(this.submittedLinksWrapper={get(){if(k.go){const e=k.HI.get(n);if(e)return(0,ee.E)(JSON.parse(e)).filter((e=>!Ne(e))).map(Ee)}},remove(){k.HI.remove(n)},set(e){k.go&&k.HI.set(n,JSON.stringify((0,ee.d)(e)))}},"undefined"!=typeof window){if("POST"===(0,y.tr)().req.method&&"release"!==s){const e=this.submittedLinksWrapper.get();e&&(r=e,this.submittedLinksWrapper.remove())}else{const e=new RegExp("(?:\\?|&)edit-"+("release_group"===s?"release-group":s)+"\\.url\\.([0-9]+)\\.(text|link_type_id)=([^&]+)","g"),t={};let i;for(;i=e.exec(window.location.search);){const[,e,s,r]=i;switch(s){case"link_type_id":case"text":(t[e]||={})[s]=decodeURIComponent(r)}}for(const e of Object.values(t))r.push(Ee({rawUrl:e.text||"",relationship:(0,x.NF)("new-"),type:parseInt(e.link_type_id,10)||null,url:Le(e.text||"")}))}}const a=[],c=[];for(const e of r)if((0,te.A)(e.relationship))a.push(e);else{const t=Le(e.url);c.push({...e,relationship:(0,x.NF)("new-"),url:K.LS(t)||t})}const u=(0,f.$z)(a,Ie);r=a.concat(c.filter((e=>!u.has(Ie(e))))),this.typeOptions=(0,ae.linkTypeOptions)({children:m.Ay.link_type_tree[i]},/^url-/.test(i)),this.sourceType=s,this.initialLinks=r,d.ENTITIES_WITH_RELATIONSHIP_CREDITS[s]?this.creditableEntityProp=s<"url"?"entity0_credit":"entity1_credit":this.creditableEntityProp=null,this.state={links:je(r)},this.tableRef=l.createRef(),this.oldLinks=this.getOldLinksHash(),this.generalLinkTypes=this.typeOptions.filter((e=>e.disabled||!K.Rl.includes(e.data.gid))),this.errorObservable=e.errorObservable||oe.LI(o().observable(!1)),this.copyEditDataToReleaseEditor()}copyEditDataToReleaseEditor(){const e=g.A._releaseEditor;e&&e.externalLinksEditData(this.getEditData())}componentDidUpdate(){this.copyEditDataToReleaseEditor()}setLinkState(e,t,s){const i=this.state.links.slice(0);i[e]={...i[e],...t},this.setState({links:i},s)}cleanupUrl(e){return e.match(/^\w+\./)&&(e="http://"+e),K.LS(e)||e}handleUrlChange(e,t,s){let i=s;""!==i?this.setState((t=>{const r=[...t.links];return e.forEach((e=>{const t=r[e];i.trim()!==t.url.trim()&&(i=this.cleanupUrl(i));const n={...r[e],rawUrl:s,url:i},a=new K.A$(i,this.sourceType),o=a.guessType(),l=a.getPossibleTypes(),c=this.filterTypeOptions(l);t.type&&!c.some((e=>e.data.id===t.type))&&(n.type=null),!n.type&&o&&("string"==typeof o?n.type=m.Ay.link_type[o].id:(n.type=m.Ay.link_type[o[0]].id,n.pendingTypes=o.slice(1).map((e=>m.Ay.link_type[e].id)))),r[e]=n})),{links:je(r,-1)}})):this.removeLinks(e,t)}handleUrlBlur(e,t,s,i,r){const a={...this.state.links[e]},o=s.currentTarget.value,l=Le(o.trim());if(o!==l&&(a.url=l),""===o||!r||t&&!a.type)this.setLinkState(e,a);else if(a.submitted=!0,t){const t=s.relatedTarget;t&&t.dataset.index===i.toString()&&(a.submitted=!1),this.setLinkState(e,a,(()=>{a.submitted&&this.submitPendingTypes(a,e),n()(this.tableRef.current).find("input[type='url']").eq(0).focus()}))}else this.setLinkState(e,a,(()=>{a.submitted&&this.submitPendingTypes(a,e)}))}submitPendingTypes(e,t){const s=e.pendingTypes;s&&this.setState((i=>{let r=[...i.links];r[t]={...r[t],pendingTypes:null};const n=r.findIndex((e=>!(0,te.A)(e.relationship)&&Ne(e)));return n>0&&r.splice(n),r=r.concat(s.map((t=>Ee({...{submitted:!0,type:t,url:e.url},relationship:(0,x.NF)("new-")})))),{links:je(r,-1)}}))}handleLinkSubmit(e,t,s,i){const r={...this.state.links[e]},a=s.currentTarget.value,o=Le(a.trim());a!==o&&(r.url=o),""!==a&&i?(r.submitted=!0,this.setLinkState(e,r,(()=>{this.submitPendingTypes(r,e),r.type?n()(this.tableRef.current).find(`tr.external-link-item:eq(${t+1})`).find("a,input").eq(0).focus():n()(this.tableRef.current).find(`tr.external-link-item:eq(${t})\n                  + tr.relationship-item`).find("select.link-type").focus()}))):this.setLinkState(e,r)}handleTypeChange(e,t){const s=Number(t.currentTarget.value)||null,i={...this.state.links[e]};i.type=s,this.setLinkState(e,i)}handleTypeBlur(e,t,s,i,r){if(!s||!r)return;const a=t.relatedTarget;if(a&&a.dataset.index===i.toString())return;const o={...this.state.links[e]};o.url&&o.type&&(o.submitted=!0),this.setLinkState(e,o,(()=>{this.submitPendingTypes(o,e),n()(this.tableRef.current).find("input[type='url']").eq(0).focus()}))}handleVideoChange(e,t){this.setLinkState(e,{video:t.currentTarget.checked})}removeLink(e){this.setState((t=>{const s=t.links.slice(0),i=s[e];return(0,te.A)(i.relationship)?s[e]={...i,deleted:!i.deleted}:s.splice(e,1),{links:s}}))}removeLinks(e,t){this.setState((t=>{const s=[...t.links];for(let t=e.length-1;t>=0;--t){const i=e[t],r=s[i];(0,te.A)(r.relationship)?s[i]={...r,deleted:!r.deleted}:s.splice(i,1)}return{links:je(s,-1)}}),(()=>{n()(this.tableRef.current).find(`tr.external-link-item:eq(${t})`).find("button.edit-item, input").eq(0).focus()}))}addRelationship(e,t){this.setState((t=>{const s=[...t.links],i=s.length,r=s[i-1];if(""===r.url)return s[i-1]={...r,submitted:!0,url:e},{links:je(s)};const n=Ee({relationship:(0,x.NF)("new-"),submitted:!0,url:e});return{links:t.links.concat([n])}}),(()=>{n()(this.tableRef.current).find(`tr.add-relationship:eq(${t})`).prev().find("select.link-type").focus()}))}getOldLinksHash(){return(0,f.pY)(this.initialLinks.filter((e=>(0,te.A)(e.relationship))),(e=>String(e.relationship)))}getEditData(){const e=this.getOldLinksHash(),t=(0,f.pY)(this.state.links.filter((e=>!e.deleted)),(e=>String(e.relationship)));return{allLinks:new Map([...e,...t]),newLinks:t,oldLinks:e}}getFormData(e,t,s){let i=0;const r=this.sourceType>"url",{oldLinks:n,newLinks:a,allLinks:o}=this.getEditData();for(const[l,c]of o){if(!c?.type)return;const o=e+"."+(t+i++);(0,te.A)(l)&&(s(o,"relationship_id",String(l)),a.has(l)||s(o,"removed","1")),s(o,"text",c.url),c.video?s(o+".attributes.0","type.gid",d.VIDEO_ATTRIBUTE_GID):n.get(l)?.video&&(s(o+".attributes.0","type.gid",d.VIDEO_ATTRIBUTE_GID),s(o+".attributes.0","removed","1")),r&&s(o,"backward","1"),s(o,"link_type_id",String(c.type)||""),this.creditableEntityProp&&s(o,this.creditableEntityProp,c[this.creditableEntityProp]||"");const u=c.begin_date||d.EMPTY_PARTIAL_DATE,h=c.end_date||d.EMPTY_PARTIAL_DATE;s(o,"period.begin_date.year",u.year?String(u.year):""),s(o,"period.begin_date.month",u.month?String(u.month):""),s(o,"period.begin_date.day",u.day?String(u.day):""),s(o,"period.end_date.year",h.year?String(h.year):""),s(o,"period.end_date.month",h.month?String(h.month):""),s(o,"period.end_date.day",h.day?String(h.day):""),s(o,"period.ended",c.ended?"1":"0")}}validateLink(e,t){const s=(0,f.$z)((0,f.hS)(this.state.links.concat(this.initialLinks),(e=>e.relationship)),Ie);let i=null;const r=e.type?m.Ay.link_type[e.type]:null;t||=new K.A$(e.url,this.sourceType);const n=this.oldLinks.get(String(e.relationship)),a=!(0,te.A)(e.relationship),o=n&&e.url!==n.url,l=a||o,c=n&&Number(e.type)!==Number(n.type);if(Ne(e))i=null;else if(e.url)if(l&&!Pe(e.url))i={message:ue("Please enter a valid URL, such as “{example_url}”.",{example_url:(0,D.jsx)("span",{className:"url-quote",children:"http://example.com/"})}),target:K.Yb.URL};else if(l&&(u=e.url,/^https?:\/\/(?:[^/]+\.)?example\.(?:com|org|net)(?:\/.*)?$/.test(u)))i={message:ue("“{example_url}” is just an example.\n           Please enter the actual link you want to add.",{example_url:(0,D.jsx)("span",{className:"url-quote",children:e.url})}),target:K.Yb.URL};else if(l&&function(e){return/^https?:\/\/([^/]+\.)?musicbrainz\.org/.test(e)}(e.url))i={message:(0,h.l)("Links to MusicBrainz URLs are not allowed.\n                    Did you mean to paste something else?"),target:K.Yb.URL};else if(l&&function(e){return/^https?:\/\/([^/]+\.)?critiquebrainz\.org/.test(e)}(e.url))i={message:de("Please don’t enter CritiqueBrainz links — reviews\n           are automatically linked from the “{reviews_tab_name}” tab.",{reviews_tab_name:(0,h.l)("Reviews")}),target:K.Yb.URL};else if(l&&(0,E.Q)(e.url))i={message:(0,h.l)("Links to this website are not allowed\n                    because it is known to host malware."),target:K.Yb.URL};else if(l&&function(e){return re.some((function(t){return null!==e.match(t)}))}(e.url))i={message:(0,h.l)("Please don’t enter bundled/shortened URLs,\n                    enter the destination URL(s) instead."),target:K.Yb.URL};else if(l&&function(e){return/^https?:\/\/([^/]+\.)?google\.[^/]+\/amp/.test(e)}(e.url))i={message:(0,h.l)("Please don’t enter Google AMP links,\n                    since they are effectively an extra redirect.\n                    Enter the destination URL instead."),target:K.Yb.URL};else if(l&&function(e){return/^https?:\/\/(?:[^/?#]+\.)?google\.[^/?#]+\/search/.test(e)}(e.url))i={message:(0,h.l)("Please don’t enter links to search results.\n                    If you’ve found any links through your search\n                    that seem useful, do enter those instead."),target:K.Yb.URL};else if(e.type){if(r&&r.deprecated&&(a||c))i={message:(0,h.l)("This relationship type is deprecated \n                    and should not be used."),target:K.Yb.RELATIONSHIP};else if((s.get(Ie(e))||[]).length>1)i={blockMerge:!0,message:(0,h.l)("This relationship already exists."),target:K.Yb.RELATIONSHIP};else if(r&&l){const e=t.checkRelationship(r.gid);e.result||(i={message:"",target:K.Yb.NONE},i.target=e.target||K.Yb.NONE,i.target===K.Yb.URL&&(i.message=(0,h.l)("This URL is not allowed\n                             for the selected link type,\n                             or is incorrectly formatted.")),i.target===K.Yb.RELATIONSHIP&&(i.message=(0,h.l)("This URL is not allowed \n                             for the selected link type.")),i.target===K.Yb.ENTITY&&(i.message=("object"==typeof t&&null!==t||"function"==typeof t)&&"area"===t.entityType?(0,h.l)("This URL is not allowed for areas."):("object"==typeof t&&null!==t||"function"==typeof t)&&"artist"===t.entityType?(0,h.l)("This URL is not allowed for artists."):("object"==typeof t&&null!==t||"function"==typeof t)&&"event"===t.entityType?(0,h.l)("This URL is not allowed for events."):("object"==typeof t&&null!==t||"function"==typeof t)&&"genre"===t.entityType?(0,h.l)("This URL is not allowed for genres."):("object"==typeof t&&null!==t||"function"==typeof t)&&"instrument"===t.entityType?(0,h.l)("This URL is not allowed for instruments."):("object"==typeof t&&null!==t||"function"==typeof t)&&"label"===t.entityType?(0,h.l)("This URL is not allowed for labels."):("object"==typeof t&&null!==t||"function"==typeof t)&&"place"===t.entityType?(0,h.l)("This URL is not allowed for places."):("object"==typeof t&&null!==t||"function"==typeof t)&&"recording"===t.entityType?(0,h.l)("This URL is not allowed for recordings."):("object"==typeof t&&null!==t||"function"==typeof t)&&"release"===t.entityType?(0,h.l)("This URL is not allowed for releases."):("object"==typeof t&&null!==t||"function"==typeof t)&&"release_group"===t.entityType?(0,h.l)("This URL is not allowed for release groups."):("object"==typeof t&&null!==t||"function"==typeof t)&&"series"===t.entityType?(0,h.l)("This URL is not allowed for series."):("object"==typeof t&&null!==t||"function"==typeof t)&&"work"===t.entityType?(0,h.l)("This URL is not allowed for works."):("object"==typeof t&&null!==t||"function"==typeof t)&&"url"===t.entityType?"":(()=>{throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})()),i.message=e.error||i.message)}}else i={message:(0,h.l)("Please select a link type for the URL\n                    you’ve entered."),target:K.Yb.RELATIONSHIP};else i={message:(0,h.l)("Required field."),target:K.Yb.URL};var u;return i}filterTypeOptions(e){return e?this.typeOptions.filter((t=>!!t.disabled||e.some((e=>"string"==typeof e?e===t.data.gid:e.includes(t.data.gid))))):this.generalLinkTypes}getURLHighlightType(e){const t=e[0];if(this.props.isNewEntity)return be;const s=this.oldLinks.get(String(t.relationship));return s&&t.url!==s.url?fe:e.every((e=>!(0,te.A)(e.relationship)))?ge:e.every((e=>e.deleted))?ye:be}getRelationshipHighlightType(e,t){if(this.props.isNewEntity)return be;if(e.deleted)return ye;if(!(0,te.A)(e.relationship))return ge;const s=this.oldLinks.get(String(e.relationship)),i=s&&Number(e.type)!==Number(s.type),r=s&&t&&s[t]!==e[t],n=s&&(0,w.k)(s,e);return i||r||n?fe:be}isNewOrChangedLink(e){if(!(0,te.A)(e.relationship))return!0;const t=this.oldLinks.get(String(e.relationship)),s=t&&e.url!==t.url,i=t&&Number(e.type)!==Number(t.type);return Boolean(s||i)}render(){this.errorObservable(!1);const e=function(e){const t=new Map,s=new Set;let i=0;return e.forEach(((e,r)=>{const n={...e,error:null,index:r,urlIndex:r},a=`${e.url}-${e.type??""}`,o=e.submitted&&!s.has(a)?e.url:String(e.relationship),l=t.get(o);l?(n.urlIndex=l[0].urlIndex,l.push(n)):(n.urlIndex=i++,t.set(o,[n])),s.add(a)})),t}(this.state.links),t=Array.from(e);return(0,D.jsx)("table",{className:"row-form",id:"external-links-editor",ref:this.tableRef,children:(0,D.jsx)("tbody",{children:t.map(((s,i)=>{const r=s[1],{url:n,rawUrl:a,entity1:o}=r[0],l=i===t.length-1,c=[...r],u=[],d=c[0].submitted?null:e.get(n);let p=null,g=!1,f=!0;const b=new K.A$(n,this.sourceType),y=b.getPossibleTypes(),w=[],v=this.filterTypeOptions(y);c.forEach((e=>{u.push(e.index);const t=e.type?m.Ay.link_type[e.type]:null;t&&w.push(t.gid);const s=this.validateLink(e,b);s&&(this.isNewOrChangedLink(e)&&(this.errorObservable(!0),g=!0),s.target===K.Yb.RELATIONSHIP?e.error=s:(f=!1,p=s),s.blockMerge&&(f=!1))}));let _=null!=c[0].pendingTypes;const T=b.checkRelationships(w,y),k=c.some((e=>this.isNewOrChangedLink(e)));T.result?_=y&&1===y.length:k&&c[0].submitted&&w.length>0&&!g&&(this.errorObservable(!0),p={message:T.error||(0,h.l)("This relationship type combination is invalid."),target:T.target||K.Yb.RELATIONSHIP});const x=u[0];return(0,D.jsx)(ke,{canMerge:f,cleanupUrl:e=>this.cleanupUrl(e),creditableEntityProp:this.creditableEntityProp,duplicate:d?d[0].urlIndex:null,error:p,getRelationshipHighlightType:e=>this.getRelationshipHighlightType(e,this.creditableEntityProp),handleAttributesChange:(e,t)=>this.setLinkState(e,t),handleLinkRemove:e=>this.removeLink(e),handleLinkSubmit:e=>this.handleLinkSubmit(x,i,e,f),handleUrlBlur:e=>this.handleUrlBlur(x,null!=d,e,i,f),handleUrlChange:e=>this.handleUrlChange(u,i,e),highlight:this.getURLHighlightType(c),index:i,isLastLink:l,isOnlyLink:1===t.length,onAddRelationship:e=>this.addRelationship(e,i),onTypeBlur:(e,t)=>this.handleTypeBlur(e,t,null!=d,i,f),onTypeChange:(e,t)=>this.handleTypeChange(e,t),onUrlRemove:()=>this.removeLinks(u,i),onVideoChange:(e,t)=>this.handleVideoChange(e,t),rawUrl:a,relationships:c,typeOptions:v,url:n,urlEntity:o,urlMatchesType:_,validateLink:e=>this.validateLink(e)},i)}))})})}}function ve(e){let{handleTypeBlur:t,handleTypeChange:s,options:i,type:r}=e;const n=i.some((e=>e.value===r)),a=r?m.Ay.link_type[r]:null,o=n||!a?" ":ce(a.link_phrase);return(0,D.jsxs)("select",{className:n||!r?"link-type":"link-type error",onBlur:t,onChange:s,value:r||"",children:[(0,D.jsx)("option",{value:"",children:o}),i.map((e=>(0,D.jsx)("option",{disabled:e.disabled,value:e.value,children:e.text},e.value)))]})}function _e(e){let{type:t}=e;const s=t?m.Ay.link_type[t]:null;let i="";return s&&s.description&&(i=ue("{description} ({url|more documentation})",{description:(0,p.Ay)(ce(s.description)),url:"/relationship/"+s.gid})),(0,D.jsx)(F.A,{content:(0,D.jsx)("div",{style:{textAlign:"left"},children:i})})}const Te=e=>{const{creditableEntityProp:t,link:s,hasUrlError:i,highlight:r,urlMatchesType:n}=e,a=s.type?m.Ay.link_type[s.type]:null,o=a&&a.type1>"url",l=(0,T.Z)(s.begin_date)||(0,T.Z)(s.end_date)||s.ended,c=!(!s.error&&!i)||!(n||Ne(s)),u=t?s[t]:null;return(0,D.jsxs)("tr",{className:"relationship-item",children:[(0,D.jsx)("td",{}),(0,D.jsxs)("td",{className:"link-actions",children:[e.isOnlyRelationship||e.urlMatchesType?null:(0,D.jsx)(X.A,{onClick:()=>e.onLinkRemove(s.index),title:he("Remove relationship","interactive")}),(0,D.jsx)(B,{creditableEntityProp:t,onConfirm:t=>e.onAttributesChange(s.index,t),relationship:s})]}),(0,D.jsxs)("td",{children:[(0,D.jsxs)("div",{className:`relationship-content ${r}`,children:[(0,D.jsx)("label",{children:pe((0,h.l)("Type"))}),(0,D.jsxs)("label",{className:"relationship-name",children:[c?(0,D.jsx)(ve,{handleTypeBlur:t=>e.onTypeBlur(s.index,t),handleTypeChange:t=>e.onTypeChange(s.index,t),options:e.typeOptions.reduce(((t,s,i)=>{const r=e.typeOptions[i+1];return(!s.disabled||r&&r.data.parent_id===s.value)&&t.push(s),t}),[]),type:s.type}):a?o?(0,ne.Av)(a,a.l_reverse_link_phrase??""):(0,ne.Av)(a,a.l_link_phrase??""):null,!s.url||s.error||i?null:(0,D.jsx)(_e,{type:s.type}),(0,D.jsx)(G.A,{relationship:s}),l?(0,D.jsxs)("span",{className:"date-period",children:[" ",(0,b.x)((0,v.A)(s))]}):null,le(u)?(0,D.jsxs)("span",{className:"entity-credit",children:[" ",(0,b.x)(me("credited as “{credit}”","relationship credit",{credit:u}))]}):null]})]}),a&&Object.hasOwn(a.attributes,String(d.VIDEO_ATTRIBUTE_ID))?(0,D.jsx)("div",{className:"attribute-container",children:(0,D.jsxs)("label",{children:[(0,D.jsx)("input",{checked:s.video,onChange:t=>e.onVideoChange(s.index,t),style:{verticalAlign:"text-top"},type:"checkbox"})," ",(0,h.l)("video")]})}):null,s.error?(0,D.jsx)("div",{className:"error field-error","data-visible":"1",children:s.error.message}):null]})]},s.relationship)};class ke extends l.Component{handleKeyDown(e){"Enter"===e.key&&this.props.url&&(e.preventDefault(),this.props.handleLinkSubmit(e))}highlightDuplicate(e){if(null===e)return;const t=document.getElementById(`external-link-${e}`);t&&(t.scrollIntoView(),t.style.backgroundColor="yellow",setTimeout((()=>{t.style.backgroundColor="initial"}),1e3))}render(){const e=this.props,t=e.relationships.some((e=>!Ne(e))),s=e.relationships[0],i=t?function(e,t){let s="";for(const t of e){const e=t.type?m.Ay.link_type[t.type]:null;if(e){if(/^official (?:homepage|site)$/.test(e.name))return"home";"blog"===e.name?s="blog":"review"===e.name&&(s="review")}}if(le(s))return s;for(const e of Object.keys(d.FAVICON_CLASSES))if(t.indexOf(e)>0)return d.FAVICON_CLASSES[e];return"no"}(e.relationships,e.url):null;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("tr",{className:"external-link-item",id:`external-link-${e.index}`,children:[(0,D.jsx)("td",{children:i?(0,D.jsx)("span",{className:"favicon "+i+"-favicon"}):null}),(0,D.jsxs)("td",{className:"link-actions",children:[t?(0,D.jsx)(X.A,{dataIndex:e.index,onClick:()=>e.onUrlRemove(),title:(0,h.l)("Remove link")}):null,Ne(e)?null:(0,D.jsx)(J,{cleanupUrl:e.cleanupUrl,link:s,onConfirm:e.handleUrlChange,validateLink:e.validateLink})]}),(0,D.jsxs)("td",{children:[s.submitted&&e.url?(0,D.jsx)("a",{className:`url ${e.highlight}`,href:e.url,rel:"noreferrer",style:{overflowWrap:"anywhere"},target:"_blank",children:e.url}):(0,D.jsx)("input",{className:"value with-button","data-index":e.index,onBlur:e.handleUrlBlur,onChange:t=>{e.handleUrlChange(t.currentTarget.value)},onKeyDown:e=>this.handleKeyDown(e),placeholder:e.isOnlyLink?(0,h.l)("Add link"):e.isLastLink?(0,h.l)("Add another link"):"",type:"url",value:e.rawUrl}),e.urlEntity?(0,D.jsx)(I.A,{entity:e.urlEntity}):null,e.url&&null!==e.duplicate?(0,D.jsx)("div",{className:"error field-error","data-visible":"1",children:ue(e.canMerge?"Note: This link already exists \n                       at position {position}. \n                       To merge, press enter or select a type.":"Note: This link already exists \n                       at position {position}.",{position:(0,D.jsx)("a",{href:`#external-link-${e.duplicate}`,onClick:()=>this.highlightDuplicate(e.duplicate),children:`#${e.duplicate+1}`})})}):null,e.error?(0,D.jsx)("div",{className:`error field-error target-${e.error.target}`,"data-visible":"1",children:e.error.message}):null]})]}),t&&e.relationships.map(((t,s)=>(0,D.jsx)(Te,{creditableEntityProp:e.creditableEntityProp,hasUrlError:null!=e.error,highlight:e.getRelationshipHighlightType(t,e.creditableEntityProp),isOnlyRelationship:1===e.relationships.length,link:t,onAttributesChange:e.handleAttributesChange,onLinkRemove:e.handleLinkRemove,onTypeBlur:e.onTypeBlur,onTypeChange:e.onTypeChange,onVideoChange:e.onVideoChange,typeOptions:e.typeOptions,urlMatchesType:e.urlMatchesType},s))),s.pendingTypes&&s.pendingTypes.map((e=>{const t=m.Ay.link_type[e];return(0,D.jsxs)("tr",{className:"relationship-item",children:[(0,D.jsx)("td",{}),(0,D.jsx)("td",{children:(0,D.jsxs)("div",{className:"relationship-content",children:[(0,D.jsx)("label",{children:pe((0,h.l)("Type"))}),(0,D.jsx)("label",{className:"relationship-name",children:(0,ne.Av)(t,t.l_link_phrase??"")})]})})]},e)})),t&&s.submitted&&!e.urlMatchesType?(0,D.jsxs)("tr",{className:"add-relationship",children:[(0,D.jsx)("td",{}),(0,D.jsx)("td",{}),(0,D.jsx)("td",{className:"add-item",children:(0,D.jsx)("button",{className:"add-item with-label",onClick:()=>e.onAddRelationship(e.url),type:"button",children:(0,h.l)("Add another relationship")})})]}):null]})}}const xe=(0,Q.A)(we,new Set(["link_type","link_attribute_type"])),Ae={begin_date:d.EMPTY_PARTIAL_DATE,deleted:!1,editsPending:!1,end_date:d.EMPTY_PARTIAL_DATE,ended:!1,entity0:null,entity0_credit:"",entity1:null,entity1_credit:"",pendingTypes:null,rawUrl:"",relationship:null,submitted:!1,type:null,url:"",video:!1};function Ee(e){return{...Ae,...e}}function Ie(e){const t=e.url.replace(/^https/,"http");return(e.type||"")+"\0"+t}function Ne(e){return!(e.type||e.url)}function je(e,t){let s=0,i=0;const r={};return e.forEach((function(e,n){Ne(e)&&(++s,n!==t&&(r[n]=!0,i++))})),0===s?e.concat(Ee({relationship:(0,x.NF)("new-")})):s>1&&i>0?e.filter(((e,t)=>!r[t])):e}const Se=e=>e.type.gid===d.VIDEO_ATTRIBUTE_GID;const Ce=/^(https?|ftp):$/,Re=/^(([A-z\d]|[A-z\d][A-z\d-]*[A-z\d])\.)*([A-z\d]|[A-z\d][A-z\d-]*[A-z\d])$/;function Le(e){if(!Pe(e))return e;const t=new URL(e),s=(0,i.Pk)(t.hostname);return e.replace(t.hostname,s)}function Pe(e){const t=document.createElement("a");t.href=e;const s=t.hostname,r=(0,i.Pk)(s);return!(e.indexOf(s)<0&&e.indexOf(r)<0)&&(!!Re.test(s)&&(!(s.indexOf(".")<0)&&!(!e.startsWith(t.protocol)||!Ce.test(t.protocol))))}function $e(e){const t=e?.sourceData??(0,y.F_)();(0,u.A)(t);const s=n()("#external-links-editor-container")[0];let i=n()(s).data("react-root");i||(i=c.H(s),n()(s).data("react-root",i));const r=l.createRef();return i.render((0,D.jsx)(xe,{errorObservable:e?.errorObservable,isNewEntity:!t.id,ref:r,sourceData:t})),{externalLinksEditorRef:r,root:i}}function De(e){const{externalLinksEditorRef:t}=$e();n()(document).on("submit","#page form",(function(){const s=t.current;s&&Oe(e,s)}))}function Oe(e,t){let s=document.getElementById("external-links-editor-submission");s||(s=document.createElement("div"),s.setAttribute("id","external-links-editor-submission"),document.querySelector("#page form")?.appendChild(s)),(0,A.cC)("external-links-editor-submission",(function(s){t.getFormData(e+".url",0,s);const i=t.state.links;i.length&&t.submittedLinksWrapper.set(i)}))}},"1wN/8o/":(e,t,s)=>{"use strict";s.d(t,{AH:()=>g,Ay:()=>p,Dm:()=>f,Qt:()=>m,c1:()=>d});s("6g1DHTE"),s("DNaZxvn");var i=s("LCA85s6"),r=s("HMcOWk2"),n=s("UjtI3Zv"),a=s("52XjgTZ"),o=s("9oisN5V"),l=s("cGbttel"),c=s("HkNzj3j").l,u=s("SKGBikk").l;function d(e,t,s){const i=a.Ay.link_attribute_type[e.typeID];let r=t(i);if(i.free_text){const t=(0,o.A)(e.text_value);t&&(r=s("{attribute}: {value}",{attribute:r,value:t}))}if(i.creditable){const t=(0,o.A)(e.credited_as);t&&(r=s("{attribute} [{credited_as}]",{attribute:r,credited_as:t}))}return r}function h(e){const t=(0,n.A)(e);return e.root_id===i.INSTRUMENT_ROOT_ID?(0,l.jsx)("a",{href:"/instrument/"+e.gid,children:t},e.id):t}function p(e){return d(e,h,c)}function m(e){return d(e,n.A,u)}function g(e){return(0,r.A)(e.map(p))}function f(e){return(0,r.T)(e.map(m))}},"2Wx6B6n":(e,t,s)=>{"use strict";function i(e,t,s){let i=e.get(t);return void 0!==i||(i=s(),e.set(t,i)),i}s.d(t,{A:()=>i})},"2ath9Yi":(e,t,s)=>{"use strict";s.d(t,{A:()=>f,c:()=>b});s("6g1DHTE"),s("DNaZxvn"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("smZuR9W"),r=s("52XjgTZ"),n=s("xrv16+S"),a=s("WkqHeFz"),o=(s("60ocjtt"),s("NKd1yOY"),s("MVH16Az")),l=s("UjtI3Zv"),c=s("2k2mX3K").RL;function u(e){const t=(0,n.$z)(e,(e=>String(e.parent_id))),s={};r.Ay.link_type=e.reduce(((e,i)=>(function(e,i){i.id&&(e[i.id]=i),i.gid&&(e[i.gid]=i);const r=t.get(String(i.id));if(r&&(i.children=r),i.l_name=c(i.name),i.link_phrase&&(i.l_link_phrase=c(i.link_phrase)),i.reverse_link_phrase&&(i.l_reverse_link_phrase=c(i.reverse_link_phrase)),i.description&&(i.l_description=c(i.description)),null==i.parent_id){const e=i.type0+"-"+i.type1;(s[e]||=[]).push(i)}}(e,i),e)),{}),r.Ay.link_type_tree=s}function d(e){const t=(0,n.$z)(e,(e=>String(e.parent_id)));r.Ay.link_attribute_type=e.reduce(((e,s)=>(function(e,s){s.id&&(e[s.id]=s),s.gid&&(e[s.gid]=s);const i=t.get(String(s.id));i&&(s.children=i),s.l_name=(0,l.A)(s),s.l_description=(0,o.A)(s)}(e,s),e)),{})}var h=s("cGbttel"),p=s("oEgauXb").l;const m=new Map,g=new Set;function f(e,t){return i.forwardRef(((s,o)=>{const[l,c]=i.useState(!0),[f,b]=i.useState([]),y=i.useRef(!1),w=i.useCallback((async function(e){const t="/ws/js/type-info/"+e,s=await fetch(t);if(!s.ok)throw new Error("Got a "+String(s.status)+" fetching "+t);const i=(await s.json())[e+"_list"];if("language"!==e)if("link_attribute_type"!==e)if("link_type"!==e)if("series_type"!==e){if("work_type"!==e)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e);r.Ay.work_type=Object.fromEntries((0,n.pY)(i,(e=>e.id)))}else r.Ay.series_type=Object.fromEntries((0,n.pY)(i,(e=>e.id)));else u(i);else d(i);else r.Ay.language=Object.fromEntries((0,n.pY)(i,(e=>e.id)));g.add(e)}),[]),v=i.useCallback((async function(){for(const e of t){if(y.current)break;if(g.has(e))continue;let t=m.get(e);null==t?(t=w(e),m.set(e,t),await t,m.delete(e)):(await t,await(0,a.A)(500))}c(!1)}),[w]);return i.useEffect((()=>(y.current=!1,v().catch((e=>{b([...f,e.message])})),()=>{y.current=!0})),[v,f]),l?f.length?(0,h.jsx)("ul",{className:"errors",children:f.map(((e,t)=>(0,h.jsx)("li",{children:e},t)))}):(0,h.jsx)("p",{className:"loading-message",children:p("Loading...")}):(0,h.jsx)(e,{...s,ref:o})}))}function b(e){return f(e,new Set(["link_attribute_type","link_type","series_type",...arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]))}},"2k2mX3K":(e,t,s)=>{"use strict";s.d(t,{RL:()=>r});var i=s("GX9EKLY");const r=i.Yi("relationships");i._J("relationships"),i.A3("relationships")},"4SA/wF2":(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("9azanlh"),r=s("RhiE1fL");function n(e){return e._original?(0,r.A)(e._original,e)?i.wL:i.Ar:i.jU}},"52XjgTZ":(e,t,s)=>{"use strict";s.d(t,{Ay:()=>n,TZ:()=>a});s("PkUg7wA");function i(e){for(const t in e)return!1;return!0}const r={area:{},area_alias_type:{},area_type:{},artist:{},artist_alias_type:{},artist_type:{},collection_type:{},edit:{},editor:{},event:{},event_alias_type:{},event_type:{},genre:{},genre_alias_type:{},instrument:{},instrument_alias_type:{},instrument_type:{},label:{},label_alias_type:{},label_type:{},language:{},link_attribute_type:{},link_type:{},link_type_tree:{},place:{},place_alias_type:{},place_type:{},recording:{},recording_alias_type:{},release:{},release_alias_type:{},release_group:{},release_group_alias_type:{},release_group_primary_type:{},release_group_secondary_type:{},release_packaging:{},release_status:{},script:{},series:{},series_alias_type:{},series_ordering_type:{},series_type:{},url:{},work:{},work_alias_type:{},work_attribute_type:{},work_type:{}};Object.seal(r);const n=r;function a(e){if(e)for(const[t,s]of Object.entries(e)){if(!Object.hasOwn(r,t))throw new Error(JSON.stringify(t)+" is not a valid type assignable to linkedEntities");null!=s&&(i(r[t])?r[t]=s:Object.assign(r[t],s))}}const o=Object.keys(r);!function(e){for(const e of o)i(r[e])||(r[e]={});e&&a(e)}({artist:void 0})},"6Rf1oks":(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("jhqsV7L");function r(e,t){return 0===(0,i.A)(e,t)}},"6lYEAin":(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("cGbttel");const r=function(e){let{dataIndex:t,onClick:s,title:r}=e;return(0,i.jsx)("button",{className:"nobutton icon remove-item","data-index":t,onClick:s,title:r,type:"button"})}},"6xVzkbe":(e,t,s)=>{"use strict";s.d(t,{A:()=>l,S:()=>o});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n");var i=s("gtppAbj"),r=s("NwGYEf3"),n=s("cGbttel"),a=s("oEgauXb").l;function o(e,t){{const s=t;if(("object"!=typeof s||null===s)&&"function"!=typeof s||"show-pending-errors"!==s.type){if(("object"!=typeof s||null===s)&&"function"!=typeof s||"set-date"!==s.type||!("date"in s))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s);{const t=s.date,r=t.year,n=t.month,o=t.day;null!=r&&e.set("field","year","value",r),null!=n&&e.set("field","month","value",n),null!=o&&e.set("field","day","value",o),function(e){const t=e.read(),s=String(t.field.year.value??""),r=String(t.field.month.value??""),n=String(t.field.day.value??""),o=[];(0,i.y1)(s)?(0,i.Pz)({day:n,month:r,year:s})||o.push(a("The date you've entered is not valid")):o.push(a("The year should have four digits. If you want to enter a year\n         earlier than 1000 CE, please pad with zeros, such as “0123”.")),e.set("errors",t.errors.filter((e=>o.includes(e)))).set("pendingErrors",o)}(e)}}else(0,r.Xz)(e)}}const l=function(e){let{disabled:t=!1,field:s,yearInputRef:i,...r}=e;const o={},l={},c={};if(r.uncontrolled)o.defaultValue=s.field.year.value,l.defaultValue=s.field.month.value,c.defaultValue=s.field.day.value;else{const e=(e,t)=>{r.dispatch({date:{[t]:e.currentTarget.value},type:"set-date"})},t=()=>{r.dispatch({type:"show-pending-errors"})};o.onBlur=t,l.onBlur=t,c.onBlur=t,o.onChange=t=>e(t,"year"),l.onChange=t=>e(t,"month"),c.onChange=t=>e(t,"day"),o.value=s.field.year.value??"",l.value=s.field.month.value??"",c.value=s.field.day.value??""}return(0,n.jsxs)("span",{className:"partial-date",children:[(0,n.jsx)("input",{className:"partial-date-year",disabled:t,id:"id-"+s.field.year.html_name,maxLength:4,name:s.field.year.html_name,placeholder:a("YYYY"),ref:i,size:4,type:"text",...o}),"-",(0,n.jsx)("input",{className:"partial-date-month",disabled:t,id:"id-"+s.field.month.html_name,maxLength:2,name:s.field.month.html_name,placeholder:a("MM"),size:2,type:"text",...l}),"-",(0,n.jsx)("input",{className:"partial-date-day",disabled:t,id:"id-"+s.field.day.html_name,maxLength:2,name:s.field.day.html_name,placeholder:a("DD"),size:2,type:"text",...c})]})}},"73Tm4xF":(e,t,s)=>{"use strict";s.d(t,{A:()=>d});const i=s.p+"editor-b055e61.svg";var r=s("p1f4iM1"),n=s("g0LW/UV"),a=s("cGbttel"),o=s("oEgauXb").l,l=s("8YlDuzw").I,c=s("8YlDuzw").A;function u(){return(0,a.jsx)("span",{className:"deleted tooltip",title:o("This editor is missing from this server,\n         and cannot be displayed correctly."),children:(0,n.A)(o("[missing editor]"))})}const d=function(e){let{avatarSize:t=15,content:s,editor:o,subPath:d}=e;if(!o)return(0,a.jsx)(u,{});let h=s;l(h)&&(h=o.name);const p=c(o.avatar);return(0,a.jsxs)("a",{href:(0,r.A)(o,d),children:[(0,a.jsx)("img",{alt:"",className:"avatar"+(p?"":" no-avatar"),height:t,src:p?o.avatar:i,width:t}),(0,n.A)(h)]})}},"75GVkWN":(e,t,s)=>{"use strict";s.d(t,{Ay:()=>g,PL:()=>d,SJ:()=>u,TG:()=>c,WJ:()=>h,i:()=>l,pJ:()=>f});s("60ocjtt");var i=s("Yk1IOim"),r=s.n(i),n=s("xjYVw2C"),a=s.n(n),o=s("Ui1Lssl").A;const l=1,c=2,u=3,d=4,h={[d]:"",[u]:"diff-only-a",[c]:"",[l]:"diff-only-b"},p=new Map([[r().INSERT,l],[r().EQUAL,c],[r().DELETE,u]]);function m(e){return e.added||e.removed?e.added?l:u:c}function g(e,t,s){const i=a()(e,t,s),r=[];for(let e=0;e<i.length;e++){const t=i[e],s=m(t);let n;e+1<i.length&&(n=i[e+1]);let a=[],o=[],h=s;if(s!==l)if(s!==c){if(s!==u)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s);a=t.items,n&&m(n)===l&&(e++,h=d,o=n.items)}else a=t.items,o=t.items;else o=t.items;r.push({newItems:o,oldItems:a,type:h})}return r}function f(e,t){const s=r()(e,t),i=[];for(let e=0;e<s.length;e++){const t=s[e],r=p.get(t[0]);let n;o(null!=r,"fast-diff change type is null or undefined"),e+1<s.length&&(n=s[e+1]);let a="",h="",m=r;if(r!==l)if(r!==c){if(r!==u)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+r);if(h=t[1],n){p.get(n[0])===l&&(e++,m=d,a=n[1])}}else a=t[1],h=t[1];else a=t[1];i.push({oldText:h,newText:a,type:m})}return i}},"77QWaWf":(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s("EVdnBjI"),r=s.n(i),n=s("Z+0BPKL");function a(e){(0,n.Ay)("#type-bubble",e),r()(e).on("change",(function(){this.value.match(/\S/g)?(r()("#type-bubble-default").hide(),r()(".type-bubble-description").hide(),r()(`#type-bubble-description-${this.value}`).show()):(r()(".type-bubble-description").hide(),r()("#type-bubble-default").show())}))}},"79P3cHQ":(e,t,s)=>{"use strict";function i(e){return/^\s*$/.test(e||"")}s.d(t,{A:()=>i})},"7bj4Noj":(e,t,s)=>{"use strict";s.d(t,{CM:()=>r,CR:()=>a,MF:()=>u,Yw:()=>c,_8:()=>n,h4:()=>h,hI:()=>d,j6:()=>o,z7:()=>l});const i=window.__MB__.DBDefs,r=i.DB_STAGING_TESTING_FEATURES,n=(i.DEVELOPMENT_SERVER,i.DISABLE_IMAGE_EDITING,i.CRITIQUEBRAINZ_SERVER,i.GIT_BRANCH),a=i.GIT_SHA,o=i.MAPBOX_ACCESS_TOKEN,l=i.MAPBOX_MAP_ID,c=i.MTCAPTCHA_PUBLIC_KEY,u=(i.MTCAPTCHA_PRIVATE_TEST_KEY,i.SENTRY_DSN_PUBLIC),d=i.STATIC_RESOURCES_LOCATION,h=i.WEB_SERVER;i.WIKITRANS_SERVER,i.MB_LANGUAGES},"8YlDuzw":(e,t,s)=>{"use strict";function i(e){return null==e||""===e}function r(e){return null!=e&&""!==e}s.d(t,{A:()=>r,I:()=>i})},"8alVwqN":(e,t,s)=>{"use strict";s.d(t,{P:()=>u,A:()=>d});s("60ocjtt");const i=s.p+"information-57f9d9c.png";var r=s("UIUB93B"),n=s("g0LW/UV"),a=s("B21npvo"),o=s("cGbttel"),l=s("HkNzj3j").l,c=s("oEgauXb").l;const u=(0,s("KBzdQ9I").A)("span.ac-mp",(function(e){let{artistCredit:t}=e,s="/search/edits?auto_edit_filter=&order=desc&negation=0&combinator=and&conditions.0.field=type&conditions.0.operator=%3D&conditions.0.args=9&conditions.1.field=status&conditions.1.operator=%3D&conditions.1.args=1",n=2;for(const e of t.names)s+=`&conditions.${n}.field=artist&conditions.${n}.operator=%3D&conditions.${n}.name=${encodeURIComponent(e.artist.name)}&conditions.${n}.args.0=${e.artist.id}`,n++;return(0,o.jsx)(r.A,{content:l("This artist credit has {edit_search|open edits}.",{edit_search:s}),target:(0,o.jsx)("img",{alt:c("This artist credit has open edits."),className:"info",src:i})})}));const d=function(e){let{artistCredit:t,showDeleted:s=!0,showDisambiguation:i=!1,showEditsPending:r=!0,showIcon:l=!1,target:c}=e;const d=t.names,h=[];for(let e=0;e<d.length;e++){const n=d[e],u=n.artist;u?h.push((0,o.jsx)(a.A,{content:n.name,entity:u,shouldIsolate:!1,showDeleted:s,showDisambiguation:i,showEditsPending:r&&!t.editsPending,showIcon:l,target:c},`${u.id}-${e}`)):h.push((0,o.jsx)(a.u,{allowNew:!1,name:n.name,shouldIsolate:!1},`deleted-${e}`)),h.push(n.joinPhrase)}return r&&t.editsPending?(0,o.jsxs)("span",{className:"mp",children:[h,(0,o.jsx)(u,{artistCredit:t})]}):(0,n.A)(h)}},"93z9/8f":(e,t,s)=>{"use strict";function i(e,t){return e<t?-1:e>t?1:0}function r(e,t){return e-t}s.d(t,{K:()=>i,S:()=>r})},"9aqWJYz":(e,t,s)=>{"use strict";s.d(t,{GR:()=>o,dg:()=>a,qb:()=>r,Ld:()=>l,fH:()=>n});s("60ocjtt");function i(e){const t=[];for(const s of Object.keys(e)){const e=JSON.stringify(s);t.push(e+":o["+e+"]")}return new Function("o","return {"+t.join(",")+"}")}const r=i({dialogLocation:null,entity:null,existingRelationshipsBySource:null,reducerError:null,relationshipsBySource:null}),n=i({dialogLocation:null,editNoteField:null,enterEditForm:null,entity:null,existingRelationshipsBySource:null,expandedMediums:null,loadedTracks:null,mediums:null,mediumsByRecordingId:null,reducerError:null,relationshipsBySource:null,selectedRecordings:null,selectedWorks:null,submissionError:null,submissionInProgress:null}),a=i({backward:null,phraseGroups:null,typeId:null}),o=i({relationships:null,textPhrase:null}),l=i({_lineage:null,_original:null,_status:null,attributes:null,begin_date:null,editsPending:null,end_date:null,ended:null,entity0:null,entity0_credit:null,entity1:null,entity1_credit:null,id:null,linkOrder:null,linkTypeID:null})},"9azanlh":(e,t,s)=>{"use strict";s.d(t,{Ar:()=>o,QJ:()=>l,jU:()=>a,v9:()=>u,wL:()=>n});var i=s("smZuR9W"),r=s("CJBfytL");const n=0,a=1,o=2,l=3,c=Object.freeze({day:"",error:"",month:"",pendingError:"",year:""}),u=(Object.freeze({beginDate:c,endDate:c,ended:!1,error:"",pendingError:""}),(0,i.createContext)({existing:r.A,pending:r.A}))},"9oisN5V":(e,t,s)=>{"use strict";function i(e){return String(e||"").trim().replace(/\s+/g," ")}s.d(t,{A:()=>i})},A6s5oQD:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("osVXT12");function r(e,t){return e.linkTypeID===t.linkTypeID&&e.entity0.id===t.entity0.id&&e.entity1.id===t.entity1.id&&(0,i.ER)(e.attributes,t.attributes)}},"A9mh/A7":(e,t,s)=>{"use strict";s.d(t,{e:()=>g,A:()=>f});var i=s("smZuR9W"),r=s("37TQ/RL"),n=s("Ui1Lssl"),a=s("ICHIme/"),o=s("gklH9/w"),l=s("lIm5/JO"),c=s("cGbttel"),u=s("8YlDuzw").A;const d=function(e){let{children:t,className:s,id:r,onEscape:d,title:h}=e;const p=(0,a.fI)(),m=i.useCallback(((e,t)=>{e||d(t)}),[d]),{refs:g,context:f}=(0,a.we)({nodeId:p,onOpenChange:m,open:!0,strategy:"fixed"}),b=(0,a.s9)(f,{bubbles:!1,escapeKey:!0,outsidePress:!1}),{getFloatingProps:y}=(0,a.bv)([b]),w=i.useCallback((e=>{e.stopPropagation(),g.floating.current?.focus()}),[g.floating]),v=i.useRef(null);return i.useEffect((()=>{const e=g.floating.current;if(!e)return;let t=(0,n.E)(e.querySelector(".dialog-content"),".dialog-content node");v.current=(0,o.H)(t,!0)})),(0,c.jsx)(a.$c,{id:p,children:(0,c.jsx)(a.XF,{id:r,children:(0,c.jsx)(a.zR,{className:"modal-backdrop",lockScroll:!0,onClick:w,children:(0,c.jsx)(a.s3,{context:f,initialFocus:v,modal:!0,children:(0,c.jsxs)("div",{...y(),className:"dialog modal"+(u(s)?" "+s:""),id:r,ref:g.setFloating,role:"dialog",tabIndex:-1,children:[(0,c.jsxs)("div",{className:"title-bar",children:[(0,c.jsx)("h1",{children:h}),(0,c.jsx)("button",{className:"close-dialog icon",onClick:e=>d(e.nativeEvent),type:"button"})]}),(0,c.jsx)("div",{className:"dialog-content",children:(0,c.jsx)(l.A,{children:t})})]})})})})})};var h=s("oEgauXb").g,p=s("8YlDuzw").A,m=s("oEgauXb").l;const g={area:h("Add a new area"),artist:h("Add a new artist"),event:h("Add a new event"),instrument:h("Add a new instrument"),label:h("Add a new label"),place:h("Add a new place"),recording:h("Add a new recording"),release_group:h("Add a new release group"),series:h("Add a new series"),work:h("Add a new work")};const f=function(e){let{callback:t,close:s,entityType:a,name:l}=e;const u=i.useRef(null),h=i.useRef(null),[f,b]=i.useState(!0);i.useEffect((()=>{h.current={close:s}}),[s,h]);let y="/"+a+"/create";if(p(l)){y+="?"+("edit-"+a.replace("_","-")+".name")+"="+encodeURIComponent(l)}return(0,c.jsxs)(d,{className:"iframe-dialog",id:"add-"+a+"-dialog",onEscape:s,title:f?m("Loading..."):g[a](),children:[!!f&&(0,c.jsx)("div",{className:"content-loading"}),(0,c.jsx)("iframe",{onLoad:e=>{const s=e.currentTarget.contentWindow;if(s.dialogResult)return void t(s.dialogResult);s.containingDialog=h,(0,r.flushSync)((()=>{b(!1)}));const i=(0,n.E)(u.current?.contentDocument.body,"iframe document body");(0,o.H)(i,!0)?.focus()},ref:u,src:"/dialog?path="+encodeURIComponent(y)})]})}},"ADQEI/t":(e,t,s)=>{"use strict";s.d(t,{ve:()=>r});var i=s("GX9EKLY");const r=i.Yi("languages");i._J("languages"),i.A3("languages")},"Af/Fa+9":(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("EVdnBjI"),r=s.n(i);const n=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];setTimeout((function(){r()(...t).focus()}),1)}},AtPhk6x:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});s("6g1DHTE"),s("DNaZxvn");var i=s("smZuR9W"),r=s("xNKEMJr"),n=s("cGbttel"),a=s("SKGBikk").l,o=s("oEgauXb").l;const l=function(e){let{ariaLabel:t,buildRow:s,buildRowProps:l,className:c,ContainerElement:u="ul",InnerElement:d="li",rows:h,showAllTitle:p,showLessTitle:m,toShowAfter:g,toShowBefore:f}=e;const[b,y]=i.useState(!1),w={"aria-label":t,className:c},v=f+g+2,_=!!h&&h.length>=v;return h&&h.length?_&&!b?(0,n.jsxs)(u,{...w,children:[f>0?h.slice(0,f).map((e=>s(e,l))):null,(0,n.jsx)(d,{className:"show-all",children:(0,n.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),y(!0)},role:"button",title:p,children:(0,r.x)(a("show {n} more",{n:h.length-(f+g)}))})},"show-all"),g>0?h.slice(-g).map((e=>s(e,l))):null]}):(0,n.jsxs)(u,{...w,children:[h.map((e=>s(e,l))),_&&b?(0,n.jsx)(d,{className:"show-less",children:(0,n.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),y(!1)},role:"button",title:m,children:(0,r.x)(o("show less"))})},"show-less"):null]}):null}},B21npvo:(e,t,s)=>{"use strict";s.d(t,{u:()=>N,A:()=>$});s("60ocjtt"),s("TWjsZtY");var i=s("AsUdLGK"),r=s("84yo5bY"),n=s.n(r),a=s("smZuR9W"),o=s("rAs4fSN"),l=s("LCA85s6"),c=s("TZv5lnH"),u=s("CIf4Yly").ci;const d=function(e){return e.iso_3166_1_codes.length?u(e.name):e.name};var h=s("wQarZSJ").mo,p=s("wQarZSJ").iD;const m=function(e){return e.comment?h(e.name,e.comment):p(e.name)};var g=s("xNKEMJr"),f=s("p1f4iM1"),b=s("yUJAgX5"),y=s("g0LW/UV"),w=s("cGbttel"),v=s("8YlDuzw").A,_=s("oEgauXb").l,T=s("oEgauXb").lp,k=s("SKGBikk").l,x=s("oEgauXb").g,A=s("8YlDuzw").I,E=s("2k2mX3K").RL;function I(e,t){return e?(0,y.A)(t):t}function N(e){let{allowNew:t,className:s,deletedCaption:i,name:r,shouldIsolate:n=!0}=e;const a=v(i)?i:_(t?"This entity will be added by this edit.":"This entity has been removed, and cannot be displayed correctly.");return(0,w.jsx)("span",{className:(v(s)?s+" ":"")+(t?"":"deleted ")+"tooltip",title:a,children:I(n,v(r)?r:T("[removed]","generic entity"))})}const j={area:"arealink",artist:"artistlink",collection:"collectionlink",editor:null,event:"eventlink",genre:"genrelink",instrument:"instrumentlink",label:"labellink",link_type:null,place:"placelink",recording:"recordinglink",release:"releaselink",release_group:"rglink",series:"serieslink",track:null,url:null,work:"worklink"};function S(e){let{alias:t,className:s,comment:i}=e;const r=v(t)?(0,w.jsx)("i",{title:_("Primary alias"),children:t},"primary-alias"):null;return(0,w.jsxs)(w.Fragment,{children:[" ",(0,w.jsx)("span",{className:s,children:(0,g.A)((0,w.jsx)("bdi",{children:v(r)?v(i)?(0,c.A)([r,i]):r:i},"comment"))})]})}function C(e){let{event:t,showDate:s}=e;const i=(0,b.A)(t);return i&&s||t.cancelled?(0,w.jsxs)(w.Fragment,{children:[i&&s?" "+(0,g.x)(i):null,t.cancelled?(0,w.jsx)(S,{className:"cancelled",comment:T("cancelled","event")}):null]}):null}function R(e){let t,{area:s}=e;if(!s.ended)return null;const i=s.begin_date?s.begin_date.year:null,r=s.end_date?s.end_date.year:null;return t=null!=i&&null!=r?k("historical, {begin}-{end}",{begin:i,end:r}):null==r?_("historical"):k("historical, until {end}",{end:r}),(0,w.jsx)(S,{className:"historical",comment:t})}const L=x("This link has been temporarily disabled because\n                              it has been reported as potentially harmful.");function P(e){let{allowNew:t,url:s}=e;return(0,w.jsxs)(w.Fragment,{children:[(0,o.A)(s)?(0,w.jsx)("span",{className:"deleted",title:L(),children:(0,y.A)(s)}):(0,w.jsx)("a",{className:"wrap-anywhere",href:s,children:s})," ",(0,w.jsx)(N,{allowNew:t,name:(0,g.x)(_("info"),{type:"[]"})})]})}const $=function(e){let{allowNew:t=!1,content:s,deletedCaption:r,disableLink:c=!1,entity:u,nameVariation:h,showArtworkPresence:p=!1,showCreditedAs:b=!1,showDeleted:y=!0,showDisambiguation:T,showEditsPending:x=!0,showEventDate:$=!0,showIcon:D=!1,subPath:O,shouldIsolate:z=!0,...Y}=e;const U=v(s),W=u.editsPending||!1,H=v(O),M=v(u.comment)?n().unwrap(u.comment):"",B=n().unwrap(u.name),F="area"===u.entityType&&u.typeID===l.AREA_TYPE_COUNTRY;let G=s,X="",K=h,V=T,q=D;const Z={...Y};if(void 0===K&&v(G)&&"string"!=typeof G){const e="Content of type "+typeof G+" cannot be compared as a string to entity name for name variation.";0,i.Cp(new Error(e))}let J=null;b&&"string"==typeof G&&v(G)&&(J=G,G=void 0),A(G)&&(G=(e=>{if(("object"==typeof e&&null!==e||"function"==typeof e)&&"area"===e.entityType){return d(e)}if(("object"==typeof e&&null!==e||"function"==typeof e)&&"instrument"===e.entityType){return m(e)}return("object"==typeof e&&null!==e||"function"==typeof e)&&"link_type"===e.entityType?E(B):B})(u));const Q=!F&&"instrument"!==u.entityType&&"track"!==u.entityType&&v(u.primaryAlias)&&u.primaryAlias!==G?u.primaryAlias:"";if(void 0===V&&(V=!U),"hover"===V||"artist"===u.entityType){const e="artist"===u.entityType?u.sort_name:"",t=v(Q)?Q:e;X=v(t)?v(M)?t+" "+(0,g.x)(M):t:M}if(!n().unwrap(u.gid))return"url"===u.entityType?(0,w.jsx)(P,{allowNew:t,url:u.href_url}):y?(0,w.jsx)(N,{allowNew:t,deletedCaption:r,name:G}):null;let ee,te=(0,f.A)(u,O);if("url"!==u.entityType||U||(G=u.pretty_name,ee=te,te=u.href_url),H||"url"===u.entityType||(void 0===K&&"string"==typeof G&&(K=G!==B),!0===K&&(X=v(X)?k("{name} – {additional_info}",{additional_info:X,name:B}):B)),Z.href=te,v(X)&&(Z.title=X),"url"===u.entityType&&(Z.className="wrap-anywhere"),G=c?(0,w.jsx)("span",{className:"deleted",title:"url"===u.entityType&&(0,o.A)(te)?L():null,children:I(z,G)},"deleted"):(0,w.jsx)("a",{...Z,children:I(z,G)},"link"),!0===K&&(G=(0,w.jsx)("span",{className:"name-variation",children:G},"namevar")),x&&!H&&W&&(G=(0,w.jsx)("span",{className:"mp",children:G},"mp")),!H&&"area"===u.entityType){const e=u.iso_3166_1_codes;e&&e.length&&(G=(0,w.jsx)("span",{className:"flag flag-"+e[0],children:G},"flag"),q=!1)}!H&&"recording"===u.entityType&&u.video&&(G=(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)("span",{className:"video",title:_("This recording is a video")}),G]},"video")),p&&("event"===u.entityType&&(G="present"===u.event_art_presence?(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)("a",{href:"/event/"+u.gid+"/event-art",children:(0,w.jsx)("span",{className:"artwork-icon eaa-icon",title:_("This event has artwork in the Event Art Archive")})}),G]},"eaa"):(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)("span",{className:"blank-icon"}),G]},"caa")),"release"===u.entityType&&(G="present"===u.cover_art_presence?(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)("a",{href:"/release/"+u.gid+"/cover-art",children:(0,w.jsx)("span",{className:"artwork-icon caa-icon",title:_("This release has artwork in the Cover Art Archive")})}),G]},"caa"):(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)("span",{className:"blank-icon"}),G]},"caa")),"release_group"===u.entityType&&(G=u.hasCoverArt?(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)("span",{className:"artwork-icon caa-icon",title:_("This release group has artwork in the Cover Art Archive")}),G]},"caa"):(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)("span",{className:"blank-icon"}),G]},"caa"))),H||"release"!==u.entityType||(2===u.quality?G=(0,w.jsxs)(a.Fragment,{children:[G,(0,w.jsx)("span",{className:"high-data-quality",title:_("High quality: All available data has been added, if possible\n               including cover art with liner info that proves it")})]},"quality"):0===u.quality&&(G=(0,w.jsxs)(a.Fragment,{children:[G,(0,w.jsx)("span",{className:"low-data-quality",title:_("Low quality: The release needs serious fixes, or its existence\n               is hard to prove (but it’s not clearly fake)")})]},"quality")));const se=[G];return q&&se.unshift((0,w.jsx)("span",{className:j[u.entityType]},"icon")),v(J)&&se.push(" ",(0,g.A)((0,w.jsx)("span",{children:k("as “{credit}”",{credit:J})}))),!V&&A(ee)||(!0===V&&("event"===u.entityType&&se.push((0,w.jsx)(C,{event:u,showDate:$},"eventdisambig")),(v(M)||v(Q))&&se.push((0,w.jsx)(S,{alias:Q,className:"comment",comment:M},"comment")),"area"===u.entityType&&se.push((0,w.jsx)(R,{area:u},"areadisambig"))),v(ee)&&se.push(" ",(0,g.A)((0,w.jsx)("a",{href:ee,children:_("info")},"info"),{type:"[]"}))),se}},Bb4NJH1:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("iVi/iOV"),r=s("hPBADqi");const n=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date(Date.now()+31536e6);"undefined"==typeof document||"file:"===window.location.protocol?r.A[e]=t.toString():document.cookie=i.serialize(e,t.toString(),{expires:s,path:"/"})}},CIBMtSG:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s("EVdnBjI"),r=s.n(i),n=(new Date).getTime(),a=null;function o(e,t,s){s.jqXHR=r().ajax({dataType:"json",...e}).done((function(){if(!s.aborted){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];s.resolveWith(t,i)}})).fail((function(){if(!s.aborted){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];s.rejectWith(t,i)}})),s.jqXHR.sentData=e.data}const l=function(e,t){var s,i=r().Deferred(),l=(new Date).getTime();n-l<=0?(o(e,t,i),n=l+1e3):(s=function(){i.aborted||i.complete?i.next&&i.next():o(e,t,i),i.complete=!0},a&&(a.next=s),a=i,setTimeout(s,n-l),n+=1e3);var c=i.promise();return c.abort=function(){i.jqXHR?i.jqXHR.abort():i.aborted=!0},c}},CIf4Yly:(e,t,s)=>{"use strict";s.d(t,{ci:()=>r});var i=s("GX9EKLY");const r=i.Yi("countries");i._J("countries"),i.A3("countries")},E98cO72:(e,t,s)=>{"use strict";s.d(t,{Kw:()=>ce,Ay:()=>ue,hV:()=>re,n9:()=>ae,to:()=>ne,Ff:()=>oe,SH:()=>le});s("60ocjtt"),s("6g1DHTE"),s("DNaZxvn");var i=s("AsUdLGK"),r=(s("mz7fKDE"),s("smZuR9W")),n=s("pt6c6lh"),a=s("/6M3xbR"),o=s("CJBfytL"),l=s("6Jrjhm9"),c=s("uDzn5/g"),u=s("YwtI3iV"),d=s("LCA85s6"),h=s("VHUgtNR"),p=s("cbdMZik"),m=s("tpyBDsx"),g=s("e3+xVn3"),f=s("dMORH1x"),b=s("HfEq/qN"),y=s("KzhY9EY"),w=s("nyvE9PA"),v=s("9azanlh"),_=s("9aqWJYz"),T=s("osVXT12"),k=s("VVNXxwy"),x=s("4SA/wF2"),A=s("SmhBGrr"),E=s("ldVMy18"),I=s("JCI6GvU");var N=s("YDxZ9xi"),j=s("Vg37ZR/"),S=s("gtppAbj");function C(e,t){const s=e?.year,i=t?.year,r=e?.month,n=t?.month,a=e?.day,o=t?.day;if(null!=s&&null!=i&&s!==i||null!=r&&null!=n&&r!==n||null!=a&&null!=o&&a!==o)return null;const l={day:a??o??null,month:r??n??null,year:s??i??null};return(0,S.Pz)(l)?l:null}var R=s("A6s5oQD"),L=s("hpDWElX"),P=s("8YlDuzw").A;function $(e,t){if(e.id===t.id||e.linkOrder!==t.linkOrder||!(0,R.A)(e,t))return null;if(e.entity0_credit===t.entity0_credit&&e.entity1_credit===t.entity1_credit&&(0,N.A)(e,t))return t;const s=C(e.begin_date,t.begin_date),i=C(e.end_date,t.end_date);if(!s||!i||!(0,S.uJ)(s,i))return null;const r=(0,j.A)(e.begin_date)&&(0,j.A)(e.end_date)&&!e.ended||(0,j.A)(t.begin_date)&&(0,j.A)(t.end_date)&&!t.ended,n=e.ended===t.ended;if(!r&&!n)return null;const a=(0,_.Ld)(t);return a._lineage=[...a._lineage,"merged with id="+String(e.id)],a.begin_date=s,a.end_date=i,a.ended=!(0,j.A)(i)||(e.ended||t.ended),P(e.entity0_credit)&&(a.entity0_credit=e.entity0_credit),P(e.entity1_credit)&&(a.entity1_credit=e.entity1_credit),a._status=(0,x.A)(a),a}var D=s("4vlrZLo"),O=s("P3Mz6ey"),z=s("d/wSL5Q"),Y=s("Ui1Lssl").A;function U(e,t,s,i){const r=(0,k.PK)(e.relationshipsBySource,s),n=(0,k._u)(r,t,s);Y(n&&(0,z.H)(t.linkTypeID,s,(0,I.A)(t,s)));const a=n.relationships,o=(i?D.A:O.A)(a,t,(0,T._V)((0,I.A)(t,s))),l=Math.max(0,t.linkOrder+(i?1:-1)),c=[],d=(e,t)=>{const s=(0,_.Ld)(e);return s._lineage=[...s._lineage,"reordered"],s.linkOrder=t,s._status=(0,x.A)(s),s};o&&o.linkOrder===l?c.push({relationship:t,throwIfNotExists:!0,type:L.S},{relationship:o,throwIfNotExists:!0,type:L.S},{onConflict:u.ET,relationship:d(t,o.linkOrder),type:L.Lm},{onConflict:u.ET,relationship:d(o,t.linkOrder),type:L.Lm}):c.push({relationship:t,throwIfNotExists:!0,type:L.S},{onConflict:u.ET,relationship:d(t,l),type:L.Lm}),(0,L.Ay)(e,c)}var W=s("VNyMmCx"),H=s("RhiE1fL"),M=(s("70YSc4n"),s("1nSlf59")),B=s("yBlPIGB"),F=s("jKEtJbC"),G=s("pu3FCox"),X=s("Bgvmr3X"),K=s("Ui1Lssl"),V=s("52XjgTZ"),q=s("Ui1Lssl").A;const Z=e=>{const t=V.Ay.link_attribute_type[e.typeID].root_id;return e.typeID===d.TASK_ATTRIBUTE_ID||t===d.INSTRUMENT_ROOT_ID||t===d.VOCAL_ROOT_ID};function*J(e,t,s,i,r){const n=(0,k.PK)(e,i);if(!n.size)return;const a=(0,I.A)(t,i),c=a?t.entity0.entityType:t.entity1.entityType,d=()=>{const e=B.A(n,c,k.kr);return e?e[1]:o.A};function*h(e,s){if(s.id===t.id)return;const i=e.backward?"entity1_credit":"entity0_credit";if(s[i]!==r){const e=(0,_.Ld)(s);e._lineage=[...e._lineage,"updated entity credit"],e[i]=r,e._status=(0,x.A)(e),yield{relationship:s,throwIfNotExists:!0,type:L.S},yield{onConflict:u.XU,relationship:e,type:L.Lm}}}function*p(e){for(const t of l.A(e.phraseGroups))for(const s of l.A(t.relationships))yield*h(e,s)}if("all"!==s)if("same-entity-types"!==s)if("same-relationship-type"!==s){if(""!==s)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s)}else{const e=d(),s=B.A(e,{backward:a,typeId:t.linkTypeID??0},k.nl);s&&(yield*p(s))}else{const e=d();for(const t of l.A(e))yield*p(t)}else for(const[,e]of l.A(n))for(const t of l.A(e))yield*p(t)}var Q=s("LEdQKgv"),ee=s("cGbttel"),te=s("Ui1Lssl").A,se=s("8YlDuzw").A,ie=s("oEgauXb").l;function*re(e,t){for(const s of e){if("url"===s.target_type)continue;const e=s.backward;let i=s.target;(0,g.A)(i.id)||(i={...i,id:(0,f.c7)()});const r=(0,g.A)(s.id),n={_lineage:[r?"loaded from database":"seeded"],_original:null,_status:r?v.wL:v.jU,attributes:a.A(s.attributes.slice(0).sort(T.S1)),begin_date:s.begin_date,editsPending:s.editsPending,end_date:s.end_date,ended:s.ended,entity0:e?i:t,entity0_credit:s.entity0_credit,entity1:e?t:i,entity1_credit:s.entity1_credit,id:(0,E.A)(s),linkOrder:s.linkOrder,linkTypeID:s.linkTypeID};(0,g.A)(s.id)&&(n._original=n),yield{onConflict:u.IP,relationship:n,type:L.Lm},i.relationships&&(yield*re(i.relationships,i))}}function ne(e){const t=(0,p.tr)();let s;if(b.go&&"POST"===t.req.method){const t=e.source??(0,p.Rz)(),r=(0,W.l0)(t),n=b.HI.get(r);if(se(n))try{s=(0,y.E)(JSON.parse(n))}catch(e){(0,i.Cp)(e)}finally{setTimeout((()=>{b.HI.remove(r)}),1e3)}}return function(e,t){const{seededRelationships:s}=e,i=e.source??(0,p.Rz)();te("release"!==i.entityType,"Cannot initialize the mini relationship editor with a release");const r={dialogLocation:null,entity:i,existingRelationshipsBySource:o.A,reducerError:null,relationshipsBySource:o.A};return i.relationships&&(0,L.Ay)(r,re(i.relationships,i)),r.existingRelationshipsBySource=r.relationshipsBySource,s&&(0,L.Ay)(r,re(s,i)),t&&(0,L.Ay)(r,t.map((e=>({onConflict:u.XU,relationship:e,type:L.Lm})))),r}(e,s)}function*ae(e,t,s){function*i(t){const i=function(e,t,s,i){if((0,g.A)(s.id))return null;const r=(0,k._u)(e,s,i);let n=null;if(r)for(const e of l.A(r.relationships)){if(n=$(s,e),n===e)return[];if(n)return null!==(0,k.$b)(t,n,i)?null:[{relationship:e,throwIfNotExists:!0,type:L.S},{onConflict:u.XU,relationship:n,type:L.Lm}]}return null}((0,k.PK)(e.relationshipsBySource,s),(0,k.PK)(e.existingRelationshipsBySource,s),t,s);i?yield*i:yield{onConflict:u.IP,relationship:t,type:L.Lm}}const r=(0,A.A)(t);if(null!=r.attributes[d.INSTRUMENT_ROOT_ID]||null!=r.attributes[d.VOCAL_ROOT_ID]){const e=function(e){const t=[],s=(0,g.A)(e.id)?e._original:null,i=(0,K.E)(null==e.linkTypeID?null:V.Ay.link_type[e.linkTypeID]);let r=o.A,n=o.A,c=o.A,d=e.attributes??o.A,h=a.A(M.A(s?.attributes??o.A).filter(Z));const p=h.size>0;for(const e of[T.fx,T.S1,T._r])for(const t of l.A(h)){const s=B.A(d,t,e);if(s){const e=F.Sg(r,s,T.S1);e===r?n=F.eW(n,s,T.fx):r=e,d=G.Ay(d,s,T.fx),h=G.Ay(h,t,T.S1)}}for(const e of l.A(d))if(Z(e))n=F.eW(n,e,T.fx);else{const t=F.Sg(c,e,T.S1);if(c===t){const t=V.Ay.link_attribute_type[e.typeID].root_id,s=i.attributes[t];if(null==s.max||s.max>1){const s=V.Ay.link_attribute_type[t];q(s.creditable||s.free_text,"Got multiple attributes with the same type ID, but they aren't creditable or free-text."),n=F.eW(n,e,T.fx)}}else c=t}if(s){const i=(0,_.Ld)(e);if(i._lineage=[...i._lineage,"split attribute onto existing relationship"],n.size&&!p){let e;for(const t of l.A(n))if(Z(t)){e=t;break}e&&(n=G.Ay(n,e,T.fx),r=F.Sg(r,e,T.S1))}i.attributes=X.A(r,c,T.S1,u.ET),i._status=(0,x.A)(i),i._status===v.wL?t.push(s):(0,H.A)(i,e)?t.push(e):t.push(i)}null==s&&n.size&&1===n.size&&(0,T.ER)(d,n)&&(n=o.A);for(const s of l.A(n)){const i=(0,_.Ld)(e);i._lineage=[...i._lineage,"split attribute onto new relationship"],i.id=(0,f.c7)(),i.attributes=F.Ay(c,s,T.S1),i._original=null,i._status=v.jU,t.push(i)}return t.length||t.push(e),t}(t);for(const t of e)yield*i(t)}else yield*i(t)}h.A.relationshipEditor.getRelationshipStateId=E.A,h.A.tree=n;const oe=(0,w.A)(((e,t)=>{const s=(0,_.qb)(e);return le(s,t),s}));function le(e,t){{const r=t;if(("object"==typeof r&&null!==r||"function"==typeof r)&&"move-relationship-down"===r.type&&"relationship"in r&&"source"in r){U(e,r.relationship,r.source,!0)}else if(("object"==typeof r&&null!==r||"function"==typeof r)&&"move-relationship-up"===r.type&&"relationship"in r&&"source"in r){U(e,r.relationship,r.source,!1)}else if(("object"!=typeof r||null===r)&&"function"!=typeof r||"remove-relationship"!==r.type)if(("object"==typeof r&&null!==r||"function"==typeof r)&&"toggle-ordering"===r.type&&"hasOrdering"in r&&"linkPhraseGroup"in r){const t=r.hasOrdering,s=r.linkPhraseGroup,i=[];let n=1;for(const e of l.A(s.relationships)){const s=(0,_.Ld)(e);s._lineage=[...s._lineage,"toggled ordering"],s.linkOrder=t?n++:0,s._status=(0,x.A)(s),i.push({relationship:e,throwIfNotExists:!0,type:L.S},{onConflict:u.XU,relationship:s,type:L.Lm})}(0,L.Ay)(e,i)}else if(("object"==typeof r&&null!==r||"function"==typeof r)&&"update-dialog-location"===r.type&&"location"in r){const t=r.location;e.dialogLocation=t}else if(("object"==typeof r&&null!==r||"function"==typeof r)&&"update-entity"===r.type&&"changes"in r&&"entityType"in r){const t=r.changes,s=r.entityType;te(e.entity.entityType===s,"Cannot change the relationship editor entity type"),e.entity={...e.entity,...t}}else{if(!(("object"==typeof r&&null!==r||"function"==typeof r)&&"update-relationship-state"===r.type&&"creditsToChangeForSource"in r&&"creditsToChangeForTarget"in r&&"newRelationshipState"in r&&"oldRelationshipState"in r&&"sourceEntity"in r))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+r);{const t=r.creditsToChangeForSource,n=r.creditsToChangeForTarget,a=r.newRelationshipState,o=r.oldRelationshipState,l=r.sourceEntity,u=null!=o&&!(0,H.A)(o,a);if(null==o||u||t||n){const r=(s=a,i=l,(0,I.A)(s,i)?s.entity0:s.entity1),d=[];null!=o&&u&&(0,L.Ay)(e,[{relationship:o,throwIfNotExists:!1,type:L.S}]),(null==o||u)&&d.push(...ae(e,a,l)),t&&d.push(...J(e.relationshipsBySource,a,t,l,(0,I.A)(a,l)?a.entity1_credit:a.entity0_credit)),n&&d.push(...J(e.relationshipsBySource,a,n,r,(0,I.A)(a,r)?a.entity1_credit:a.entity0_credit));try{(0,L.Ay)(e,d)}catch(e){if(!(e instanceof c.mq))throw e;alert(ie("This relationship already exists."))}}}}else{const t=r,{relationship:s}=t,i=[{relationship:s,throwIfNotExists:!0,type:L.S}];if(s._original){const e=(0,_.Ld)(s._original);e._lineage=[...e._lineage,"removed"],e._status=s._status===v.QJ?v.wL:v.QJ,i.push({onConflict:u.XU,relationship:e,type:L.Lm})}(0,L.Ay)(e,i)}}var s,i}const ce=r.memo((e=>{let{error:t}=e;return(0,ee.jsxs)("div",{className:"error",children:[(0,ee.jsx)("strong",{className:"error",children:ie("Oops, something went wrong!")}),(0,ee.jsx)("br",{}),(0,ee.jsx)("pre",{style:{whiteSpace:"pre-wrap"},children:t})]})}));const ue=function(e){let{dispatch:t,formName:s,state:n}=e;const a=n.reducerError,o=r.useRef(!1),[l,c]=r.useState(null),u=a??l;r.useEffect((()=>{const e=e=>{if(!o.current){o.current=!0;try{(0,W.Ay)(s,n)}catch(t){e.preventDefault(),(0,i.Cp)(t),c((0,m.A)(t))}}};return document.addEventListener("submit",e),()=>{document.removeEventListener("submit",e)}})),r.useEffect((()=>(h.A.relationshipEditor.dispatch=t,h.A.relationshipEditor.state=n,()=>{h.A.relationshipEditor.dispatch=null,h.A.relationshipEditor.state=null})),[t,n]);const d=r.useMemo((()=>({existing:n.existingRelationshipsBySource,pending:n.relationshipsBySource})),[n.existingRelationshipsBySource,n.relationshipsBySource]);return(0,ee.jsxs)("fieldset",{id:"relationship-editor",children:[(0,ee.jsx)("legend",{children:ie("Relationships")}),(0,ee.jsxs)("div",{className:"relationship-editor-fieldset-content",children:[u?(0,ee.jsx)(ce,{error:u.stack}):null,(0,ee.jsx)(v.v9.Provider,{value:d,children:(0,ee.jsx)(Q.A,{dialogLocation:n.dialogLocation,dispatch:t,releaseHasUnloadedTracks:!1,source:n.entity,targetTypeGroups:(0,k.PK)(n.relationshipsBySource,n.entity),track:null})})]})]})}},EdqsaKW:(e,t,s)=>{"use strict";s.d(t,{Gd:()=>g,L$:()=>m,Nx:()=>u,Pg:()=>p,R2:()=>h,ch:()=>d,kP:()=>l});s("6g1DHTE"),s("Kqb1L/m"),s("NKd1yOY"),s("gdf1lGT");var i=s("LCA85s6"),r=s("8YlDuzw").A,n=s("8YlDuzw").I;const a=(e,t)=>e+(r(t.name)?t.name:t.artist&&r(t.artist.name)?t.artist.name:"")+(r(t.joinPhrase)?t.joinPhrase:""),o=e=>!!e.artist&&e.artist.gid===i.VARTIST_GID,l=e=>e.names.some(o),c=e=>r(e.artist?.gid),u=e=>null!=e&&e.names.length>0,d=e=>u(e)&&e.names.every(c),h=e=>p(e.names);function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.reduce(a,"");if(t&&e.length>0){const t=e[e.length-1].joinPhrase;t&&(s=s.slice(0,s.length-t.length))}return s}function m(e){const t=e.names[0];return!(!t||!c(t))&&(n(t.name)||t.artist.name!==h(e))}function g(e,t){if(e===t)return!0;const s=e.names,i=t.names;if(s.length!==i.length)return!1;for(let e=0;e<s.length;e++){const t=s[e],r=i[e],n=c(t);if(n!==c(r)||n&&t.artist.gid!==r.artist.gid||t.name!==r.name||t.joinPhrase!==r.joinPhrase)return!1}return!0}},Ez3XeuZ:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s("UIUB93B"),r=s("cGbttel");const n={display:"inline-block",marginLeft:"10px",verticalAlign:"text-top"};const a=function(e){let{content:t}=e;return(0,r.jsx)(i.A,{content:t,target:(0,r.jsx)("span",{className:"img icon help",style:n})})}},Fc1ht8o:(e,t,s)=>{"use strict";s.d(t,{A:()=>yt,q:()=>wt});s("6g1DHTE"),s("AXfG3Yq");var i=s("AsUdLGK"),r=s("smZuR9W"),n=s("Imk573c"),a=s("dMORH1x"),o=(s("60ocjtt"),s("NKd1yOY"),s("gdf1lGT"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO"),s("1nSlf59")),l=s("CJBfytL"),c=s("Ui1Lssl"),u=s("IX2y8RG"),d=s("QpbAoda"),h=s("gooNfJx"),p=s("LCA85s6"),m=s("52XjgTZ"),g=s("VHUgtNR"),f=s("xNKEMJr"),b=s("9oisN5V"),y=s("gklH9/w"),w=s("e3+xVn3"),v=s("d/wSL5Q"),_=s("9azanlh"),T=s("pqBraHq"),k=s("wPS9XeD"),x=s("VVNXxwy"),A=s("NRi6Fhf"),E=s("NTUlU87"),I=s("4SA/wF2"),N=s("brGU6uh"),j=s("SmhBGrr"),S=s("JCI6GvU"),C=s("a+U3pwl"),R=s("/wdNxGF"),L=s("kuYEmyQ"),P=s("Ez3XeuZ"),$=s("cGbttel"),D=s("oEgauXb").lp,O=s("oEgauXb").l;const z=r.memo((function(e){let{dispatch:t,linkOrder:s}=e;const i=r.useCallback((e=>{let s=parseInt(e.currentTarget.value,10);Number.isNaN(s)&&(s=0),s=Math.min(s,w.b),t({newLinkOrder:s,type:"update-link-order"})}),[t]);return(0,$.jsxs)("tr",{className:"link-order",children:[(0,$.jsx)("td",{className:"section",children:D("Order","noun")}),(0,$.jsxs)("td",{className:"fields",children:[(0,$.jsx)("input",{max:w.b,min:"0",onChange:i,type:"number",value:s}),(0,$.jsx)(P.A,{content:O("If this relationship has a specific order among others of the\n             same type, you may set its position in the list here (as an\n             alternative to the up- and down-arrow buttons).")})]})]})}));var Y=s("x6u2RKf"),U=s("B21npvo"),W=s("KmaOXyL"),H=s("1wN/8o/"),M=s("WfSoeLz"),B=s("zx42Bmz"),F=s("+5o7Rtt");const G=(e,t,s,i)=>(0,$.jsx)(F.A,{allowNew:i??!1,content:t,disableLink:(0,M.A)(s,e),entity:e});function X(e){let{allowNewEntity0:t,allowNewEntity1:s,makeEntityLink:i=G,relationship:r}=e;const n=r.backward,a=m.Ay.link_type[r.linkTypeID];let o=r.entity0,l=r.entity1;const c=a.type0||(n?r.target_type:r.source_type),u=a.type1||(n?r.source_type:r.target_type);o&&l||(n?(o=r.target,l=m.Ay[u][r.entity1_id]||{entityType:u,id:r.entity1_id}):(l=r.target,o=m.Ay[c][r.entity0_id]||{entityType:c,id:r.entity0_id}));const d=(0,W.GW)(a,r.attributes,"long_link_phrase",!1,i(o,r.entity0_credit,r,t),i(l,r.entity1_credit,r,s)),h=(0,W.A0)(a,r.attributes,"long_link_phrase",!1);return(0,$.jsxs)($.Fragment,{children:[d," ",(0,B.A)(r),h?(0,$.jsxs)($.Fragment,{children:[" ",(0,f.A)((0,H.AH)(h))]}):null]})}const K=function(e){return e.relationship.editsPending?(0,$.jsx)("span",{className:"mp mp-rel",children:(0,$.jsx)(X,{...e})}):(0,$.jsx)(X,{...e})};var V=s("YDxZ9xi"),q=s("HMcOWk2"),Z=s("HkNzj3j"),J=s("xrv16+S"),Q=s("75GVkWN"),ee=s("+yGjBxw"),te=s("Ui1Lssl").A,se=s("H+29DOL").O,ie=s("oEgauXb").l;const re=e=>(0,$.jsx)("span",{className:"diff-only-a",children:e}),ne=e=>(0,$.jsx)("span",{className:"diff-only-b",children:e}),ae=e=>String(e.typeID),oe=(e,t,s,i)=>(0,$.jsx)(F.A,{content:t,disableLink:(0,M.A)(s,e),entity:e,showCreditedAs:i});const le=r.memo((function(e){let{makeEntityLink:t=oe,newRelationship:s,oldRelationship:i}=e;const r=(0,J.pY)(i.attributes,ae),n=(0,J.pY)(s.attributes,ae),a={commaList:q.A,defaultValue:"",displayLinkAttribute(e){const t=String(e.typeID),s=(0,H.Ay)(e);return r.has(t)&&!n.get(t)?re(s):n.get(t)&&!r.has(t)?ne(s):s},expand:Z.HG},o=null==i.linkTypeID?null:m.Ay.link_type[i.linkTypeID],l=null==s.linkTypeID?null:m.Ay.link_type[s.linkTypeID];te(o&&l,"No link type found");const c=i.entity0??(null==i.entity0_id?null:m.Ay[o.type0][i.entity0_id]),u=s.entity0??(null==s.entity0_id?null:m.Ay[l.type0][s.entity0_id]);te(c&&u,"No source entity found");const d=i.entity1||i.target,h=s.entity1||s.target,p=c.id!==u.id||i.entity0_credit!==s.entity0_credit,g=d.id!==h.id||i.entity1_credit!==s.entity1_credit,b=t(c,i.entity0_credit,i,p),y=t(u,s.entity0_credit,s,p),w=t(d,i.entity1_credit,i,g),v=t(h,s.entity1_credit,s,g);let _="",T=[],k="",x=[];try{o!==l&&(Z.JL.reactTextContentHook=re),[_,T]=(0,W.Mm)(a,o,i.attributes??[],"long_link_phrase",!1,c.id===u.id?b:re(b),d.id===h.id?w:re(w)),o!==l&&(Z.JL.reactTextContentHook=ne),[k,x]=(0,W.Mm)(a,l,s.attributes??[],"long_link_phrase",!1,c.id===u.id?y:ne(y),d.id===h.id?v:ne(v))}finally{Z.JL.reactTextContentHook=null}const A=(0,B.A)(i),E=(0,B.A)(s);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("tr",{children:[(0,$.jsx)("th",{rowSpan:2,children:se(ie("Relationship"))}),(0,$.jsxs)("td",{className:"old",children:[_," ",(0,$.jsx)(ee.A,{filter:Q.SJ,newText:E,oldText:A})," ",(0,f.A)((0,H.AH)(T))]})]}),(0,$.jsx)("tr",{children:(0,$.jsxs)("td",{className:"new",children:[k," ",(0,$.jsx)(ee.A,{filter:Q.i,newText:E,oldText:A})," ",(0,f.A)((0,H.AH)(x))]})})]})}));var ce=s("KimswHD"),ue=s("A6s5oQD"),de=s("8YlDuzw").A,he=s("oEgauXb").lp,pe=s("H+29DOL").O,me=s("oEgauXb").l;const ge=(e,t,s)=>{const i=s?e.entity0:e.entity1,r=(0,j.A)(e),n=!r||r.has_dates;return{attributes:o.A(e.attributes??l.A),backward:s,begin_date:n?e.begin_date:null,editsPending:e.editsPending,end_date:n?e.end_date:null,ended:!!n&&e.ended,entity0:e.entity0,entity0_credit:e.entity0_credit,entity0_id:e.entity0.id,entity1:e.entity1,entity1_credit:e.entity1_credit,entity1_id:e.entity1.id,id:e.id??0,linkOrder:e.linkOrder,linkTypeID:e.linkTypeID??0,source_id:t.id,source_type:t.entityType,target:i,target_type:i.entityType,verbosePhrase:""}};const fe=r.memo((function(e){let{backward:t,batchSelectionCount:s,dispatch:i,newRelationship:r,oldRelationship:n,source:a}=e;const o=t?r?.entity0.entityType:r?.entity1.entityType,l=(e,t,i)=>(0,$.jsx)(U.A,{allowNew:!0,className:"wrap-anywhere",content:de(t)?t:(0,w.A)(e.id)||de(e.name)?"":he("[unknown]","generic entity"),deletedCaption:null!=s&&e===a?(0,ce.A)(a.entityType,s):void 0,disableLink:(0,M.A)(i,e),entity:e,showDisambiguation:!0,target:"_blank"}),c=(e,s,i)=>{const r="preview details"+(s?" "+s:"");return(0,$.jsx)("table",{className:r,children:(0,$.jsxs)("tbody",{children:[(0,$.jsxs)("tr",{children:[(0,$.jsx)("th",{children:pe(me("Relationship"))}),(0,$.jsx)("td",{children:(0,$.jsx)(K,{makeEntityLink:l,relationship:ge(e,a,t)})})]}),i]})})},u=(e,t)=>e===t?null:(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("tr",{children:[(0,$.jsx)("th",{children:pe(me("Old order"))}),(0,$.jsx)("td",{className:"old",children:e})]}),(0,$.jsxs)("tr",{children:[(0,$.jsx)("th",{children:pe(me("New order"))}),(0,$.jsx)("td",{className:"new",children:t})]})]});return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("h2",{children:[(0,$.jsx)("div",{className:"heading-line"}),(0,$.jsx)("span",{className:"heading-text",children:he("Preview","header")})]}),n&&r?(d=n,h=r,d.entity0_credit===h.entity0_credit&&d.entity1_credit===h.entity1_credit&&(0,ue.A)(d,h)&&(0,V.A)(d,h)?c(r,"",u(n.linkOrder,r.linkOrder)):(0,$.jsx)("table",{className:"preview details edit-relationship",children:(0,$.jsxs)("tbody",{children:[(0,$.jsx)(le,{makeEntityLink:l,newRelationship:ge(r,a,t),oldRelationship:ge(n,a,t)}),u(n.linkOrder,r.linkOrder)]})})):r?c(r,"add-relationship"):(0,$.jsx)("p",{className:"required-fields-note",children:me("Please fill out all required fields.")}),a.entityType===o?(0,$.jsxs)($.Fragment,{children:[" ",(0,$.jsx)("button",{className:"styled-button change-direction",onClick:function(){i({type:"change-direction"})},type:"button",children:me("Change direction")})]}):null]});var d,h}));var be=s("TeVBGSm"),ye=s("HkNzj3j").l,we=s("oEgauXb").l,ve=s("SKGBikk").l,_e=s("2k2mX3K").RL;function Te(e,t){return{creditedAs:e,creditsToChange:"",releaseHasUnloadedTracks:t}}function ke(e,t){const s={...e};{const e=t;if(("object"==typeof e&&null!==e||"function"==typeof e)&&"set-credit"===e.type&&"creditedAs"in e){const t=e.creditedAs;s.creditedAs=t}else{if(("object"!=typeof e||null===e)&&"function"!=typeof e||"set-credits-to-change"!==e.type||!("value"in e))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e);{const t=e.value;s.creditsToChange=t}}}return s}const xe=r.memo((function(e){let{backward:t,dispatch:s,entityName:i,forEntity:n,linkType:a,state:o,targetType:l}=e;const c=r.useRef(o.creditedAs||""),u=r.useRef(null),d=r.useId();function h(e){s({type:"set-credits-to-change",value:e.currentTarget.value})}let m;(o.creditsToChange||""!==o.creditedAs||o.creditedAs!==c.current)&&(m=(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("br",{}),(0,$.jsxs)("label",{className:"change-credits-checkbox",children:[(0,$.jsx)("input",{checked:""!==o.creditsToChange,disabled:o.releaseHasUnloadedTracks,onChange:function(e){s({type:"set-credits-to-change",value:e.currentTarget.checked?"all":""})},type:"checkbox"}),(0,$.jsx)("span",{children:ye("Change credits for other {entity} relationships\n                on the page.",{entity:(0,$.jsx)("bdi",{children:i})})})]}),o.releaseHasUnloadedTracks?(0,$.jsx)("div",{className:"form-help",children:(0,$.jsx)("p",{children:we("Some tracks/mediums haven’t been loaded yet. If you want\n                  to use this option, please close this dialog and load all\n                  tracks/mediums beforehand.")})}):o.creditsToChange?(0,$.jsxs)("div",{className:"change-credits-radio-options",children:[(0,$.jsxs)("label",{children:[(0,$.jsx)("input",{checked:"all"===o.creditsToChange,name:"changed-credits",onChange:h,type:"radio",value:"all"}),we("All of these relationships.")]}),(0,$.jsxs)("label",{children:[(0,$.jsx)("input",{checked:"same-entity-types"===o.creditsToChange,name:"changed-credits",onChange:h,type:"radio",value:"same-entity-types"}),(0,$.jsx)("span",{children:ve("Only relationships to {entity_type} entities.",{entity_type:p.ENTITY_NAMES[l]()})})]}),a?(0,$.jsxs)("label",{children:[(0,$.jsx)("input",{checked:"same-relationship-type"===o.creditsToChange,name:"changed-credits",onChange:h,type:"radio",value:"same-relationship-type"}),(0,$.jsx)("span",{children:ve("Only “{relationship_type}” relationships to\n                      {entity_type} entities.",{entity_type:p.ENTITY_NAMES[l](),relationship_type:(0,W.Av)(a,_e(t?a.reverse_link_phrase:a.link_phrase))})})]}):null]}):null]}));const g=we("A credited name is optional. You can leave this field blank\n     to keep the current name.");return(0,$.jsxs)("div",{className:n+"-entity-credit",children:[(0,$.jsx)("input",{"aria-description":g,"aria-label":we("Credited as"),className:"entity-credit",id:d,onChange:function(e){s({creditedAs:e.currentTarget.value,type:"set-credit"})},placeholder:we("Credited as"),ref:u,type:"text",value:o.creditedAs}),(0,$.jsx)(P.A,{content:g}),m]})}));var Ae=s("8YlDuzw").A,Ee=s("oEgauXb").l,Ie=s("oEgauXb").lp;function Ne(e,t){if(e&&t&&"url"===e.entityType){const s="url"===t.type0?t.type1:t.type0,i=new be.A$(e.name,s).checkRelationship(t.gid);if(!i.result)return Ae(i.error)?i.error:Ee("This URL is not allowed for the selected link type,\n         or is incorrectly formatted.")}return""}function je(e,t,s,i){const r=(0,j.A)(s),n=(0,S.A)(s,i);return{entityType:t,error:Ne(i,r),...Te(n?s.entity1_credit:s.entity0_credit,e)}}const Se=r.memo((function(e){let{backward:t,batchSelectionCount:s,dispatch:i,linkType:r,source:n,state:a,targetType:o}=e;const l=n.entityType;return(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{className:"required section",children:p.ENTITY_NAMES[l]()}),(0,$.jsxs)("td",{className:"fields",children:[n&&null==s?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(U.A,{allowNew:!0,className:"wrap-anywhere",content:n.name||Ie("[unknown]","generic entity"),entity:n,target:"_blank"}),(0,$.jsx)("div",{className:"error",children:a.error})]}):null==s?null:(0,ce.A)(l,s),p.ENTITIES_WITH_RELATIONSHIP_CREDITS[l]?(0,$.jsx)(xe,{backward:t,dispatch:i,entityName:n.name,forEntity:"source",linkType:r,state:a,targetType:o}):null]})]})}));var Ce=s("nXnm+DU"),Re=s("oEgauXb").g,Le=s("oEgauXb").l,Pe=s("Ui1Lssl").A;const $e={artist:Re("The series you’ve selected is for artists."),event:Re("The series you’ve selected is for events."),recording:Re("The series you’ve selected is for recordings."),release:Re("The series you’ve selected is for releases."),release_group:Re("The series you’ve selected is for release groups."),work:Re("The series you’ve selected is for works.")};function De(e){return null!=e&&((0,w.A)(e.id)||"work"===e.entityType&&!0===e._fromBatchCreateWorksDialog)}function Oe(e,t,s){if(!De(e))return"";if(t.entityType===e.entityType&&t.id===e.id)return Le("Entities in a relationship cannot be the same.");if("series"===e.entityType){const i=e.typeID;Pe(null!=i,"Existing series must have a type set");const r=m.Ay.series_type[i].item_entity_type;if(s&&p.PART_OF_SERIES_LINK_TYPE_GIDS.includes(s.gid)&&r!==t.entityType)return $e[r]()}return""}const ze=()=>!1;function Ye(e){const{allowedTypes:t,inputRef:s,relationshipId:i,target:r}=e,n=De(r)?r:null;return(0,Ce.U)({canChangeType:t?e=>t.some((t=>t.value===e)):ze,containerClass:"relationship-target",entityType:r.entityType,id:"relationship-target-"+String(i),inputChangeHook:He,inputClass:"relationship-target",inputRef:s,inputValue:r.name,required:!0,selectedItem:n?{entity:n,id:n.id,name:n.name,type:"option"}:null})}function Ue(e){const{allowedTypes:t,initialFocusRef:s,initialRelationship:i,releaseHasUnloadedTracks:r,source:n}=e,a=(0,S.A)(i,n),o=a?i.entity0:i.entity1;let l=null;return"url"!==o.entityType&&(l=Ye({allowedTypes:t,inputRef:s,relationshipId:i.id,target:o})),{...Te(a?i.entity0_credit:i.entity1_credit,r),allowedTypes:t,autocomplete:l,error:Oe(o,n,(0,j.A)(i)),relationshipId:i.id,target:o,targetType:o.entityType}}const We=/#new-work-(-[0-9]+)\s*$/;function He(e,t,s){const i=e.match(We);if(i){const e=i[1],t=m.Ay.work[Number(e)];if(t)return s({entity:t,id:t.id,name:t.name,type:"option"})}return!1}function Me(e,t){Pe(e.autocomplete),e.autocomplete=(0,d.Ay)(e.autocomplete,t.action),e.error=Oe(e.autocomplete.selectedItem?.entity,t.source,t.linkType)}const Be=r.memo((function(e){let{backward:t,dispatch:s,linkType:i,source:n,state:a}=e;const o=a.autocomplete,l=a.targetType,c=r.useCallback((e=>{s({action:e,linkType:i,source:n,type:"update-autocomplete"})}),[s,i,n]),u=r.useCallback((e=>{s({action:e,type:"update-credit"})}),[s]),d=Boolean(p.ENTITIES_WITH_RELATIONSHIP_CREDITS[l]&&o?.selectedItem?.entity);return(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{className:"required section",children:p.ENTITY_NAMES[l]()}),(0,$.jsxs)("td",{className:"fields",children:["url"===l?(0,$.jsx)("input",{onChange:function(e){s({text:e.currentTarget.value,type:"update-url-text"})},type:"text",value:a.target.name}):o?(0,$.jsx)(Ce.A,{dispatch:c,state:o}):null,(0,$.jsx)("div",{className:"error",children:a.error}),d?(0,$.jsx)(xe,{backward:t,dispatch:u,entityName:a.target.name,forEntity:"target",linkType:i,state:a,targetType:n.entityType}):null]})]})}));s("DNaZxvn");var Fe=s("LIWYReX"),Ge=s("oEgauXb").l;const Xe=r.memo((function(e){let{dispatch:t,initialFocusRef:s,options:i,source:r,targetType:n}=e;return(0,$.jsxs)("tr",{children:[(0,$.jsx)("td",{className:"required section",children:Ge("Related type")}),(0,$.jsx)("td",{className:"fields",children:null==i?(0,Fe.A)(n):(0,$.jsx)("select",{className:"entity-type",onChange:function(e){t({source:r,targetType:e.currentTarget.value,type:"update-target-type"})},ref:s,value:n,children:i.map((e=>(0,$.jsx)("option",{value:e.value,children:e.text},e.value)))})})]})}));var Ke=s("2k2mX3K").RL,Ve=s("oEgauXb").l,qe=s("8YlDuzw").A,Ze=s("HkNzj3j").l;const Je={fontWeight:"normal"};function Qe(e,t){const s=m.Ay.link_attribute_type[t.type.gid],i=s.root_id;let r=e.get(i);return null==r&&(r=[],e.set(i,r)),r.push({credited_as:t.credited_as,text_value:t.text_value,type:s}),e}function et(e){return e.reduce(Qe,new Map)}function tt(e){const t=e.initialRelationship,s=e.source,i=(0,S.A)(t,s),r=s.entityType,n=i?t.entity0.entityType:t.entity1.entityType,a=(0,A.A)(s,n),c=(0,j.A)(t)??(1===a.length?a[0].entity:null)??null,u=null!=e.targetTypeOptions&&!e.hasPreselectedTargetType,d=!u&&null==c,h=!u&&!d;return{attributes:(0,C.Ur)(c,et(o.A(t.attributes??l.A))),backward:i,datePeriod:(0,L.Ur)(t),isHelpVisible:!1,linkOrder:t.linkOrder,linkType:(0,Y.Ur)({initialFocusRef:d?e.initialFocusRef:void 0,linkType:c,source:s,targetType:n,linkTypeOptions:a,id:(0,N.A)(t),disabled:!1}),sourceEntity:je(e.releaseHasUnloadedTracks,r,t,s),targetEntity:Ue({allowedTypes:e.targetTypeOptions,initialFocusRef:h?e.initialFocusRef:void 0,initialRelationship:t,releaseHasUnloadedTracks:e.releaseHasUnloadedTracks,source:s})}}function st(e,t){const s=e.targetEntity.target,i=e.linkType.autocomplete.selectedItem?.entity?.id??null;if("artist"===t.entityType&&"artist"===s.entityType&&null!==i&&it.has(i)){const i=null===t.typeID,r=t.typeID===p.ARTIST_TYPE_PERSON,n=null!==t.typeID&&p.ARTIST_GROUP_TYPES.has(t.typeID),a=s.typeID===p.ARTIST_TYPE_PERSON,o=null!==s.typeID&&p.ARTIST_GROUP_TYPES.has(s.typeID);(r||i)&&o?e.backward=!1:(n||i)&&a&&(e.backward=!0)}}const it=new Set([53,103,305,855,895,965]);function rt(e,t,s,i){const r=i.entityType,n=(0,A.A)(i,s);(0,h.Xb)(n,Y.Xv);const a=1===n.length?n[0].entity:null,o=e.linkType.autocomplete,l={...o,inputValue:a?(0,u.U)(a):o.selectedItem?"":o.inputValue,recentItems:null,recentItemsKey:"link_type-"+r+"-"+s,results:n,selectedItem:a?{entity:a,id:a.id,name:Ke(a.name),type:"option"}:null,staticItems:n};(0,d.ro)(l,l.inputValue),(0,d.zC)(l),e.linkType={...e.linkType,autocomplete:l},(0,Y.PB)(e,a),e.backward=r>s,e.sourceEntity={...e.sourceEntity,error:Ne(i,null)}}function nt(e,t){const s={...e};{const i=t;if(("object"!=typeof i||null===i)&&"function"!=typeof i||"change-direction"!==i.type)if(("object"==typeof i&&null!==i||"function"==typeof i)&&"set-attributes"===i.type&&"attributes"in i){const t=i.attributes;s.attributes=(0,C.Ur)(e.linkType.autocomplete.selectedItem?.entity??null,et(t))}else if(("object"!=typeof i||null===i)&&"function"!=typeof i||"toggle-help"!==i.type)if(("object"==typeof i&&null!==i||"function"==typeof i)&&"update-source-entity"===i.type&&"action"in i){const e=i.action;s.sourceEntity=function(e,t){return ke(e,t)}(s.sourceEntity,e)}else if(("object"==typeof i&&null!==i||"function"==typeof i)&&"update-target-entity"===i.type&&"action"in i&&"source"in i){const t=i.action,r=i.source;s.targetEntity=function(e,t){{const s=t;if(("object"==typeof s&&null!==s||"function"==typeof s)&&"update-autocomplete"===s.type){const t=s,i={...e};Me(i,t);const r=i.autocomplete;i.targetType=r.entityType;const a=r.selectedItem?.entity||(0,n.XH)(i.targetType,{name:r.inputValue});return e.target.entityType===a.entityType&&e.target.id===a.id&&e.target.name===a.name||(i.target=a),i}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"update-credit"===s.type&&"action"in s)return ke(e,s.action);if(("object"==typeof s&&null!==s||"function"==typeof s)&&"update-url-text"===s.type&&"text"in s){const t=s.text;Pe("url"===e.targetType);const i={...e};Pe("url"===i.target.entityType);const r={...i.target},n=t;return r.name=n,i.target=r,i}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s)}}(s.targetEntity,t);const a=e.targetEntity.targetType,o=s.targetEntity.targetType;a!==o&&rt(s,0,o,r);e.targetEntity.target.gid!==s.targetEntity.target.gid&&st(s,r)}else if(("object"==typeof i&&null!==i||"function"==typeof i)&&"update-target-type"===i.type&&"source"in i&&"targetType"in i){const e=i.source,t=i.targetType,r={...s.targetEntity},a=r.targetType,o=t;if(r.targetType=o,rt(s,0,o,e),"url"===a&&"url"!==o){const t=(0,n.XH)(o);r.autocomplete=Ye({allowedTypes:r.allowedTypes,relationshipId:r.relationshipId,target:t}),r.target=t,r.error=Oe(t,e,null)}else"url"===o&&"url"!==a?(r.autocomplete=null,r.target=(0,n.dA)(),r.error=""):"url"!==o&&Me(r,{action:{entityType:o,type:"change-entity-type"},linkType:null,source:e,type:"update-autocomplete"});r.creditedAs="",s.targetEntity=r}else if(("object"==typeof i&&null!==i||"function"==typeof i)&&"update-link-order"===i.type&&"newLinkOrder"in i){const e=i.newLinkOrder;s.linkOrder=e}else if(("object"!=typeof i||null===i)&&"function"!=typeof i||"update-link-type"!==i.type)if(("object"==typeof i&&null!==i||"function"==typeof i)&&"update-attribute"===i.type&&"action"in i){const e=i.action;s.attributes=(0,C.Ff)(s.attributes,e)}else{if(("object"!=typeof i||null===i)&&"function"!=typeof i||"update-date-period"!==i.type||!("action"in i))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i);{const e=i.action;s.datePeriod=(0,L.WH)(s.datePeriod,e)}}else{const t=i;(0,Y.bF)(e,s,t)&&(s.sourceEntity={...s.sourceEntity,error:Ne(t.source,null)},st(s,t.source))}else s.isHelpVisible=!e.isHelpVisible;else s.backward=!e.backward}return s}const at=r.memo((function(e){let{attributesState:t,canEditDates:s,datePeriod:i,dispatch:n,isHelpVisible:a}=e;const o=r.useCallback((e=>{n({action:e,type:"update-attribute"})}),[n]),l=r.useCallback((e=>{n({action:e,type:"update-date-period"})}),[n]),c=(0,k.A)("boolean");return t.attributesList.length||s?(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("h2",{children:[(0,$.jsx)("div",{className:"heading-line"}),(0,$.jsx)("span",{className:"heading-text",children:Ve("Attributes")})]}),(0,$.jsx)("table",{className:"relationship-details",children:(0,$.jsxs)("tbody",{onClick:c,children:[t.attributesList.length?(0,$.jsx)(C.Ay,{dispatch:o,isHelpVisible:a,state:t}):null,s?(0,$.jsx)(L.Ay,{dispatch:l,isHelpVisible:a,state:i}):null]})})]}):null}));const ot=r.memo((function(e){const{batchSelectionCount:t,closeDialog:s,hasPreselectedTargetType:i,initialFocusRef:n,initialRelationship:a,sourceDispatch:o,source:l,targetTypeOptions:u,targetTypeRef:d,title:h}=e,[p,m]=r.useReducer(nt,e,tt);r.useEffect((()=>(g.A.relationshipEditor.relationshipDialogDispatch=m,g.A.relationshipEditor.relationshipDialogState=p,()=>{g.A.relationshipEditor.relationshipDialogDispatch=null,g.A.relationshipEditor.relationshipDialogState=null})),[m,p]);const k=p.backward,A=p.linkType,j=A.autocomplete.selectedItem?.entity,S=p.sourceEntity,C=p.targetEntity,L=C.target,P=C.targetType,D=p.datePeriod.field,O=p.attributes.attributesList,U=null==A.autocomplete.selectedItem||!De(C.autocomplete?.selectedItem?.entity),W=Boolean(qe(A.error)||qe(S.error)||C.error||O.some((e=>e.error))||D.errors?.length||D.field.begin_date.errors?.length||D.field.end_date.errors?.length),H=Boolean(D.pendingErrors?.length||D.field.begin_date.pendingErrors?.length||D.field.end_date.pendingErrors?.length);r.useEffect((()=>{d&&(d.current=P)}),[d,P]);const M=r.useMemo((()=>{if(U||W)return null;L&&(0,c.A)(L.entityType===P,"The selected entity does not have type "+JSON.stringify(P));const e=j?j.id:null,t=L?L.id:null;if(null==e||null==t)return null;const s=(0,b.A)(S.creditedAs),i=(0,b.A)(C.creditedAs);let r="",n="";k?(r=i,n=s):(n=i,r=s);const o={...a,_lineage:a._lineage.length?[...a._lineage,"edited"]:["added"],...p.datePeriod.result,attributes:p.attributes.resultingLinkAttributes,entity0_credit:r,entity1_credit:n,linkOrder:p.linkOrder,linkTypeID:e};return o.entity0=k?L:l,o.entity1=k?l:L,o._status=(0,I.A)(o),o}),[k,U,W,a,j,L,l,p.attributes.resultingLinkAttributes,p.linkOrder,p.datePeriod.result,S.creditedAs,C.creditedAs,P]),B=r.useContext(_.v9),F=r.useMemo((()=>{if(M)for(const e of["pending","existing"]){const t=(0,x.$b)((0,x.PK)(B[e],l),M,l);if(t&&t.id!==M.id)return!0}return!1}),[B,M,l]),G=r.useRef(null),X=r.useCallback((e=>{const t=G.current;if(t){const s=new Event("mb-close-relationship-dialog",{bubbles:!0});s.closeEventType=e,s.dialogState=p,t.dispatchEvent(s)}s()}),[s,p]),K=r.useCallback((()=>{if(M&&j&&L&&!F){if(H)return m({action:{action:{type:"show-pending-errors"},type:"update-begin-date"},type:"update-date-period"}),void m({action:{action:{type:"show-pending-errors"},type:"update-end-date"},type:"update-date-period"});(0,c.A)(k?j.type0===L.entityType&&j.type1===l.entityType:j.type0===l.entityType&&j.type1===L.entityType,"The selected link type is invalid for these entity types"),(0,w.A)(a.id)?(0,y.s)("edit-relationship-"+(0,N.A)(a),e):e()}function e(){o({batchSelectionCount:t,creditsToChangeForSource:S.creditsToChange,creditsToChangeForTarget:C.creditsToChange,newRelationshipState:M,oldRelationshipState:a,sourceEntity:l,type:"update-relationship-state"}),X("accept")}}),[k,t,H,F,j,L,l,o,S.creditsToChange,C.creditsToChange,a,M,X]),V=r.useCallback((()=>{X("cancel")}),[X]),q=r.useCallback((e=>{m({action:e,type:"update-source-entity"})}),[m]),Z=r.useCallback((e=>{m({action:e,source:l,type:"update-target-entity"})}),[m,l]),J=r.useCallback((e=>{m({action:e,source:l,type:"update-link-type"})}),[m,l]),Q=a._original&&a?.editsPending?(0,E.A)(a._original):null,ee=r.useCallback((e=>{e.preventDefault(),m({type:"toggle-help"})}),[m]),te=(0,T.A)(K),se=null!=j&&j.has_dates;return(0,$.jsxs)("div",{className:"form",onKeyDown:te,ref:G,children:[(0,$.jsxs)("div",{className:"dialog-titlebar",children:[(0,$.jsx)("h1",{children:h}),(0,$.jsx)("div",{className:"buttons-right",children:(0,$.jsx)("span",{style:Je,children:(0,f.A)((0,$.jsx)("a",{href:"#",onClick:ee,children:Ve("help")}))})})]}),null==t?null:(0,$.jsx)("p",{children:(ie=l.entityType,"recording"===ie?Ve("This will add a relationship to all checked recordings."):"work"===ie?Ve("This will add a relationship to all checked works."):"")}),null==Q?null:(0,$.jsx)("p",{className:"msg warning",children:Ze("Warning: This relationship has open edits. {show|Click here}\n             to view these edits and make sure they do not conflict with\n             your own.",{show:{href:Q,target:"_blank"}})}),(0,$.jsx)("table",{className:"relationship-details",children:(0,$.jsxs)("tbody",{children:[(0,$.jsx)(Se,{backward:k,batchSelectionCount:t,dispatch:q,linkType:j,source:l,state:S,targetType:P}),(0,$.jsx)(Xe,{dispatch:m,initialFocusRef:u&&!i?n:void 0,options:u,source:l,targetType:C.targetType})]})}),(0,$.jsxs)("h2",{children:[(0,$.jsx)("div",{className:"heading-line"}),(0,$.jsx)("span",{className:"heading-text",children:Ve("Relationship")})]}),(0,$.jsx)("table",{className:"relationship-details",children:(0,$.jsxs)("tbody",{children:[(0,$.jsx)(Y.Ay,{dispatch:J,isHelpVisible:p.isHelpVisible,source:l,state:A,targetType:C.targetType}),(0,$.jsx)(Be,{backward:k,dispatch:Z,linkType:j,source:l,state:C}),j&&(0,v.H)(j.id,l,k)?(0,$.jsx)(z,{dispatch:m,linkOrder:p.linkOrder}):null]})}),(0,$.jsx)(at,{attributesState:p.attributes,canEditDates:se,datePeriod:p.datePeriod,dispatch:m,isHelpVisible:p.isHelpVisible}),l?(0,$.jsx)(fe,{backward:k,batchSelectionCount:t,dispatch:m,newRelationship:M,oldRelationship:a._original,source:l}):null,F?(0,$.jsx)("p",{className:"error",children:Ve("This relationship already exists.")}):null,(0,$.jsx)(R.A,{isDoneDisabled:U||W||H||F,onCancel:V,onDone:K})]});var ie}));var lt=s("ldVMy18"),ct=(s("70YSc4n"),s("oEgauXb")),ut=s("JWGIi2B");function dt(e,t){return"area-area"===t||"area-url"===t?(0,ut.Tu)(e):"area-instrument"!==t&&"instrument-instrument"!==t&&"instrument-url"!==t||(0,ut.CD)(e)}const ht=new Map;function pt(e){return{text:p.ENTITY_NAMES[e](),value:e}}function mt(e,t){ht.size||function(e){const t=Object.keys(m.Ay.link_type_tree);for(let s=0;s<t.length;s++){const i=t[s],[r,n]=i.split("-");if(dt(e,i)){if("url"!==n){const e=ht.get(r);e?e.push(n):ht.set(r,[n])}if(r!==n&&"url"!==r){const e=ht.get(n);e?e.push(r):ht.set(n,[r])}}}for(const e of ht.values())e.sort()}(e);return(ht.get(t)??[]).filter((e=>(0,A.x)(t,e))).map(pt).sort(((e,t)=>(0,ct.UD)(e.text,t.text)))}var gt=s("VVxqhIh"),ft=s("Ui1Lssl").A;const bt={_lineage:[],_original:null,_status:_.jU,attributes:null,begin_date:null,editsPending:!1,end_date:null,ended:!1,entity0_credit:"",entity1_credit:"",id:null,linkOrder:0,linkTypeID:null};function yt(e){const{batchSelectionCount:t,dispatch:s,hasPreselectedTargetType:n,relationship:a,releaseHasUnloadedTracks:o,source:l,targetTypeOptions:c,targetTypeRef:u,title:d,user:h}=e;return 0===a.linkTypeID&&i.Cp(new Error("relationship.linkTypeID is 0, but should be null")),r.useCallback(((e,i)=>null==c||c.length?(0,$.jsx)(ot,{batchSelectionCount:t,closeDialog:e,hasPreselectedTargetType:n,initialFocusRef:i,initialRelationship:a,releaseHasUnloadedTracks:o,source:l,sourceDispatch:s,targetTypeOptions:c,targetTypeRef:u,title:d,user:h}):(0,$.jsx)("p",{children:"No relationship types are available for "+JSON.stringify(l.entityType)+" entities."})),[t,s,n,a,o,l,c,u,d,h])}function wt(e){const{backward:t,buildNewRelationshipData:s,preselectedTargetType:i,releaseHasUnloadedTracks:o,source:l,targetTypeOptions:c,...u}=e,d=(0,gt.A)(),h=r.useMemo((()=>null===c?null:mt(d,l.entityType)),[c,d,l.entityType]),p=r.useRef(null),m=i||p.current||(h?.length?h.find((e=>"artist"===e.value))?.value??h[0].value:"artist");null!=t&&ft(t?l.entityType>=m:l.entityType<=m);const g=r.useMemo((()=>(0,n.tg)(m,{id:(0,a.c7)(),name:""})),[m]),f=t??l.entityType>m;return yt({...u,hasPreselectedTargetType:null!=i,relationship:{...bt,entity0:f?g:l,entity1:f?l:g,id:(0,lt.A)(null),...s?s():null},releaseHasUnloadedTracks:o,source:l,targetTypeOptions:h,targetTypeRef:p,user:d})}},Fx12dgT:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s("zzNunOx"),r=s("PstwrNQ"),n=s("cGbttel"),a=s("oEgauXb").lp,o=s("HkNzj3j").l,l=s("oEgauXb").l;const c=function(e){let{children:t,field:s,hideHelp:c=!1,...u}=e;const d={};return u.controlled?(d.value=s.value,d.onChange=u.onChange):d.defaultValue=s.value,(0,n.jsxs)("fieldset",{className:"editnote",children:[(0,n.jsx)("legend",{children:a("Edit note","noun")}),c?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:o("Entering an {note|edit note} that describes where you got\n               your information is highly recommended. Not only does it\n               make your sources clear (both now and to users who see the\n               edit years later), but it can also encourage other users\n               to vote on the edit — thus making it get applied faster.",{note:{href:"/doc/Edit_Note",target:"_blank"}})}),(0,n.jsx)("p",{children:o("Even just providing a URL or two is helpful!\n               For more suggestions,\n               see {doc_how_to|our guide for writing good edit notes}.",{doc_how_to:{href:"/doc/How_to_Write_Edit_Notes",target:"_blank"}})})]}),t,(0,n.jsxs)(r.A,{children:[(0,n.jsx)("label",{htmlFor:"edit-note-text",children:l("Edit note:")}),(0,n.jsx)("textarea",{className:"edit-note",cols:80,id:"edit-note-text",name:s.html_name,rows:5,...d}),(0,n.jsx)(i.A,{field:s})]})]})}},GVrEMO1:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("cGbttel"),r=s("8YlDuzw").A;const n=function(e){let{className:t,inputClassName:s,label:n,name:a,value:o}=e;return(0,i.jsx)("span",{className:"buttons"+(r(t)?" "+t:""),children:(0,i.jsx)("button",{className:s,name:a,type:"submit",value:o,children:n})})}},GX9EKLY:(e,t,s)=>{"use strict";s.d(t,{Yi:()=>b,_J:()=>y,A3:()=>w});var i={};s.r(i),s.d(i,{default:()=>d,jedInstance:()=>c,loadDomain:()=>u});var r=s("+oFf+Pk"),n=s.n(r),a=s("qeIRQns"),o=s.n(a);const l=s("mz7fKDE")({en:{domain:"mb_server",locale_data:{attributes:{"":{domain:"attributes",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},countries:{"":{domain:"countries",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},history:{"":{domain:"history",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},instrument_descriptions:{"":{domain:"instrument_descriptions",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},instruments:{"":{domain:"instruments",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},languages:{"":{domain:"languages",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},mb_server:{"":{domain:"mb_server",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},relationships:{"":{domain:"relationships",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},scripts:{"":{domain:"scripts",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}},statistics:{"":{domain:"statistics",lang:"en",plural_forms:"nplurals=2; plural=(n != 1);"}}}},locale:"en"}),c=void 0,u=()=>{},d={},h=/[\r\n]/g,p=/\s+/g;function m(e){return(e||"").replace(h," ").replace(p," ")}let g;if(n())g=i;else{let e=window.__MB__?.jedData;null!=e&&"en"!==e.locale||(e=l),g=new(o())(e[e.locale])}function f(e){null==c||c.options.locale_data[e]||u(e)}function b(e){return function(t){f(e);const s=m(t);return g.dgettext(e,s)}}function y(e){return function(t,s,i){f(e);const r=m(t),n=m(s);return g.dngettext(e,r,n,i)}}function w(e){return function(t,s){f(e);const i=m(t);return g.dpgettext(e,s,i)}}},GXDjtXZ:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const i={annotation:{model:"Annotation",table:"annotation"},area:{add_edit_type:81,aliases:{add_edit_type:86,delete_edit_type:87,edit_edit_type:88,search_hint_type:3},annotations:{edit_type:85},collections:!0,custom_tabs:["artists","events","labels","releases","recordings","places","users","works"],date_period:!0,disambiguation:!0,edit_table:!0,last_updated_column:!0,mbid:{multiple:!0,relatable:"overview"},merging:!0,model:"Area",plural:"areas",plural_url:"areas",removal:{manual:!0},table:"area",tags:!0,type:{simple:!0},url:"area"},area_alias_type:{model:"AreaAliasType",table:"area_alias_type"},area_type:{model:"AreaType",table:"area_type"},artist:{add_edit_type:1,aliases:{add_edit_type:6,delete_edit_type:7,edit_edit_type:8,search_hint_type:3},annotations:{edit_type:5},collections:!0,custom_tabs:["releases","recordings","works","events"],date_period:!0,disambiguation:!0,edit_table:!0,ipis:!0,isnis:!0,last_updated_column:!0,materialized_edit_status:!0,mbid:{indexable:!0,multiple:!0,relatable:"dedicated"},merging:!0,meta_table:!0,model:"Artist",plural:"artists",plural_url:"artists",ratings:!0,removal:{automatic:{exempt:[1,2],extra_fks:{artist_credit_name:"artist"}}},report_filter:!0,reviews:!0,series:!0,sitemaps_lastmod_table:!0,sort_name:!0,subscriptions:{deleted:!0,entity:!0},table:"artist",tags:!0,type:{simple:!0},url:"artist"},artist_alias_type:{model:"ArtistAliasType",table:"artist_alias_type"},artist_credit:{mbid:{multiple:!0},model:"ArtistCredit",table:"artist_credit"},artist_type:{model:"ArtistType",table:"artist_type"},cdstub:{model:"CDStub",table:"release_raw",url:"cdstub"},cdtoc:{model:"CDTOC",table:"cdtoc",url:"cdtoc"},collection:{mbid:{multiple:!0,relatable:!1},model:"Collection",plural:"collections",plural_url:"collections",subscriptions:{entity:!0},table:"editor_collection",type:{simple:!0},url:"collection"},collection_type:{model:"CollectionType",table:"editor_collection_type"},cover_art_type:{model:"CoverArtType",table:"cover_art_archive.art_type"},editor:{last_updated_column:!0,model:"Editor",subscriptions:{entity:!1},table:"editor",url:"user"},event:{add_edit_type:150,aliases:{add_edit_type:155,delete_edit_type:156,edit_edit_type:157,search_hint_type:2},annotations:{edit_type:154},collections:!0,date_period:!0,disambiguation:!0,edit_table:!0,event_art:!0,last_updated_column:!0,mbid:{indexable:!0,multiple:!0,relatable:"overview"},merging:!0,meta_table:!0,model:"Event",plural:"events",plural_url:"events",ratings:!0,removal:{automatic:{}},reviews:!0,series:!0,table:"event",tags:!0,type:{simple:!0},url:"event"},event_alias_type:{model:"EventAliasType",table:"event_alias_type"},event_art_type:{cache:{id:51},model:"EventArtType"},event_type:{model:"EventType",table:"event_type"},gender:{model:"Gender",table:"gender"},genre:{add_edit_type:160,aliases:{add_edit_type:165,delete_edit_type:166,edit_edit_type:167,search_hint_type:2},annotations:{edit_type:164},collections:!0,disambiguation:!0,edit_table:!0,mbid:{indexable:!0,multiple:!1,relatable:"overview"},merging:!1,model:"Genre",plural:"genres",plural_url:"genres",removal:{manual:!0},table:"genre",url:"genre"},genre_alias_type:{model:"GenreAliasType",table:"genre_alias_type"},instrument:{add_edit_type:131,aliases:{add_edit_type:136,delete_edit_type:137,edit_edit_type:138,search_hint_type:2},annotations:{edit_type:135},collections:!0,custom_tabs:["artists","releases","recordings"],disambiguation:!0,edit_table:!0,last_updated_column:!0,mbid:{indexable:!0,multiple:!0,relatable:"overview"},merging:!0,model:"Instrument",plural:"instruments",plural_url:"instruments",removal:{manual:!0},table:"instrument",tags:!0,type:{simple:!0},url:"instrument"},instrument_alias_type:{model:"InstrumentAliasType",table:"instrument_alias_type"},instrument_type:{model:"InstrumentType",table:"instrument_type"},isrc:{model:"ISRC",table:"isrc",url:"isrc"},iswc:{model:"ISWC",table:"iswc",url:"iswc"},label:{add_edit_type:10,aliases:{add_edit_type:16,delete_edit_type:17,edit_edit_type:18,search_hint_type:2},annotations:{edit_type:15},collections:!0,date_period:!0,disambiguation:!0,edit_table:!0,ipis:!0,isnis:!0,last_updated_column:!0,materialized_edit_status:!0,mbid:{indexable:!0,multiple:!0,relatable:"dedicated"},merging:!0,meta_table:!0,model:"Label",plural:"labels",plural_url:"labels",ratings:!0,removal:{automatic:{exempt:[1],extra_fks:{release_label:"label"}}},report_filter:!0,reviews:!0,sitemaps_lastmod_table:!0,subscriptions:{deleted:!0,entity:!0},table:"label",tags:!0,type:{simple:!0},url:"label"},label_alias_type:{model:"LabelAliasType",table:"label_alias_type"},label_type:{model:"LabelType",table:"label_type"},language:{model:"Language",table:"language"},link:{model:"Link",table:"link"},link_attribute_type:{last_updated_column:!0,model:"LinkAttributeType",table:"link_attribute_type"},link_type:{last_updated_column:!0,mbid:{relatable:!1},model:"LinkType",table:"link_type",url:"relationship"},medium:{mbid:{multiple:!0},model:"Medium",table:"medium"},medium_cdtoc:{model:"MediumCDTOC",table:"medium_cdtoc"},medium_format:{model:"MediumFormat",table:"medium_format"},place:{add_edit_type:61,aliases:{add_edit_type:66,delete_edit_type:67,edit_edit_type:68,search_hint_type:2},annotations:{edit_type:65},collections:!0,custom_tabs:["events","performances","map"],date_period:!0,disambiguation:!0,edit_table:!0,last_updated_column:!0,mbid:{indexable:!0,multiple:!0,relatable:"overview"},merging:!0,model:"Place",plural:"places",plural_url:"places",ratings:!0,removal:{automatic:{}},reviews:!0,sitemaps_lastmod_table:!0,table:"place",tags:!0,type:{simple:!0},url:"place"},place_alias_type:{model:"PlaceAliasType",table:"place_alias_type"},place_type:{model:"PlaceType",table:"place_type"},recording:{add_edit_type:71,aliases:{add_edit_type:711,delete_edit_type:712,edit_edit_type:713,search_hint_type:2},annotations:{edit_type:75},artist_credits:!0,collections:!0,custom_tabs:["fingerprints"],disambiguation:!0,edit_table:!0,last_updated_column:!0,mbid:{multiple:!0,relatable:"overview"},merging:!0,meta_table:!0,model:"Recording",plural:"recordings",plural_url:"recordings",ratings:!0,removal:{manual:!0},report_filter:!0,reviews:!0,series:!0,sitemaps_lastmod_table:!0,table:"recording",tags:!0,url:"recording"},recording_alias_type:{model:"RecordingAliasType",table:"recording_alias_type"},release:{add_edit_type:31,aliases:{add_edit_type:318,delete_edit_type:319,edit_edit_type:320,search_hint_type:2},annotations:{edit_type:35},artist_credits:!0,collections:!0,cover_art:!0,disambiguation:!0,edit_table:!0,last_updated_column:!0,mbid:{indexable:!0,multiple:!0,relatable:"overview"},merging:!0,meta_table:!0,model:"Release",plural:"releases",plural_url:"releases",removal:{manual:!0},report_filter:!0,series:!0,sitemaps_lastmod_table:!0,table:"release",tags:!0,url:"release"},release_alias_type:{model:"ReleaseAliasType",table:"release_alias_type"},release_group:{add_edit_type:20,aliases:{add_edit_type:26,delete_edit_type:27,edit_edit_type:28,search_hint_type:2},annotations:{edit_type:25},artist_credits:!0,collections:!0,disambiguation:!0,edit_table:!0,last_updated_column:!0,mbid:{indexable:!0,multiple:!0,relatable:"overview"},merging:!0,meta_table:!0,model:"ReleaseGroup",plural:"release_groups",plural_url:"release-groups",ratings:!0,removal:{automatic:{extra_fks:{release:"release_group"}}},report_filter:!0,reviews:!0,series:!0,sitemaps_lastmod_table:!0,table:"release_group",tags:!0,type:{complex:!0},url:"release-group"},release_group_alias_type:{model:"ReleaseGroupAliasType",table:"release_group_alias_type"},release_group_secondary_type:{model:"ReleaseGroupSecondaryType",table:"release_group_secondary_type"},release_group_type:{model:"ReleaseGroupType",table:"release_group_primary_type"},release_packaging:{model:"ReleasePackaging",table:"release_packaging"},release_status:{model:"ReleaseStatus",table:"release_status"},script:{model:"Script",table:"script"},series:{add_edit_type:140,aliases:{add_edit_type:145,delete_edit_type:146,edit_edit_type:147,search_hint_type:2},annotations:{edit_type:144},collections:!0,disambiguation:!0,edit_table:!0,last_updated_column:!0,mbid:{indexable:!0,multiple:!0,relatable:"overview"},merging:!0,model:"Series",plural:"series",plural_url:"series",removal:{automatic:{}},report_filter:!0,subscriptions:{deleted:!0,entity:!0},table:"series",tags:!0,type:{simple:!0},url:"series"},series_alias_type:{model:"SeriesAliasType",table:"series_alias_type"},series_ordering_type:{model:"SeriesOrderingType",table:"series_ordering_type"},series_type:{model:"SeriesType",table:"series_type"},tag:{model:"Tag",table:"tag"},track:{artist_credits:!0,last_updated_column:!0,mbid:{multiple:!0,relatable:!1},model:"Track",plural:"tracks",plural_url:"tracks",table:"track",url:"track"},url:{edit_table:!0,last_updated_column:!0,mbid:{multiple:!0,no_details:!0,relatable:"overview"},model:"URL",plural:"urls",plural_url:"urls",removal:{automatic:{}},table:"url",url:"url"},work:{add_edit_type:41,aliases:{add_edit_type:46,delete_edit_type:47,edit_edit_type:48,search_hint_type:2},annotations:{edit_type:45},collections:!0,disambiguation:!0,edit_table:!0,last_updated_column:!0,mbid:{indexable:!0,multiple:!0,relatable:"overview"},merging:!0,meta_table:!0,model:"Work",plural:"works",plural_url:"works",ratings:!0,removal:{automatic:{}},report_filter:!0,reviews:!0,series:!0,sitemaps_lastmod_table:!0,table:"work",tags:!0,type:{simple:!0},url:"work"},work_alias_type:{model:"WorkAliasType",table:"work_alias_type"},work_attribute:{model:"WorkAttribute",table:"work_attribute"},work_attribute_type:{model:"WorkAttributeType",table:"work_attribute_type"},work_attribute_type_allowed_value:{model:"WorkAttributeTypeAllowedValue",table:"work_attribute_type_allowed_value"},work_type:{model:"WorkType",table:"work_type"}};s("mz7fKDE")(i);const r=i},Gwrf0XF:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("9azanlh");function r(e){return(t=e._status)===i.jU?"add":t===i.Ar?"edit":t===i.wL?"noop":t===i.QJ?"remove":(()=>{throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})();var t}},"H+29DOL":(e,t,s)=>{"use strict";s.d(t,{A:()=>n,O:()=>a});var i=s("HkNzj3j").l,r=s("SKGBikk").l;function n(e){return i("{variable}:",{variable:e})}function a(e){return r("{variable}:",{variable:e})}},HMcOWk2:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,T:()=>a});var i=s("HkNzj3j").l,r=s("SKGBikk").l;function n(e,t){const s=t.length;if(!s)return"";if(1===s)return e("{last_list_item}",{last_list_item:t[0]});let i=e("{almost_last_list_item} and {last_list_item}",{almost_last_list_item:t[s-2],last_list_item:t[s-1]});for(let r=s-3;r>=0;r--)i=e("{list_item}, {rest}",{list_item:t[r],rest:i});return i}const a=e=>n(r,e),o=e=>n(i,e)},HR1eHg2:(e,t,s)=>{s("vcz4isR"),s("60ocjtt"),s("6g1DHTE"),s("J9/b8hK"),s("70YSc4n"),s("AXfG3Yq"),s("DNaZxvn"),s("PkUg7wA"),s("fVvxGUI");const i=s("EVdnBjI");var r,n;!function(e,t){var s,i,r=0,n=/^ui-id-\d+$/;function a(t,s){var i,r,n,a=t.nodeName.toLowerCase();return"area"===a?(r=(i=t.parentNode).name,!(!t.href||!r||"map"!==i.nodeName.toLowerCase())&&(!!(n=e("img[usemap=#"+r+"]")[0])&&o(n))):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a&&t.href||s)&&o(t)}function o(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter((function(){return"hidden"===e.css(this,"visibility")})).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:(s=e.fn.focus,function(t,i){return"number"==typeof t?this.each((function(){var s=this;setTimeout((function(){e(s).focus(),i&&i.call(s)}),t)})):s.apply(this,arguments)}),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter((function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0):this.parents().filter((function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))})).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(s){if(s!==t)return this.css("zIndex",s);if(this.length)for(var i,r,n=e(this[0]);n.length&&n[0]!==document;){if(("absolute"===(i=n.css("position"))||"relative"===i||"fixed"===i)&&(r=parseInt(n.css("zIndex"),10),!isNaN(r)&&0!==r))return r;n=n.parent()}return 0},uniqueId:function(){return this.each((function(){this.id||(this.id="ui-id-"+ ++r)}))},removeUniqueId:function(){return this.each((function(){n.test(this.id)&&e(this).removeAttr("id")}))}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo((function(t){return function(s){return!!e.data(s,t)}})):function(t,s,i){return!!e.data(t,i[3])},focusable:function(t){return a(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),i=isNaN(s);return(i||s>=0)&&a(t,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],(function(s,i){var r="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};function o(t,s,i,n){return e.each(r,(function(){s-=parseFloat(e.css(t,"padding"+this))||0,i&&(s-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(s-=parseFloat(e.css(t,"margin"+this))||0)})),s}e.fn["inner"+i]=function(s){return s===t?a["inner"+i].call(this):this.each((function(){e(this).css(n,o(this,s)+"px")}))},e.fn["outer"+i]=function(t,s){return"number"!=typeof t?a["outer"+i].call(this,t):this.each((function(){e(this).css(n,o(this,t,!0,s)+"px")}))}})),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=(i=e.fn.removeData,function(t){return arguments.length?i.call(this,e.camelCase(t)):i.call(this)})),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",(function(e){e.preventDefault()}))},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,s,i){var r,n=e.ui[t].prototype;for(r in i)n.plugins[r]=n.plugins[r]||[],n.plugins[r].push([s,i[r]])},call:function(e,t,s){var i,r=e.plugins[t];if(r&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,s)}},hasScroll:function(t,s){if("hidden"===e(t).css("overflow"))return!1;var i,r=s&&"left"===s?"scrollLeft":"scrollTop";return t[r]>0||(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(i),function(e,t){var s=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var s,i=0;null!=(s=t[i]);i++)try{e(s).triggerHandler("remove")}catch(e){}r(t)},e.widget=function(t,s,i){var r,n,a,o,l={},c=t.split(".")[0];t=t.split(".")[1],r=c+"-"+t,i||(i=s,s=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[c]=e[c]||{},n=e[c][t],a=e[c][t]=function(e,t){if(!this._createWidget)return new a(e,t);arguments.length&&this._createWidget(e,t)},e.extend(a,n,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),(o=new s).options=e.widget.extend({},o.options),e.each(i,(function(t,i){var r,n;e.isFunction(i)?l[t]=(r=function(){return s.prototype[t].apply(this,arguments)},n=function(e){return s.prototype[t].apply(this,e)},function(){var e,t=this._super,s=this._superApply;return this._super=r,this._superApply=n,e=i.apply(this,arguments),this._super=t,this._superApply=s,e}):l[t]=i})),a.prototype=e.widget.extend(o,{widgetEventPrefix:n?o.widgetEventPrefix:t},l,{constructor:a,namespace:c,widgetName:t,widgetFullName:r}),n?(e.each(n._childConstructors,(function(t,s){var i=s.prototype;e.widget(i.namespace+"."+i.widgetName,a,s._proto)})),delete n._childConstructors):s._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(s){for(var r,n,a=i.call(arguments,1),o=0,l=a.length;o<l;o++)for(r in a[o])n=a[o][r],Object.hasOwn(a[o],r)&&n!==t&&(e.isPlainObject(n)?s[r]=e.isPlainObject(s[r])?e.widget.extend({},s[r],n):e.widget.extend({},n):s[r]=n);return s},e.widget.bridge=function(s,r){var n=r.prototype.widgetFullName||s;e.fn[s]=function(a){var o="string"==typeof a,l=i.call(arguments,1),c=this;return a=!o&&l.length?e.widget.extend.apply(null,[a].concat(l)):a,o?this.each((function(){var i,r=e.data(this,n);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,l))!==r&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+a+"' for "+s+" widget instance"):e.error("cannot call methods on "+s+" prior to initialization; attempted to call method '"+a+"'")})):this.each((function(){var t=e.data(this,n);t?t.option(a||{})._init():e.data(this,n,new r(a,this))})),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(s,i){var r,n,a,o=s;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof s)if(o={},r=s.split("."),s=r.shift(),r.length){for(n=o[s]=e.widget.extend({},this.options[s]),a=0;a<r.length-1;a++)n[r[a]]=n[r[a]]||{},n=n[r[a]];if(s=r.pop(),i===t)return n[s]===t?null:n[s];n[s]=i}else{if(i===t)return this.options[s]===t?null:this.options[s];o[s]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,s,i){var r,n=this;"boolean"!=typeof t&&(i=s,s=t,t=!1),i?(s=r=e(s),this.bindings=this.bindings.add(s)):(i=s,s=this.element,r=this.widget()),e.each(i,(function(i,a){function o(){if(t||!0!==n.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?n[a]:a).apply(n,arguments)}"string"!=typeof a&&(o.guid=a.guid=a.guid||o.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+n.eventNamespace,u=l[2];u?r.delegate(u,c,o):s.bind(c,o)}))},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){var s=this;return setTimeout((function(){return("string"==typeof e?s[e]:e).apply(s,arguments)}),t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,s,i){var r,n,a=this.options[t];if(i=i||{},(s=e.Event(s)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),s.target=this.element[0],n=s.originalEvent)for(r in n)r in s||(s[r]=n[r]);return this.element.trigger(s,i),!(e.isFunction(a)&&!1===a.apply(this.element[0],[s].concat(i))||s.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},(function(t,s){e.Widget.prototype["_"+t]=function(i,r,n){"string"==typeof r&&(r={effect:r});var a,o=r?!0===r||"number"==typeof r?s:r.effect||s:t;"number"==typeof(r=r||{})&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=n,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[o]?i[t](r):o!==t&&i[o]?i[o](r.duration,r.easing,n):i.queue((function(s){e(this)[t](),n&&n.call(i[0]),s()}))}}))}(i),n=!1,(r=i)(document).mouseup((function(){n=!1})),r.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,(function(t){return e._mouseDown(t)})).bind("click."+this.widgetName,(function(t){if(!0===r.data(t.target,e.widgetName+".preventClickEvent"))return r.removeData(t.target,e.widgetName+".preventClickEvent"),t.stopImmediatePropagation(),!1})),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&r(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,s=1===e.which,i=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&r(e.target).closest(this.options.cancel).length;return!(s&&!i&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout((function(){t.mouseDelayMet=!0}),this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),0):(!0===r.data(e.target,this.widgetName+".preventClickEvent")&&r.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},r(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,0)))}},_mouseMove:function(e){return r.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return r(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&r.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(e){e.ui=e.ui||{};var t,s=Math.max,i=Math.abs,r=Math.round,n=/left|center|right/,a=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,l=/^\w+/,c=/%$/,u=e.fn.position;function d(e,t,s){return[parseFloat(e[0])*(c.test(e[0])?t/100:1),parseFloat(e[1])*(c.test(e[1])?s/100:1)]}function h(t,s){return parseInt(e.css(t,s),10)||0}e.position={scrollbarWidth:function(){if(undefined!==t)return t;var s,i,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),n=r.children()[0];return e("body").append(r),s=n.offsetWidth,r.css("overflow","scroll"),s===(i=n.offsetWidth)&&(i=r[0].clientWidth),r.remove(),t=s-i},getScrollInfo:function(t){var s=t.isWindow?"":t.element.css("overflow-x"),i=t.isWindow?"":t.element.css("overflow-y"),r="scroll"===s||"auto"===s&&t.width<t.element[0].scrollWidth;return{width:"scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var s=e(t||window),i=e.isWindow(s[0]);return{element:s,isWindow:i,offset:s.offset()||{left:0,top:0},scrollLeft:s.scrollLeft(),scrollTop:s.scrollTop(),width:i?s.width():s.outerWidth(),height:i?s.height():s.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return u.apply(this,arguments);t=e.extend({},t);var c,p,m,g,f,b,y,w,v=e(t.of),_=e.position.getWithinInfo(t.within),T=e.position.getScrollInfo(_),k=(t.collision||"flip").split(" "),x={};return b=9===(w=(y=v)[0]).nodeType?{width:y.width(),height:y.height(),offset:{top:0,left:0}}:e.isWindow(w)?{width:y.width(),height:y.height(),offset:{top:y.scrollTop(),left:y.scrollLeft()}}:w.preventDefault?{width:0,height:0,offset:{top:w.pageY,left:w.pageX}}:{width:y.outerWidth(),height:y.outerHeight(),offset:y.offset()},v[0].preventDefault&&(t.at="left top"),p=b.width,m=b.height,g=b.offset,f=e.extend({},g),e.each(["my","at"],(function(){var e,s,i=(t[this]||"").split(" ");1===i.length&&(i=n.test(i[0])?i.concat(["center"]):a.test(i[0])?["center"].concat(i):["center","center"]),i[0]=n.test(i[0])?i[0]:"center",i[1]=a.test(i[1])?i[1]:"center",e=o.exec(i[0]),s=o.exec(i[1]),x[this]=[e?e[0]:0,s?s[0]:0],t[this]=[l.exec(i[0])[0],l.exec(i[1])[0]]})),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?f.left+=p:"center"===t.at[0]&&(f.left+=p/2),"bottom"===t.at[1]?f.top+=m:"center"===t.at[1]&&(f.top+=m/2),c=d(x.at,p,m),f.left+=c[0],f.top+=c[1],this.each((function(){var n,a,o=e(this),l=o.outerWidth(),u=o.outerHeight(),b=h(this,"marginLeft"),y=h(this,"marginTop"),w=l+b+h(this,"marginRight")+T.width,A=u+y+h(this,"marginBottom")+T.height,E=e.extend({},f),I=d(x.my,o.outerWidth(),o.outerHeight());"right"===t.my[0]?E.left-=l:"center"===t.my[0]&&(E.left-=l/2),"bottom"===t.my[1]?E.top-=u:"center"===t.my[1]&&(E.top-=u/2),E.left+=I[0],E.top+=I[1],e.support.offsetFractions||(E.left=r(E.left),E.top=r(E.top)),n={marginLeft:b,marginTop:y},e.each(["left","top"],(function(s,i){e.ui.position[k[s]]&&e.ui.position[k[s]][i](E,{targetWidth:p,targetHeight:m,elemWidth:l,elemHeight:u,collisionPosition:n,collisionWidth:w,collisionHeight:A,offset:[c[0]+I[0],c[1]+I[1]],my:t.my,at:t.at,within:_,elem:o})})),t.using&&(a=function(e){var r=g.left-E.left,n=r+p-l,a=g.top-E.top,c=a+m-u,d={target:{element:v,left:g.left,top:g.top,width:p,height:m},element:{element:o,left:E.left,top:E.top,width:l,height:u},horizontal:n<0?"left":r>0?"right":"center",vertical:c<0?"top":a>0?"bottom":"middle"};p<l&&i(r+n)<p&&(d.horizontal="center"),m<u&&i(a+c)<m&&(d.vertical="middle"),s(i(r),i(n))>s(i(a),i(c))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),o.offset(e.extend(E,{using:a}))}))},e.ui.position={fit:{left:function(e,t){var i,r=t.within,n=r.isWindow?r.scrollLeft:r.offset.left,a=r.width,o=e.left-t.collisionPosition.marginLeft,l=n-o,c=o+t.collisionWidth-a-n;t.collisionWidth>a?l>0&&c<=0?(i=e.left+l+t.collisionWidth-a-n,e.left+=l-i):e.left=c>0&&l<=0?n:l>c?n+a-t.collisionWidth:n:l>0?e.left+=l:c>0?e.left-=c:e.left=s(e.left-o,e.left)},top:function(e,t){var i,r=t.within,n=r.isWindow?r.scrollTop:r.offset.top,a=t.within.height,o=e.top-t.collisionPosition.marginTop,l=n-o,c=o+t.collisionHeight-a-n;t.collisionHeight>a?l>0&&c<=0?(i=e.top+l+t.collisionHeight-a-n,e.top+=l-i):e.top=c>0&&l<=0?n:l>c?n+a-t.collisionHeight:n:l>0?e.top+=l:c>0?e.top-=c:e.top=s(e.top-o,e.top)}},flip:{left:function(e,t){var s,r,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-o-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,m=-2*t.offset[0];u<0?((s=e.left+h+p+m+t.collisionWidth-o-a)<0||s<i(u))&&(e.left+=h+p+m):d>0&&((r=e.left-t.collisionPosition.marginLeft+h+p+m-l)>0||i(r)<d)&&(e.left+=h+p+m)},top:function(e,t){var s,r,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,l=n.isWindow?n.scrollTop:n.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-o-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];u<0?(r=e.top+h+p+m+t.collisionHeight-o-a,e.top+h+p+m>u&&(r<0||r<i(u))&&(e.top+=h+p+m)):d>0&&(s=e.top-t.collisionPosition.marginTop+h+p+m-l,e.top+h+p+m>d&&(s>0||i(s)<d)&&(e.top+=h+p+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,s,i,r,n,a=document.getElementsByTagName("body")[0],o=document.createElement("div");for(n in t=document.createElement(a?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)t.style[n]=i[n];t.appendChild(o),(s=a||document.documentElement).insertBefore(t,s.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",r=e(o).offset().left,e.support.offsetFractions=r>10&&r<11,t.innerHTML="",s.removeChild(t)}()}(i),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var s=this.options;return!(this.helper||s.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===s.iframeFix?"iframe":s.iframeFix).each((function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")})),!0))},_mouseStart:function(t){var s=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,s){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!s){var i=this._uiHash();if(!1===this._trigger("drag",t,i))return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var s=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),(function(){!1!==s._trigger("stop",t)&&s._clear()})):!1!==this._trigger("stop",t)&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each((function(){this.parentNode.removeChild(this)})),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var s=this.options,i=e.isFunction(s.helper)?e(s.helper.apply(this.element[0],[t])):"clone"===s.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===s.appendTo?this.element[0].parentNode:s.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,s,i,r=this.options;r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(i=(s=e(r.containment))[0])&&(t="hidden"!==s.css("overflow"),this.containment=[(parseInt(s.css("borderLeftWidth"),10)||0)+(parseInt(s.css("paddingLeft"),10)||0),(parseInt(s.css("borderTopWidth"),10)||0)+(parseInt(s.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(s.css("borderRightWidth"),10)||0)-(parseInt(s.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(s.css("borderBottomWidth"),10)||0)-(parseInt(s.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=s)):this.containment=r.containment:this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,s){s||(s=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:s.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:s.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(t){var s,i,r,n,a=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),s=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):s=this.containment,t.pageX-this.offset.click.left<s[0]&&(l=s[0]+this.offset.click.left),t.pageY-this.offset.click.top<s[1]&&(c=s[1]+this.offset.click.top),t.pageX-this.offset.click.left>s[2]&&(l=s[2]+this.offset.click.left),t.pageY-this.offset.click.top>s[3]&&(c=s[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=s?r-this.offset.click.top>=s[1]||r-this.offset.click.top>s[3]?r:r-this.offset.click.top>=s[1]?r-a.grid[1]:r+a.grid[1]:r,n=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=s?n-this.offset.click.left>=s[0]||n-this.offset.click.left>s[2]?n:n-this.offset.click.left>=s[0]?n-a.grid[0]:n+a.grid[0]:n)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,s,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[s,i]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,s,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,s){var i=e(this).data("ui-draggable"),r=i.options,n=e.extend({},s,{item:i.element});i.sortables=[],e(r.connectToSortable).each((function(){var s=e.data(this,"ui-sortable");s&&!s.options.disabled&&(i.sortables.push({instance:s,shouldRevert:s.options.revert}),s.refreshPositions(),s._trigger("activate",t,n))}))},stop:function(t,s){var i=e(this).data("ui-draggable"),r=e.extend({},s,{item:i.element});e.each(i.sortables,(function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,r))}))},drag:function(t,s){var i=e(this).data("ui-draggable"),r=this;e.each(i.sortables,(function(){var n=!1,a=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(n=!0,e.each(i.sortables,(function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(a.instance.element[0],this.instance.element[0])&&(n=!1),n}))),n?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return s.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)}))}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),s=e(this).data("ui-draggable").options;t.css("cursor")&&(s._cursor=t.css("cursor")),t.css("cursor",s.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,s){var i=e(s.helper),r=e(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(t,s){var i=e(this).data("ui-draggable").options;i._opacity&&e(s.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var s=e(this).data("ui-draggable"),i=s.options,r=!1;s.scrollParent[0]!==document&&"HTML"!==s.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(s.overflowOffset.top+s.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?s.scrollParent[0].scrollTop=r=s.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-s.overflowOffset.top<i.scrollSensitivity&&(s.scrollParent[0].scrollTop=r=s.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(s.overflowOffset.left+s.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?s.scrollParent[0].scrollLeft=r=s.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-s.overflowOffset.left<i.scrollSensitivity&&(s.scrollParent[0].scrollLeft=r=s.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),!1!==r&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(s,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),s=t.options;t.snapElements=[],e(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each((function(){var s=e(this),i=s.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:s.outerWidth(),height:s.outerHeight(),top:i.top,left:i.left})}))},drag:function(t,s){var i,r,n,a,o,l,c,u,d,h,p=e(this).data("ui-draggable"),m=p.options,g=m.snapTolerance,f=s.offset.left,b=f+p.helperProportions.width,y=s.offset.top,w=y+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)l=(o=p.snapElements[d].left)+p.snapElements[d].width,u=(c=p.snapElements[d].top)+p.snapElements[d].height,b<o-g||f>l+g||w<c-g||y>u+g||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==m.snapMode&&(i=Math.abs(c-w)<=g,r=Math.abs(u-y)<=g,n=Math.abs(o-b)<=g,a=Math.abs(l-f)<=g,i&&(s.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),r&&(s.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),n&&(s.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),a&&(s.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=i||r||n||a,"outer"!==m.snapMode&&(i=Math.abs(c-y)<=g,r=Math.abs(u-w)<=g,n=Math.abs(o-f)<=g,a=Math.abs(l-b)<=g,i&&(s.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),r&&(s.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),n&&(s.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),a&&(s.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(i||r||n||a||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=i||r||n||a||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,s=this.data("ui-draggable").options,i=e.makeArray(e(s.stack)).sort((function(t,s){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(s).css("zIndex"),10)||0)}));i.length&&(t=parseInt(e(i[0]).css("zIndex"),10)||0,e(i).each((function(s){e(this).css("zIndex",t+s)})),this.css("zIndex",t+i.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,s){var i=e(s.helper),r=e(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(t,s){var i=e(this).data("ui-draggable").options;i._zIndex&&e(s.helper).css("zIndex",i._zIndex)}})}(i),function(e){function t(e){return parseInt(e,10)||0}function s(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,s,i,r,n=this,a=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},s=0;s<t.length;s++)i=e.trim(t[s]),(r=e("<div class='ui-resizable-handle "+("ui-resizable-"+i)+"'></div>")).css({zIndex:a.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(t){var s,i,r,n;for(s in t=t||this.element,this.handles)this.handles[s].constructor===String&&(this.handles[s]=e(this.handles[s],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=e(this.handles[s],this.element),n=/sw|ne|nw|se|n|s/.test(s)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(s)?"Top":/se|sw|s/.test(s)?"Bottom":/^e$/.test(s)?"Right":"Left"].join(""),t.css(r,n),this._proportionallyResize()),e(this.handles[s]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover((function(){n.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),n.axis=r&&r[1]?r[1]:"se")})),a.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter((function(){a.disabled||(e(this).removeClass("ui-resizable-autohide"),n._handles.show())})).mouseleave((function(){a.disabled||n.resizing||(e(this).addClass("ui-resizable-autohide"),n._handles.hide())}))),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,s=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(s(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),s(this.originalElement),this},_mouseCapture:function(t){var s,i,r=!1;for(s in this.handles)((i=e(this.handles[s])[0])===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(s){var i,r,n,a=this.options,o=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy(),i=t(this.helper.css("left")),r=t(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,r+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:s.pageX,top:s.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),l.addClass("ui-resizable-resizing"),this._propagate("start",s),!0},_mouseDrag:function(t){var s,i=this.helper,r={},n=this.originalMousePosition,a=this.axis,o=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,d=t.pageX-n.left||0,h=t.pageY-n.top||0,p=this._change[a];return!!p&&(s=p.apply(this,[t,d,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(s=this._updateRatio(s,t)),s=this._respectSize(s,t),this._updateCache(s),this._propagate("resize",t),this.position.top!==o&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==c&&(r.width=this.size.width+"px"),this.size.height!==u&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var s,i,r,n,a,o,l,c=this.options,u=this;return this._helper&&(r=(i=(s=this._proportionallyResizeElements).length&&/textarea/i.test(s[0].nodeName))&&e.ui.hasScroll(s[0],"left")?0:u.sizeDiff.height,n=i?0:u.sizeDiff.width,a={width:u.helper.width()-n,height:u.helper.height()-r},o=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(a,{top:l,left:o})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,r,n,a,o=this.options;a={minWidth:s(o.minWidth)?o.minWidth:0,maxWidth:s(o.maxWidth)?o.maxWidth:1/0,minHeight:s(o.minHeight)?o.minHeight:0,maxHeight:s(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,r=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),r>a.minHeight&&(a.minHeight=r),i<a.maxWidth&&(a.maxWidth=i),n<a.maxHeight&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),s(e.left)&&(this.position.left=e.left),s(e.top)&&(this.position.top=e.top),s(e.height)&&(this.size.height=e.height),s(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,r=this.axis;return s(e.height)?e.width=e.height*this.aspectRatio:s(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,r=s(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=s(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=s(e.width)&&t.minWidth&&t.minWidth>e.width,o=s(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&u&&(e.left=l-t.minWidth),r&&u&&(e.left=l-t.maxWidth),o&&d&&(e.top=c-t.minHeight),n&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,s,i,r,n=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(r=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],s=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],t=0;t<s.length;t++)this.borderDif[t]=(parseInt(s[t],10)||0)+(parseInt(i[t],10)||0);r.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,s=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++s.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var s=this.originalSize;return{left:this.originalPosition.left+t,width:s.width-t}},n:function(e,t,s){var i=this.originalSize;return{top:this.originalPosition.top+s,height:i.height-s}},s:function(e,t,s){return{height:this.originalSize.height+s}},se:function(t,s,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,s,i]))},sw:function(t,s,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,s,i]))},ne:function(t,s,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,s,i]))},nw:function(t,s,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,s,i]))}},_propagate:function(t,s){e.ui.plugin.call(this,t,[s,this.ui()]),"resize"!==t&&this._trigger(t,s,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var s=e(this).data("ui-resizable"),i=s.options,r=s._proportionallyResizeElements,n=r.length&&/textarea/i.test(r[0].nodeName),a=n&&e.ui.hasScroll(r[0],"left")?0:s.sizeDiff.height,o=n?0:s.sizeDiff.width,l={width:s.size.width-o,height:s.size.height-a},c=parseInt(s.element.css("left"),10)+(s.position.left-s.originalPosition.left)||null,u=parseInt(s.element.css("top"),10)+(s.position.top-s.originalPosition.top)||null;s.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(s.element.css("width"),10),height:parseInt(s.element.css("height"),10),top:parseInt(s.element.css("top"),10),left:parseInt(s.element.css("left"),10)};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),s._updateCache(i),s._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var s,i,r,n,a,o,l,c=e(this).data("ui-resizable"),u=c.options,d=c.element,h=u.containment,p=h instanceof e?h.get(0):/parent/.test(h)?d.parent().get(0):h;p&&(c.containerElement=e(p),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(s=e(p),i=[],e(["Top","Right","Left","Bottom"]).each((function(e,r){i[e]=t(s.css("padding"+r))})),c.containerOffset=s.offset(),c.containerPosition=s.position(),c.containerSize={height:s.innerHeight()-i[3],width:s.innerWidth()-i[1]},r=c.containerOffset,n=c.containerSize.height,a=c.containerSize.width,o=e.ui.hasScroll(p,"left")?p.scrollWidth:a,l=e.ui.hasScroll(p)?p.scrollHeight:n,c.parentData={element:p,left:r.left,top:r.top,width:o,height:l}))},resize:function(t){var s,i,r,n,a=e(this).data("ui-resizable"),o=a.options,l=a.containerOffset,c=a.position,u=a._aspectRatio||t.shiftKey,d={top:0,left:0},h=a.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),u&&(a.size.height=a.size.width/a.aspectRatio),a.position.left=o.helper?l.left:0),c.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),u&&(a.size.width=a.size.height*a.aspectRatio),a.position.top=a._helper?l.top:0),a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top,s=Math.abs((a._helper,a.offset.left-d.left+a.sizeDiff.width)),i=Math.abs((a._helper?a.offset.top-d.top:a.offset.top-l.top)+a.sizeDiff.height),r=a.containerElement.get(0)===a.element.parent().get(0),n=/relative|absolute/.test(a.containerElement.css("position")),r&&n&&(s-=a.parentData.left),s+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-s,u&&(a.size.height=a.size.width/a.aspectRatio)),i+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-i,u&&(a.size.width=a.size.height*a.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),s=t.options,i=t.containerOffset,r=t.containerPosition,n=t.containerElement,a=e(t.helper),o=a.offset(),l=a.outerWidth()-t.sizeDiff.width,c=a.outerHeight()-t.sizeDiff.height;t._helper&&!s.animate&&/relative/.test(n.css("position"))&&e(this).css({left:o.left-r.left-i.left,width:l,height:c}),t._helper&&!s.animate&&/static/.test(n.css("position"))&&e(this).css({left:o.left-r.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable").options,s=function(t){e(t).each((function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})}))};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?s(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],s(t.alsoResize)):e.each(t.alsoResize,(function(e){s(e)}))},resize:function(t,s){var i=e(this).data("ui-resizable"),r=i.options,n=i.originalSize,a=i.originalPosition,o={height:i.size.height-n.height||0,width:i.size.width-n.width||0,top:i.position.top-a.top||0,left:i.position.left-a.left||0},l=function(t,i){e(t).each((function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),n={},a=i&&i.length?i:t.parents(s.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,(function(e,t){var s=(r[t]||0)+(o[t]||0);s&&s>=0&&(n[t]=s||null)})),t.css(n)}))};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):e.each(r.alsoResize,(function(e,t){l(e,t)}))},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),s=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof s.ghost?s.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),s=t.options,i=t.size,r=t.originalSize,n=t.originalPosition,a=t.axis,o="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=o[0]||1,c=o[1]||1,u=Math.round((i.width-r.width)/l)*l,d=Math.round((i.height-r.height)/c)*c,h=r.width+u,p=r.height+d,m=s.maxWidth&&s.maxWidth<h,g=s.maxHeight&&s.maxHeight<p,f=s.minWidth&&s.minWidth>h,b=s.minHeight&&s.minHeight>p;s.grid=o,f&&(h+=l),b&&(p+=c),m&&(h-=l),g&&(p-=c),/^(se|s|e)$/.test(a)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(a)?(t.size.width=h,t.size.height=p,t.position.top=n.top-d):/^(sw)$/.test(a)?(t.size.width=h,t.size.height=p,t.position.left=n.left-u):(t.size.width=h,t.size.height=p,t.position.top=n.top-d,t.position.left=n.left-u)}})}(i),function(e){function t(e,t,s){return e>t&&e<t+s}function s(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||s(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,s){"disabled"===t?(this.options[t]=s,this.widget().toggleClass("ui-sortable-disabled",!!s)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,s){var i=null,r=!1,n=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each((function(){if(e.data(this,n.widgetName+"-item")===n)return i=e(this),!1})),e.data(t.target,n.widgetName+"-item")===n&&(i=e(t.target)),!!i&&(!(this.options.handle&&!s&&(e(this.options.handle,i).find("*").addBack().each((function(){this===t.target&&(r=!0)})),!r))&&(this.currentItem=i,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,s,i){var r,n,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(n)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var s,i,r,n,a=this.options,o=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=o=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=o=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),!1!==o&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),s=this.items.length-1;s>=0;s--)if(r=(i=this.items[s]).item[0],(n=this._intersectsWithPointer(i))&&i.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===n?"next":"prev"]()[0]===r||e.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],r))){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,s){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,r=this.placeholder.offset(),n=this.options.axis,a={};n&&"x"!==n||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,(function(){i._clear(t)}))}else this._clear(t,s);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var s=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(s).each((function(){var s=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);s&&i.push((t.key||s[1]+"[]")+"="+(t.key&&t.expression?s[1]:s[2]))})),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var s=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},s.each((function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")})),i},_intersectsWith:function(e){var t=this.positionAbs.left,s=t+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,n=e.left,a=n+e.width,o=e.top,l=o+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||i+c>o&&i+c<l,h="y"===this.options.axis||t+u>n&&t+u<a,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:n<t+this.helperProportions.width/2&&s-this.helperProportions.width/2<a&&o<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var s="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=s&&i,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return!!r&&(this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1))},_intersectsWithSides:function(e){var s=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&i||"left"===n&&!i:r&&("down"===r&&s||"up"===r&&!s)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var s,i,r,n,a=[],o=[],l=this._connectWith();if(l&&t)for(s=l.length-1;s>=0;s--)for(i=(r=e(l[s])).length-1;i>=0;i--)(n=e.data(r[i],this.widgetFullName))&&n!==this&&!n.options.disabled&&o.push([e.isFunction(n.options.items)?n.options.items.call(n.element):e(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n]);for(o.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=o.length-1;s>=0;s--)o[s][0].each((function(){a.push(this)}));return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,(function(e){for(var s=0;s<t.length;s++)if(t[s]===e.item[0])return!1;return!0}))},_refreshItems:function(t){this.items=[],this.containers=[this];var s,i,r,n,a,o,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(s=h.length-1;s>=0;s--)for(i=(r=e(h[s])).length-1;i>=0;i--)(n=e.data(r[i],this.widgetFullName))&&n!==this&&!n.options.disabled&&(d.push([e.isFunction(n.options.items)?n.options.items.call(n.element[0],t,{item:this.currentItem}):e(n.options.items,n.element),n]),this.containers.push(n));for(s=d.length-1;s>=0;s--)for(a=d[s][1],i=0,c=(o=d[s][0]).length;i<c;i++)(l=e(o[i])).data(this.widgetName+"-item",a),u.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var s,i,r,n;for(this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),s=this.items.length-1;s>=0;s--)(i=this.items[s]).instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=r.outerWidth(),i.height=r.outerHeight()),n=r.offset(),i.left=n.left,i.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(s=this.containers.length-1;s>=0;s--)n=this.containers[s].element.offset(),this.containers[s].containerCache.left=n.left,this.containers[s].containerCache.top=n.top,this.containers[s].containerCache.width=this.containers[s].element.outerWidth(),this.containers[s].containerCache.height=this.containers[s].element.outerHeight();return this},_createPlaceholder:function(t){var s,i=(t=t||this).options;i.placeholder&&i.placeholder.constructor!==String||(s=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),r=e("<"+i+">",t.document[0]).addClass(s||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each((function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(r)})):"img"===i&&r.attr("src",t.currentItem.attr("src")),s||r.css("visibility","hidden"),r},update:function(e,r){s&&!i.forcePlaceholderSize||(r.height()||r.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var r,n,a,o,l,c,u,d,h,p,m=null,g=null;for(r=this.containers.length-1;r>=0;r--)if(!e.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(m&&e.contains(this.containers[r].element[0],m.element[0]))continue;m=this.containers[r],g=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",i,this._uiHash(this)),this.containers[r].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",i,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,o=null,l=(p=m.floating||s(this.currentItem))?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],n=this.items.length-1;n>=0;n--)e.contains(this.containers[g].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(p&&!t(this.positionAbs.top+this.offset.click.top,this.items[n].top,this.items[n].height)||(d=this.items[n].item.offset()[l],h=!1,Math.abs(d-u)>Math.abs(d+this.items[n][c]-u)&&(h=!0,d+=this.items[n][c]),Math.abs(d-u)<a&&(a=Math.abs(d-u),o=this.items[n],this.direction=h?"up":"down")));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;o?this._rearrange(i,o,null,!0):this._rearrange(i,null,this.containers[g].element,!0),this._trigger("change",i,this._uiHash()),this.containers[g]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",i,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(t){var s=this.options,i=e.isFunction(s.helper)?e(s.helper.apply(this.element[0],[t,this.currentItem])):"clone"===s.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==s.appendTo?s.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),i[0].style.width&&!s.forceHelperSize||i.width(this.currentItem.width()),i[0].style.height&&!s.forceHelperSize||i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,s,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===r.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===r.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(t=e(r.containment)[0],s=e(r.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[s.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,s.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,s){s||(s=this.position);var i="absolute"===t?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(r[0].tagName);return{top:s.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:r.scrollTop())*i,left:s.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:r.scrollLeft())*i}},_generatePosition:function(t){var s,i,r=this.options,n=t.pageX,a=t.pageY,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(o[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(s=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?s-this.offset.click.top>=this.containment[1]&&s-this.offset.click.top<=this.containment[3]?s:s-this.offset.click.top>=this.containment[1]?s-r.grid[1]:s+r.grid[1]:s,i=this.originalPageX+Math.round((n-this.originalPageX)/r.grid[0])*r.grid[0],n=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:o.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:o.scrollLeft())}},_rearrange:function(e,t,s,i){s?s[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay((function(){r===this.counter&&this.refreshPositions(!i)}))},_clear:function(e,t){this.reverting=!1;var s,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)"auto"!==this._storedCSS[s]&&"static"!==this._storedCSS[s]||(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push((function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))})),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push((function(e){this._trigger("update",e,this._uiHash())})),this!==this.currentContainer&&(t||(i.push((function(e){this._trigger("remove",e,this._uiHash())})),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),s=0;s<i.length;s++)i[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(s=0;s<i.length;s++)i[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var s=t||this;return{helper:s.helper,placeholder:s.placeholder||e([]),position:s.position,originalPosition:s.originalPosition,offset:s.positionAbs,item:s.currentItem,sender:t?t.element:null}}})}(i),function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,s,i,r=this.element[0].nodeName.toLowerCase(),n="textarea"===r,a="input"===r;this.isMultiLine=!!n||!a&&this.element.prop("isContentEditable"),this.valueMethod=this.element[n||a?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(r){if(this.element.prop("readOnly"))return t=!0,i=!0,void(s=!0);t=!1,i=!1,s=!1;var n=e.ui.keyCode;switch(r.keyCode){case n.PAGE_UP:t=!0,this._move("previousPage",r);break;case n.PAGE_DOWN:t=!0,this._move("nextPage",r);break;case n.UP:t=!0,this._keyEvent("previous",r);break;case n.DOWN:t=!0,this._keyEvent("next",r);break;case n.ENTER:case n.NUMPAD_ENTER:this.menu.active&&(t=!0,r.preventDefault(),this.menu.select(r));break;case n.TAB:this.menu.active&&this.menu.select(r);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(r),r.preventDefault());break;default:s=!0,this._searchTimeout(r)}},keypress:function(i){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||i.preventDefault());if(!s){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:this._move("previousPage",i);break;case r.PAGE_DOWN:this._move("nextPage",i);break;case r.UP:this._keyEvent("previous",i);break;case r.DOWN:this._keyEvent("next",i)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay((function(){delete this.cancelBlur}));var s=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay((function(){var t=this;this.document.one("mousedown",(function(i){i.target===t.element[0]||i.target===s||e.contains(s,i.target)||t.close()}))}))},menufocus:function(t,s){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",(function(){e(t.target).trigger(t.originalEvent)}));var i=s.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:i})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(i.value):this.liveRegion.text(i.value)},menuselect:function(e,t){var s=t.item.data("ui-autocomplete-item"),i=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=i,this._delay((function(){this.previous=i,this.selectedItem=s}))),!1!==this._trigger("select",e,{item:s})&&this._value(s.value),this.term=this._value(),this.close(e),this.selectedItem=s}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,s,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(s,i){i(e.ui.autocomplete.filter(t,s.term))}):"string"==typeof this.options.source?(s=this.options.source,this.source=function(t,r){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:s,data:t,dataType:"json",success:function(e){r(e)},error:function(){r([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay((function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))}),this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,s=++t;return function(i){s===t&&e.__response(i),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_suggest:function(t){var s=this.menu.element.empty();this._renderMenu(s,t),this.isNewMenu=!0,this.menu.refresh(),s.show(),this._resizeMenu(),s.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,s){var i=this;e.each(s,(function(e,s){i._renderItemData(t,s)}))},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,s){return e("<li>").append(e("<a>").text(s.label)).appendTo(t)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,s){var i=new RegExp(e.ui.autocomplete.escapeRegex(s),"i");return e.grep(t,(function(e){return i.test(e.label||e.value||e)}))}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(i),function(e){var t,s,i,r,n="ui-button ui-widget ui-state-default ui-corner-all",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",o=function(){var t=e(this);setTimeout((function(){t.find(":ui-button").button("refresh")}),1)},l=function(t){var s=t.name,i=t.form,r=e([]);return s&&(s=s.replace(/'/g,"\\'"),r=i?e(i).find("[name='"+s+"']"):e("[name='"+s+"']",t.ownerDocument).filter((function(){return!this.form}))),r};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,o),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var a=this,c=this.options,u="checkbox"===this.type||"radio"===this.type,d=u?"":"ui-state-active",h="ui-state-focus";null===c.label&&(c.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(n).attr("role","button").bind("mouseenter"+this.eventNamespace,(function(){c.disabled||this===t&&e(this).addClass("ui-state-active")})).bind("mouseleave"+this.eventNamespace,(function(){c.disabled||e(this).removeClass(d)})).bind("click"+this.eventNamespace,(function(e){c.disabled&&(e.preventDefault(),e.stopImmediatePropagation())})),this.element.bind("focus"+this.eventNamespace,(function(){a.buttonElement.addClass(h)})).bind("blur"+this.eventNamespace,(function(){a.buttonElement.removeClass(h)})),u&&(this.element.bind("change"+this.eventNamespace,(function(){r||a.refresh()})),this.buttonElement.bind("mousedown"+this.eventNamespace,(function(e){c.disabled||(r=!1,s=e.pageX,i=e.pageY)})).bind("mouseup"+this.eventNamespace,(function(e){c.disabled||s===e.pageX&&i===e.pageY||(r=!0)}))),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(c.disabled||r)return!1})):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,(function(){if(c.disabled||r)return!1;e(this).addClass("ui-state-active"),a.buttonElement.attr("aria-pressed","true");var t=a.element[0];l(t).not(t).map((function(){return e(this).button("widget")[0]})).removeClass("ui-state-active").attr("aria-pressed","false")})):(this.buttonElement.bind("mousedown"+this.eventNamespace,(function(){if(c.disabled)return!1;e(this).addClass("ui-state-active"),t=this,a.document.one("mouseup",(function(){t=null}))})).bind("mouseup"+this.eventNamespace,(function(){if(c.disabled)return!1;e(this).removeClass("ui-state-active")})).bind("keydown"+this.eventNamespace,(function(t){if(c.disabled)return!1;t.keyCode!==e.ui.keyCode.SPACE&&t.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")})).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,(function(){e(this).removeClass("ui-state-active")})),this.buttonElement.is("a")&&this.buttonElement.keyup((function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()}))),this._setOption("disabled",c.disabled),this._resetButton()},_determineButtonType:function(){var e,t,s;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(s=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",s)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(n+" ui-state-hover ui-state-active  "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t),"disabled"!==e?this._resetButton():t?this.element.prop("disabled",!0):this.element.prop("disabled",!1)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?l(this.element[0]).each((function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")})):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var t=this.buttonElement.removeClass(a),s=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,n=[];i.primary||i.secondary?(this.options.text&&n.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(n.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(s)))):n.push("ui-button-text-only"),t.addClass(n.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map((function(){return e(this).button("widget")[0]})).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(i),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},s={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var s=e(this).css(t).offset().top;s<0&&e(this).css("top",t.top-s)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var s=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,(function(){s._trigger("close",t)})))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var s=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return s&&!t&&this._trigger("focus",e),s},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,(function(){t._focusTabbable(),t._trigger("focus")})),this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function s(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),s.call(this),this._delay(s)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var s=this.uiDialog.find(":tabbable"),i=s.filter(":first"),r=s.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(r.focus(1),t.preventDefault()):(i.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,s=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(s)||e.isArray(s)&&!s.length?this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(s,(function(s,i){var r,n;i=e.isFunction(i)?{click:i,text:s}:i,i=e.extend({type:"button"},i),r=i.click,i.click=function(){r.apply(t.element[0],arguments)},n={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,e("<button></button>",i).button(n).appendTo(t.uiButtonSet)})),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,s=this.options;function i(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,r){e(this).addClass("ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",s,i(r))},drag:function(e,s){t._trigger("drag",e,i(s))},stop:function(r,n){s.position=[n.position.left-t.document.scrollLeft(),n.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",r,i(n))}})},_makeResizable:function(){var t=this,s=this.options,i=s.resizable,r=this.uiDialog.css("position"),n="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";function a(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:n,start:function(s,i){e(this).addClass("ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",s,a(i))},resize:function(e,s){t._trigger("resize",e,a(s))},stop:function(i,r){s.height=e(this).height(),s.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",i,a(r))}}).css("position",r)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(i){var r=this,n=!1,a={};e.each(i,(function(e,i){r._setOption(e,i),e in t&&(n=!0),e in s&&(a[e]=i)})),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,t){var s,i,r=this.uiDialog;"dialogClass"===e&&r.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&((s=r.is(":data(ui-draggable)"))&&!t&&r.draggable("destroy"),!s&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((i=r.is(":data(ui-resizable)"))&&!t&&r.resizable("destroy"),i&&"string"==typeof t&&r.resizable("option","handles",t),i||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,s,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),s="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:s,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map((function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]}))},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,s=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay((function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",(function(i){t._allowInteraction(i)||(i.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(s)._focusTabbable())}))})),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,s=this.options.position,i=[],r=[0,0];s?(("string"==typeof s||"object"==typeof s&&"0"in s)&&(1===(i=s.split?s.split(" "):[s[0],s[1]]).length&&(i[1]=i[0]),e.each(["left","top"],(function(e,t){+i[e]===i[e]&&(r[e]=i[e],i[e]=t)})),s={my:i[0]+(r[0]<0?r[0]:"+"+r[0])+" "+i[1]+(r[1]<0?r[1]:"+"+r[1]),at:i.join(" ")}),s=e.extend({},e.ui.dialog.prototype.options.position,s)):s=e.ui.dialog.prototype.options.position,(t=this.uiDialog.is(":visible"))||this.uiDialog.show(),this.uiDialog.position(s),t||this.uiDialog.hide()}})}(i),function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy((function(e){this.options.disabled&&e.preventDefault()}),this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var s=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&s.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),s.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var s=e(t.currentTarget);s.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,s)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var s=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,s)},blur:function(t){this._delay((function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)}))},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each((function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()})),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var s,i,r,n,a,o=!0;function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,i=this.previousFilter||"",r=String.fromCharCode(t.keyCode),n=!1,clearTimeout(this.filterTimer),r===i?n=!0:r=i+r,a=new RegExp("^"+l(r),"i"),s=this.activeMenu.children(".ui-menu-item").filter((function(){return a.test(e(this).children("a").text())})),(s=n&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s).length||(r=String.fromCharCode(t.keyCode),a=new RegExp("^"+l(r),"i"),s=this.activeMenu.children(".ui-menu-item").filter((function(){return a.test(e(this).children("a").text())}))),s.length?(this.focus(t,s),s.length>1?(this.previousFilter=r,this.filterTimer=this._delay((function(){delete this.previousFilter}),1e3)):delete this.previousFilter):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,s=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each((function(){var t=e(this),i=t.prev("a"),r=e("<span>").addClass("ui-menu-icon ui-icon "+s).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r),t.attr("aria-labelledby",i.attr("id"))})),(t=i.add(this.element)).children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each((function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")})),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var s,i;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay((function(){this._close()}),this.delay),(s=t.children(".ui-menu")).length&&/^mouse/.test(e.type)&&this._startOpening(s),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var s,i,r,n,a,o;this._hasScroll()&&(s=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-s-i,n=this.activeMenu.scrollTop(),a=this.activeMenu.height(),o=t.height(),r<0?this.activeMenu.scrollTop(n+r):r+o>a&&this.activeMenu.scrollTop(n+r-a+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay((function(){this._close(),this._open(e)}),this.delay))},_open:function(t){var s=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(s)},collapseAll:function(t,s){clearTimeout(this.timer),this.timer=this._delay((function(){var i=s?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this.activeMenu=i}),this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay((function(){this.focus(e,t)})))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,s){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(s,i)},nextPage:function(t){var s,i,r;this.active?this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each((function(){return(s=e(this)).offset().top-i-r<0})),this.focus(t,s)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(t)},previousPage:function(t){var s,i,r;this.active?this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each((function(){return(s=e(this)).offset().top-i+r>0})),this.focus(t,s)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())):this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var s={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,s)}})}(i),function(e,t){var s=0,i=/#.*$/;function r(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(i,""))===decodeURIComponent(location.href.replace(i,""))}e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,s=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",s.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,(function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()})).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,(function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()})),this._processTabs(),s.active=this._initialActive(),e.isArray(s.disabled)&&(s.disabled=e.unique(s.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),(function(e){return t.tabs.index(e)})))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(s.active):this.active=e(),this._refresh(),this.active.length&&this.load(s.active)},_initialActive:function(){var t=this.options.active,s=this.options.collapsible,i=location.hash.substring(1);return null===t&&(i&&this.tabs.each((function(s,r){if(e(r).attr("aria-controls")===i)return t=s,!1})),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!s&&0),!s&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var s=e(this.document[0].activeElement).closest("li"),i=this.tabs.index(s),r=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:i++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=!1,i--;break;case e.ui.keyCode.END:i=this.anchors.length-1;break;case e.ui.keyCode.HOME:i=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(i!==this.options.active&&i);default:return}t.preventDefault(),clearTimeout(this.activating),i=this._focusNextTab(i,r),t.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay((function(){this.option("active",i)}),this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,s){var i=this.tabs.length-1;for(;-1!==e.inArray((t>i&&(t=0),t<0&&(t=i),t),this.options.disabled);)t=s?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){"active"!==e?"disabled"!==e?(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),"heightStyle"===e&&this._setupHeightStyle(t)):this._setupDisabled(t):this._activate(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+ ++s},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,s=this.tablist.children(":has(a[href])");t.disabled=e.map(s.filter(".ui-state-disabled"),(function(e){return s.index(e)})),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map((function(){return e("a",this)[0]})).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each((function(s,i){var n,a,o,l=e(i).uniqueId().attr("id"),c=e(i).closest("li"),u=c.attr("aria-controls");r(i)?(n=i.hash,a=t.element.find(t._sanitizeSelector(n))):(n="#"+(o=t._tabId(c)),(a=t.element.find(n)).length||(a=t._createPanel(o)).insertAfter(t.panels[s-1]||t.tablist),a.attr("aria-live","polite")),a.length&&(t.panels=t.panels.add(a)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":n.substring(1),"aria-labelledby":l}),a.attr("aria-labelledby",l)})),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var s,i=0;s=this.tabs[i];i++)!0===t||-1!==e.inArray(i,t)?e(s).addClass("ui-state-disabled").attr("aria-disabled","true"):e(s).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var s={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),(function(e,t){s[t]="_eventHandler"})),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,s),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var s,i=this.element.parent();"fill"===t?(s=i.height(),s-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each((function(){var t=e(this),i=t.css("position");"absolute"!==i&&"fixed"!==i&&(s-=t.outerHeight(!0))})),this.element.children().not(this.panels).each((function(){s-=e(this).outerHeight(!0)})),this.panels.each((function(){e(this).height(Math.max(0,s-e(this).innerHeight()+e(this).height()))})).css("overflow","auto")):"auto"===t&&(s=0,this.panels.each((function(){s=Math.max(s,e(this).height("").height())})).height(s))},_eventHandler:function(t){var s=this.options,i=this.active,r=e(t.currentTarget).closest("li"),n=r[0]===i[0],a=n&&s.collapsible,o=a?e():this._getPanelForTab(r),l=i.length?this._getPanelForTab(i):e(),c={oldTab:i,oldPanel:l,newTab:a?e():r,newPanel:o};t.preventDefault(),r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||n&&!s.collapsible||!1===this._trigger("beforeActivate",t,c)||(s.active=!a&&this.tabs.index(r),this.active=n?e():r,this.xhr&&this.xhr.abort(),l.length||o.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(r),t),this._toggle(t,c))},_toggle:function(t,s){var i=this,r=s.newPanel,n=s.oldPanel;function a(){i.running=!1,i._trigger("activate",t,s)}function o(){s.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&i.options.show?i._show(r,i.options.show,a):(r.show(),a())}this.running=!0,n.length&&this.options.hide?this._hide(n,this.options.hide,(function(){s.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()})):(s.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n.hide(),o()),n.attr({"aria-expanded":"false","aria-hidden":"true"}),s.oldTab.attr("aria-selected","false"),r.length&&n.length?s.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter((function(){return 0===e(this).attr("tabIndex")})).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),s.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var s,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),s=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:s,currentTarget:s,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each((function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")})),this.tabs.each((function(){var t=e(this),s=t.data("ui-tabs-aria-controls");s?t.attr("aria-controls",s).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")})),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(s){var i=this.options.disabled;!1!==i&&(s===t?i=!1:(s=this._getIndex(s),i=e.isArray(i)?e.map(i,(function(e){return e!==s?e:null})):e.map(this.tabs,(function(e,t){return t!==s?t:null}))),this._setupDisabled(i))},disable:function(s){var i=this.options.disabled;if(!0!==i){if(s===t)i=!0;else{if(s=this._getIndex(s),-1!==e.inArray(s,i))return;i=e.isArray(i)?e.merge([s],i).sort():[s]}this._setupDisabled(i)}},load:function(t,s){t=this._getIndex(t);var i=this,n=this.tabs.eq(t),a=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),l={tab:n,panel:o};r(a[0])||(this.xhr=e.ajax(this._ajaxSettings(a,s,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.success((function(e){setTimeout((function(){o.html(e),i._trigger("load",s,l)}),1)})).complete((function(e,t){setTimeout((function(){"abort"===t&&i.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===i.xhr&&delete i.xhr}),1)}))))},_ajaxSettings:function(t,s,i){var r=this;return{url:t.attr("href"),beforeSend:function(t,n){return r._trigger("beforeLoad",s,e.extend({jqXHR:t,ajaxSettings:n},i))}}},_getPanelForTab:function(t){var s=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+s))}})}(i),function(e){var t=0;e.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,s){var i=this;if("disabled"===t)return this[s?"_disable":"_enable"](),void(this.options[t]=s);this._super(t,s),"content"===t&&e.each(this.tooltips,(function(e,t){i._updateContent(t)}))},_disable:function(){var t=this;e.each(this.tooltips,(function(s,i){var r=e.Event("blur");r.target=r.currentTarget=i[0],t.close(r,!0)})),this.element.find(this.options.items).addBack().each((function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")}))},_enable:function(){this.element.find(this.options.items).addBack().each((function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}))},open:function(t){var s=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each((function(){var t,i=e(this);i.data("ui-tooltip-open")&&((t=e.Event("blur")).target=t.currentTarget=this,s.close(t,!0)),i.attr("title")&&(i.uniqueId(),s.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))})),this._updateContent(i,t))},_updateContent:function(e,t){var s,i=this.options.content,r=this,n=t?t.type:null;if("string"==typeof i)return this._open(t,e,i);(s=i.call(e[0],(function(s){e.data("ui-tooltip-open")&&r._delay((function(){t&&(t.type=n),this._open(t,e,s)}))})))&&this._open(t,e,s)},_open:function(t,s,i){var r,n,a,o,l,c,u=e.extend({},this.options.position);i&&((r=this._find(s)).length?r.find(".ui-tooltip-content").html(i):(s.is("[title]")&&(t&&"mouseover"===t.type?s.attr("title",""):s.removeAttr("title")),r=this._tooltip(s),o=s,l=r.attr("id"),(c=(o.attr("aria-describedby")||"").split(/\s+/)).push(l),o.data("ui-tooltip-id",l).attr("aria-describedby",e.trim(c.join(" "))),r.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:d}),d(t)):r.position(e.extend({of:s},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval((function(){r.is(":visible")&&(d(u.of),clearInterval(a))}),e.fx.interval)),this._trigger("open",t,{tooltip:r}),n={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(r)}},t&&"mouseover"!==t.type||(n.mouseleave="close"),t&&"focusin"!==t.type||(n.focusout="close"),this._on(!0,s,n)));function d(e){u.of=e,r.is(":hidden")||r.position(u)}},close:function(t){var s,i,r,n,a=this,o=e(t?t.currentTarget:this.element),l=this._find(o);this.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&o.attr("title",o.data("ui-tooltip-title")),i=(s=o).data("ui-tooltip-id"),r=(s.attr("aria-describedby")||"").split(/\s+/),-1!==(n=e.inArray(i,r))&&r.splice(n,1),s.removeData("ui-tooltip-id"),(r=e.trim(r.join(" ")))?s.attr("aria-describedby",r):s.removeAttr("aria-describedby"),l.stop(!0),this._hide(l,this.options.hide,(function(){a._removeTooltip(e(this))})),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,(function(t,s){e(s.element).attr("title",s.title),delete a.parents[t]})),this.closing=!0,this._trigger("close",t,{tooltip:l}),this.closing=!1)},_tooltip:function(s){var i="ui-tooltip-"+t++,r=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(r),r.appendTo(this.document[0].body),this.tooltips[i]=s,r},_find:function(t){var s=t.data("ui-tooltip-id");return s?e("#"+s):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,(function(s,i){var r=e.Event("blur");r.target=r.currentTarget=i[0],t.close(r,!0),e("#"+s).remove(),i.data("ui-tooltip-title")&&(i.attr("title",i.data("ui-tooltip-title")),i.removeData("ui-tooltip-title"))}))}})}(i)},"HfEq/qN":(e,t,s)=>{"use strict";s.d(t,{go:()=>a,Lr:()=>l,HI:()=>d});var i=s("AsUdLGK");function r(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{return e()}catch(e){console.error(e),t&&(0,i.Cp)(e)}}let n=!1,a=!1;try{n="object"==typeof window.localStorage&&null!=window.localStorage,a="object"==typeof window.sessionStorage&&null!=window.sessionStorage}catch(e){}const o={};function l(e,t){if(!(arguments.length>1)){if(n){let t;try{t=window.localStorage.getItem(e)}catch(e){}if(void 0!==t)return t}return o[e]}if(null!=t){let s=!1;if(n)try{window.localStorage.setItem(e,t),s=!0}catch(e){}s||(o[e]=t)}}const c=[/^submittedLinks_/,/^relationshipEditorChanges_/],u=new Map,d=a?{get:e=>r((()=>u.has(e)?u.get(e):sessionStorage.getItem(e)),!1),remove:e=>r((()=>sessionStorage.removeItem(e)),!1),set:(e,t)=>r((()=>sessionStorage.setItem(e,String(t))),!1)}:{get(){},remove(){},set(){}};a&&r((()=>{for(const e of Object.keys(sessionStorage))c.some((t=>t.test(e)))&&(u.set(e,String(sessionStorage.getItem(e))),sessionStorage.removeItem(e))}),!0)},HkNzj3j:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>W,HG:()=>H,JL:()=>T,l:()=>M,lp:()=>B});s("60ocjtt");var i=s("ktc5u1E"),r=s.n(i),n=s("smZuR9W"),a=s("oEgauXb"),o=s("Uv+krL7"),l=(s("gm/df1j"),s("cGbttel")),c=s("8YlDuzw").I;const u=/^[^<>{}]+/,d=/^[^<>{}|]+/,h=/(%)/,p=/^\{([0-9A-z_]+)\|/,m=/^<(?=[a-z])/,g=/^(a|abbr|bdi|br|code|em|h1|h2|h3|h4|h5|h6|hr|li|ol|p|span|strong|ul)(?=[\s/>])/,f=/^>/,b=/^\s*\/>/,y=/^\s+(?=[a-z])/,w=/^(class|href|id|key|rel|target|title)="/,v=/^(?:\/|https?:\/\/|ircs?:\/\/)/;function _(e){let t=e;return"string"==typeof o.wk.replacement&&(t=e.replace(/%/g,r().encode(o.wk.replacement))),r().decode(t)}const T={reactTextContentHook:null};function k(e){const t=o.wk.replacement,s=T.reactTextContentHook;let i;if((0,o.C9)(t)&&h.test(e)){const s=e.split(h),n=[];for(let e=0;e<s.length;e++){const i=s[e];if("%"===i)if(Array.isArray(t))for(let e=0;e<t.length;e++)n.push(t[e]);else n.push(t);else n.push(r().decode(i))}i="string"==typeof t?n.join(""):n}else i=r().decode(e);return s?s(i):i}const x=(0,o.Sc)(u,k),A=(0,o.OA)(o.Dh),E=(0,o.fP)((function(e){const t=(0,o.Ju)(p);if("string"!=typeof t)return o.sY;const s=U(e);if(!(0,o.C9)((0,o.Ju)(o.$8)))throw(0,o.z3)("expected }");if(e.has(t)){let i=e.get(t);if("string"==typeof i&&(i={href:i}),null==i||"object"!=typeof i||Array.isArray(i)||c(i.href))throw(0,o.z3)("bad link props");return(0,l.jsx)("a",{...i,children:s},e.getKey("a"))}return o.wk.match}));function I(e,t){const s=e.length-1;return s>=0&&"string"==typeof t&&"string"==typeof e[s]?e[s]+=t:e.push(t),e}function N(e,t){let s=e;if((0,o.C9)(s)||(s=[]),Array.isArray(t))for(let e=0;e<t.length;e++)I(s,t[e]);else I(s,t);return s}function j(e,t){return(0,o.bo)(e,t,N,[])}const S=(0,o.Ne)((e=>(0,o.WX)(C,e)),(e=>(0,o.WX)(R,e))),C=[(0,o.Sc)(d,_),o.Zb,S],R=[(0,o.Sc)(u,_),o.Zb,S],L=[(0,o.Sc)(/^[^{}"]+/,_),o.Zb,S];const P=[function(e){if(!(0,o.C9)((0,o.Ju)(y)))return o.sY;let t=(0,o.Ju)(w);if("string"!=typeof t)throw(0,o.z3)("bad HTML attribute");"class"===t&&(t="className");const s=(e=>(0,o.WX)(L,e))(e);if(!(0,o.C9)((0,o.Ju)(/^"/)))throw(0,o.z3)('expected "');if("href"===t&&!v.test(s))throw(0,o.z3)("bad href value");const i={};return i[t]=s,i}];function $(e){if(!(0,o.C9)((0,o.Ju)(m)))return o.sY;const t=(0,o.Ju)(g);if("string"!=typeof t)throw(0,o.z3)("bad HTML tag");const s=j(P,e),i=Object.assign({},...s);if((0,o.C9)((0,o.Ju)(b)))return(0,n.createElement)(t,{...i,key:e.getKey(t)});if(!(0,o.C9)((0,o.Ju)(f)))throw(0,o.z3)("expected >");const r=U(e);if(!(0,o.C9)((0,o.Ju)(new RegExp("^</"+t+">"))))throw(0,o.z3)("expected </"+t+">");return(0,n.createElement)(t,{...i,key:e.getKey(t)},r)}const D=(0,o.Ne)((e=>j(O,e)),(e=>j(z,e))),O=[(0,o.Sc)(d,k),A,E,D,$],z=[x,A,E,D,$],Y=[x,A,E,D,$],U=e=>j(Y,e);function W(e,t){return H(e,t?new o.FP(t):null)}function H(e,t){const s=(0,o.Ay)(U,e,t);return Array.isArray(s)?s.length?s.length>1?s:s[0]:"":s}const M=(e,t)=>W((0,a.l)(e),t),B=(e,t,s)=>W((0,a.lp)(e,t),s)},IIDwFGn:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("nHYa21o");function r(e){if(null==e)return null;const t=(0,i.A)(String(e));return isNaN(t)?null:t}},IX2y8RG:(e,t,s)=>{"use strict";s.d(t,{A:()=>W,U:()=>Y});s("60ocjtt"),s("TWjsZtY"),s("6g1DHTE"),s("DNaZxvn");var i=s("smZuR9W"),r=s("KmaOXyL"),n=s("LCA85s6"),a=s("oEgauXb"),o=s("TZv5lnH"),l=s("RJljx4W"),c=s("MVH16Az"),u=s("UjtI3Zv"),d=s("EdqsaKW"),h=s("xNKEMJr"),p=s("uFqCnKH"),m=s("yUJAgX5"),g=s("genvjY3"),f=s("Vg37ZR/"),b=s("ZKqpbui"),y=s("cGbttel"),w=s("8YlDuzw").A,v=s("oEgauXb").l,_=s("8YlDuzw").I,T=s("ahVNJfT").Xk,k=s("H+29DOL").O,x=s("oEgauXb").lp,A=s("XhfEA1D").ZC,E=s("SKGBikk").l;const I=/[^\u0000-\u02ff\u1E00-\u1EFF\u2000-\u207F]/;function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"comment";return(0,y.jsx)("span",{className:`autocomplete-${t}`,children:e})}function j(e){return w(e)?N((0,h.x)(e)):null}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"comment";return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("br",{}),N(e,t)]})}function C(e,t){const s=function(e){return(0,a.WQ)(e.name)}(e),i=[];return w(e.primaryAlias)&&e.primaryAlias!==s&&i.push((0,y.jsx)("i",{title:v("Primary alias"),children:e.primaryAlias},"primary-alias")),w(e.comment)&&i.push(e.comment),t&&t(i),(0,y.jsxs)(y.Fragment,{children:[s,i.length?N((0,h.A)((0,o.A)(i))):null]})}function R(e){const t=e.sort_name;let s;const i=[];var r;return t&&t!==e.name&&_(e.primaryAlias)&&(r=e.name,I.test(r))&&(s=e=>{e.unshift((0,y.jsx)("i",{title:v("Sort name"),children:t},"sort-name"))}),w(e.typeName)&&i.push(T(e.typeName,"artist_type")),((0,f.Z)(e.begin_date)||(0,f.Z)(e.end_date))&&i.push((0,m.A)(e)),(0,y.jsxs)(y.Fragment,{children:[C(e,s),i.length?S((0,o.n)(i)):null]})}function L(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"comment";return S(k(e)+" "+(0,o.n)(t),s)}function P(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"comment";if(t&&t.hits>0){let i=t.results;return t.hits>i.length&&(i=i.concat(v("…"))),L(e,i,s)}return null}const $=e=>e.name;function D(e,t){const s=e.containment;s&&s.length&&t.push(...s.map($))}function O(e){if(w(e)){const t=document.createElement("div");return t.innerHTML=e,t.textContent}return e}function z(e,t){const s=[];let i;return w(e.typeName)&&s.push(T(e.typeName,"instrument_type")),!1!==t&&(i=O(e.description?A(e.description):null)),(0,y.jsxs)(y.Fragment,{children:[C(e,(e=>{e.push(...s)})),w(i)?S(i):null]})}function Y(e){if(!_(e.description)){let t=e.l_link_phrase,s=e.l_reverse_link_phrase;if(!_(t)&&!_(s))return t=(0,r.Av)(e,t),s=(0,r.Av)(e,s),t===s?t:E("{forward_link_phrase} / {backward_link_phrase}",{backward_link_phrase:s,forward_link_phrase:t})}return e.l_name??e.name}function U(e){const t=(0,p.A)(e.date),s=e.country,r=s?(0,y.jsx)(b.A,{country:s}):null;return(0,y.jsxs)(i.Fragment,{children:[(0,y.jsx)("br",{}),(0,y.jsxs)("span",{className:"autocomplete-comment",children:[t,t?" ":"",t?(0,h.A)(r):r]})]},(s?s.id:"")+","+t)}function W(e,t){{const s=e;if(("object"==typeof s&&null!==s||"function"==typeof s)&&("action"===s.type||"header"===s.type)&&"name"in s){const e=s.name;return(0,a.WQ)(e)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"option"===s.type&&"entity"in s){return(s=>{if(("object"==typeof s&&null!==s||"function"==typeof s)&&"area"===s.entityType){return function(e){const t=[];return w(e.typeName)&&t.push(T(e.typeName,"area_type")),D(e,t),(0,y.jsxs)(y.Fragment,{children:[e.name,j(e.comment),S((0,o.n)(t))]})}(s)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"artist"===s.entityType){return R(s)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"event"===s.entityType){return i=s,(0,y.jsxs)(y.Fragment,{children:[C(i),w(i.typeName)?(0,y.jsxs)(y.Fragment,{children:[" ",N((0,h.x)(T(i.typeName,"event_type")))]}):null,i.begin_date||i.time?S((i.begin_date?(0,m.A)(i)+" ":"")+(i.time||"")):null,P(v("Performers"),i.related_entities?.performers),P(x("Location","event location"),i.related_entities?.places)]})}var i,r,p;if(("object"==typeof s&&null!==s||"function"==typeof s)&&"genre"===s.entityType){return C(s)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"instrument"===s.entityType){return z(s,t?.showDescriptions)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"label"===s.entityType){return function(e){const t=[];return w(e.typeName)&&t.push(T(e.typeName,"label_type")),((0,f.Z)(e.begin_date)||(0,f.Z)(e.end_date))&&t.push((0,m.A)(e)),(0,y.jsxs)(y.Fragment,{children:[C(e),t.length?S((0,o.n)(t)):null]})}(s)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"link_attribute_type"===s.entityType){return function(e,t){if(e.root_id===n.INSTRUMENT_ROOT_ID)return z({comment:e.instrument_comment??"",description:e.description,editsPending:!1,entityType:"instrument",gid:e.gid,id:0,last_updated:null,name:e.name,typeID:e.instrument_type_id??null,typeName:e.instrument_type_name},t);let s;return!1!==t&&(s=O((0,c.A)(e))),(0,y.jsxs)(y.Fragment,{children:[(0,u.A)(e),w(s)?S(s):null]})}(s,t?.showDescriptions)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"link_type"===s.entityType){return function(e,t){const s=O(e.l_description),i=_(s),r=Y(e);return(0,y.jsxs)(y.Fragment,{children:[r,i||!0!==t?null:S(s)]})}(s,t?.showDescriptions)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"place"===s.entityType){return function(e){const t=[];w(e.typeName)&&t.push(T(e.typeName,"place_type"));const s=e.area;return s&&(t.push(s.name),D(s,t)),(0,y.jsxs)(y.Fragment,{children:[C(e),S((0,o.n)(t))]})}(s)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"recording"===s.entityType){return function(e){const t=e.appearsOn;return(0,y.jsxs)(y.Fragment,{children:[e.video?(0,y.jsx)("span",{className:"video",title:v("This recording is a video")}):null,e.name,j(e.comment),e.length?N((0,g.A)(e.length),"length"):null,w(e.artist)?S(E("by {artist}",{artist:e.artist})):null,t?t.hits>0?P(v("appears on"),{hits:t.hits,results:t.results.map($)},"appears"):S(v("standalone recording"),"appears"):null,e.isrcs&&e.isrcs.length?L(v("ISRCs"),e.isrcs.map((e=>e.isrc)),"isrcs"):null]})}(s)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"release"===s.entityType){return function(e){const t=e.labels,s=[];if(t){const e=new Map;for(const s of t){const t=s.label?s.label.name:"";let i=e.get(t);i||(i=[],e.set(t,i)),w(s.catalogNumber)&&i.push(s.catalogNumber)}for(const[t,i]of e){i.sort();const e=i.length?i.length>2?E("{first_list_item} … {last_list_item}",{first_list_item:i[0],last_list_item:i[i.length-1]}):(0,o.n)(i):null;s.push(S((0,y.jsxs)(y.Fragment,{children:[t,t?" "+(0,h.x)(e):e]})))}}return(0,y.jsxs)(y.Fragment,{children:[C(e),S((0,d.R2)(e.artistCredit)),e.events?e.events.map(U):null,s,w(e.barcode)?S(e.barcode):""]})}(s)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"release_group"===s.entityType){return r=s,(0,y.jsxs)(y.Fragment,{children:[r.name,j(r.firstReleaseDate),j(r.comment),w(r.l_type_name)?S(E("{release_group_type} by {artist}",{artist:r.artist,release_group_type:r.l_type_name})):S(E("Release group by {artist}",{artist:r.artist}))]})}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"series"===s.entityType){return p=s,(0,y.jsxs)(y.Fragment,{children:[p.name,j(p.comment),p.type?N((0,h.x)(T(p.type.name,"series_type"))):null]})}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"work"===s.entityType){return function(e){const t=e.languages,s=e.typeName;return(0,y.jsxs)(y.Fragment,{children:[t&&t.length?N((0,o.n)(t.map((e=>(0,l.A)(e.language,!0)))),"language"):null,C(e),w(s)?S(k(v("Type"))+" "+T(s,"work_type")):null,e.artists?(0,y.jsxs)(y.Fragment,{children:[P(v("Authors"),e.related_artists?.authors),P(v("Artists"),e.related_artists?.artists)]}):null]})}(s)}return(0,a.WQ)(e.name)})(s.entity)}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s)}}},Imk573c:(e,t,s)=>{"use strict";function i(e,t){return"area"===e?n(t):"artist"===e?a(t):"event"===e?function(e){return{areas:[],begin_date:null,cancelled:!1,comment:"",editsPending:!1,end_date:null,ended:!1,entityType:"event",event_art_presence:"absent",gid:"",id:0,last_updated:null,name:"",performers:[],places:[],related_series:[],time:"",typeID:null,...e}}(t):"genre"===e?function(e){return{comment:"",editsPending:!1,entityType:"genre",gid:"",id:0,last_updated:null,name:"",...e}}(t):"instrument"===e?function(e){return{comment:"",description:"",editsPending:!1,entityType:"instrument",gid:"",id:0,last_updated:null,name:"",typeID:null,...e}}(t):"label"===e?function(e){return{area:null,begin_date:null,comment:"",editsPending:!1,end_date:null,ended:!1,entityType:"label",gid:"",id:0,ipi_codes:[],isni_codes:[],label_code:0,last_updated:null,name:"",typeID:null,...e}}(t):"place"===e?function(e){return{address:"",area:null,begin_date:null,comment:"",coordinates:null,editsPending:!1,end_date:null,ended:!1,entityType:"place",gid:"",id:0,last_updated:null,name:"",typeID:null,...e}}(t):"recording"===e?o(t):"release"===e?function(e){return{artist:"",artistCredit:{names:[]},barcode:null,comment:"",cover_art_presence:"absent",editsPending:!1,entityType:"release",gid:"",has_no_tracks:!0,id:0,language:null,languageID:null,last_updated:null,length:0,name:"",packagingID:null,quality:0,script:null,scriptID:null,status:null,statusID:null,...e}}(t):"release_group"===e?function(e){return{artist:"",artistCredit:{names:[]},comment:"",editsPending:!1,entityType:"release_group",firstReleaseDate:null,gid:"",hasCoverArt:!1,id:0,l_type_name:null,last_updated:null,name:"",release_count:0,review_count:0,secondaryTypeIDs:[],typeID:null,typeName:"",...e}}(t):"series"===e?l(t):"work"===e?u(t):(()=>{throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function r(e,t){return(e=>{if("url"===e)return c(t);return i(e,t)})(e)}function n(e){return{begin_date:null,comment:"",containment:null,country_code:"",editsPending:!1,end_date:null,ended:!1,entityType:"area",gid:"",id:0,iso_3166_1_codes:[],iso_3166_2_codes:[],iso_3166_3_codes:[],last_updated:null,name:"",primary_code:"",typeID:null,...e}}function a(e){return{area:null,begin_area:null,begin_area_id:null,begin_date:null,comment:"",editsPending:!1,end_area:null,end_area_id:null,end_date:null,ended:!1,entityType:"artist",gender:null,gender_id:null,gid:"",id:0,ipi_codes:[],isni_codes:[],last_updated:null,name:"",sort_name:"",typeID:null,...e}}function o(e){return{artistCredit:{names:[]},comment:"",editsPending:!1,entityType:"recording",gid:"",id:0,isrcs:[],last_updated:null,length:0,name:"",related_works:[],video:!1,...e}}function l(e){return{comment:"",editsPending:!1,entityType:"series",gid:"",id:0,last_updated:null,name:"",orderingTypeID:1,typeID:null,...e}}function c(e){return{decoded:"",editsPending:!1,entityType:"url",gid:"",href_url:"",id:0,last_updated:null,name:"",pretty_name:"",...e}}function u(e){return{artists:[],attributes:[],authors:[],comment:"",editsPending:!1,entityType:"work",gid:"",id:0,iswcs:[],languages:[],last_updated:null,name:"",other_artists:[],typeID:null,...e}}s.d(t,{L$:()=>a,XH:()=>i,bY:()=>u,dA:()=>c,jy:()=>o,lH:()=>n,tg:()=>r,vu:()=>l})},JCI6GvU:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("Ui1Lssl").A;function r(e,t){const{entity0:s,entity1:r}=e,n=r.entityType===t.entityType&&r.id===t.id;return i((s.entityType===t.entityType&&s.id===t.id)!==n,"Invalid relationship source"),i(s.entityType<=r.entityType,`Invalid entity order: ${s.entityType} > ${r.entityType}`),n}},JMEfy8P:(e,t,s)=>{"use strict";function i(e,t){t.set("errors",[...e.errors]).set("pendingErrors",e.pendingErrors?[...e.pendingErrors]:void 0)}function r(e,t){t.set("value",e.value),i(e,t)}function n(e,t){const s=e.field,n=t.get("field");r(s.year,n.get("year")),r(s.month,n.get("month")),r(s.day,n.get("day")),i(e,t)}function a(e,t){const s=e.field,a=t.get("field");n(s.begin_date,a.get("begin_date")),n(s.end_date,a.get("end_date")),r(s.ended,a.get("ended")),i(e,t)}s.d(t,{Ay:()=>r,Pu:()=>a})},JWGIi2B:(e,t,s)=>{"use strict";s.d(t,{CD:()=>r,LG:()=>a,Tu:()=>n,cx:()=>o});s("60ocjtt");var i=s("040n2o8");s("oEgauXb").l;function r(e){return null!=e&&(e.privileges&i.qq)>0}function n(e){return null!=e&&(e.privileges&i.f7)>0}function a(e){return null!=e&&(e.privileges&i.i5)>0}function o(e){return null!=e&&(e.privileges&i.LA)>0}},KBzdQ9I:(e,t,s)=>{"use strict";s.d(t,{A:()=>h,X:()=>p});s("6g1DHTE"),s("XteD3uf"),s("PkUg7wA"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("AsUdLGK"),r=s("smZuR9W"),n=s("37TQ/RL"),a=s("pKdT8YG"),o=s("/FT4qLG"),l=s("cbdMZik"),c=s("y3N8SZS"),u=s("cGbttel"),d=s("Ui1Lssl").A;function h(e,t,h){const[p,...m]=e.split(".");if("undefined"!=typeof document){s("EVdnBjI")((function(){const s=document.querySelectorAll(e);for(const c of s){const s=c.previousElementSibling;if(!s||"script"!==s.tagName.toLowerCase()){const t="Props <script> for "+e+" not found.";console.error(t),i.Cp(new Error(t));continue}const d=(0,l.tr)(),h=s.textContent,p=h?JSON.parse(h):{};0,(0,n.flushSync)((()=>{a.c(c,(0,u.jsx)(r.StrictMode,{children:(0,u.jsx)(o.A9.Provider,{value:d,children:(0,u.jsx)(t,{...p})})}))})),c.dispatchEvent(new Event("mb-hydration",{bubbles:!0}))}}))}return e=>{let s;return d(!Object.hasOwn(e,"$c"),"`$c` should be accessed using the React context APIs, not props"),h&&(s=h(e)),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("script",{dangerouslySetInnerHTML:{__html:(0,c.A)(JSON.stringify(s??e)??"")},type:"application/json"}),(0,u.jsx)(p,{className:m.join(" "),children:(0,u.jsx)(t,{...e})})]})}}function p(e){const t=e.entity,s={...e};return s.entity={entityType:t.entityType,gid:t.gid},s}},KimswHD:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("xNKEMJr"),r=s("SKGBikk").ln;function n(e,t){return"recording"===e?(0,i.x)(r("{n} recording selected","{n} recordings selected",t,{n:t})):"work"===e?(0,i.x)(r("{n} work selected","{n} works selected",t,{n:t})):""}},KmaOXyL:(e,t,s)=>{"use strict";s.d(t,{A0:()=>A,Av:()=>E,B3:()=>x,GW:()=>k,L$:()=>y,Mm:()=>_,pU:()=>T});s("60ocjtt"),s("6g1DHTE"),s("DNaZxvn");var i=s("HMcOWk2"),r=s("HkNzj3j"),n=s("SKGBikk"),a=s("52XjgTZ"),o=s("9oisN5V"),l=s("93z9/8f"),c=s("1wN/8o/"),u=s("8YlDuzw").A,d=s("2k2mX3K").RL;const h=Object.freeze({}),p=/\{entity0\}/,m=/\{entity1\}/;class g{#e;constructor(e,t,s,i){this.data=e||h,this.i18n=t,this.entity0=u(s)?s:t.defaultValue,this.entity1=u(i)?i:t.defaultValue,this.usedPhraseAttributes=[],this.#e=1}get(e){if("entity0"===e)return this.entity0;if("entity1"===e)return this.entity1;const t=this.data[e];return null==t?this.i18n.defaultValue:Array.isArray(t)?this.i18n.commaList(t.map(this.i18n.displayLinkAttribute)):this.i18n.displayLinkAttribute(t)}getKey(e){return e+"-"+String(this.#e++)}has(e){return this.usedPhraseAttributes.push(e),!0}}const f={commaList:i.A,defaultValue:"",displayLinkAttribute:c.Ay,expand:r.HG},b={commaList:i.T,defaultValue:"",displayLinkAttribute:c.Qt,expand:n.Gt};function y(e,t){const s=a.Ay.link_attribute_type[e.typeID],i=a.Ay.link_attribute_type[t.typeID],r=a.Ay.link_attribute_type[s.root_id],n=a.Ay.link_attribute_type[i.root_id];return r.child_order-n.child_order||s.id-i.id||(r.free_text?(0,l.K)(e.text_value??"",t.text_value??""):0)||(r.creditable?(0,l.K)(e.credited_as??"",t.credited_as??""):0)}const w=Object.create(null);function v(e){const t=w[e.id];if(t)return t;const s={};for(const t of Object.keys(e.attributes)){const{min:i}=e.attributes[Number(t)];if(null!=i&&i>0){const e=a.Ay.link_attribute_type[Number(t)];s[e.name]={type:e,typeID:e.id,typeName:e.name}}}return Object.freeze(s),w[e.id]=s||h}function _(e,t,s,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=d(t[i]);if(!c)return["",[]];const h=function(e,t){const s={};for(let i=0;i<t.length;i++){const r=t[i],n=a.Ay.link_attribute_type[r.typeID],o=e.attributes[n.root_id],l=a.Ay.link_attribute_type[n.root_id].name;if(o&&1===o.max)s[l]=r;else{const e=s[l];e?e.push(r):s[l]=[r]}}return s}(t,s),f=r&&("reverse_link_phrase"===i?2===t.orderable_direction:1===t.orderable_direction);"long_link_phrase"===i&&u(n)&&u(l)&&(p.test(c)||(c="{entity0} "+c),m.test(c)||(c+=" {entity1}"));const b=Object.fromEntries(Object.entries(v(t)).map((e=>{let[t,s]=e;return[t,h[t]??s]}))),w=new g(f?b:h,e,n,l);let _=e.expand(c,w);"string"==typeof _&&(_=(0,o.A)(_));const T=[];for(const e in h)if(f&&null==b[e]||!w.usedPhraseAttributes.includes(e)){const t=h[e];Array.isArray(t)?T.push(...t):T.push(t)}return T.sort(y),[_,T]}const T=function(e,t,s){return _(b,e,t,s,arguments.length>3&&void 0!==arguments[3]&&arguments[3])},k=function(e,t,s){return _(f,e,t,s,arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4?arguments[4]:void 0,arguments.length>5?arguments[5]:void 0)[0]},x=function(e,t,s){return T(e,t,s,arguments.length>3&&void 0!==arguments[3]&&arguments[3])[0]},A=function(e,t,s){return _(f,e,t,s,arguments.length>3&&void 0!==arguments[3]&&arguments[3])[1]},E=(e,t)=>(0,o.A)(b.expand(t,new g(v(e),b,null,null)))},KuiXX4f:(e,t,s)=>{"use strict";s.d(t,{A:()=>p,S:()=>h});s("6g1DHTE"),s("DNaZxvn");const i=new RegExp("^(-?[0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\\.[0-9]{3})?Z$"),r=e=>parseInt(e,10);const n=new Map,a={"%A":["weekday",{weekday:"long"}],"%B":["month",{month:"long"}],"%H":["hour",{hour:"2-digit",hourCycle:"h23"}],"%M":["minute",{minute:"2-digit",hour:"2-digit"}],"%S":["second",{second:"2-digit",minute:"2-digit"}],"%X":[null,{hour:"numeric",minute:"numeric",second:"numeric"}],"%Y":["year",{year:"numeric"}],"%Z":["timeZoneName",{timeZoneName:"short"}],"%a":["weekday",{weekday:"short"}],"%b":["month",{month:"short"}],"%c":[null,{day:"numeric",hour:"numeric",minute:"numeric",month:"numeric",second:"numeric",year:"numeric"}],"%d":["day",{day:"2-digit"}],"%e":["day",{day:"numeric"}],"%m":["month",{month:"2-digit"}],"%x":[null,{day:"numeric",month:"numeric",year:"numeric"}]},o="America/Chicago",l="Europe/Paris",c={CET:l,CST6CDT:o,EET:"Europe/Sofia",EST:"America/Cancun",EST5EDT:"America/New_York",HST:"Pacific/Honolulu",MET:l,MST:"America/Phoenix",MST7MDT:"America/Denver",PST8PDT:"America/Los_Angeles",WET:"Europe/Lisbon"};let u=!0;try{const e=new Date;d(e,"%a",o,"en-US"),d(e,"%c",o,"en-US")}catch(e){u=!1}function d(e,t,s,i){const[r,o]=a[t],l=t+"-"+s+"-"+i;let u=n.get(l);if(!u){try{u=new Intl.DateTimeFormat(i,{timeZone:s,...o})}catch(e){if(!(e instanceof RangeError&&/time zone/.test(e.message)))throw e;{const e=c[s]??"UTC";u=new Intl.DateTimeFormat(i,{timeZone:e,...o})}}n.set(l,u)}if(null!==r){const t=u.formatToParts(e);for(let e=0;e<t.length;e++){const s=t[e];if(s.type===r)return s.value}return""}return u.format(e)}function h(e,t,s){if(!u)return t.toString();const i=e&&e.user?e.user.preferences:null,r=(s?s.timezone:null)||(i?i.timezone:null)||"UTC";let n=(s?s.format:null)||i&&i.datetime_format||"%Y-%m-%d %H:%M %Z";s&&s.dateOnly&&(n=n.replace("%c","%x"),n=n.replace(/%H:%M(:%S)?/,""),n=n.replace("%Z",""),n=n.replace(/,\s*$/,""),n=n.trim());const a=e?e.stash.current_language.replace("_","-"):"default";return n.replace(/%[ABHMSXYZabcdemx]/g,(function(e){return d(t,e,r,a)}))}function p(e,t,s){const n=function(e){const t=e.match(i);if(!t)return null;const[s,n,a,o,l,c]=t.slice(1,7).map(r);return new Date(Date.UTC(s,n-1,a,o,l,c))}(t);return n?h(e,n,s):""}},KzhY9EY:(e,t,s)=>{"use strict";s.d(t,{E:()=>l,d:()=>o});s("60ocjtt"),s("PkUg7wA");const i=Function.prototype.toString,r=i.call(Object),n=-1;function a(e,t,s){let n,o=t.get(e);if(null!=o)return o;switch(o=s.length,t.set(e,o),s.push(void 0),typeof e){case"boolean":case"number":case"string":n=e;break;case"object":if(e)if(Array.isArray(e)){n=[];for(const i of e)n.push(a(i,t,s))}else{const o=Object.getPrototypeOf(e);if(!o||"function"!=typeof o.constructor||i.call(o.constructor)!==r)throw new Error("Only plain objects and arrays can be converted into JSON");n={};for(const i in e)if(Object.hasOwn(e,i)){const r=a(i,t,s),o=a(e[i],t,s);n[r]=o}}else n=null;break;case"bigint":case"function":case"symbol":throw new Error(`Cannot convert ${typeof e} to JSON`);case"undefined":throw new Error("Unreachable")}return s[o]=n,o}function o(e){const t=[],s=new Map;return s.set(void 0,n),a(e,s,t),t}function l(e){const t=new Array(e.length);return function s(i){if(i===n)return;const r=e[i];if("object"==typeof r&&null!==r){const n=t[i];if(void 0!==n)return n;if(Array.isArray(r)){const e=[];t[i]=e;for(let t=0;t<r.length;t++)e.push(s(r[t]));return e}const a={};t[i]=a;for(const t in r)if(Object.hasOwn(r,t)){const i=e[Number(t)],n=r[t];a[i]=s(n)}return a}return r}(0)}},L0H01fh:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s("smZuR9W"),r=s("cGbttel"),n=s("oEgauXb").l;class a extends i.Component{constructor(e){super(e),this.state={isCollapsed:!1,isCollapsible:!1},this.handleToggleBound=e=>this.handleToggle(e),this.containerRef=i.createRef()}componentDidMount(){const e=this.containerRef.current;e&&e.offsetHeight>100&&this.setState((()=>({isCollapsed:!0,isCollapsible:!0})))}handleToggle(e){e.preventDefault(),this.setState((e=>({isCollapsed:!e.isCollapsed})))}render(){const{className:e,html:t}=this.props,{isCollapsed:s,isCollapsible:i}=this.state,a=e+"-body "+e+(s?"-collapsed":"-collapse");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:a,dangerouslySetInnerHTML:{__html:t},ref:this.containerRef}),i?(0,r.jsx)("p",{children:(0,r.jsx)("a",{className:e+"-toggle",href:"#",onClick:this.handleToggleBound,children:n(s?"Show more...":"Show less...")})}):null]})}}const o=a},LCA85s6:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ANON_ARTIST_GID:()=>D,ANON_ARTIST_ID:()=>O,AREA_TYPE_COUNTRY:()=>d,ARTIST_GROUP_TYPES:()=>f,ARTIST_TYPE_CHOIR:()=>g,ARTIST_TYPE_GROUP:()=>p,ARTIST_TYPE_ORCHESTRA:()=>m,ARTIST_TYPE_PERSON:()=>h,BRACKET_PAIRS:()=>pe,CONTACT_URL:()=>b,COUNTRY_JA_AREA_ID:()=>ce,DARTIST_ID:()=>y,DATA_ARTIST_GID:()=>z,DATA_ARTIST_ID:()=>Y,DIALOGUE_ARTIST_GID:()=>U,DIALOGUE_ARTIST_ID:()=>W,DISPLAY_NONE_STYLE:()=>ue,DLABEL_ID:()=>w,EMPTY_PARTIAL_DATE:()=>a,ENTITIES:()=>i.A,ENTITIES_WITH_RELATIONSHIP_CREDITS:()=>ie,ENTITY_NAMES:()=>o,FAVICON_CLASSES:()=>v,FLUENCY_NAMES:()=>ne,INSTRUMENT_ROOT_ID:()=>l,LANGUAGE_ENG_ID:()=>ae,LANGUAGE_MUL_ID:()=>oe,LANGUAGE_ZXX_ID:()=>le,MAX_LENGTH_DIFFERENCE:()=>ee,MAX_RECENT_ENTITIES:()=>te,MBID_REGEXP:()=>R,MIN_NAME_SIMILARITY:()=>se,NOLABEL_GID:()=>q,NOLABEL_ID:()=>Z,NO_ARTIST_GID:()=>H,NO_ARTIST_ID:()=>M,PART_OF_SERIES_LINK_TYPES:()=>_,PART_OF_SERIES_LINK_TYPE_GIDS:()=>T,PART_OF_SERIES_LINK_TYPE_IDS:()=>k,PROBABLY_CLASSICAL_LINK_TYPES:()=>x,QUALITY_NAMES:()=>re,RECORDING_OF_LINK_TYPE_GID:()=>E,RECORDING_OF_LINK_TYPE_ID:()=>A,RT_MIRROR:()=>I,SERIES_ORDERING_ATTRIBUTE:()=>j,SERIES_ORDERING_TYPE_AUTOMATIC:()=>S,SERIES_ORDERING_TYPE_MANUAL:()=>C,SPECIAL_ARTIST_GIDS:()=>K,SPECIAL_ARTIST_IDS:()=>V,TASK_ATTRIBUTE_ID:()=>u,TIME_ATTRIBUTE:()=>N,TRAD_ARTIST_GID:()=>B,TRAD_ARTIST_ID:()=>F,UNKNOWN_ARTIST_GID:()=>G,UNKNOWN_ARTIST_ID:()=>X,VARTIST_GID:()=>L,VARTIST_ID:()=>P,VARTIST_NAME:()=>$,VIDEO_ATTRIBUTE_GID:()=>Q,VIDEO_ATTRIBUTE_ID:()=>J,VOCAL_ROOT_ID:()=>c,WS_EDIT_RESPONSE_NO_CHANGES:()=>he,WS_EDIT_RESPONSE_OK:()=>de});s("6g1DHTE"),s("70YSc4n"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("GXDjtXZ"),r=s("oEgauXb").g,n=s("oEgauXb").en;const a=Object.freeze({day:null,month:null,year:null}),o={area:r("Area"),artist:r("Artist"),event:r("Event"),genre:r("Genre"),instrument:r("Instrument"),label:r("Label"),place:r("Place"),recording:r("Recording"),release:r("Release"),release_group:r("Release group"),series:n("Series","singular"),url:r("URL"),work:r("Work")},l=14,c=3,u=1150,d=1,h=1,p=2,m=5,g=6,f=new Set([g,p,m]),b="https://metabrainz.org/contact",y=2,w=1,v={"7digital.com":"sevendigital","45cat.com":"fortyfivecat","45worlds.com":"fortyfiveworlds","abc.net.au/triplejunearthed":"triplejunearthed","acum.org.il":"acum","adp.library.ucsb.edu":"dahr","allmusic.com":"allmusic","anghami.com":"anghami","anidb.net":"anidb","animenewsnetwork.com":"animenewsnetwork","anison.info":"anisongeneration","archive.org":"archive","audiomack.com":"audiomack","awa.fm":"awa","baidu.com":"baidu","bandcamp.com":"bandcamp","bandsintown.com":"bandsintown","bbc.co.uk":"bbc","beatport.com":"beatport","bibliotekapiosenki.pl":"piosenki","bigcartel.com":"bigcartel","bookbrainz.org":"bookbrainz","books.apple.com":"applebooks","boomkat.com":"boomkat","boomplay.com":"boomplay","bsky.app":"bluesky","cancioneros.si":"cancioneros","castalbums.org":"castalbums","catalogue.bnf.fr":"bnfcatalogue","cbfiddle.com/rx/":"cbfiddlerx","ccmixter.org":"ccmixter","cdjapan.co.jp":"cdjapan","changetip.com":"changetip","ci.nii.ac.jp":"cinii","classicalarchives.com":"classicalarchives","concerts.livenation.com":"livenation","cpdl.org":"cpdl","d-nb.info":"dnb","dailymotion.com":"dailymotion","deezer.com":"deezer","deviantart.com":"deviantart","dhhu.dk":"dhhu","directlyrics.com":"directlyrics","discogs.com":"discogs","dogmazic.net":"dogmazic","dramonline.org":"dram","e-onkyo.com":"eonkyo","encyclopedisque.fr":"encyclopedisque","ester.ee":"ester","facebook.com":"facebook","finna.fi":"finna","finnmusic.net":"finnmusic","flattr.com":"flattr","fono.fi":"fonofi","generasia.com/wiki":"generasia","genie.co.kr":"genie","genius.com":"genius","geonames.org":"geonames","goodreads.com":"goodreads","gutenberg.org":"gutenberg","hoick.jp":"hoick","ibdb.com":"ibdb","idref.fr":"idref","imdb.com":"imdb","imslp.org":"imslp","imvdb.com":"imvdb","indiegogo.com":"indiegogo","instagram.com":"instagram","ircam.fr":"ircam","irishtune.info":"irishtune","iss.ndl.go.jp":"ndl","itunes.apple.com":"itunes","j-lyric.net":"jlyric","jaxsta.com":"jaxsta","jaxsta.io":"jaxsta","jazzmusicarchives.com":"jazzmusicarchives","joysound.com":"joysound","junodownload.com":"junodownload","kashinavi.com":"kashinavi","kickstarter.com":"kickstarter","ko-fi.com":"kofi","laboiteauxparoles.com":"laboiteauxparoles","lantis.jp":"lantis","last.fm":"lastfm","librarything.com":"librarything","librivox.org":"librivox","lieder.net":"lieder","linkedin.com":"linkedin","livefans.jp":"livefans","loc.gov":"loc","loudr.fm":"loudr","mainlynorfolk.info":"mainlynorfolk","melon.com":"melon","metacritic.com":"metacritic","metal-archives.com":"metalarchives","metalmusicarchives.com":"metalmusicarchives","mixcloud.com":"mixcloud","mobygames.com":"mobygames","mora.jp":"mora","music.amazon":"amazonmusic","classical.music.apple.com":"appleclassical","music.apple.com":"applemusic","music.bugs.co.kr":"bugs","music.migu.cn":"migumusic","music.yandex":"yandex","music.youtube.com":"youtubemusic","musicapopular.cl":"musicapopularcl","musik-sammler.de":"musiksammler","musixmatch.com":"musixmatch","musopen.org":"musopen","muziekweb.nl":"muziekweb","muzikum.eu":"muzikum","myspace.com":"myspace","napster.com":"napster","nicovideo.jp":"niconicovideo","nla.gov.au":"trove","oclc.org":"oclc","ocremix.org":"ocremix","offiziellecharts.de":"offiziellecharts","online-bijbel.nl":"onlinebijbel","opac.kbr.be":"kbr","openlibrary.org":"openlibrary","operabase.com":"operabase","ototoy.jp":"ototoy","overture.doremus.org":"overture","patreon.com":"patreon","paypal.me":"paypal","petitlyrics.com":"petitlyrics","pinterest.com":"pinterest","pixiv.net":"pixiv","progarchives.com":"progarchives","psydb.net":"psydb","qobuz.com":"qobuz","quebecinfomusique.com":"quebecinfomusique","ra.co":"residentadvisor","rateyourmusic.com":"rateyourmusic","recochoku.jp":"recochoku","reverbnation.com":"reverbnation","rism.online":"rism","rock.com.ar":"rockcomar","rockensdanmarkskort.dk":"rockensdanmarkskort","rockinchina.com":"ric","rockipedia.no":"rockipedia","rockit.it":"rockit","rolldabeats.com":"rolldabeats","runeberg.org":"runeberg","saisaibatake.ame-zaiku.com/gakki":"gakki","saisaibatake.ame-zaiku.com/musical":"gakki","saisaibatake.ame-zaiku.com/musical_instrument":"gakki","secondhandsongs.com":"secondhandsongs","setlist.fm":"setlistfm","shop.tsutaya.co.jp":"tsutaya","smdb.kb.se":"smdb","snaccooperative.org":"snac","songfacts.com":"songfacts","songkick.com":"songkick","soundcloud.com":"soundcloud","spirit-of-metal.com":"spiritofmetal","spirit-of-rock.com":"spiritofrock","spotify.com":"spotify","stage48.net":"stage48","steamdb.info":"steamdb","stereo-ve-mono.com":"stereo-ve-mono","target.com":"target","tedcrane.com/DanceDB":"dancedb","theatricalia.com":"theatricalia","thedancegypsy.com":"thedancegypsy","themoviedb.org":"tmdb","thesession.org":"thesession","threads.com":"threads","thwiki.cc":"thbwiki","tidal.com":"tidal","tiktok.com":"tiktok","tipeee.com":"tipeee","tobarandualchais.co.uk":"tobar","touhoudb.com":"touhoudb","tower.jp":"tower","traxsource.com":"traxsource","triplejunearthed.com":"triplejunearthed","tunearch.org":"tunearch","twitch.tv":"twitch","twitter.com":"twitter","uta-net.com":"utanet","utaitedb.net":"utaitedb","utaten.com":"utaten","vgmdb.net":"vgmdb","viaf.org":"viaf","vimeo.com/ondemand":"vimeoondemand","vimeo.com":"vimeo","vk.com":"vk","vk.gy":"vkgy","vkdb.jp":"vkdb","vndb.org":"vndb","vocadb.net":"vocadb","weibo.com":"weibo","whosampled.com":"whosampled","wikidata.org":"wikidata","wikipedia.org":"wikipedia","wikisource.org":"wikisource","worldcat.org":"worldcat","www.amazon":"amazon","www.livenation.":"livenation","www.ticketmaster.":"ticketmaster","www.youtube.com":"youtube","www5.atwiki.jp/hmiku/":"hmikuwiki","yesasia.com":"yesasia","zamp.hr":"zamp","zemereshet.co.il":"zemereshet"},_={area:null,artist:"d1a845d1-8c03-3191-9454-e4e8d37fa5e0",event:"707d947d-9563-328a-9a7d-0c5b9c3a9791",genre:null,instrument:null,label:null,place:null,recording:"ea6f0698-6782-30d6-b16d-293081b66774",release:"3fa29f01-8e13-3e49-9b0a-ad212aa2f81d",release_group:"01018437-91d8-36b9-bf89-3f885d53b5bd",series:null,url:null,work:"b0d44366-cdf0-3acb-bee6-0f65a77a6ef0"},T=Object.values(_).filter(Boolean),k=[740,741,742,743,802,996],x=[40,45,46,150,151,300,759,760],A=278,E="a3005666-a872-32c3-ad06-98af558e99b0",I=2,N="ebd303c3-7f57-452a-aa3b-d780ebad868d",j="a59c5830-5ec7-38fe-9a21-c7ea54f6650a",S=1,C=2,R=/[0-9a-f]{8}-[0-9a-f]{4}-[345][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,L="89ad4ac3-39f7-470e-963a-56509c546377",P=1,$="Various Artists",D="f731ccc4-e22a-43af-a747-64213329e088",O=15071,z="33cf029c-63b0-41a0-9855-be2a3665fb3b",Y=41744,U="314e1c25-dde7-4e4d-b2f4-0a7b9f7c56dc",W=92121,H="eec63d3c-3b81-4ad4-b1e4-7c147d4d2b61",M=105725,B="9be7f096-97ec-4615-8957-8d40b5dcbc41",F=762646,G="125ec42a-7229-4250-afc5-e057484327fe",X=97546,K=[L,D,z,U,H,B,G],V=[y,P,O,Y,W,M,F,X],q="157afde4-4bf5-4039-8ad2-5a15acc85176",Z=3267,J=582,Q="112054d5-e706-4dd8-99ea-09aabee36cd6",ee=10500,te=10,se=.75,ie={area:!0,artist:!0,event:!1,genre:!1,instrument:!0,label:!0,place:!0,recording:!1,release:!1,release_group:!1,series:!1,url:!1,work:!1},re=new Map([[0,r("Low")],[-1,r("Normal")],[1,r("Normal")],[2,r("High")]]),ne={advanced:r("Advanced"),basic:r("Basic"),intermediate:r("Intermediate"),native:r("Native")},ae=120,oe=284,le=486,ce=107,ue=Object.freeze({display:"none"}),de=1,he=2,pe=[["(",")"],["[","]"],["<",">"],["（","）"],["［","］"],["{","}"],["【","】"]]},LEdQKgv:(e,t,s)=>{"use strict";s.d(t,{A:()=>Z});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n");var i=s("smZuR9W"),r=s("6Jrjhm9"),n=s("PzvTjBu"),a=s("Fc1ht8o"),o=s("VVNXxwy"),l=s("hpDWElX"),c=s("CJBfytL"),u=s("pu3FCox"),d=s("Bgvmr3X"),h=s("d/wSL5Q"),p=s("WN/X9IS"),m=s("osVXT12"),g=s("1nSlf59"),f=s("+5o7Rtt"),b=s("xNKEMJr"),y=s("1wN/8o/"),w=s("gklH9/w"),v=s("e3+xVn3"),_=s("zx42Bmz"),T=s("n4qWIJf"),k=s("QBOBohR"),x=s("KmaOXyL"),A=s("9azanlh"),E=s("VVxqhIh"),I=s("fnTvsuF"),N=s("brGU6uh"),j=s("SmhBGrr"),S=s("Gwrf0XF"),C=s("JCI6GvU"),R=s("PrjjXpM"),L=s("cGbttel"),P=s("oEgauXb").l,$=s("8YlDuzw").A,D=s("HkNzj3j").l,O=s("oEgauXb").lp;function z(e){return"rel-"+(0,S.A)(e)}const Y=i.memo((function(e){let{canBeOrdered:t,dispatch:s,hasOrdering:r,isDialogOpen:o,relationship:l,releaseHasUnloadedTracks:u,source:d,track:p}=e;const m=(0,C.A)(l,d),S=m?l.entity0:l.entity1,[Y,U]=m?[l.entity1_credit,l.entity0_credit]:[l.entity0_credit,l.entity1_credit],W=l._status===A.QJ,H="remove-relationship-"+(0,N.A)(l);let M=null;M="work"===S.entityType&&!0===S._fromBatchCreateWorksDialog?(0,L.jsx)(R.A,{work:S}):S.gid?(0,L.jsx)(f.A,{className:"wrap-anywhere",content:U,entity:S,showDisambiguation:!0,showEditsPending:!1,target:"_blank"}):(0,L.jsx)("span",{className:"no-value",children:S.name||P("no entity")}),$(Y)&&(M=D("{target} (as {credited_name})",{credited_name:Y,target:M}));const B=(0,j.A)(l),F=!B||B.has_dates?(0,b.x)((0,_.A)(l,!1)):"",G=i.useMemo((()=>B?(0,b.x)((0,y.Dm)((0,x.pU)(B,g.A(l.attributes??c.A),m?"reverse_link_phrase":"link_phrase",t)[1])):""),[B,l.attributes,m,t]),X=null==l.linkTypeID||!(0,v.A)(S.id)&&!("work"===S.entityType&&S._fromBatchCreateWorksDialog),K=(0,E.A)(),V=(0,a.A)({dispatch:s,hasPreselectedTargetType:!0,relationship:l,releaseHasUnloadedTracks:u,source:d,targetTypeOptions:null,targetTypeRef:null,title:O("Edit relationship","header"),user:K}),q=i.useCallback((e=>{s({location:e?{backward:m,linkTypeId:B?B.id:0,relationshipId:l.id,source:d,targetType:S.entityType,textPhrase:(0,I.A)(l,m),track:p}:null,type:"update-dialog-location"})}),[s,m,B,d,S.entityType,l,p]),Z=" "+(F?F+(G?" "+G:""):G);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{className:"relationship-item",children:[(0,L.jsx)("button",{className:"icon remove-item",id:H,onClick:function(){(0,w.s)(H,(function(){s({relationship:l,type:"remove-relationship"})}))},type:"button"}),(0,L.jsx)(n.A,{buildChildren:V,buttonContent:null,buttonProps:{className:"icon edit-item",id:"edit-relationship-"+(0,N.A)(l)},className:"relationship-dialog",closeOnOutsideClick:!1,id:"edit-relationship-dialog",isDisabled:W,isOpen:o,toggle:q})," ",r?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("button",{className:"icon move-down",disabled:W,onClick:function(){s({relationship:l,source:d,type:"move-relationship-down"})},title:P("Move entity down"),type:"button"}),(0,L.jsx)("button",{className:"icon move-up",disabled:W,onClick:function(){s({relationship:l,source:d,type:"move-relationship-up"})},title:P("Move entity up"),type:"button"})," "]}):null,(0,L.jsxs)("span",{className:z(l),children:[l.linkOrder&&(0,h.H)(l.linkTypeID,d,m)?D("{num}. {relationship}",{num:l.linkOrder,relationship:M}):M,(0,L.jsx)(T.A,{entity:S}),(0,L.jsx)(k.A,{relationship:l}),Z]})]}),X?(0,L.jsx)("p",{className:"error",children:P("You must select a relationship type and target entity for\n              every relationship.")}):null]})}));var U=s("oEgauXb").g,W=s("oEgauXb").lp,H=s("H+29DOL").O,M=s("8YlDuzw").A,B=s("oEgauXb").l,F=s("SKGBikk").l;const G={area:U("Add another area"),artist:U("Add another artist"),event:U("Add another event"),genre:U("Add another genre"),instrument:U("Add another instrument"),label:U("Add another label"),place:U("Add another place"),recording:U("Add another recording"),release:U("Add another release"),release_group:U("Add another release group"),series:U("Add another series"),url:()=>"",work:U("Add another work")};const X=i.memo((function(e){let{backward:t,dialogLocation:s,dispatch:o,linkPhraseGroup:l,linkTypeId:g,releaseHasUnloadedTracks:f,source:b,targetType:y,track:w}=e;const v=l.relationships,_=v.size,[T,k]=i.useState(_<=10),x=(0,h.H)(g,b,t),A=i.useMemo((()=>x&&function(e){for(const t of r.A(e))if(t.linkOrder)return!0;return!1}(v)),[x,v]),E=i.useCallback((()=>{let e=0,s=c.A;for(const t of r.A(v)){x&&(e=Math.max(e,t.linkOrder));let i=u.GR(t.attributes??c.A,{type:{gid:"a59c5830-5ec7-38fe-9a21-c7ea54f6650a"},typeID:788,typeName:"number"},m.S1);i=u.GR(i,{type:{gid:"efd89258-fb07-48e9-acf9-0a54ce03606d"},typeID:921,typeName:"cancelled"},m.S1),i=u.GR(i,{type:{gid:"ebd303c3-7f57-452a-aa3b-d780ebad868d"},typeID:830,typeName:"time"},m.S1),s=d.A(s,i,m.S1)}const i={attributes:s,linkOrder:e>0?e+1:0,linkTypeID:g||null};return t?i.entity1=b:i.entity0=b,i}),[x,v,t,g,b]),I=(0,a.q)({backward:t,buildNewRelationshipData:E,dispatch:o,preselectedTargetType:y,releaseHasUnloadedTracks:f,source:b,targetTypeOptions:null,title:W("Add relationship","header")}),N=i.useCallback((e=>{o({location:e?{backward:t,linkTypeId:g,source:b,targetType:y,textPhrase:l.textPhrase,track:w}:null,type:"update-dialog-location"})}),[o,t,g,b,y,l.textPhrase,w]),j=i.useCallback((function(e){o({hasOrdering:e.currentTarget.checked,linkPhraseGroup:l,source:b,type:"toggle-ordering"})}),[o,l,b]),S=i.useCallback((e=>{e.preventDefault(),k(!0)}),[k]),C=[];for(const e of r.A(v))if(C.push((0,L.jsx)(Y,{canBeOrdered:x,dispatch:o,hasOrdering:A,isDialogOpen:null!=s&&s.relationshipId===e.id,relationship:e,releaseHasUnloadedTracks:f,source:b,track:w},e.id)),!T&&10===C.length)break;let R=null,P=null;l.textPhrase&&(R=H(l.textPhrase),P=(0,p.kW)(l.textPhrase));const $=M(R)?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("label",{children:R})," ",(0,L.jsx)(n.A,{buildChildren:I,buttonContent:null,buttonProps:{className:"icon add-item add-another-entity",title:G[y]()},className:"relationship-dialog",closeOnOutsideClick:!1,id:"add-relationship-dialog",isDisabled:!1,isOpen:null!=s&&null==s.relationshipId,toggle:N})]}):(0,L.jsx)("label",{children:(0,L.jsx)("span",{className:"no-value",children:H(B("no type"))})}),D=(0,L.jsxs)("td",{className:"relationship-list",children:[C,T?null:(0,L.jsx)("p",{children:(0,L.jsx)("a",{href:"#",onClick:S,children:F("See all {num} relationships",{num:_})})})]});return _?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("tr",{className:P,children:[(0,L.jsx)("th",{className:"link-phrase",children:$}),D]}),x?(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{}),(0,L.jsx)("td",{children:(0,L.jsxs)("label",{style:{padding:"6px"},children:[(0,L.jsx)("input",{checked:A,onChange:j,type:"checkbox"})," ",B("These relationships have a specific ordering")]})})]}):null]}):null}));const K=i.memo((function(e){let{dialogLocation:t,dispatch:s,linkTypeGroup:i,releaseHasUnloadedTracks:n,source:a,targetType:o,track:l}=e;const c=[];for(const e of r.A(i.phraseGroups))c.push((0,L.jsx)(X,{backward:i.backward,dialogLocation:null!=t&&t.textPhrase===e.textPhrase?t:null,dispatch:s,linkPhraseGroup:e,linkTypeId:i.typeId,releaseHasUnloadedTracks:n,source:a,targetType:o,track:l},e.textPhrase));return c}));const V=i.memo((function(e){let{dialogLocation:t,dispatch:s,linkTypeGroups:i,releaseHasUnloadedTracks:n,source:a,targetType:o,track:c}=e;const u=[];for(const e of r.A(i))u.push((0,L.jsx)(K,{dialogLocation:null!=t&&t.linkTypeId===e.typeId&&t.backward===e.backward?t:null,dispatch:s,linkTypeGroup:e,releaseHasUnloadedTracks:n,source:a,targetType:o,track:c},(0,l.V_)(e.typeId,e.backward)));return u}));var q=s("oEgauXb").lp;const Z=i.memo((function(e){let{dialogLocation:t,dispatch:s,filter:l,releaseHasUnloadedTracks:c,source:u,targetTypeGroups:d,track:h}=e;const p=(0,a.q)({dispatch:s,preselectedTargetType:null,releaseHasUnloadedTracks:c,source:u,title:q("Add relationship","header")}),m=[];for(const e of r.A(d)){const[i,r]=e;if(null!=l&&!l(i))continue;(0,o.T$)(e).next().done||m.push((0,L.jsx)(V,{dialogLocation:null!=t&&t.targetType===i?t:null,dispatch:s,linkTypeGroups:r,releaseHasUnloadedTracks:c,source:u,targetType:i,track:h},i))}const g=null!=t&&null==t.targetType,f=i.useCallback((e=>{s({location:e?{source:u,track:h}:null,type:"update-dialog-location"})}),[s,u,h]);return(0,L.jsx)("table",{className:"rel-editor-table",children:(0,L.jsxs)("tbody",{children:[m,(0,L.jsxs)("tr",{children:[(0,L.jsx)("td",{className:"add-relationship",children:(0,L.jsx)(n.A,{buildChildren:p,buttonContent:q("Add relationship","interactive"),buttonProps:{className:"add-item with-label add-relationship"},className:"relationship-dialog",closeOnOutsideClick:!1,id:"add-relationship-dialog",isDisabled:!1,isOpen:g,toggle:f})}),(0,L.jsx)("td",{})]})]})})}))},LIWYReX:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("oEgauXb").l,r=s("oEgauXb").lp;function n(e){return"area"===e?i("Area"):"artist"===e?i("Artist"):"collection"===e?i("Collection"):"event"===e?i("Event"):"genre"===e?i("Genre"):"instrument"===e?i("Instrument"):"label"===e?i("Label"):"place"===e?i("Place"):"recording"===e?i("Recording"):"release"===e?i("Release"):"release_group"===e?i("Release group"):"series"===e?r("Series","singular"):"url"===e?i("URL"):"work"===e?i("Work"):e}},MVH16Az:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s("LCA85s6"),r=s("XhfEA1D").ZC,n=s("2k2mX3K").RL;const a=function(e){return e.description?e.root_id===i.INSTRUMENT_ROOT_ID?r(e.description):n(e.description):""}},NMqEMXR:(e,t,s)=>{"use strict";s.r(t),s.d(t,{English:()=>y,French:()=>w,Sentence:()=>v,Turkish:()=>_});s("60ocjtt"),s("6g1DHTE"),s("XteD3uf");var i=s("Gfg8pR3"),r=s("127s6Wg"),n=s("WN/X9IS"),a=s("NyxMRXU"),o=s("HkNzj3j").l;const l=/^(a|an|and|as|at|but|by|da|de|di|fe|fi|for|in|ina|inna|n|nor|o|of|on|or|tha|the|to)$/,c=/^(ve|ile|ya|veya|yahut|ki|mı|mi|mu|mü|mısın|musun|mudur|mıdır|midir|miyim|misin|misiniz|mısınız|müsün|müyüm|müsünüz|mıyım|muyum|musunuz|miyiz|mıyız|muyuz|müyüz|müdür)$/,u=/^(dj|mc|tv|mtv|ep|lp|ymca|nyc|ny|ussr|usa|r&b|bbc|fm|bc|ac|dc|uk|bpm|ok|nba|rza|gza|odb|dmx|2xlc)$/,d=/^m{0,4}(cm|cd|d?c{0,3})(xc|xl|l?x{0,3})(ix|iv|v?i{0,3})$/,h=/^(?:mi|mix)$/,p=[[/(^|\s)([({[])\s+($|\b)/i,"$2"],[/(\b|^)\s+([)}\]])($|\b)/i,"$2"],[/(\s|^|\()(\d+)''(\s|$)/i,'$2"'],[/(\s|^|\()(\d+)in(ch)?(\s|$)/i,'$2"'],[/(\b|^)a\s?c+ap+el+a(\b)/gi,"a_cappella"],[/(\b|^)oc\sremix(\b)/gi,"oc_remix"],[/(\b|^)re-edit(\b)/gi,"re_edit"],[/(\b|^)a\/k\/a(\b)/gi,"a_k_a_"],[/(\b|^)a\.k\.a\.(\s)/gi,"a_k_a_"]],m=[[/(\b|^)a_cappella(\b)/g,"a cappella"],[/(\b|^)A_cappella(\b)/g,"A Cappella"],[/(\b|^)oc_remix(\b)/gi,"OC ReMix"],[/(\b|^)re_edit(\b)/g,"re-edit"],[/(\b|^)Re_edit(\b)/g,"Re-Edit"],[/(\b|^)a_k_a_(\b|$)/gi,"a.k.a."],[/(\b|^)aka(\b|$)/gi,"aka"],[/(\b|^)Santa fe(\b|$)/g,"Santa Fe"],[/(\b|^)R\s*&\s*B(\b)/gi,"R&B"],[/(\b|^)\[live\](\b)/i,"(live)"],[/(\b|^)Djs(\b)/gi,"DJs"],[/(\b|^)imac(\b)/gi,"iMac"],[/(\b|^)ipad(\b)/gi,"iPad"],[/(\b|^)iphone(\b)/gi,"iPhone"],[/(\b|^)ipod(\b)/gi,"iPod"],[/(\b|^)itunes(\b)/gi,"iTunes"],[/(\b|^)tiktok(\b)/gi,"TikTok"],[/(\b|^)youtube(\b)/gi,"YouTube"],[/(\s|^)Rock '?n'? Roll(\s|$)/gi,"Rock 'n' Roll"],[/(\b)w([/／])o(\b)/i,"w$2o"],[/(\b)f([.．/／])(\b)/i,"f$2"]];function g(e,t,s,i){const r=e[1]||"",n=e[e.length-1]||"";return t.replace(s,[r,i,n].join(""))}function f(e,t){let s=e;return t.forEach((function(e){const[t,i]=e;let r;if(t.global){let e;for(;(r=t.exec(s))&&(e=s,s=g(r,s,t,i),e!==s););}else{const e=s.match(t);null!==e&&(s=g(e,s,t,i))}})),s}const b={description:"",doWord:()=>!1,fixVinylSizes:e=>e.replace(/(\s+|\()(7|10|12)(?:inch\b|in\b|'|''|")([^s]|$)/gi,'$1$2"$3').replace(/((?:\s+|\()(?:7|10|12)")([^),\s])/,"$1 $2"),isLowerCaseWord:e=>l.test(e),isRomanNumber:e=>(0,r.A)("guesscase_roman")&&d.test(e)&&!h.test(e),isSentenceCaps:()=>!0,isUpperCaseWord:e=>u.test(e),name:"",prepExtraTitleInfo(e){let t=e;const s=t.length-1;let i=s,r=!1;for(;i>=0&&(" "===t[i]||'"'===t[i]&&("7"===t[i-1]||"12"===t[i-1])||'"'===(t[i+1]||"")&&("7"===t[i]||"12"===t[i])||(0,a.oI)(t[i]));)r=!0,i--;if(i<s){for(i++;" "===t[i]&&i<s;)i++;const e=t[s];if(i===s&&(0,a.cW)(e)&&(r=!1),r&&i>0&&i<=s){let e=t.slice(0,i);"("===e[i-1]&&e.pop(),"-"===e[i-1]&&e.pop(),e.push("("),e=e.concat(t.slice(i,t.length)),e.push(")"),t=e}}return t},preProcessTitles:e=>f(e,p),runPostProcess:e=>f(e,m),toLowerCase:e=>e.toLowerCase(),toUpperCase:e=>e.toUpperCase()},y={...b,description:i.qV(o("This mode capitalises almost all words, with some words (mainly articles \n     and short prepositions) lowercased. Some words may need to be manually \n     capitalised to follow the {url|English capitalisation guidelines}.",{url:{href:"https://musicbrainz.org/doc/Style/Language/English",target:"_blank"}})),isSentenceCaps:()=>!1,name:"English",runPostProcess(e){let t=b.runPostProcess(e);return t=t.replace(/\bin ([a-g])(?:[\s-]([Ff]lat|[Ss]harp))?\s(dorian|lydian|major|minor|mixolydian)(?:\b|$)/gi,(function(e,t,s,i){return"in "+t.toUpperCase()+(s?"-"+s.toLowerCase():"")+" "+i.toLowerCase()})),t}},w={...b,description:i.qV(o("This mode capitalises titles as sentence mode, but also inserts spaces \n     before semicolons, colons, exclamation marks and question marks, \n     and inside guillemets. Some words may need to be manually capitalised \n     to follow the {url|French capitalisation guidelines}.",{url:{href:"https://musicbrainz.org/doc/Style/Language/French",target:"_blank"}})),name:"French",runPostProcess:e=>b.runPostProcess(e).replace(/([!?;:]+)/gi," $1").replace(/([«]+)/gi,"$1 ").replace(/([»]+)/gi," $1").replace(/^(Le\s|La\s|Les\s|L[’'])(\S+)$/gi,((e,t,s)=>t.replace("'","’")+(0,n.ZH)(s)))},v={...b,description:i.qV(o("This mode capitalises the first word of a sentence, most other words \n     are lowercased. Some words, often proper nouns, may need to be manually \n     fixed according to the {url|relevant language guidelines}.",{url:{href:"https://musicbrainz.org/doc/Style/Language",target:"_blank"}})),name:"Sentence"},_={...b,description:i.qV(o("This mode handles the Turkish capitalisation of 'i' ('İ') and 'ı' ('I').\n     Some words may need to be manually corrected according to \n     the {url|Turkish language guidelines}.",{url:{href:"https://musicbrainz.org/doc/Style/Language/Turkish",target:"_blank"}})),isLowerCaseWord:e=>l.test(e)||c.test(e),isSentenceCaps:()=>!1,name:"Turkish",toLowerCase:e=>e.replace(/I\u0307/g,"i").replace(/I/g,"ı").replace(/İ/g,"i").toLowerCase(),toUpperCase:e=>e.replace(/i/g,"İ").toUpperCase()}},NRi6Fhf:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,x:()=>h});s("60ocjtt");var i=s("IX2y8RG"),r=s("LCA85s6"),n=s("oEgauXb"),a=s("52XjgTZ"),o=s("2k2mX3K").RL;function l(e,t){return e.entity.child_order-t.entity.child_order||(0,n.UD)(o((0,n.WQ)(e.name)),o((0,n.WQ)(t.name)))}function c(e,t){return{disabled:!e.description,entity:e,id:e.id,level:t,name:(0,i.U)(e),type:"option"}}function u(e,t){return r.PART_OF_SERIES_LINK_TYPE_GIDS.includes(t.gid)&&t.gid!==r.PART_OF_SERIES_LINK_TYPES[e]}const d=(e,t)=>{const s=[];let i=null;if("series"===e.entityType){const t=e.typeID;if(null!=t){const e=a.Ay.series_type[t];e&&(i=e.item_entity_type)}}const r=(e,t)=>{const n=e.children;if(!n)return;const a=[];let o,d=0;for(;o=n[d++];)null!=i&&u(i,o)||a.push(c(o,t));a.sort(l);for(let e=0;e<a.length;e++){const i=a[e],n=i.entity;s.push(i),r(n,t+1)}},n=[e.entityType,t].sort().join("-");return r({children:a.Ay.link_type_tree[n]},0),s},h=(e,t)=>{const s=[e,t].sort().join("-");return(a.Ay.link_type_tree[s]?.length||0)>0}},NTUlU87:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("e3+xVn3"),r=s("8YlDuzw").I;function n(e){const t=e.entity0,s=e.entity1;if(!t||!s)return null;const n=t.name,a=s.name;if(r(n)||r(a))return null;if(!(0,i.A)(t.id)||!(0,i.A)(s.id))return null;return"/search/edits?auto_edit_filter=&order=desc&negation=0&combinator=and"+("url"===t.entityType?`&conditions.0.field=${encodeURIComponent(t.entityType)}&conditions.0.operator=%3D&conditions.0.args.0=${encodeURIComponent(n)}`:`&conditions.0.field=${encodeURIComponent(t.entityType)}&conditions.0.operator=%3D&conditions.0.name=${encodeURIComponent(n)}&conditions.0.args.0=${encodeURIComponent(String(t.id))}`)+("url"===s.entityType?`&conditions.1.field=${encodeURIComponent(s.entityType)}&conditions.1.operator=%3D&conditions.1.args.0=${encodeURIComponent(a)}`:`&conditions.1.field=${encodeURIComponent(s.entityType)}&conditions.1.operator=%3D&conditions.1.name=${encodeURIComponent(a)}&conditions.1.args.0=${encodeURIComponent(String(s.id))}`)+"&conditions.2.field=type&conditions.2.operator=%3D&conditions.2.args=90%2C233&conditions.2.args=91&conditions.2.args=92&conditions.3.field=status&conditions.3.operator=%3D&conditions.3.args=1&field=Please+choose+a+condition"}},NwGYEf3:(e,t,s)=>{"use strict";function*i(e){switch(e.type){case"compound_field":yield e;case"form":for(const t of Object.values(e.field))yield*i(t);break;case"field":yield e;break;case"repeatable_field":yield e;for(const t of e.field)yield*i(t)}}function*r(e){const t=e.read();switch(t.type){case"compound_field":yield e;case"form":for(const s of Object.keys(t.field))yield*r(e.get("field",s));break;case"field":yield e;break;case"repeatable_field":yield e;for(let s=0;s<t.field.length;s++)yield*r(e.get("field",s))}}function n(e){const t=r(e);for(const e of t)e.read().pendingErrors?.length&&a(e)}function a(e){e.set("errors",e.read().pendingErrors??[])}function o(e){for(const t of i(e))if(t.errors?.length||t.pendingErrors?.length)return!0;return!1}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const s of i(e))s.errors?.length&&(t=t.concat(s.errors));return t}s.d(t,{Ay:()=>l,Xz:()=>a,mJ:()=>o,oC:()=>n})},NyxMRXU:(e,t,s)=>{"use strict";s.d(t,{I5:()=>h,KC:()=>m,Nb:()=>f,cW:()=>n,gO:()=>l,oI:()=>u});const i=["acoustic","airplay","album","alternate","alternative","ambient","bit","bonus","censored","chillout","clean","club","composition","cut","dance","dialogue","dirty","disc","disco","dub","early","explicit","extended","feat","featuring","ft","instrumental","live","long","loop","main","megamix","mix","official","original","piano","radio","rap","rehearsal","remixed","remode","rework","reworked","session","short","single","studio","take","takes","techno","trance","uncensored","unknown","untitled","version","video","vocal","with","without"],r=new RegExp("^("+i.join("|")+")$","i");function n(e){return r.test(e)}const a=["a_cappella","clubmix","demo","edit","excerpt","interlude","intro","karaoke","maxi","mono","orchestral","outro","outtake","outtakes","quadraphonic","reedit","re_edit","refix","reinterpreted","remake","remaster","remastered","remix","rmx","reprise","skit","stereo","unplugged","vs"].concat(i),o=new RegExp("^("+a.join("|")+")$","i");function l(e){return null!=e&&o.test(e)}const c=/^(?:cd|disk|12["”]|7["”]|a_cappella|re_edit)$/i;function u(e){return null!=e&&(c.test(e)||l(e))}const d=/^[:.;?!/]$/;function h(e){return null!=e&&d.test(e)}const p=/^['’]$/;function m(e){return null!=e&&p.test(e)}const g=/^[:.;?!,]$/;function f(e){return null!=e&&g.test(e)}},PrjjXpM:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("B21npvo"),r=s("cGbttel");const n=function(e){let{work:t}=e;return(0,r.jsx)("a",{href:"#new-work-"+String(t.id),children:(0,r.jsx)(i.u,{allowNew:!0,className:"rel-add wrap-anywhere",name:t.name})})}},PstwrNQ:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("cGbttel"),r=s("8YlDuzw").A;const n=function(e){let{children:t,className:s,hasNoLabel:n=!1,hasNoMargin:a=!1,rowRef:o}=e;return(0,i.jsx)("div",{className:"row"+(n?" no-label":"")+(a?" no-margin":"")+(r(s)?" "+s:""),ref:o,children:t})}},PzvTjBu:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var i=s("ICHIme/"),r=s("y1xxHKr"),n=s("smZuR9W"),a=s("oEgauXb"),o=s("lIm5/JO"),l=s("cGbttel"),c=s("8YlDuzw").I,u=s("8YlDuzw").A;const d=function(e){let{buildChildren:t,buttonContent:s,buttonProps:d,className:h,closeOnOutsideClick:p=!0,isDisabled:m=!1,isOpen:g,toggle:f,wrapButton:b,...y}=e;const w=d?.id,v=d?.title,_=n.useRef(null),{refs:T,floatingStyles:k,context:x}=(0,i.we)({open:g,onOpenChange:f,middleware:[(0,r.RK)(),(0,r.BN)(),(0,r.UE)({element:_})]}),A=(0,i.kp)(x),E=(0,i.s9)(x,{outsidePress:p,outsidePressEvent:"click"}),{getReferenceProps:I,getFloatingProps:N}=(0,i.bv)([A,E]),j=d?{className:d.className,id:d.id,title:c(d.title)?void 0:(0,a.WQ)(d.title)}:null;let S=(0,l.jsx)("button",{...I(),...j,"aria-controls":g?y.id:null,"aria-haspopup":"dialog",className:d?.className,disabled:m,id:w,ref:T.setReference,title:null==v?null:(0,a.WQ)(v),type:"button",children:s});b&&(S=b(S));const C=n.useCallback((()=>{f(!1)}),[f]),R=n.useRef(null);let L=g?(0,l.jsx)(i.XF,{children:(0,l.jsx)(i.s3,{closeOnFocusOut:!0,context:x,initialFocus:R,modal:!0,returnFocus:!0,children:(0,l.jsxs)("div",{...N(),className:"dialog popover"+(u(h)?" "+h:""),id:y.id,ref:T.setFloating,role:"dialog",style:k,children:[(0,l.jsx)(o.A,{children:t(C,R)}),(0,l.jsx)(i.ie,{context:x,fill:"currentColor",height:12,ref:_,stroke:"#AAA",strokeWidth:1,width:24})]})})}):null;return null===(0,i.R1)()&&(L=(0,l.jsx)(i.P6,{children:L})),(0,l.jsxs)(l.Fragment,{children:[S,L]})}},QBOBohR:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});const i=s.p+"open_edits_for_rel-8789de6.svg";var r=s("NTUlU87"),n=s("UIUB93B"),a=s("cGbttel"),o=s("8YlDuzw").A,l=s("HkNzj3j").l,c=s("oEgauXb").l;const u=function(e){let{relationship:t}=e;const s=t.editsPending,u=(0,r.A)(t);return s&&o(u)?(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(n.A,{content:l("This relationship has {edit_search|open edits}.",{edit_search:u}),target:(0,a.jsx)("img",{alt:c("This relationship has open edits."),className:"info",height:16,src:i,style:{verticalAlign:"middle"}})})]}):null}},QpbAoda:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>A,WF:()=>y,r:()=>w,ro:()=>v,zC:()=>_});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n"),s("AXfG3Yq"),s("DNaZxvn"),s("PkUg7wA"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("A9mh/A7"),r=s("oEgauXb"),n=s("cbdMZik"),a=s("JWGIi2B"),o=s("Bb4NJH1"),l=s("yEXEwX7"),c=s("ZwFjpDV"),u=s("UrXtmnd"),d=s("gooNfJx"),h=s("8YlDuzw").A,p=s("oEgauXb").l,m=s("SKGBikk").ln,g=s("Ui1Lssl").A,f=s("8YlDuzw").I;function b(e,t){let s;void 0!==t.indexed&&(e.indexedSearch=t.indexed),s=Object.hasOwn(t,"searchTerm")?t.searchTerm:e.inputValue,h(s)&&(e.pendingSearch=s)}function y(e){const t=[];if(e.error){switch(e.error){case c.c7:t.push(c.rZ.LOOKUP_ERROR);break;case c.R0:t.push(c.rZ.LOOKUP_TYPE_ERROR);break;case c.ar:t.push(c.rZ.SEARCH_ERROR),e.indexedSearch?t.push(c.rZ.ERROR_TRY_AGAIN_DIRECT):t.push(c.rZ.ERROR_TRY_AGAIN_INDEXED)}return t}const{entityType:s,page:r,recentItems:o,results:u,showDescriptions:d=!0}=e,m=h(e.inputValue),g=Boolean(e.staticItems),f=null!=e.selectedItem,b=!m&&Boolean(o?.length);if(b&&(t.push(c.L0),t.push(...o),t.push(c.RH)),null!=u){const o=u.length;if(o>0){const i=Math.min(o,r*c.md),n=e.totalPages??Math.ceil(o/c.md);b?t.push({...u[0],separator:!0}):t.push(u[0]);for(let e=1;e<i;e++)t.push(u[e]);r<n&&t.push(c.rZ.SHOW_MORE),"link_attribute_type"!==s&&"link_type"!==s||t.push({action:{showDescriptions:!d,type:"toggle-descriptions"},id:"toggle-descriptions",name:p(d?"Hide descriptions":"Show descriptions"),separator:!0,type:"action"})}else m&&!f&&t.push(c.rZ.NO_RESULTS);g||(e.indexedSearch?t.push(c.rZ.TRY_AGAIN_DIRECT):t.push(c.rZ.TRY_AGAIN_INDEXED),function(e){const t=(0,n.tr)().user;if(!t||!c.Us)return!1;return("object"==typeof e&&null!==e||"function"==typeof e)&&"area"===e.entityType?(0,a.Tu)(t):(("object"!=typeof e||null===e)&&"function"!=typeof e||"editor"!==e.entityType&&"genre"!==e.entityType&&"link_type"!==e.entityType&&"link_attribute_type"!==e.entityType&&"release"!==e.entityType)&&(("object"!=typeof e||null===e)&&"function"!=typeof e||"instrument"!==e.entityType||(0,a.CD)(t))}(e)&&"function"==typeof i.e[e.entityType]&&t.push({action:l.SR,id:"add-new-entity",name:i.e[e.entityType](),type:"action"}))}return t}function w(e){if(e.isOpen){if(e.error)switch(e.error){case c.c7:return(0,r.WQ)(c.rZ.LOOKUP_ERROR.name);case c.R0:return(0,r.WQ)(c.rZ.LOOKUP_TYPE_ERROR.name);case c.ar:return(0,r.WQ)(c.rZ.SEARCH_ERROR.name)}const t=e.results?.length;if(t){const s=e.highlightedIndex>=0?e.items[e.highlightedIndex]??null:null;return(s?(0,r.WQ)(s.name)+". ":"")+m("1 result found.\n            Press enter to select, or\n            use the up and down arrow keys to navigate.","{n} results found.\n            Press enter to select, or\n            use the up and down arrow keys to navigate.",t,{n:t})}}else if(e.selectedItem)return(0,r.WQ)(e.selectedItem.name);return""}function v(e,t){const s=e.staticItems;g(s),e.results=(0,d.Ay)(s,t)}function _(e){e.highlightedIndex=-1,e.isOpen=!1,e.page=1,e.totalPages=null,e.error=0}function T(e,t){e.error=t,e.isOpen=!0}function k(e,t,s){const i=e.items;let r=t,n=i.length;for(;;){r<0?r=i.length-1:r>=i.length&&(r=0);if(!i[r].disabled){e.highlightedIndex=r;break}if(n--,n<=0)break;r+=s}}function x(e,t){const s=e.isOpen;let i=!1,n=!1,a=!1,d=!1;{const s=t;if(("object"==typeof s&&null!==s||"function"==typeof s)&&"change-entity-type"===s.type&&"entityType"in s){const t=s.entityType,r=e.entityType;e.entityType=t,e.selectedItem=null,e.recentItems=null,e.recentItemsKey===r&&(e.recentItemsKey=t),e.results=null,_(e),i=!0,n=!0}else if(("object"==typeof s&&null!==s||"function"==typeof s)&&"highlight-index"===s.type&&"index"in s){const t=s.index;e.highlightedIndex=t,n=!0}else if(("object"!=typeof s||null===s)&&"function"!=typeof s||"highlight-next-item"!==s.type)if(("object"!=typeof s||null===s)&&"function"!=typeof s||"highlight-previous-item"!==s.type)if(("object"==typeof s&&null!==s||"function"==typeof s)&&"toggle-add-entity-dialog"===s.type&&"isOpen"in s){const t=s.isOpen;e.isAddEntityDialogOpen=t}else if(("object"!=typeof s||null===s)&&"function"!=typeof s||"search-after-timeout"!==s.type)if(("object"==typeof s&&null!==s||"function"==typeof s)&&"select-item"===s.type&&"item"in s){!function(e,t){{const s=t;if(("object"==typeof s&&null!==s||"function"==typeof s)&&"action"===s.type&&"action"in s)return void x(e,s.action);if(("object"!=typeof s||null===s)&&"function"!=typeof s||"option"!==s.type){if(("object"!=typeof s||null===s)&&"function"!=typeof s||"header"!==s.type)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s)}else{const t=s,i=(0,r.WQ)(t.name);e.selectedItem=t,i!==e.inputValue&&(e.staticItems&&v(e,i),e.inputValue=i),e.staticItems||(e.results=null),_(e),e.recentItems=(0,u.Fi)(t,e.recentItemsKey)}}e.isOpen=!1,e.pendingSearch=null}(e,s.item),i=!0,n=!0}else if(("object"==typeof s&&null!==s||"function"==typeof s)&&"set-input-focus"===s.type&&"isFocused"in s){const t=s.isFocused;e.isInputFocused=t,t&&null==e.selectedItem&&(d=!0,!e.items.length&&e.recentItems?.length&&(i=!0))}else if(("object"==typeof s&&null!==s||"function"==typeof s)&&"set-menu-visibility"===s.type&&"value"in s){const t=s.value;e.isOpen=t&&e.items.length>0,n=!0}else if(("object"!=typeof s||null===s)&&"function"!=typeof s||"show-lookup-error"!==s.type)if(("object"!=typeof s||null===s)&&"function"!=typeof s||"show-lookup-type-error"!==s.type)if(("object"!=typeof s||null===s)&&"function"!=typeof s||"show-ws-results"!==s.type)if(("object"==typeof s&&null!==s||"function"==typeof s)&&"set-recent-items"===s.type&&"items"in s){const t=s.items;e.recentItems=t;const r=e.staticItems;r&&(e.recentItems=e.recentItems.filter((e=>r.find((t=>t.entity.id===e.entity.id))))),i=!0,e.isInputFocused&&f(e.inputValue)&&e.recentItems?.length&&(d=!0)}else if(("object"!=typeof s||null===s)&&"function"!=typeof s||"clear-recent-items"!==s.type)if(("object"!=typeof s||null===s)&&"function"!=typeof s||"show-search-error"!==s.type)if(("object"!=typeof s||null===s)&&"function"!=typeof s||"show-more-results"!==s.type)if(("object"!=typeof s||null===s)&&"function"!=typeof s||"stop-search"!==s.type)if(("object"==typeof s&&null!==s||"function"==typeof s)&&"toggle-descriptions"===s.type&&"showDescriptions"in s){const t=s.showDescriptions;e.showDescriptions=t,(0,o.A)("show_autocomplete_descriptions",e.showDescriptions)}else if(("object"!=typeof s||null===s)&&"function"!=typeof s||"toggle-indexed-search"!==s.type)if(("object"!=typeof s||null===s)&&"function"!=typeof s||"reset-menu"!==s.type){if(("object"!=typeof s||null===s)&&"function"!=typeof s||"type-value"!==s.type||!("value"in s))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+s);{const t=s.value;e.staticItems?(v(e,t),h(t)&&(e.isOpen=!0,a=!0)):e.results=null,e.error=0,e.inputValue=t,e.selectedItem=null,e.highlightedIndex=-1,i=!0,n=!0,d=!0}}else _(e);else e.indexedSearch=!e.indexedSearch,e.page=1,e.isOpen=!1,b(e,l.Sp);else e.pendingSearch=null;else e.page++,e.staticItems||b(e,l.Sp);else T(e,c.ar),e.pendingSearch=null,i=!0,n=!0;else(0,u.DI)(e.recentItemsKey),e.recentItems=[],e.highlightedIndex=-1,i=!0;else{const t=s,{entities:r,page:o,totalPages:l}=t;let c=r.map((e=>({entity:e,id:e.id,name:e.name,type:"option"})));const u=e.results;if(o>1&&u){const e=new Set(u.map((e=>e.id)));c=u.concat(c.filter((t=>!e.has(t.id))))}else a=!0;e.results=c,e.isOpen=!0,e.page=o,e.totalPages=l,e.pendingSearch=null,e.error=0,i=!0,n=!0}else T(e,c.R0),i=!0,n=!0;else T(e,c.c7),i=!0,n=!0;else{const t=s;e.page=1,b(e,t)}else k(e,e.highlightedIndex>=0?e.highlightedIndex-1:e.items.length-1,-1),n=!0;else k(e,e.highlightedIndex+1,1),n=!0}i&&(e.items=y(e),e.items.length||(e.isOpen=!1)),d&&e.items.length&&(e.isOpen=!0),n&&(e.statusMessage=w(e));const p=e.isOpen;p&&a?e.highlightedIndex=function(e){const t=e.items;let s=0;for(const e of t){if(!e.disabled)return s;s++}return-1}(e):s&&!p&&(e.highlightedIndex=-1)}function A(e,t){const s={...e};return x(s,t),s}},RJljx4W:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s("oEgauXb").lp,r=s("oEgauXb").l,n=s("ADQEI/t").ve;const a=function(e){return e?arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&"zxx"===e.iso_code_3?r("[No lyrics]"):n(e.name):i("[removed]","language")}},RhiE1fL:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("YDxZ9xi"),r=s("A6s5oQD");function n(e,t){return e.entity0_credit===t.entity0_credit&&e.entity1_credit===t.entity1_credit&&function(e,t){return e.linkOrder===t.linkOrder&&(0,r.A)(e,t)&&(0,i.A)(e,t)}(e,t)}},SKGBikk:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>p,FZ:()=>y,Gt:()=>m,J$:()=>f,l:()=>g,ln:()=>b,lp:()=>w});var i=s("oEgauXb"),r=s("Uv+krL7"),n=s("gm/df1j");function a(e){let t=e;return"string"==typeof r.wk.replacement&&(t=e.replace(/%/g,r.wk.replacement)),t}const o=(0,r.Sc)(/^[^{}]+/,a),l=(0,r.Ne)((e=>(0,r.WX)(c,e)),(e=>(0,r.WX)(u,e))),c=[(0,r.Sc)(/^[^{}|]+/,a),r.Zb,l],u=[o,r.Zb,l],d=[o,r.Zb,l];function h(e){return(0,r.WX)(d,e)}function p(e,t){return m(e,new r.FP(t))}function m(e,t){return(0,r.Ay)(h,e,t)}const g=(e,t)=>p((0,i.l)(e),t),f=(e,t)=>p((0,n.J$)(e),t),b=(e,t,s,r)=>p((0,i.ln)(e,t,s),r),y=(e,t,s,i)=>p((0,n.FZ)(e,t,s),i),w=(e,t,s)=>p((0,i.lp)(e,t),s)},SmhBGrr:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("52XjgTZ");function r(e){const t=e?e.linkTypeID:null;return null!=t&&i.Ay.link_type[t]||null}},Svj32CV:(e,t,s)=>{"use strict";s.d(t,{zU:()=>M,Ur:()=>X,Ay:()=>K,Ff:()=>B});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n"),s("DNaZxvn"),s("NKd1yOY"),s("gdf1lGT");var i=s("84yo5bY"),r=s.n(i),n=s("++R3FlW"),a=s("smZuR9W"),o=s("nXnm+DU"),l=s("QpbAoda"),c=s("PzvTjBu"),u=s("Imk573c"),d=s("EdqsaKW"),h=s("dMORH1x"),p=s("HfEq/qN"),m=s("ce/Fr6d"),g=s("8alVwqN"),f=s("+5o7Rtt"),b=s("9oisN5V"),y=s("cGbttel"),w=s("oEgauXb").lp;const v=a.memo((function(e){let{allowMoveDown:t,allowMoveUp:s,allowRemoval:i,artistCreditEditorId:r,dispatch:n,index:l,name:c,showMoveButtons:u}=e;const d=a.useCallback((e=>{n({action:e,index:l,type:"edit-artist"})}),[n,l]);return(0,y.jsxs)("tr",{children:[c.removed?(0,y.jsx)("td",{className:"removed-ac-name",colSpan:3,children:w("[removed]","artist credit name")}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("td",{children:(0,y.jsx)(o.A,{dispatch:d,state:c.artist})}),(0,y.jsx)("td",{children:(0,y.jsx)("input",{id:"ac-"+r+"-credited-as-"+String(l),onBlur:function(e){let t=(0,b.A)(e.currentTarget.value);const s=c.artist.selectedItem?.entity;""===t&&s&&(t=s.name),n({index:l,name:t,type:"edit-name"})},onChange:function(e){n({index:l,name:e.currentTarget.value,type:"edit-name"})},type:"text",value:c.name??""})}),(0,y.jsx)("td",{children:(0,y.jsx)("input",{id:"ac-"+r+"-join-phrase-"+String(l),onBlur:function(e){if(!c.automaticJoinPhrase)return;const t=e.currentTarget.value;let s=(0,b.A)(t);s=s.replace(/^\s*(feat\.?|ft\.?|featuring)\s*$/i,"feat."),/^[A-Za-z]+\.?$/.test(s)?s=" "+s+" ":/^,$/.test(s)?s=", ":/^&$/.test(s)?s=" & ":/^;$/.test(s)&&(s="; "),s!==t&&n({index:l,joinPhrase:s,type:"edit-name"})},onChange:function(e){n({automaticJoinPhrase:!1,index:l,joinPhrase:e.currentTarget.value,type:"edit-name"})},type:"text",value:c.joinPhrase??""})})]}),(0,y.jsx)("td",{children:u?(0,y.jsx)("button",{className:"icon move-down",disabled:!t,onClick:function(){n({index:l,type:"move-name-down"})},title:w("Move artist credit down","interactive"),type:"button"}):null}),(0,y.jsx)("td",{children:u?(0,y.jsx)("button",{className:"icon move-up",disabled:!s,onClick:function(){n({index:l,type:"move-name-up"})},title:w("Move artist credit up","interactive"),type:"button"}):null}),(0,y.jsx)("td",{className:"align-right",children:c.removed?(0,y.jsx)("button",{className:"icon undo",onClick:function(){c.removed&&n({index:l,type:"undo-remove-name"})},title:w("Undo artist credit removal","interactive"),type:"button"}):i?(0,y.jsx)("button",{className:"icon remove-item remove-artist-credit",onClick:function(){c.removed||n({index:l,type:"remove-name"})},title:w("Remove artist credit","interactive"),type:"button"}):null})]})}));var _=s("oEgauXb").l,T=s("HkNzj3j").l,k=s("H+29DOL").O,x=s("oEgauXb").lp,A=s("SKGBikk").l;const E=a.memo((e=>{let{dispatch:t,initialBubbleFocus:s,initialFocusRef:i,isTrack:r}=e;return(0,y.jsxs)("div",{className:"buttons",children:[(0,y.jsx)("button",{id:"copy-ac",onClick:()=>t({type:"copy"}),type:"button",children:_("Copy credits")}),(0,y.jsx)("button",{id:"paste-ac",onClick:()=>t({type:"paste"}),type:"button",children:_("Paste credits")}),(0,y.jsx)("button",{className:"positive",type:"submit",children:_("Done")}),r?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{id:"next-track-ac",onClick:()=>t({type:"next-track"}),ref:"next-track"===s?i:null,type:"button",children:_("Next")}),(0,y.jsx)("button",{id:"prev-track-ac",onClick:()=>t({type:"previous-track"}),ref:"prev-track"===s?i:null,type:"button",children:_("Previous")})]}):null]})})),I=a.memo((()=>(0,y.jsx)("tr",{children:(0,y.jsx)("td",{colSpan:3,id:"ac-docs",children:T("Use the following fields to enter artist name variations\n         and multiple artist collaborations. See the\n         {ac|Artist Credit} documentation for more information.",{ac:"/doc/Artist_Credits"})})}))),N=a.memo((e=>{let{editsPending:t,entity:s,names:i}=e;const n=a.useMemo((()=>({...(0,m.Wi)(i),editsPending:t})),[i,t]);return(0,y.jsxs)("thead",{children:[(0,y.jsx)(I,{}),(0,b.A)((0,d.R2)(n))?(0,y.jsx)("tr",{children:(0,y.jsxs)("td",{colSpan:4,id:"ac-preview-cell",children:[k(x("Preview","header"))+" ","track"===s.entityType?(0,y.jsx)(f.A,{allowNew:!0,content:""===r().unwrap(s.name)?_("[missing track name]"):"",customArtistCredit:n,deletedCaption:""===r().unwrap(s.name)?_("You haven’t entered a track name yet."):_("This track hasn’t been added yet."),entity:s,showDeletedArtists:!1,target:"_blank"}):(0,y.jsx)(g.A,{artistCredit:n,showDeleted:!1,target:"_blank"})]})}):null,(0,y.jsxs)("tr",{className:"artist-credit-header",children:[(0,y.jsx)("th",{children:_("Artist in MusicBrainz:")}),(0,y.jsx)("th",{children:_("Artist as credited:")}),(0,y.jsx)("th",{children:_("Join phrase:")}),(0,y.jsx)("th",{})]})]})}));const j=a.memo((function(e){let{dispatch:t}=e;return(0,y.jsx)("tr",{children:(0,y.jsx)("td",{className:"align-right",colSpan:4,children:(0,y.jsx)("button",{className:"add-item with-label",onClick:()=>t({type:"add-name"}),type:"button",children:x("Add artist credit","interactive")})})})}));const S=a.memo((function(e){let{changeMatchingTrackArtists:t,dispatch:s,initialArtistCreditString:i}=e;return(0,y.jsx)("div",{children:(0,y.jsxs)("label",{children:[(0,y.jsx)("input",{checked:!0===t,id:"change-matching-artists",onChange:e=>s({checked:e.currentTarget.checked,type:"set-change-matching-artists"}),type:"checkbox"}),i?A("Change all artists on this release that match “{name}”",{name:i}):_("Change all artists on this release that are currently empty")]})})}));const C=a.memo((function(e){let{closeAndReturnFocus:t,dispatch:s,initialFocusRef:i,state:r}=e;const{changeMatchingTrackArtists:o,editsPending:l,entity:c,initialArtistCreditString:u,initialBubbleFocus:d,names:h}=r,p="track"===c.entityType,m=a.useRef(null),g=a.useMemo((()=>!h.length||null!=d&&"default"!==d?h:(0,n.A)(h).set(0,"artist","inputRef",i).final()),[h,d,i]),f=a.useMemo((()=>r.names.filter((e=>!e.removed)).length>1),[r.names]);return(0,y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),t()},children:[(0,y.jsxs)("table",{className:"table-condensed",onKeyDown:function(e){e.target instanceof HTMLInputElement&&13===e.keyCode&&p&&c.next()&&(e.preventDefault(),s({initialFocus:"default",type:"next-track"}))},ref:m,children:[(0,y.jsx)(N,{editsPending:l,entity:c,names:h}),(0,y.jsxs)("tbody",{children:[g.map(((e,t)=>(0,y.jsx)(v,{allowMoveDown:t<h.length-1,allowMoveUp:t>0,allowRemoval:f,artistCreditEditorId:r.id,dispatch:s,index:t,name:e,showMoveButtons:f&&!e.removed},e.key))),(0,y.jsx)(j,{dispatch:s})]})]}),p?(0,y.jsx)(S,{changeMatchingTrackArtists:o,dispatch:s,initialArtistCreditString:u}):null,(0,y.jsx)(E,{dispatch:s,initialBubbleFocus:d,initialFocusRef:i,isTrack:p})]})}));var R=s("8YlDuzw").I,L=s("Ui1Lssl").A,P=s("8YlDuzw").A,$=s("oEgauXb").lp;function D(e){return e.removed}function O(e){return!e.removed}function z(e){const t=e.read(),s=t.reduce(((e,t,s)=>(t.removed||e.push(s),e)),[]),i=s.length,r=/^(| & |, )$/;if(i>0){const r=s[i-1],n=t[r];n&&!1!==n.automaticJoinPhrase&&e.set(r,"joinPhrase","")}if(i>1){const n=s[i-2],a=t[n];a&&!1!==a.automaticJoinPhrase&&r.test(a.joinPhrase)&&e.set(n,"joinPhrase"," & ")}if(i>2){const n=s[i-3],a=t[n];a&&!1!==a.automaticJoinPhrase&&r.test(a.joinPhrase)&&e.set(n,"joinPhrase",", ")}}function Y(e,t){return"ac-"+e+"-artist-"+String(t)}function U(e,t){const s=(0,h.NF)();return{artist:(0,o.U)({entityType:"artist",id:Y(e,t)}),automaticJoinPhrase:!0,joinPhrase:"",key:s,name:"",removed:!1}}function W(e){const t=e.get("names");t.write().push(U(e.read().id,t.read().length)),z(t)}function H(e,t,s){const i=e.read().names[t];e.set("names",t,e.read().names[s]),e.set("names",s,i);const r=e.read().names;if(!r[t].removed&&!r[s].removed){const i=r[t].joinPhrase;e.set("names",t,"joinPhrase",r[s].joinPhrase),e.set("names",s,"joinPhrase",i)}}function M(e){e.set("isOpen",!1),function(e){const{id:t,names:s}=e.read();if(s.some(D)){const i=e.get("names");i.set(s.filter(O));const r=e.read().names.length;for(let e=0;e<r;e++)i.set(e,"artist","id",Y(t,e));s.length||W(e)}}(e)}function B(e,t){const s=(0,n.A)(e),i=e.names;{const r=t;if(("object"!=typeof r||null===r)&&"function"!=typeof r||"copy"!==r.type)if(("object"!=typeof r||null===r)&&"function"!=typeof r||"open-dialog"!==r.type)if(("object"!=typeof r||null===r)&&"function"!=typeof r||"close-dialog"!==r.type)if(("object"!=typeof r||null===r)&&"function"!=typeof r||"add-name"!==r.type)if(("object"==typeof r&&null!==r||"function"==typeof r)&&"update-single-artist-autocomplete"===r.type&&"action"in r){const t=r.action;s.set("singleArtistAutocomplete",(0,l.Ay)(e.singleArtistAutocomplete,t))}else if(("object"==typeof r&&null!==r||"function"==typeof r)&&"edit-artist"===r.type&&"action"in r&&"index"in r){const e=r.action,t=r.index,i=e;s.update("names",t,(e=>{const t=e.read(),s=t.artist.inputValue,r=(0,l.Ay)(t.artist,i);e.set("artist",r),(t.name===s||r.selectedItem&&R(t.name))&&e.set("name",r.inputValue)}))}else if(("object"!=typeof r||null===r)&&"function"!=typeof r||"edit-name"!==r.type)if(("object"==typeof r&&null!==r||"function"==typeof r)&&"move-name-down"===r.type&&"index"in r){const e=r.index;e<i.length-1&&H(s,e,e+1)}else if(("object"==typeof r&&null!==r||"function"==typeof r)&&"move-name-up"===r.type&&"index"in r){const e=r.index;e>0&&H(s,e,e-1)}else if(("object"==typeof r&&null!==r||"function"==typeof r)&&"remove-name"===r.type&&"index"in r){const t=r.index,i=e.names.reduce(((e,t)=>e+(t.removed?0:1)),0),n=s.get("names");i>1&&(n.set(t,"removed",!0),z(n))}else if(("object"==typeof r&&null!==r||"function"==typeof r)&&"undo-remove-name"===r.type&&"index"in r){const e=r.index,t=s.get("names");t.set(e,"removed",!1),z(t)}else if(("object"!=typeof r||null===r)&&"function"!=typeof r||"paste"!==r.type)if(("object"==typeof r&&null!==r||"function"==typeof r)&&"set-names-from-artist-credit"===r.type&&"artistCredit"in r){let t=r.artistCredit;const i=(0,n.A)(t);for(let e=0;e<t.names.length;e++){const s=t.names[e];s.artist||i.set("names",e,"artist",(0,u.L$)({name:s.name}))}t=i.final(),s.set("names",G(t,e.id))}else{if(("object"!=typeof r||null===r)&&"function"!=typeof r||"next-track"!==r.type&&"previous-track"!==r.type&&"set-change-matching-artists"!==r.type)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+r);L(!1)}else try{const t=(0,p.Lr)("copiedArtistCredit");if(null!=t){const i=JSON.parse(t);s.set("names",G(i,e.id,!1)),s.read().names.length||W(s)}}catch(e){console.error(e)}else{const e=r,{index:t,type:i,...n}=e;s.update("names",t,(e=>{null!=n.automaticJoinPhrase&&e.set("automaticJoinPhrase",n.automaticJoinPhrase),null!=n.joinPhrase&&e.set("joinPhrase",n.joinPhrase),null!=n.name&&e.set("name",n.name);const{artist:t,name:s}=e.read();t.selectedItem||t.inputValue===s||e.set("artist",(0,l.Ay)(t,{type:"type-value",value:s}))}))}else W(s);else M(s);else{const e=r;s.set("isOpen",!0).set("changeMatchingTrackArtists",!1).set("initialArtistCreditString",(0,m.mE)(i)).set("initialBubbleFocus",e.initialFocus)}else{const e=(0,m.Et)(i);(0,p.Lr)("copiedArtistCredit",JSON.stringify(e))}}const r=s.read(),a=r.singleArtistAutocomplete,o=r.names;if(e.singleArtistAutocomplete!==a&&F(e.names))s.update("names",0,(e=>{const t=a.inputValue;e.set("name",t).set("joinPhrase","").get("artist").set("selectedItem",a.selectedItem).set("inputValue",t)}));else if(i!==o)if(F(o)){const e=o[0].artist;s.get("singleArtistAutocomplete").set("disabled",!1).set("selectedItem",e.selectedItem).set("inputValue",e.inputValue).update((e=>{e.set("items",(0,l.WF)(e.read()))}))}else s.get("singleArtistAutocomplete").set("disabled",!0).set("selectedItem",null).set("inputValue",(0,m.mE)(o));return s.get("singleArtistAutocomplete").set("isLookupPerformed",(0,m.D2)(r.names)),s.final()}function F(e){if(1===e.filter(O).length){const t=e[0].artist.selectedItem?.entity;return!(t&&t.name!==(0,m.mE)(e))}return!1}function G(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.names;return i.length?i.map(((e,i)=>{const r=(0,h.NF)(),n=e.artist;let a="",l=null;return null!=n&&(a=n.name,n.id&&(l={entity:n,id:n.id,name:a,type:"option"})),{artist:(0,o.U)({containerClass:"artist-credit-editor",entityType:"artist",id:Y(t,i),inputValue:a,selectedItem:l}),automaticJoinPhrase:s,joinPhrase:e.joinPhrase??"",key:r,name:e.name||a,removed:!1}})):[U(t,0)]}function X(e){const{entity:t,id:s,isOpen:i=!1,...n}=e,a=r().unwrap(t.artistCredit);L(a);const l=G(a,s),c=F(l);return{artistCreditString:"",changeMatchingTrackArtists:!1,entity:t,id:s,initialArtistCreditString:"",isOpen:i,names:l,singleArtistAutocomplete:(0,o.U)({containerClass:"artist-credit-editor",disabled:i||!c,entityType:"artist",id:"ac-"+s+"-single-artist",inputValue:(0,d.Pg)(a.names),isLookupPerformed:(0,m.D2)(l),selectedItem:c?l[0].artist.selectedItem:null}),...n}}const K=a.memo((function(e){let{dispatch:t,state:s}=e;const{entity:i,formName:r,isOpen:n,names:l,singleArtistAutocomplete:u}=s,d=a.useCallback((e=>{t({action:e,type:"update-single-artist-autocomplete"})}),[t]),h=P(r)?r+".artist_credit.names.":"",p=a.useCallback(((e,i)=>(0,y.jsx)(C,{closeAndReturnFocus:e,dispatch:t,initialFocusRef:i,state:s})),[t,s]),m=a.useCallback((e=>{t(e?{type:"open-dialog"}:{type:"close-dialog"})}),[t]),g=a.useMemo((()=>({className:"open-ac",id:"open-ac-"+String(i.id)})),[i.id]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.A,{dispatch:d,state:u,children:(0,y.jsx)(c.A,{buildChildren:p,buttonContent:$("Edit","verb, interactive"),buttonProps:g,id:"artist-credit-bubble",isOpen:n,toggle:m})}),h?l.filter(O).map((function(e,t){const s=h+t+".",i=e.artist,r=i.selectedItem?.entity;return(0,y.jsxs)(a.Fragment,{children:[(0,y.jsx)("input",{name:s+"name",type:"hidden",value:e.name??""}),(0,y.jsx)("input",{name:s+"join_phrase",type:"hidden",value:e.joinPhrase??""}),(0,y.jsx)("input",{name:s+"artist.name",type:"hidden",value:r?.name??i.inputValue}),(0,y.jsx)("input",{name:s+"artist.id",type:"hidden",value:String(r?.id??"")})]},s)})):null]})}))},TZv5lnH:(e,t,s)=>{"use strict";s.d(t,{A:()=>o,n:()=>a});var i=s("HkNzj3j").l,r=s("SKGBikk").l;function n(e,t){const s=t.length;if(!s)return"";let i=e("{last_list_item}",{last_list_item:t[s-1]});for(let r=s-2;r>=0;r--)i=e("{commas_only_list_item}, {rest}",{commas_only_list_item:t[r],rest:i});return i}const a=e=>n(r,e),o=e=>n(i,e)},TeVBGSm:(e,t,s)=>{"use strict";s.d(t,{A$:()=>E,Bm:()=>N,LS:()=>I,Rl:()=>u,Yb:()=>d});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n"),s("XteD3uf"),s("NKd1yOY"),s("gdf1lGT"),s("EVdnBjI");var i=s("WIbkAuH"),r=s("xrv16+S"),n=s("cGbttel"),a=s("oEgauXb").g,o=s("HkNzj3j").l,l=s("oEgauXb").l;const c={allmusic:{artist:"6b3e3c85-0002-4f34-aca6-80ace0d7e846",genre:"6da144de-911b-49c5-81eb-bd8303b3f6b4",recording:"54482490-5ff1-4b1c-9382-b4d0ef8e0eac",release:"90ff18ad-3e9d-4472-a3d1-71d4df7e8484",release_group:"a50a1d20-2b20-4d2c-9a29-eb771dd78386",work:"ca9c9f46-11bd-423a-b134-9109cbebe9d7"},amazon:{release:"4f2e710d-166c-480c-a293-2e2c8d658d87"},artgallery:{artist:"8203341a-27be-40bb-b755-08d8ca9d7a9c"},bandcamp:{artist:"c550166e-0548-4a18-b1d4-e2ae423a3e88",genre:"ad28869f-0f9e-4bd5-b786-70125cc69c3c",label:"c535de4c-a112-4974-b138-5e0daa56eab5"},bandsintown:{artist:"ea45ed3d-2d5e-456e-8c32-94b6f51426e2",event:"81bc32b3-7039-486a-a92f-52486fb7e162",place:"0e41b9de-20d8-4d1a-869d-7018e1045439"},bbcmusic:{artist:"d028a975-000c-4525-9333-d3c8425e4b54"},blog:{artist:"eb535226-f8ca-499d-9b18-6a144df4ae6f",label:"1b431eba-0d25-4f27-9151-1bb607f5c8f8",place:"e3051f32-527b-4c47-9993-71250a6cd99c"},bookbrainz:{artist:"f82f9342-a08d-46b7-ab7a-d8b6330c805d",label:"b7be2ca4-bdb7-4d87-9619-f2fa50120409",release:"63b84620-ba52-4630-9bfe-8ad3b5504dff",release_group:"27cfc95c-d368-45a9-ae0d-308c274c2017",series:"fe60d685-8064-4501-baab-e2de8ff52a27",work:"0ea7cf4e-93dd-4bc4-b748-0f1073cf951c"},cdbaby:{artist:"4c21e5f5-2960-4abc-88a1-62ce491bb96e"},cpdl:{artist:"991d7d60-01ee-41de-9b62-9ef3f86c2447"},crowdfunding:{artist:"93883cf6-e818-4938-990e-75863f8db2d3",event:"61187747-04d3-4d15-889a-0ceedaecf0aa",label:"16f681e4-93c9-4888-ae5e-3163f01269ab",place:"09328447-f070-463e-a760-a419ffc115bf",recording:"f9d9946e-0cea-4e47-9d3b-be4be55397a8",release:"e1434bc9-5e54-4b10-b3f6-db09e6f0cb44",release_group:"6aec99c1-8817-4d91-8fd0-1028cb467b62",series:"b4894e57-5e32-479f-b1e7-bc561048ce48"},discography:{artist:"4fb0eeec-a6eb-4ae3-ad52-b55765b94e8f"},discographyentry:{release:"823656dd-0309-4247-b282-b92d287d59c5"},discogs:{artist:"04a5b104-a4c2-4bac-99a1-7b837c37d9e4",event:"73713a50-1377-44cd-b429-4a2c0c612bf1",genre:"4c8510c9-1dc2-49b9-9693-27bdc5cc8311",label:"5b987f87-25bc-4a2d-b3f1-3618795b8207",place:"1c140ac8-8dc2-449e-92cb-52c90d525640",release:"4a78823c-1c53-4176-a5f3-58026c76f2bc",release_group:"99e550f3-5ab4-3110-b5b9-fe01d970b126",series:"338811ef-b1a9-449d-954e-115846f33a44",work:"d78b7280-eb9e-4a57-86c3-cedaa1aa2175"},downloadfree:{artist:"34ae77fe-defb-43ea-95d4-63c7540bac78",label:"46505eea-05d6-48cc-ad78-1f79abc556e1",recording:"45d0cbc5-d65b-4e77-bdfd-8a75207cb5c5",release:"9896ecd0-6d29-482d-a21e-bd5d1b5e3425"},downloadpurchase:{artist:"f8319a2f-f824-4617-81c8-be6560b3b203",label:"dc1a65f4-6458-4f3d-bbb1-57e58668d6e7",recording:"92777657-504c-4acb-bd33-51a201bd57e1",release:"98e08c20-8402-4163-8970-53504bb6a1e4"},geonames:{area:"c52f14c0-e9ac-4a8a-8f7a-c47328de168f",place:"c4c6356f-9cbc-4e26-ae76-63eef96d059d"},image:{artist:"221132e9-e30e-43f2-a741-15afc4c5fa7c",instrument:"f64eacbd-1ea1-381e-9886-2cfb552b7d90",label:"b35f7822-bf3c-4148-b306-fb723c63ee8b",place:"68a4537c-f2a6-49b8-81c5-82a62b0976b7"},imdb:{artist:"94c8b0cc-4477-4106-932c-da60e63de61c",label:"dfd36bc7-0c06-49fa-8b79-96978778c716",place:"815bc5ca-c2fb-4dc6-a89b-9150888b0d4d",recording:"dad34b86-5a1a-4628-acf5-a48ccb0785f2",release:"7387c5a2-9abe-4515-b667-9eb5ed4dd4ce",release_group:"85b0a010-3237-47c7-8476-6fcefd4761af",series:"ed4083be-a0b3-4040-b5b4-7513a67e9dc8",work:"e5c75559-4dda-452e-a900-ae375935164c"},imslp:{artist:"8147b6a2-ad14-4ce7-8f0a-697f9a31f68f"},interview:{artist:"1f171391-1f98-4f45-b191-038ec3b12395"},lastfm:{artist:"08db8098-c0df-4b78-82c3-c8697b4bba7f",event:"fd86b01d-c8f7-4f0a-a077-81855a9cfeef",label:"e3390a1d-3083-4bc9-9295-aff9da18612c",place:"c3ddb53d-a7df-4486-8cc7-c1b7baec994e"},license:{recording:"f25e301d-b87b-4561-86a0-5d2df6d26c0a",release:"004bd0c3-8a45-4309-ba52-fa99f3aa3d50",work:"770ea9f4-cba0-4194-b77f-fe2740055e34"},lyrics:{artist:"e4d73442-3762-45a8-905c-401da65544ed",label:"9eb3977f-2aa2-41dd-bbff-0cadda5ad484",release_group:"156344d3-da8b-40c6-8b10-7b1c22727124",work:"e38e65aa-75e0-42ba-ace0-072aeb91a538"},mailorder:{artist:"611b1862-67af-4253-a64f-34adba305d1d",label:"607deff9-31a8-4b8c-a971-d873cf59ef16",release:"3ee51e05-a06a-415e-b40c-b3f740dedfd7"},myspace:{artist:"bac47923-ecde-4b59-822e-d08f0cd10156",label:"240ba9dc-9898-4505-9bf7-32a53a695612",place:"c809cb4a-2835-44fb-bc64-fd4882bd389c"},onlinecommunity:{artist:"35b3a50f-bf0e-4309-a3b4-58eeed8cee6a"},otherdatabases:{artist:"d94fb61c-fa20-4e3c-a19a-71a949fb2c55",event:"1e06fb0b-831d-49cf-abfd-52acb5b56e05",genre:"1873eeea-f2e6-4e08-a754-cc92567983ea",instrument:"41930af2-cb94-488d-a4f0-d232f6ef391a",label:"83eca2b3-5ae1-43f5-a732-56fa9a8591b1",place:"87a0a644-0a69-46c0-9e48-0656b8240d89",recording:"bc21877b-e993-42ed-a7ce-9187ec9b638f",release:"c74dee45-3c85-41e9-a804-92ab1c654446",release_group:"38320e40-9f4a-3ae7-8cb2-3f3c9c5d856d",series:"8a08d0f5-c7c4-4572-9d22-cee92693d820",work:"190ea031-4355-405d-a43e-53eb4c5c4ada"},patronage:{artist:"6f77d54e-1d81-4e1a-9ea5-37947577151b",event:"f0f05915-64ac-45fb-a9b3-1bf24cd191d9",label:"e3d9c283-0146-4d91-9471-1b491a9c17ef",place:"f14b4e5f-0884-4bb0-b3fa-134cc2734f0e",series:"492a4e07-0ea9-4e82-870b-cab942b0576f"},podcastfeed:{series:"5ce55509-47a5-4374-a1c6-a68fd377bddf"},purevolume:{artist:"b6f02157-a9d3-4f24-9057-0675b2dbc581"},review:{release_group:"c3ac9c3b-f546-4d15-873f-b294d2c1b708"},score:{work:"0cc8527e-ea40-40dd-b144-3b7588e759bf"},secondhandsongs:{artist:"79c5b84d-a206-4f4c-9832-78c028c312c3",label:"e46c1166-2aae-4623-ade9-34bd067dfe02",recording:"a98fb02f-f289-4778-b34e-2625d922e28f",release:"0e555925-1b7d-475c-9b25-b9c349dcc3f3",work:"b80dff64-9560-445a-b824-c8b432d77a52"},setlistfm:{artist:"bf5d0d5e-27a1-4e94-9df7-3cdc67b3b207",event:"027fce0c-c621-4fd1-b728-1678ae08f280",place:"751e8fb1-ed8d-4a94-b71b-a38065054f5d",series:"de143a8b-ea80-4b26-9246-f1ce498d4b01"},shownotes:{release:"2d24d075-9943-4c4d-a659-8ce52e6e6b57"},socialnetwork:{artist:"99429741-f3f6-484b-84f8-23af51991770",event:"68f5fcaa-b58c-3bfe-9b7c-75c2b56e839a",label:"5d217d99-bc05-4a76-836d-c91eec4ba818",place:"040de4d5-ace5-4cfb-8a45-95c5c73bce01",series:"80d5e037-9aa7-3d80-80da-fb01d6dbc25b"},songfacts:{work:"80402bbc-1aec-41d1-a5be-b599b89bc3c3"},songkick:{artist:"aac9c4bc-a5b9-30b8-9839-e3ac314c6e58",event:"125afc57-4d33-3b63-ab41-848a3a18d3a6",place:"3eb58d3e-6f00-36a8-a115-3dad616b7391"},soundcloud:{artist:"89e4a949-0976-440d-bda1-5f772c1e5710",label:"a31d05ba-3b82-47b2-ab8b-1fe73b5459e2",place:"1cd2eb89-2997-4901-87e9-838ac9a68da9",series:"4789521b-57b9-4689-9644-46de63190f66"},streamingfree:{artist:"769085a1-c2f7-4c24-a532-2375a77693bd",label:"5b3d2907-5cd0-459b-9a33-d4398a544388",recording:"7e41ef12-a124-4324-afdb-fdbae687a89c",release:"08445ccf-7b99-4438-9f9a-fb9ac18099ee"},streamingpaid:{artist:"63cc5d1f-f096-4c94-a43f-ecb32ea94161",label:"cbe05bdd-a877-4cc6-8060-7ba43a2516ef",recording:"b5f3058a-666c-406f-aafb-f9249fc7b122",release:"320adf26-96fa-4183-9045-1f5f32f833cb"},ticketing:{artist:"34beaf28-cbdd-4bf7-bc41-e7de18135245",event:"bf0f91b9-d97e-4a7b-9114-f1db1e0b61de",label:"705f4b36-b12e-41e4-a5f2-57e2de83ca6a",place:"914021c7-01f9-4578-b3e3-1a4b0f6453a7",series:"bb8ad711-4667-4395-9bfa-453b1299a79b"},vgmdb:{artist:"0af15ab3-c615-46d6-b95b-a5fcd2a92ed9",event:"5d3e0348-71a8-3dc1-b847-3a8f1d5de688",label:"8a2d3e55-d291-4b99-87a0-c59c6b121762",place:"f11ffda6-d59a-45bf-9b07-74b08335b5fa",release:"6af0134a-df6a-425a-96e2-895f9cd342ba",work:"bb250727-5090-4568-af7b-be8545c034bc"},viaf:{artist:"e8571dcc-35d4-4e91-a577-a3382fd84460",label:"c4bee4f4-e622-4c74-b80b-585989de27f4",place:"49a08641-0aed-4e10-8311-ec220b8c50ad",series:"67764397-d154-4f9a-8aa8-cbc4de4df5b8",work:"b6eaef52-68a0-4b50-b875-8acd7d9212ba"},videochannel:{artist:"d86c9450-b6d0-4760-a275-e7547495b48b",event:"1f3df2eb-3d0b-44f1-9599-1309c692bc7c",label:"20ad367c-cba0-4c02-bd61-2df3ae8cc799",place:"e5c5a0f6-9581-44d8-a5fb-d3688254dc9f",series:"71774032-781b-468c-9cbf-8a9a2f8eda13"},wikidata:{area:"85c5256f-aef1-484f-979a-42007218a1c2",artist:"689870a4-a1e4-4912-b17f-7b2664215698",event:"b022d060-e6a8-340f-8c73-6b21b1d090b9",genre:"11a13c3b-15cb-4c1c-accc-0417f7f2019b",instrument:"1486fccd-cf59-35e4-9399-b50e2b255877",label:"75d87e83-d927-4580-ba63-44dc76256f98",place:"e6826618-b410-4b8d-b3b5-52e29eac5e1f",release_group:"b988d08c-5d86-4a57-9557-c83b399e3580",series:"a1eecd98-f2f2-420b-ba8e-e5bc61697869",work:"587fdd8f-080e-46a9-97af-6425ebbcb3a2"},wikipedia:{area:"9228621d-9720-35c3-ad3f-327d789464ec",artist:"29651736-fa6d-48e4-aadc-a557c6add1cb",event:"08a982f7-d754-39b2-8315-d7cae474c641",instrument:"b21fd997-c813-3bc6-99cc-c64323bd15d3",label:"51e9db21-8864-49b3-aa58-470d7b81fa50",place:"82680bbb-0391-4344-9687-4f419df4b97a",release_group:"6578f0e9-1ace-4095-9de8-6e517ddb1ceb",series:"b2b9407a-dd32-30f4-aa48-b2fd2077d1d2",work:"b45a88d6-851e-4a6e-9ec8-9a5f4ebe76ab"},youtube:{artist:"6a540e5b-58c6-4192-b6ba-dbc71ec8fcf0",event:"fea46163-dc45-3af9-917e-1798f325d21a",label:"d9c71059-ba9d-4135-b909-481d12cf84e3",place:"22ec436d-bb65-4c83-a268-0fdb0dbd8834",series:"f23802a4-36be-3751-8e4d-93422e08b3e8"},youtubemusic:{artist:"631712a0-7525-42ba-b7a3-605aa7a238c4"}},u=[c.allmusic,c.amazon,c.bandcamp,c.bandsintown,c.bbcmusic,c.bookbrainz,c.cpdl,c.discogs,c.geonames,c.imdb,c.imslp,c.lastfm,c.lyrics,c.myspace,c.otherdatabases,c.purevolume,c.secondhandsongs,c.setlistfm,c.songfacts,c.songkick,c.soundcloud,c.wikidata,c.wikipedia,c.vgmdb,c.viaf,c.youtube].reduce((function(e,t){return e.concat(Object.values(t))}),[]),d={ENTITY:"entity",NONE:"none",RELATIONSHIP:"relationship",URL:"url"};function h(e){const t=e.match(/^(https?:\/\/[^/]+\/wiki\/)([^?#]+)(.*)$/);return t&&(e=t[1]+encodeURIComponent(decodeURIComponent(t[2])).replace(/%20/g,"_").replace(/%24/g,"$").replace(/%2C/g,",").replace(/%2F/g,"/").replace(/%3A/g,":").replace(/%3B/g,";").replace(/%40/g,"@")+t[3]),e}function p(e){let t,s="";return(t=e.match(/(?:amazon|amzn)\.([a-z.]+)\//))&&(s=t[1],"jp"===s&&(s="co.jp"),"at"===s&&(s="de")),s}const m=a("Please link to a channel, not a specific video.\n   Videos should be linked to the appropriate\n   recordings or releases instead."),g=a("This is a link to a search result. Please link to any page in the results\n   that is relevant to this entity instead, if available."),f=a("Please link to a specific video. Add channel pages\n   to the relevant artist, label, etc. instead."),b=a("This is a lyrics site. As such, links to the site should be added\n   at the release group level with the “lyrics” relationship,\n   rather than directly to any specific release."),y={"7digital":{hostname:["7digital.com","zdigital.com.au"],match:[/^(https?:\/\/)?([^/]+\.)?(7digital\.com|zdigital\.com\.au)/i],restrict:[c.downloadpurchase],clean:e=>e=(e=(e=e.replace(/^https?:\/\/(.*)$/,"https://$1")).replace(/^https:\/\/([^/]+\.)?(7digital\.com|zdigital\.com\.au)\/yourmusic\/(.*)\/[\d]+\/?$/,"https://$1$2/$3")).replace(/([^&?#]+)(?:.*)$/,"$1")},"45cat":{hostname:"45cat.com",match:[/^(https?:\/\/)?(www\.)?45cat\.com\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?45cat\.com\/([a-z]+\/[^/?&#]+)(?:[/?&#].*)?$/,"https://www.45cat.com/$1"),validate(e,t){const s=/^https:\/\/www\.45cat\.com\/([a-z]+)\/[^/?&#]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"artist"===e,target:d.ENTITY};case c.otherdatabases.label:return{result:"label"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"record"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},"45worlds":{hostname:"45worlds.com",match:[/^(https?:\/\/)?(www\.)?45worlds\.com\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?45worlds\.com\/([0-9a-z]+\/[a-z]+\/[^/?&#]+)(?:[/?&#].*)?$/,"https://www.45worlds.com/$1"),validate(e,t){const s=/^https:\/\/www\.45worlds\.com\/([0-9a-z]+)\/([a-z]+)\/[^/?&#]+$/.exec(e);if(s){const e=s[2];switch(t){case c.otherdatabases.artist:return{result:/^(artist|composer|conductor|orchestra|soloist)$/.test(e),target:d.ENTITY};case c.otherdatabases.event:return{result:"listing"===e,target:d.ENTITY};case c.otherdatabases.label:return{result:"label"===e,target:d.ENTITY};case c.otherdatabases.place:return{result:"venue"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:/^(album|cd|media|music|record)$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},acum:{hostname:"nocs.acum.org.il",match:[/^(https:\/\/)?nocs\.acum\.org\.il\/acumsitesearchdb\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^https?:\/\//,"https://").replace(/&.*/,"").replace("/version?","/work?"),validate(e,t){if(/^https:\/\/nocs\.acum\.org\.il\/acumsitesearchdb\//i.test(e)){switch(t){case c.otherdatabases.work:return{result:/\/work\?workid=[0-9A-Z]+$/.test(e),target:d.ENTITY};case c.otherdatabases.artist:return{result:/\/results\?(creatorid=[A-Z]-\d+-\d|performerid=\d+)$/.test(e),target:d.ENTITY};case c.otherdatabases.label:return{result:/\/results\?creatorid=[A-Z]-\d+-\d$/.test(e),target:d.ENTITY};case c.otherdatabases.release_group:return{result:/\/album\?albumid=[0-9A-Z]+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},allmusic:{hostname:"allmusic.com",match:[/^(https?:\/\/)?([^/]+\.)?allmusic\.com/i],restrict:[c.allmusic],clean:e=>e.replace(/^https?:\/\/(?:[^.]+\.)?allmusic\.com\/(artist|album(?:\/release)?|composition|genre|song|style|performance)\/(?:[^/]*-)?((?:ma|mn|mw|mc|mt|mq|mr)[0-9]+).*/,"https://www.allmusic.com/$1/$2"),validate(e,t){const s=/^https:\/\/www\.allmusic\.com\/([a-z/]+)[0-9]{10}$/.exec(e);if(s){const i=s[1];switch(t){case c.allmusic.artist:return{result:"artist/mn"===i,target:d.ENTITY};case c.allmusic.genre:return{result:"genre/ma"===i||"style/ma"===i,target:d.ENTITY};case c.allmusic.recording:return{result:"performance/mq"===i,target:d.ENTITY};case c.allmusic.release:return"album/mw"===i?{error:o("Allmusic “{album_url_pattern}” links should be added to\n                   release groups.\n                   To find the appropriate release link for this release,\n                   please check the Releases tab from {album_url|your link}.",{album_url:{href:e,rel:"noopener noreferrer",target:"_blank"},album_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/album"})}),result:!1,target:d.ENTITY}:{result:"album/release/mr"===i,target:d.ENTITY};case c.allmusic.release_group:return{result:"album/mw"===i,target:d.ENTITY};case c.allmusic.work:return{result:"composition/mc"===i||"song/mt"===i,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},amazon:{hostname:["amazon.*","amzn.com","amzn.to"],match:[/^(https?:\/\/)?(((?!music)[^/])+\.)?(amazon\.(ae|at|com\.au|com\.br|ca|cn|com|de|eg|es|fr|in|it|jp|co\.jp|com\.mx|nl|pl|sa|se|sg|com\.tr|co\.uk)|amzn\.com)/i,/^(https?:\/\/)?([^/]+\.)?amzn\.to/i],restrict:[c.amazon],clean(e){let t,s="",i="";return s=p(e),(t=e.match(/\/e\/([A-Z0-9]{10})(?:[/?&%#]|$)/))?"https://www.amazon."+s+"/-/e/"+t[1]:(((t=e.match(/\/(?:product|dp)\/(B[0-9A-Z]{9}|[0-9]{9}[0-9X])(?:[/?&%#]|$)/))||(t=e.match(/(?:\/|\ba=)([A-Z0-9]{10})(?:[/?&%#]|$)/)))&&(i=t[1]),""!==s&&""!==i?"https://www.amazon."+s+"/gp/product/"+i:e)},validate:e=>/amzn\.to\//i.test(e)?{error:o("This is a redirect link. Please follow {redirect_url|your link}\n             and add the link it redirects to instead.",{redirect_url:{href:e,rel:"noopener noreferrer",target:"_blank"}}),result:!1,target:d.URL}:/^https:\/\/www\.amazon\.[^/]+\/vdp\//i.test(e)?{error:l("This is a link to a user video and should not be added. Please\n             add the product link instead, if relevant."),result:!1,target:d.URL}:{result:/^https:\/\/www\.amazon\.(ae|at|com\.au|com\.br|ca|cn|com|de|eg|es|fr|in|it|jp|co\.jp|com\.mx|nl|pl|sa|se|sg|com\.tr|co\.uk)\//.test(e),target:d.URL}},amazonmusic:{hostname:"music.amazon.*",match:[/^(https?:\/\/)?music\.amazon\.(ae|at|com\.au|com\.br|ca|cn|com|de|es|fr|in|it|jp|co\.jp|com\.mx|nl|pl|se|sg|com\.tr|co\.uk)\/(albums|artists|tracks)/i],restrict:[c.streamingpaid],clean(e){let t="",s="",i="";t=p(e);const r=e.match(/\/(albums|artists|tracks)\/(B[0-9A-Z]{9}|[0-9]{9}[0-9X])(?:[/?&%#]|$)/);return r&&(s=r[1],i=r[2],""!==t&&""!==i)?"https://music.amazon."+t+"/"+s+"/"+i:e},validate(e,t){const s=/^https:\/\/music\.amazon\.(?:ae|at|com\.au|com\.br|ca|cn|com|de|eg|es|fr|in|it|jp|co\.jp|com\.mx|nl|pl|sa|se|sg|com\.tr|co\.uk)\/(albums|artists|tracks)/.exec(e);if(s){const e=s[1];switch(t){case c.streamingpaid.artist:return{result:"artists"===e,target:d.ENTITY};case c.streamingpaid.recording:return{result:"tracks"===e,target:d.ENTITY};case c.streamingpaid.release:return{result:"albums"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},anghami:{hostname:"anghami.com",match:[/^(?:https?:\/\/)?(?:(?:play|www)\.)?anghami\.com\//i],restrict:[c.streamingfree],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:(?:play|www)\.)?anghami\.com\/(album|artist|song|video)\/([0-9]+).*$/,"https://play.anghami.com/$1/$2"),validate(e,t){const s=/^https:\/\/play\.anghami\.com\/(album|artist|song|video)\/[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.streamingfree.artist:return{result:"artist"===e,target:d.ENTITY};case c.streamingfree.release:return{result:"album"===e,target:d.ENTITY};case c.streamingfree.recording:return{result:"song"===e||"video"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},anidb:{hostname:"anidb.net",match:[/^(?:https?:\/\/)?(?:www\.)?anidb\.net\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?anidb\.net\/(character|collection|creator|song)\/([0-9]+).*$/,"https://anidb.net/$1/$2"),validate(e,t){const s=/^https:\/\/anidb\.net\/(character|collection|creator|song)\/([0-9]+)$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"character"===e||"creator"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"collection"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"song"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},animenewsnetwork:{hostname:"animenewsnetwork.com",match:[/^(https?:\/\/)?(www\.)?animenewsnetwork\.com/i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?animenewsnetwork\.com\/encyclopedia\/(people|company).php\?id=([0-9]+).*$/,"https://www.animenewsnetwork.com/encyclopedia/$1.php?id=$2")},anisongeneration:{hostname:"anison.info",match:[/^(?:https?:\/\/)?anison\.info\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?anison\.info\/data\/(person|source|song)\/([0-9]+)\.html.*$/,"http://anison.info/data/$1/$2.html"),validate(e,t){const s=/^http:\/\/anison\.info\/data\/(person|source|song)\/([0-9]+)\.html$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"person"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"source"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"song"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},applebooks:{hostname:"books.apple.com",match:[/^(https?:\/\/)?([^/]+\.)?books\.apple\.com\//i],restrict:[c.downloadpurchase],clean:e=>e=(e=e.replace(/^https?:\/\/books\.apple\.com\/([a-z]{2}\/)?(audiobook|author|book)\/(?:[^?#/]+\/)?(?:id)?([0-9]+)(?:\?.*)?$/,"https://books.apple.com/$1$2/id$3")).replace(/^(https:\/\/books\.apple\.com)\/([a-z-]{3,})\//,"$1/us/$2/"),validate(e,t){const s=/^https:\/\/books\.apple\.com\/[a-z]{2}\/([a-z-]{3,})\/id[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:return"author"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.downloadpurchase.release:return"book"===e?{error:o("Only Apple Books audiobooks can be added\n                   to MusicBrainz. Consider adding books to\n                   {bookbrainz_url|BookBrainz} instead.",{bookbrainz_url:"https://bookbrainz.org/"}),result:!1}:{result:"audiobook"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},applemusic:{hostname:["apple.com","apple.co"],match:[/^(https?:\/\/)?([^/]+\.)?music\.apple\.com\//i,/^(https?:\/\/)?([^/]+\.)?apple\.co\//i],restrict:[c.downloadpurchase,c.streamingpaid,A(c.downloadpurchase,c.streamingpaid)],clean:e=>e=(e=(e=(e=e.replace(/^https?:\/\/(?:(?:beta|geo)\.)?(classical\.)?music\.apple\.com\//,"https://$1music.apple.com/")).replace(/^(https:\/\/(?:classical\.)?music\.apple\.com)\/([a-z-]{3,})\//,"$1/us/$2/")).replace(/^(https:\/\/(?:classical\.)?music\.apple\.com\/[a-z]{2})\/album\/[^?#/]+\/[0-9]+\?i=([0-9]+)$/,"$1/song/$2")).replace(/^(https:\/\/(?:classical\.)?music\.apple\.com\/[a-z]{2})\/(artist|album|author|label|music-video|song)\/(?:[^?#/]+\/)?(?:id)?([0-9]+)(?:\?.*)?$/,"$1/$2/$3"),validate(e,t){if(/^(?:https?:\/\/)?(?:[^/]+\.)?apple\.co\//i.test(e))return{error:o("This is a redirect link. Please follow {redirect_url|your link}\n             and add the link it redirects to instead.",{redirect_url:{href:e,rel:"noopener noreferrer",target:"_blank"}}),result:!1,target:d.URL};const s=/^https:\/\/(?:classical\.)?music\.apple\.com\/[a-z]{2}\/([a-z-]{3,})\/[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:case c.streamingpaid.artist:return"artist"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.downloadpurchase.label:case c.streamingpaid.label:return"label"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.downloadpurchase.recording:case c.streamingpaid.recording:return{result:"music-video"===e||"song"===e,target:d.ENTITY};case c.downloadpurchase.release:case c.streamingpaid.release:return{result:"album"===e||"music-video"===e,target:d.ENTITY}}}return{result:!1,target:d.URL}}},applepodcasts:{hostname:["podcasts.apple.com"],match:[/^(https?:\/\/)?([^/]+\.)?podcasts\.apple\.com\//i],restrict:[c.podcastfeed,{recording:c.streamingfree.recording,release:c.streamingfree.release},{recording:c.streamingpaid.recording,release:c.streamingpaid.release}],clean:e=>e=(e=(e=(e=e.replace(/^https?:\/\/podcasts\.apple\.com\//,"https://podcasts.apple.com/")).replace(/^(https:\/\/podcasts\.apple\.com)\/([a-z-]{3,})\//,"$1/us/$2/")).replace(/^(https:\/\/podcasts\.apple\.com\/[a-z]{2})\/podcast\/[^?#/]+\/(?:id)?[0-9]+\?i=([0-9]+)$/,"$1/episode/$2")).replace(/^(https:\/\/podcasts\.apple\.com\/[a-z]{2})\/(episode|podcast)\/(?:[^?#/]+\/)?(?:id)?([0-9]+)(?:\?.*)?$/,"$1/$2/id$3"),validate(e,t){const s=/^https:\/\/podcasts\.apple\.com\/[a-z]{2}\/([a-z-]{3,})\/id[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.podcastfeed.series:return{result:"podcast"===e,target:d.ENTITY};case c.streamingfree.recording:case c.streamingpaid.recording:case c.streamingfree.release:case c.streamingpaid.release:return{result:"episode"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},archive:{hostname:"archive.org",match:[/^(https?:\/\/)?([^/]+\.)?archive\.org\//i],clean:e=>(e=(e=(e=e.replace(/^https?:\/\/(www.)?archive.org\//,"https://archive.org/")).replace(/\?cnt=\d+$/,"")).replace(/^https?:\/\/(?:.*)\.archive.org\/\d+\/items\/(.*)\/(.*)/,"https://archive.org/download/$1/$2")).replace(/^(https:\/\/archive\.org\/details\/[A-Za-z0-9._-]+)\/$/,"$1")},artstation:{hostname:"artstation.com",match:[/^(https?:\/\/)?(www\.)?artstation\.com/i],restrict:[c.artgallery],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?artstation\.com\/([^/#?]+).*$/,"https://www.artstation.com/$1"),validate(e){const t=/^https:\/\/www\.artstation\.com\/([^/]+)$/.exec(e);if(t){const e=t[1];if("search"===e)return{error:g(),result:!1,target:d.URL};return["artwork","blogs","challenges","hire","jobs","learning","marketplace","prints","schools","studios"].includes(e)?{result:!1,target:d.URL}:{result:!0}}return{result:!1,target:d.URL}}},audiomack:{hostname:"audiomack.com",match:[/^(https?:\/\/)?([^/]+\.)?audiomack\.com\//i],restrict:[c.streamingfree],clean:e=>e=e.replace(/^https?:\/\/(?:www.)?audiomack.com\/([^/?&#]+(?:\/(album|song)\/[^/?&#]+)?).*$/,"https://audiomack.com/$1"),validate(e,t){const s=/^https:\/\/audiomack\.com\/[^/?&#]+(?:\/(album|song)\/[^/?&#]+)?$/.exec(e);if(s){const e=s[1];switch(t){case c.streamingfree.artist:return{result:!e,target:d.ENTITY};case c.streamingfree.release:return{result:"album"===e||"song"===e,target:d.ENTITY};case c.streamingfree.recording:return{result:"song"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},awa:{hostname:"s.awa.fm",match:[/^(https?:\/\/)?s\.awa\.fm\/.*(album|artist|track)\//i],restrict:[c.streamingpaid],clean:e=>e.replace(/^(?:https?:\/\/)?s\.awa\.fm\/(?:#!\/)?([\w/]+).*$/,"https://s.awa.fm/$1"),validate(e,t){const s=/^https:\/\/s\.awa\.fm\/(album|artist|track)\/[0-9a-f-]+$/.exec(e);if(s){const e=s[1];switch(t){case c.streamingpaid.artist:return"artist"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.streamingpaid.release:return"album"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.streamingpaid.recording:return"track"===e?{result:!0}:{result:!1,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},baidubaike:{hostname:"baike.baidu.com",match:[/^(https?:\/\/)?baike\.baidu\.com\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?baike\.baidu\.com\/([^?#]+)(?:[?#].*)?$/,"https://baike.baidu.com/$1"),validate(e,t){const s=/^https:\/\/baike\.baidu\.com\/(.+)$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:case c.otherdatabases.label:case c.otherdatabases.release_group:case c.otherdatabases.work:return{result:/^view\/[1-9][0-9]*\.htm$/.test(e)||/^subview(\/[1-9][0-9]*){2}\.htm$/.test(e)||/^item\/[^/]+(?:\/[1-9][0-9]*)?$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},bandcamp:{hostname:"bandcamp.com",match:[/^(https?:\/\/)?(((?!daily\.)[^/])+\.)?bandcamp\.com(?!\/(?:campaign|merch)\/)/i],restrict:[c.bandcamp,...x("recording",[c.downloadfree.recording,c.downloadpurchase.recording,c.streamingfree.recording]),...x("release",[c.downloadfree.release,c.downloadpurchase.release,c.streamingfree.release,c.mailorder.release]),{work:c.lyrics.work}],clean:e=>/^https?:\/\/bandcamp.com\/videoframe/.test(e)?e:e=(e=(e=e.replace(/^(?:https?:\/\/)?([^/]+\.)?bandcamp\.com(?:\/([^?#]*))?.*$/,"https://$1bandcamp.com/$2")).replace(/^https:\/\/([^/]+)\.bandcamp\.com\/(?:((?:album|track)\/[^/]+))?.*$/,"https://$1.bandcamp.com/$2")).replace(/^https:\/\/bandcamp\.com\/(?:discover|tag)\/([^/]+).*$/,"https://bandcamp.com/discover/$1"),validate(e,t){if(/^https:\/\/(?:[^/]+\.)?bandcamp\.com\/videoframe/.test(e))return{error:o("Please do not add “{blocked_url_pattern}” links,\n             link to the appropriate “{wanted_url_pattern}” page instead.",{blocked_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/videoframe"}),wanted_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/track"})}),result:!1,target:d.URL};switch(t){case c.bandcamp.artist:return/^https:\/\/[^/]+\.bandcamp\.com\/(album|track)/.test(e)?{error:l("Please link to the main page for the artist,\n                 not to a specific album or track."),result:!1,target:d.ENTITY}:{result:/^https:\/\/[^/]+\.bandcamp\.com\/$/.test(e),target:d.ENTITY};case c.bandcamp.genre:return{result:/^https:\/\/bandcamp\.com\/discover\/[\w-]+$/.test(e),target:d.ENTITY};case c.bandcamp.label:return/^https:\/\/[^/]+\.bandcamp\.com\/(album|track)/.test(e)?{error:l("Please link to the main page for the label,\n                 not to a specific album or track."),result:!1,target:d.ENTITY}:{result:/^https:\/\/[^/]+\.bandcamp\.com\/$/.test(e),target:d.ENTITY};case c.lyrics.work:return{result:/^https:\/\/[^/]+\.bandcamp\.com\/track\/[\w-]+$/.test(e),target:d.ENTITY};case c.downloadfree.recording:case c.downloadpurchase.recording:case c.streamingfree.recording:return/^(https?:\/\/)?([^/]+)\.bandcamp\.com\/?$/.test(e)?{error:o("This is a Bandcamp profile, not a page for a specific\n                 recording. Even if it shows a single recording right now,\n                 that can change when the artist releases another.\n                 Please find and add the appropriate recording page\n                 (“{single_url_pattern}”)\n                 instead, and feel free to add this profile link\n                 to the appropriate artist or label.",{single_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/track"})}),result:!1,target:d.URL}:{result:/^https:\/\/[^/]+\.bandcamp\.com\/track\/[\w-]+$/.test(e),target:d.ENTITY};case c.downloadfree.release:case c.downloadpurchase.release:case c.mailorder.release:case c.streamingfree.release:return/^(https?:\/\/)?([^/]+)\.bandcamp\.com\/?$/.test(e)?{error:o("This is a Bandcamp profile, not a page for a specific\n                 release. Even if it shows this release right now,\n                 that can change when the artist releases another.\n                 Please find and add the appropriate release page\n                 (“{album_url_pattern}” or “{single_url_pattern}”)\n                 instead, and feel free to add this profile link\n                 to the appropriate artist or label.",{album_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/album"}),single_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/track"})}),result:!1,target:d.URL}:{result:/^https:\/\/[^/]+\.bandcamp\.com\/(?:album|track)\/[\w-]+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.URL}}},bandcampcampaign:{hostname:"bandcamp.com",match:[/^(https?:\/\/)?([^/]+)\.bandcamp\.com\/campaign/i],restrict:[c.crowdfunding],clean:e=>e.replace(/^(?:https?:\/\/)?([^/]+)\.bandcamp\.com\/campaign\/([^?#/]+).*$/,"https://$1.bandcamp.com/campaign/$2"),validate:(e,t)=>t===c.crowdfunding.release?{result:/^https:\/\/[^/]+\.bandcamp\.com\/campaign\/[^?#/]+$/.test(e)}:{result:!1,target:d.ENTITY}},bandcampdaily:{hostname:"daily.bandcamp.com",match:[/^(https?:\/\/)?daily\.bandcamp\.com/i],restrict:[{...c.interview,...c.review}],clean:e=>e.replace(/^(?:https?:\/\/)?daily\.bandcamp\.com\/((?:\d+\/\d+\/\d+|[\w-]+)\/[\w-]+)(?:\/.*)?$/,"https://daily.bandcamp.com/$1/"),validate(e,t){switch(t){case c.interview.artist:return{result:/^https:\/\/daily\.bandcamp\.com\/(?:\d+\/\d+\/\d+|[\w-]+)\/[\w-]+-interview\/$/.test(e),target:d.ENTITY};case c.review.release_group:return{result:/^https:\/\/daily\.bandcamp\.com\/(?:\d+\/\d+\/\d+|[\w-]+)\/[\w-]+-review\/$/.test(e),target:d.ENTITY}}return{result:!1,target:d.URL}}},bandcampmerch:{hostname:"bandcamp.com",match:[/^(https?:\/\/)?([^/]+)\.bandcamp\.com\/merch/i],restrict:[c.mailorder],clean:e=>e.replace(/^(?:https?:\/\/)?([^/]+)\.bandcamp\.com\/merch\/([^/]+)?.*$/,"https://$1.bandcamp.com/merch/$2"),validate:(e,t)=>t===c.mailorder.release?{result:/^https:\/\/[^/]+\.bandcamp\.com\/merch\/[\w-]+$/.test(e)}:{result:!1,target:d.ENTITY}},bandsintown:{hostname:"bandsintown.com",match:[/^(https?:\/\/)?((m|www)\.)?bandsintown\.com/i],restrict:[c.bandsintown],clean(e){let t=e.match(/^(?:https?:\/\/)?(?:(?:m|www)\.)?bandsintown\.com\/(?:[a-z]{2}\/)?(a(?=rtist|\/)|e(?=vent|\/)|f|v(?=enue|\/))[a-z]*\/0*([1-9][0-9]*)(?:[^0-9].*)?$/);if(t){e="https://www.bandsintown.com/"+t[1]+"/"+t[2]}else if(t=e.match(/^(?:https?:\/\/)?(?:(?:m|www)\.)?bandsintown\.com\/([^/?#]+)(?:[/?#].*)?$/),t){e="https://www.bandsintown.com/"+t[1].toLowerCase()}return e},validate(e,t){const s=/^https:\/\/www.bandsintown\.com\/(?:([aefv])\/)?([^/?#]+)$/.exec(e);if(s){const e=s[1],i=s[2];switch(t){case c.bandsintown.artist:return{result:void 0===e&&void 0!==i||"a"===e&&/^[1-9][0-9]*$/.test(i),target:d.ENTITY};case c.bandsintown.event:return{result:("e"===e||"f"===e)&&/^[1-9][0-9]*$/.test(i),target:d.ENTITY};case c.bandsintown.place:return{result:"v"===e&&/^[1-9][0-9]*$/.test(i),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},bbcevents:{hostname:"bbc.co.uk",match:[/^(https?:\/\/)?(www\.)?bbc\.co\.uk\/events\//i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?bbc\.co\.uk\/events\/([\w]+).*$/,"https://www.bbc.co.uk/events/$1"),validate:(e,t)=>/^https:\/\/www\.bbc\.co\.uk\/events\/[\w]+$/.test(e)?t===c.otherdatabases.event?{result:!0}:{result:!1,target:d.ENTITY}:{result:!1,target:d.URL}},bbcmusic:{hostname:"bbc.co.uk",match:[/^(https?:\/\/)?(www\.)?bbc\.co\.uk\/music\/artists\//i],restrict:[c.bbcmusic],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?bbc\.co\.uk\/music\/artists\/([0-9a-f-]+).*$/,"https://www.bbc.co.uk/music/artists/$1"),validate:e=>({result:/^https:\/\/www\.bbc\.co\.uk\/music\/artists\/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(e),target:d.URL})},bbcreview:{hostname:"bbc.co.uk",match:[/^(https?:\/\/)?(www\.)?bbc\.co\.uk\/music\/reviews\//i],restrict:[c.review]},beatport:{hostname:"beatport.com",match:[/^(https?:\/\/)?([^/]+\.)?beatport\.com/i],restrict:[c.downloadpurchase,{recording:[c.downloadpurchase.recording,c.streamingpaid.recording]},{release:[c.downloadpurchase.release,c.streamingpaid.release]}],select(e,t){const s=/^https?:\/\/(?:sounds|www)\.beatport\.com\/([\w-]+)\/[\w!%-]+\/[1-9][0-9]*$/.exec(e);if(s){switch(s[1]){case"chart":case"release":case"stem-pack":if("release"===t)return c.downloadpurchase.release;break;case"stem":case"track":if("recording"===t)return c.downloadpurchase.recording}}return!1},clean(e){const t=(e=(e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?([^/]+\.)?beatport\.com\//,"https://$1beatport.com/")).replace(/^https:\/\/(?:(?:classic|pro|www)\.)?beatport\.com\//,"https://www.beatport.com/")).replace(/^https:\/\/dj\.beatport\.com\/(artist|label)s\/([\w-]+)\/([1-9][0-9]*)/,"https://www.beatport.com/$1/$2/$3")).replace(/^https:\/\/dj\.beatport\.com\/releases\/[1-9][0-9]*\/([1-9][0-9]*)/,"https://www.beatport.com/track/-/$1")).replace(/^https:\/\/dj\.beatport\.com\/releases\/([1-9][0-9]*)/,"https://www.beatport.com/release/-/$1")).match(/^(https:\/\/www\.beatport\.com)\/[\w-]+\/html\/content\/([\w-]+)\/detail\/0*([0-9]+)\/([^/?&#]*).*$/);if(t){const s=t[4].toLowerCase().replace(/%21/g,"!").replace(/%23/g,"-pound-").replace(/%24/g,"-money-").replace(/\$/g,"-money-").replace(/%25/g,"-percent-").replace(/%26/g,"-and-").replace(/%40/g,"-at-").replace(/@/g,"-at-").replace(/%[0-9a-f]{2}/g,"-").replace(/%/g,"-percent-").replace(/[^a-z0-9!]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").replace(/^$/,"-");e=[t[1],t[2],s,t[3]].join("/")}return e=(e=e.replace(/^(https:\/\/www\.beatport\.com)\/([\w-]+)\/([\w!-]+)\/0*([0-9]+).*$/,"$1/$2/$3/$4")).replace(/^(https:\/\/www\.beatport\.com)\/([\w-]+)\/\/0*([0-9]+)(?![\w!-]|\/[0-9]).*$/,"$1/$2/-/$3")},validate(e,t){const s=/^https:\/\/(?:sounds|www)\.beatport\.com\/([\w-]+)\/[\w!%-]+\/[1-9][0-9]*$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:return{result:"artist"===e,target:d.ENTITY};case c.downloadpurchase.recording:case c.streamingpaid.recording:return{result:"track"===e||"stem"===e,target:d.ENTITY};case c.downloadpurchase.release:case c.streamingpaid.release:return{result:"release"===e||"chart"===e||"stem-pack"===e,target:d.ENTITY};case c.downloadpurchase.label:return{result:"label"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},behance:{hostname:"behance.net",match:[/^(https?:\/\/)?(www\.)?behance\.net/i],restrict:[c.artgallery],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?behance\.net\/([^/#?]+).*$/,"https://www.behance.net/$1"),validate(e){const t=/^https:\/\/www\.behance\.net\/([^/]+)$/.exec(e);if(t){const e=t[1];if("search"===e)return{error:g(),result:!1,target:d.URL};return["assets","for_you","galleries","gallery","hire","joblist","privacy"].includes(e)?{result:!1,target:d.URL}:{result:!0}}return{result:!1,target:d.URL}}},bigcartel:{hostname:"bigcartel.com",match:[/^(https?:\/\/)?[^/]+\.bigcartel\.com/i],restrict:[c.mailorder],clean(e){const t=e.match(/^(?:https?:\/\/)?([^/]+)\.bigcartel\.com(?:\/(?:product\/([^/?#]+)|[^/]*))?/);if(t){const s=t[1],i=t[2];e="https://"+s+".bigcartel.com",void 0!==i&&(e=e+"/product/"+i)}return e},validate(e,t){const s=/^https:\/\/([^/]+)\.bigcartel\.com(\/product\/[^/?#]+)?/.exec(e);if(s){const e=s[1],i=s[2];if(!/^(images|www)$/.test(e))switch(t){case c.mailorder.artist:case c.mailorder.label:return void 0===i?{result:!0}:{error:t===c.mailorder.artist?l("Please link to the main page for the artist,\n                       not a specific product."):l("Please link to the main page for the label,\n                       not a specific product."),result:!1,target:d.ENTITY};case c.mailorder.release:return{result:void 0!==i,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},blog:{hostname:["ameblo.jp","blog.livedoor.jp","jugem.jp","exblog.jp","tumblr.com"],match:[/^(https?:\/\/)?([^/]+\.)?ameblo\.jp/i,/^(https?:\/\/)?([^/]+\.)?blog\.livedoor\.jp/i,/^(https?:\/\/)?([^./]+)\.jugem\.jp/i,/^(https?:\/\/)?([^./]+)\.exblog\.jp/i,/^(https?:\/\/)?([^./]+)\.tumblr\.com/i],restrict:[c.blog],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?ameblo\.jp\/([^/]+).*$/,"https://ameblo.jp/$1/")},blogspot:{hostname:"blogspot.*",match:[/^(https?:\/\/)?(www\.)?[^./]+\.blogspot\.([a-z]{2,3}\.)?[a-z]{2,3}\/?/i],clean:e=>e.replace(/(?:www\.)?([^./]+)\.blogspot\.(?:[a-z]{2,3}\.)?[a-z]{2,3}(?:\/)?/,"$1.blogspot.com/")},bluesky:{hostname:"bsky.app",match:[/^(https?:\/\/)?([^/]+\.)?bsky\.app\//i],restrict:[c.socialnetwork],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?bsky\.app\//,"https://bsky.app/")).replace(/^https:\/\/bsky\.app\/profile\/([^/?#]+).*$/,"https://bsky.app/profile/$1"),validate:e=>/^https:\/\/bsky\.app\/profile\/([^/?#]+)$/.test(e)?{result:!0}:{result:!1,target:d.URL}},bnfcatalogue:{hostname:["bnf.fr","n2t.net"],match:[/^(https?:\/\/)?(catalogue|data)\.bnf\.fr\//i,/^(https?:\/\/)?ark\.bnf\.fr\/ark:\/12148\/cb/i,/^(https?:\/\/)?n2t\.net\/ark:\/12148\/cb/i],restrict:[c.otherdatabases],clean(e){let t=/^(?:https?:\/\/)?data\.bnf\.fr\/(?:[a-z]{2}\/)?(?:[a-z-]+\/)?([1-4][0-9]{7})(?:[0-9b-z])?(?:[./?#].*)?$/.exec(e);if(t){const s=t[1],i="0123456789bcdfghjkmnpqrstvwxz";e="https://catalogue.bnf.fr/ark:/12148/cb"+s+i[Array.from(s).reduce(((e,t,s)=>e+i.indexOf(t)*(s+3)),2)%29]}else if(t=/^(?:https?:\/\/)?(?:n2t\.net|(?:ark|catalogue|data)\.bnf\.fr)\/(?:[a-z]{2}\/)?(ark:\/12148\/cb[1-4][0-9]{7}[0-9b-z])(?:[./?#].*)?$/.exec(e),t){e="https://catalogue.bnf.fr/"+t[1]}return e},validate(e,t){const s=/^https:\/\/catalogue\.bnf\.fr\/ark:\/12148\/cb([1-4])[0-9]{7}[0-9b-z]$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:case c.otherdatabases.instrument:case c.otherdatabases.label:case c.otherdatabases.place:case c.otherdatabases.work:return{result:"1"===e||"2"===e,target:d.ENTITY};case c.otherdatabases.event:case c.otherdatabases.release:return{result:"3"===e||"4"===e,target:d.ENTITY};case c.otherdatabases.series:return{result:!0}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},bookbrainz:{hostname:"bookbrainz.org",match:[/^(https?:\/\/)?([^/]+\.)?bookbrainz\.org/i],restrict:[c.bookbrainz],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^.]+\.)?bookbrainz\.org\/([^/]*)\/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})(?:[#/?].*)?$/,"https://bookbrainz.org/$1/$2"),validate:e=>({result:/^https:\/\/bookbrainz\.org\/[^/]+\/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(e),target:d.URL})},boomkat:{hostname:"boomkat.com",match:[/^(https?:\/\/)?(www\.)?boomkat\.com/i],restrict:[{artist:[c.downloadpurchase.artist,c.mailorder.artist],label:[c.downloadpurchase.label,c.mailorder.label]},c.downloadpurchase,c.mailorder],clean:e=>e=e.replace(/^(?:https?:\/\/)(?:www\.)?boomkat\.com\/([a-z]+)\/([^/#?]+).*$/,"https://boomkat.com/$1/$2"),validate(e,t){const s=/^https:\/\/boomkat\.com\/([a-z]+)\/.*$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:case c.mailorder.artist:return{result:"artists"===e,target:d.ENTITY};case c.downloadpurchase.label:case c.mailorder.label:return{result:"labels"===e,target:d.ENTITY};case c.downloadpurchase.release:case c.mailorder.release:return{result:"products"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},boomplay:{hostname:"boomplay.com",match:[/^(https?:\/\/)?([^/]+\.)?boomplay\.com\//i],restrict:[c.streamingfree],clean:e=>e=e.replace(/^https?:\/\/(?:www.)?boomplay.com\/((?:albums|artists|songs)\/\d+).*$/,"https://www.boomplay.com/$1"),validate(e,t){const s=/^https:\/\/www\.boomplay\.com\/(albums|artists|songs)\/\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.streamingfree.artist:return{result:"artists"===e,target:d.ENTITY};case c.streamingfree.release:return{result:"albums"===e,target:d.ENTITY};case c.streamingfree.recording:return{result:"songs"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},brahms:{hostname:"brahms.ircam.fr",match:[/^(https?:\/\/)?brahms\.ircam\.fr\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?brahms\.ircam\.fr\/(?:(?:en|fr)\/)?((works\/work)(?:\/)([0-9]+)|work\/[\w\d-]+|(?!work)[^?/#]+).*$/,"http://brahms.ircam.fr/$1"),validate(e,t){const s=/^(?:https?:\/\/)?brahms\.ircam\.fr\/(works\/work\/|work\/|(?!works?)[^?/#]+).*$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.work:return{result:"work/"===e||"works/work/"===e,target:d.ENTITY};case c.otherdatabases.artist:return{result:"work/"!==e&&"works/work/"!==e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},bugs:{hostname:["music.bugs.co.kr","m.bugs.co.kr"],match:[/^(https?:\/\/)?(music|m)\.bugs\.co\.kr\//i],restrict:[A(c.downloadpurchase,c.streamingpaid),c.streamingpaid],select(e,t){const s=/^https:\/\/music\.bugs\.co\.kr\/(album|artist|track|mv)/.exec(e);if(s){switch(s[1]){case"album":if("release"===t)return[c.downloadpurchase.release,c.streamingpaid.release];break;case"artist":if("artist"===t)return[c.downloadpurchase.artist,c.streamingpaid.artist];break;case"track":if("recording"===t)return[c.downloadpurchase.recording,c.streamingpaid.recording];break;default:if("release"===t)return[c.downloadpurchase.release,c.streamingpaid.release];if("recording"===t)return[c.downloadpurchase.recording,c.streamingpaid.recording]}}return!1},clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:music|m)\.bugs\.co\.kr\//,"https://music.bugs.co.kr/")).replace(/^(https:\/\/music\.bugs\.co\.kr)\/(album|artist|track|mv)\/(\d+)(?:[/.?#].*)?$/,"$1/$2/$3"),validate(e,t){if(/https:\/\/music\.bugs\.co\.kr\/search\//.test(e))return{error:g(),result:!1,target:d.URL};const s=/^https:\/\/music\.bugs\.co\.kr\/(album|artist|track|mv)\/\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.release:case c.streamingpaid.release:return{result:"album"===e||"mv"===e,target:d.ENTITY};case c.downloadpurchase.artist:case c.streamingpaid.artist:return{result:"artist"===e,target:d.ENTITY};case c.downloadpurchase.recording:case c.streamingpaid.recording:return{result:"track"===e||"mv"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},buymeacoffee:{hostname:"buymeacoffee.com",match:[/^(https?:\/\/)?(www\.)?buymeacoffee\.com\/[^/?#]/i],restrict:[c.patronage],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?buymeacoffee\.com\/([^/?#]+).*$/,"https://www.buymeacoffee.com/$1")},cancionerosmewiki:{hostname:"cancioneros.si",match:[/^(https?:\/\/)?(www\.)?cancioneros\.si\/mediawiki\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?cancioneros\.si\/([^#]+)(?:[#].*)?$/,"http://www.cancioneros.si/$1"),validate:(e,t)=>/^http:\/\/www\.cancioneros\.si\/mediawiki\/index\.php\?title=.+$/.test(e)?t===c.otherdatabases.artist||t===c.otherdatabases.series||t===c.otherdatabases.work?{result:!0}:{result:!1,target:d.ENTITY}:{result:!1,target:d.URL}},cbfiddlerx:{hostname:"cbfiddle.com",match:[/^(https?:\/\/)?(www\.)?cbfiddle\.com\/rx\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?cbfiddle\.com\/rx\/(rec\/r|tune\/t)(\d+\.html)(?:#.*$)?$/,"https://www.cbfiddle.com/rx/$1$2"),validate(e,t){const s=/^https:\/\/www\.cbfiddle\.com\/rx\/(rec\/r|tune\/t)\d+\.html$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.release_group:return{result:"rec/r"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"tune/t"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},ccmixter:{hostname:"ccmixter.org",match:[/^(https?:\/\/)?(www\.)?ccmixter\.org\//i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?ccmixter\.org/,"http://ccmixter.org"),validate(e,t){const s=/^http:\/\/ccmixter\.org\/(files|people)\/\w+(?:\/\d+)?$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"people"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"files"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},cdbaby_artist:{hostname:"cdbaby.*",match:[/^(https?:\/\/)?((store|www)\.)?cdbaby\.(com|name)\/Artist\//i],restrict:[c.cdbaby]},cdjapan:{hostname:"cdjapan.co.jp",match:[/^(https?:\/\/)?(www\.)?cdjapan\.co\.jp\/(detailview|product|person)/i],restrict:[c.mailorder],clean:e=>e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?cdjapan\.co\.jp\//,"https://www.cdjapan.co.jp/")).replace(/^(https:\/\/www\.cdjapan\.co\.jp)\/detailview\.html\?KEY=([^/?#]+).*$/,"$1/product/$2")).replace(/^(https:\/\/www\.cdjapan\.co\.jp)\/(person|product)\/([^/?#]+).*$/,"$1/$2/$3")},changetip:{hostname:["changetip.com","tip.me"],match:[/^(https?:\/\/)?(www\.)?changetip\.com\/tipme\/[^/?#]/i,/^(https?:\/\/)?[^/?#]+\.tip.me([/?#].*)?$/i],restrict:[c.patronage],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?changetip\.com\/tipme\/([^/?#]+).*$/,"https://www.changetip.com/tipme/$1")).replace(/^(?:https?:\/\/)?([^/?#]+)\.tip\.me(?:[/?#].*)?$/,"https://www.changetip.com/tipme/$1")},classicalarchives:{hostname:"classicalarchives.com",match:[/^(https?:\/\/)?(www\.)?classicalarchives\.com\/(album|artist|composer|ensemble|work)\//i,/^(https?:\/\/)?(www\.)?classicalarchives\.com\/newca\/#!\/(Album|Composer|Performer|Work)\//i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=(e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?classicalarchives\.com\//,"https://www.classicalarchives.com/")).replace(/^(https:\/\/www\.classicalarchives\.com)\/newca\/#!\/Composer\/([^/?#]+)/,"$1/composer/$2.html")).replace(/^(https:\/\/www\.classicalarchives\.com)\/newca\/#!\/Work\/([^/?#]+)/,"$1/work/$2.html")).replace(/^(https:\/\/www\.classicalarchives\.com)\/newca\/#!\/Performer\/e([^/?#]+)/,"$1/ensemble/$2.html")).replace(/^(https:\/\/www\.classicalarchives\.com)\/newca\/#!\/Performer\/p([^/?#]+)/,"$1/artist/$2.html")).replace(/^(https:\/\/www\.classicalarchives\.com)\/newca\/#!\/Album\/([^/?#]+).*$/,"$1/newca/#!/Album/$2")).replace(/^(https:\/\/www\.classicalarchives\.com)\/(album|artist|composer|ensemble|work)\/([^/?#]+).*$/,"$1/$2/$3"),validate(e,t){const s=/^https:\/\/www\.classicalarchives\.com\/(?:newca\/#!\/)?([Aa]lbum|artist|composer|ensemble|work)\/([^/?#]+)$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:["artist","composer","ensemble"].includes(e),target:d.ENTITY};case c.otherdatabases.release:return{result:"album"===e||"Album"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"work"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},cpdl:{hostname:"cpdl.org",match:[/^(https?:\/\/)?(www[0-9]?\.)?cpdl\.org/i],restrict:[{...c.score,...c.cpdl}],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www[0-9]?\.)?cpdl\.org/,"http://cpdl.org")},crewunited:{hostname:"crew-united.com",match:[/^(https?:\/\/)?(www\.)?crew-united\.com\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?crew-united\.com\/(?:[a-z]+\/)?([\w-]+_[\d]+\.html).*?$/,"https://www.crew-united.com/en/$1"),validate:(e,t)=>/^https:\/\/www\.crew-united\.com\/en\/[\w-]+_[\d]+\.html$/.test(e)?t===c.otherdatabases.artist||t===c.otherdatabases.label||t===c.otherdatabases.recording?{result:!0}:{result:!1,target:d.ENTITY}:{result:!1,target:d.URL}},dahr:{hostname:"adp.library.ucsb.edu",match:[/^(https?:\/\/)?adp\.library\.ucsb\.edu\/index\.php\/(mastertalent|matrix|objects|talent)/i,/^(https?:\/\/)?adp\.library\.ucsb\.edu\/names\//i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?adp\.library\.ucsb\.edu\//,"https://adp.library.ucsb.edu/")).replace(/^(https:\/\/adp\.library\.ucsb\.edu)\/index\.php\/([a-z]+)\/[a-z]+\/([\d]+).*$/,"$1/index.php/$2/detail/$3")).replace(/^(https:\/\/adp\.library\.ucsb\.edu)\/names\/([\d]+).*$/,"$1/names/$2")).replace(/^(https:\/\/adp\.library\.ucsb\.edu)\/index\.php\/mastertalent\/detail\/([\d]+).*$/,"$1/names/$2"),validate(e,t){if(e.match(/^https:\/\/adp\.library\.ucsb\.edu\/names\/[\d]+$/)&&t===c.otherdatabases.artist)return{result:!0};const s=/^https:\/\/adp\.library\.ucsb\.edu\/index\.php\/([a-z]+)\/detail\/[\d]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"talent"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"matrix"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"objects"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},dailymotion:{hostname:"dailymotion.com",match:[/^(https?:\/\/)?([^/]+\.)?(dailymotion\.com\/)/i],restrict:[{...c.streamingfree,...c.videochannel}],clean(e){const t=/^(?:https?:\/\/)?(?:www\.)?dailymotion\.com\/((([^/?#]+)(?:\/[^?#]*)?)(?:\?[^#]*)?(?:#(.+)?)?)$/.exec(e);if(t){let e=t[1];const s=t[2],i=t[3],r=t[4];switch(i){case"playlist":e=/^video=/.test(r)?r.replace("=","/"):e;break;case"video":e=s.replace(/([^_]+).*/,"$1");break;default:e=new RegExp("^"+i+"/*$").test(s)?i:e}return"https://www.dailymotion.com/"+e}return e},validate(e,t){const s=/^https:\/\/www\.dailymotion\.com\/(?:(video\/)?[^/?#]+)$/.exec(e);if(s){const e=s[1];return Object.values(c.videochannel).includes(t)?"video/"===e?{error:m(),result:!1,target:d.ENTITY}:{result:void 0===e}:"video/"===e?{result:!0}:{error:f(),result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},deezer:{hostname:"deezer.com",match:[/^(https?:\/\/)?([^/]+\.)?(deezer\.com)/i],restrict:[c.streamingfree],clean:e=>e=e.replace(/^https?:\/\/(?:www\.)?deezer\.com\/(?:[a-z]{2}\/)?(\w+)\/(\d+).*$/,"https://www.deezer.com/$1/$2"),validate(e,t){const s=/^https:\/\/www\.deezer\.com\/([a-z]+)\/(?:\d+)$/.exec(e);if(s){const e=s[1];switch(t){case c.streamingfree.artist:return{result:"artist"===e,target:d.ENTITY};case c.streamingfree.release:return{result:"album"===e,target:d.ENTITY};case c.streamingfree.recording:return{result:"track"===e||"episode"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},deviantart:{hostname:"deviantart.com",match:[/^(https?:\/\/)?(www\.)?deviantart\.com/i],restrict:[c.artgallery],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?deviantart\.com\/([^/?#]+).*$/,"https://www.deviantart.com/$1"),validate(e){const t=/^https:\/\/www\.deviantart\.com\/([^/?#]+)$/.exec(e);if(t){const e=t[1];if("search"===e)return{error:g(),result:!1,target:d.URL};return["about","core-membership","forum","groups","join","shop","team","users"].includes(e)?{result:!1,target:d.URL}:{result:!0}}return{result:!1,target:d.URL}}},dhhu:{hostname:"dhhu.dk",match:[/^(https?:\/\/)?(www\.)?dhhu\.dk/i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?dhhu\.dk\/w\/(.*)+$/,"http://www.dhhu.dk/w/$1")},discographyentry:{hostname:["naxos.com","bis.se","universal-music.co.jp","jvcmusic.co.jp","wmg.jp","avexnet.jp","kingrecords.co.jp"],match:[/^(https?:\/\/)?(www\.)?naxos\.com\/catalogue\/item\.asp/i,/^(https?:\/\/)?(www\.)?bis\.se\/index\.php\?op=album/i,/^(https?:\/\/)?(www\.)?universal-music\.co\.jp\/([a-z0-9-]+\/)?[a-z0-9-]+\/products\/[a-z]{4}-[0-9]{5}\/$/i,/^(https?:\/\/)?(www\.)?jvcmusic\.co\.jp\/[a-z-]+\/Discography\/[A0-9-]+\/[A-Z]{4}-[0-9]+\.html$/i,/^(https?:\/\/)?(www\.)?wmg\.jp\/artist\/[A-Za-z0-9]+\/[A-Z]{4}[0-9]{9}\.html$/i,/^(https?:\/\/)?(www\.)?avexnet\.jp\/id\/[a-z0-9]{5}\/discography\/product\/[A-Z0-9]{4}-[0-9]{5}\.html$/i,/^(https?:\/\/)?(www\.)?kingrecords\.co\.jp\/cs\/g\/g[A-Z]{4}-[0-9]+\/$/i],restrict:[c.discographyentry]},discogs:{hostname:"discogs.com",match:[/^(https?:\/\/)?([^/]+\.)?discogs\.com/i],restrict:[c.discogs],clean:e=>e=(e=(e=e.replace(/\/viewimages\?release=([0-9]*)/,"/release/$1")).replace(/^https?:\/\/(?:[^.]+\.)?discogs\.com\/(?:.*\/)?((?:genre|style|user)\/[^/#?]+|(?:composition\/[^-]+-[^-]+-[^-]+-[^-]+-[^-]+)|(?:artist|release|master(?:\/view)?|label)\/[0-9]+)(?:[/#?-].*)?$/,"https://www.discogs.com/$1")).replace(/^(https:\/\/www\.discogs\.com\/master)\/view\/([0-9]+)$/,"$1/$2"),validate(e,t){const s=/^https:\/\/www\.discogs\.com\/(?:(artist|label|master|release)\/[1-9][0-9]*|(genre|style|user)\/.+|(composition)\/(?:[^-]*-){4}[^-]*)$/.exec(e);if(s){const e=s[1]||s[2]||s[3];switch(t){case c.discogs.artist:return{result:"artist"===e||"user"===e,target:d.ENTITY};case c.discogs.event:return{result:"label"===e,target:d.ENTITY};case c.discogs.genre:return{result:"genre"===e||"style"===e,target:d.ENTITY};case c.discogs.label:case c.discogs.series:return{result:"label"===e,target:d.ENTITY};case c.discogs.place:return{result:"artist"===e||"label"===e,target:d.ENTITY};case c.discogs.release_group:return{result:"master"===e,target:d.ENTITY};case c.discogs.release:return"master"===e?{error:o("Discogs “{master_url_pattern}” links group several\n                   releases,\n                   so this should be added to the release group instead.",{master_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/master"})}),result:!1,target:d.ENTITY}:{result:"release"===e,target:d.ENTITY};case c.discogs.work:return{result:"composition"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},dnb:{hostname:["d-nb.info","dnb.de"],match:[/^(https?:\/\/)?([^/]+\.)?d-nb\.info/i,/^(https?:\/\/)?([^/]+\.)?dnb\.de/i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?d-nb\.info\//,"https://d-nb.info/")).replace(/^(?:https?:\/\/)?(?:[^/]+\.)?dnb\.de\/opac(?:\.htm\?)?.*\bquery=nid%3D([0-9X-]+).*$/,"https://d-nb.info/gnd/$1")).replace(/^(?:https?:\/\/)?(?:[^/]+\.)?dnb\.de\/opac(?:\.htm\?)?.*\bquery=idn%3D([0-9X-]+).*$/,"https://d-nb.info/$1"),validate(e,t){switch(t){case c.otherdatabases.artist:case c.otherdatabases.place:case c.otherdatabases.series:case c.otherdatabases.work:return{result:/^https:\/\/d-nb\.info\/(?:gnd\/)?[0-9X-]+$/.test(e),target:d.ENTITY};case c.otherdatabases.label:return{result:/^https:\/\/d-nb\.info\/(?:(?:dnbn|gnd)\/)?[0-9X-]+$/.test(e),target:d.ENTITY};case c.otherdatabases.release:return{result:/^https:\/\/d-nb\.info\/[0-9X-]+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}},dogmazic:{hostname:"dogmazic.net",match:[/^(https?:\/\/)?([^/]+\.)?(dogmazic\.net)/i],restrict:[c.streamingfree],clean(e){e=(e=(e=(e=e.replace(/^https?:\/\/(?:(?:play|www)\.)?dogmazic\.net\//,"https://play.dogmazic.net/")).replace(/^(https:\/\/play\.dogmazic\.net)\/([^#]+)#(?:\w+)?$/,"$1/$2")).replace(/^(https:\/\/play\.dogmazic\.net)\/(?:[^#]+)#(\w+\.php)/,"$1/$2")).replace(/^(https:\/\/play\.dogmazic\.net)\/(?:[^?#]+)\/(\w+\.php)/,"$1/$2");const t=/^(https:\/\/play\.dogmazic\.net)\/\w+\.php\?(?:[^#]+&)?[\w%]+=([\w%]+)&([\w%]+)=(\d+)/.exec(e);if(t){const e=t[1],s=t[2],i=t[3],r=t[4];switch(i){case"album":return`${e}/albums.php?action=show&${i}=${r}`;case"artist":return`${e}/artists.php?action=show&${i}=${r}`;case"label":return`${e}/labels.php?action=show&${i}=${r}`;case"song_id":return`${e}/song.php?action=show&${i}=${r}`;case"id":case"id%5B0%5D":case"object_id":case"oid":switch(s){case"album":return`${e}/albums.php?action=show&${s}=${r}`;case"artist":return`${e}/artists.php?action=show&${s}=${r}`;case"label":return`${e}/labels.php?action=show&${s}=${r}`;case"song":return`${e}/song.php?action=show&song_id=${r}`}}}return e},validate(e,t){const s=/^https:\/\/play\.dogmazic\.net\/(\w+)\.php\?action=show&(\w+)=\d+$/.exec(e);if(s){const e=s[1],i=s[2];switch(t){case c.streamingfree.artist:return{result:"artists"===e&&"artist"===i,target:d.ENTITY};case c.streamingfree.label:return{result:"labels"===e&&"label"===i,target:d.ENTITY};case c.streamingfree.release:return{result:"albums"===e&&"album"===i,target:d.ENTITY};case c.streamingfree.recording:return{result:"song"===e&&"song_id"===i,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},downloadpurchase:{hostname:["audiojelly.com","hd-music.info","musa24.fi"],match:[/^(https?:\/\/)?([^/]+\.)?audiojelly\.com/i,/^(https?:\/\/)?([^/]+\.)?hd-music\.info/i,/^(https?:\/\/)?([^/]+\.)?musa24\.fi/i],restrict:[c.downloadpurchase]},dram:{hostname:"dramonline.org",match:[/^(https?:\/\/)?([^/]+\.)?dramonline\.org\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?dramonline\.org\/((?:instruments\/)?[a-z-]+)\/([\w-]+).*$/,"https://www.dramonline.org/$1/$2"),validate(e,t){const s=/^https:\/\/www\.dramonline\.org\/([a-z-]+(?:\/[a-z-]+)?)\/[\w-]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:/^(composers|ensembles|performers)$/.test(e),target:d.ENTITY};case c.otherdatabases.release:return{result:"albums"===e,target:d.ENTITY};case c.otherdatabases.label:return{result:"labels"===e,target:d.ENTITY};case c.otherdatabases.instrument:return{result:/^instruments\/[a-z-]+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},dribbble:{hostname:"dribbble.com",match:[/^(https?:\/\/)?(www\.)?dribbble\.com/i],restrict:[c.artgallery],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?dribbble\.com\/([^/#?]+).*$/,"https://dribbble.com/$1"),validate(e){const t=/^https:\/\/dribbble\.com\/([^/]+)$/.exec(e);if(t){const e=t[1];if("search"===e)return{error:g(),result:!1,target:d.URL};return["designers","directories","for-designers","hiring","jobs","learn","pro","session","shots","signup","stories","submit-brief","tags"].includes(e)?{result:!1,target:d.URL}:{result:!0}}return{result:!1,target:d.URL}}},drip:{hostname:["d.rip","drip.kickstarter.com"],match:[/^(https?:\/\/)?(www\.)?d\.rip\/[^/?#]/i,/^(https?:\/\/)?(www\.)?drip\.kickstarter.com\/[^/?#]/i],restrict:[c.patronage],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?d\.rip\/([^/?#]+).*$/,"https://d.rip/$1")).replace(/^(?:https?:\/\/)?(?:www\.)?drip\.kickstarter.com\/([^/?#]+).*$/,"https://d.rip/$1")},dynamicrangedb:{hostname:"dr.loudness-war.info",match:[/^(https?:\/\/)?dr\.loudness-war\.info/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^https:/,"http:"),validate:(e,t)=>({result:t===c.otherdatabases.release,target:d.ENTITY})},eonkyo:{hostname:"e-onkyo.com",match:[/^(https?:\/\/)?([^/]+\.)?e-onkyo\.com/i],restrict:[c.downloadpurchase],clean:e=>(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?e-onkyo\.com\//,"https://www.e-onkyo.com/")).replace(/^(https:\/\/www\.e-onkyo\.com)\/(?:music|sp)\/album\/([a-z0-9]+).*$/,"$1/music/album/$2/"),validate(e,t){if(/e-onkyo\.com\/search\//.test(e))return{error:g(),result:!1,target:d.URL};if(/^https:\/\/www\.e-onkyo\.com\/music\/album\/[a-z0-9]+\/$/.exec(e)){switch(t){case c.downloadpurchase.release:return{result:!0};case c.downloadpurchase.artist:case c.downloadpurchase.label:case c.downloadpurchase.recording:return{result:!1,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},ester:{hostname:"ester.ee",match:[/^(https?:\/\/)?(www\.)?ester\.ee\//i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?ester\.ee\/record=([^~]+).*$/,"http://www.ester.ee/record=$1~S1*est")},facebook:{hostname:["facebook.com","fb.com"],match:[/^(https?:\/\/)?([\w.-]*\.)?(facebook|fb)\.com\//i],restrict:[c.socialnetwork],clean:e=>e=(e=(e=(e=(e=(e=(e=(e=e.replace(/^(https?:\/\/)?([\w.-]*\.)?(facebook|fb)\.com(\/#!)?/,"https://www.facebook.com")).replace(/(facebook\.com\/)pg\//,"$1")).replace(new RegExp("([&?])(__tn__|_fb_noscript|_rdr|acontext|em|entry_point|filter|focus_composer|fref|hc_location|pnref|qsefr|ref|ref_dashboard_filter|ref_page_id|ref_type|refsrc|rf|sid_reminder|sk|tab|viewas)=([^?&]*)","g"),"$1")).replace(/([&?])&+/,"$1")).replace(/[&?]$/,"")).match(/\?/)?e.replace(/\/\?/,"?"):e.replace(/(facebook\.com\/.*)\/$/,"$1")).replace(/\/event\.php\?eid=/,"/events/")).replace(/\/(?:about|info|photos_stream|timeline)([?#].*)?$/,"$1"),validate:e=>/https:\/\/www\.facebook\.com\/search\//.test(e)?{error:g(),result:!1,target:d.URL}:/facebook.com\/pages\//.test(e)?{result:/\/pages\/[^/?#]+\/\d+/.test(e),target:d.URL}:{result:!0,target:d.URL}},flattr:{hostname:"flattr.com",match:[/^(https?:\/\/)?(www\.)?flattr\.com\/profile\/[^/?#]/i],restrict:[c.patronage],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?flattr\.com\/profile\/([^/?#]+).*$/,"https://flattr.com/profile/$1")},foursquare:{hostname:"foursquare.com",match:[/^(https?:\/\/)?([^/]+\.)?foursquare\.com\//i],restrict:[c.socialnetwork],clean:e=>e.replace(/^https?:\/\/(?:[^/]+\.)?foursquare\.com/,"https://foursquare.com")},gakki:{hostname:"saisaibatake.ame-zaiku.com",match:[/^(https?:\/\/)?(www\.)?saisaibatake\.ame-zaiku\.com\/(gakki|gakki_illustration|musical|musical_instrument)\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?saisaibatake\.ame-zaiku\.com\/(gakki|gakki_illustration|musical|musical_instrument)\/(.*)$/,"https://saisaibatake.ame-zaiku.com/$1/$2"),validate:(e,t)=>({result:t===c.otherdatabases.instrument,target:d.ENTITY})},generasia:{hostname:"generasia.com",match:[/^(https?:\/\/)?(www\.)?generasia\.com\/wiki\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?generasia\.com\/wiki\/(.*)$/,"https://www.generasia.com/wiki/$1"),validate:(e,t)=>({result:t===c.otherdatabases.artist||t===c.otherdatabases.label||t===c.otherdatabases.release_group||t===c.otherdatabases.work,target:d.ENTITY})},genie:{hostname:"genie.co.kr",match:[/^(https?:\/\/)?((www|mw)\.)?genie\.co\.kr\//i],restrict:[A(c.downloadpurchase,c.streamingpaid),c.streamingpaid],select(e,t){const s=/^https:\/\/www\.genie\.co\.kr\/detail\/(albumInfo|artistInfo|songInfo|mediaInfo)/.exec(e);if(s){switch(s[1]){case"albumInfo":if("release"===t)return[c.downloadpurchase.release,c.streamingpaid.release];break;case"artistInfo":if("artist"===t)return[c.downloadpurchase.artist,c.streamingpaid.artist];break;case"songInfo":if("recording"===t)return[c.downloadpurchase.recording,c.streamingpaid.recording];break;default:if("release"===t)return[c.downloadpurchase.release,c.streamingpaid.release];if("recording"===t)return[c.downloadpurchase.recording,c.streamingpaid.recording]}}return!1},clean:e=>e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:(?:www|mw)\.)?genie\.co\.kr\//,"https://www.genie.co.kr/")).replace(/^https:\/\/www\.genie\.co\.kr\/detail\/artist(?:Info|Album|Song|Mv)\?xxnm=(\d+)(?:[&#/].*)?$/,"https://www.genie.co.kr/detail/artistInfo?xxnm=$1")).replace(/^(https:\/\/www\.genie\.co\.kr\/detail\/(?:albumInfo\?ax|songInfo\?xg|mediaInfo\?xv)nm=\d+)(?:[&#/].*)?$/,"$1"),validate(e,t){if(/https:\/\/www\.genie\.co\.kr\/search\//.test(e))return{error:g(),result:!1,target:d.URL};const s=/^https:\/\/www\.genie\.co\.kr\/detail\/(albumInfo|artistInfo|songInfo|mediaInfo)\?(?:ax|xx|xg|xv)nm=\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.release:case c.streamingpaid.release:return{result:"albumInfo"===e||"mediaInfo"===e,target:d.ENTITY};case c.downloadpurchase.artist:case c.streamingpaid.artist:return{result:"artistInfo"===e,target:d.ENTITY};case c.downloadpurchase.recording:case c.streamingpaid.recording:return{result:"songInfo"===e||"mediaInfo"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},genius:{hostname:"genius.com",match:[/^(https?:\/\/)?([^/]+\.)?genius\.com/i],restrict:[{...c.lyrics,place:c.otherdatabases.place}],clean:e=>e=(e=e.replace(/^https?:\/\/([^/]+\.)?genius\.com/,"https://genius.com")).replace(/^https:\/\/genius\.com\/artists\/([\w-]+)(?:\/.*)?/,"https://genius.com/artists/$1"),validate(e,t){switch(t){case c.lyrics.artist:case c.lyrics.label:case c.otherdatabases.place:return{result:/^https:\/\/genius\.com\/artists\/[\w-]+$/.test(e),target:d.ENTITY};case c.lyrics.release_group:return{result:/^https:\/\/genius\.com\/albums\/[\w-]+\/[\w-]+$/.test(e),target:d.ENTITY};case c.lyrics.work:return{result:/^https:\/\/genius\.com\/(?!(?:artists|albums)\/)[\w-]+-lyrics$/.test(e),target:d.ENTITY}}return{result:!1,target:d.URL}}},geonames:{hostname:"geonames.org",match:[/^https?:\/\/([a-z]+\.)?geonames\.org\/([0-9]+).*$/i],restrict:[c.geonames],clean:e=>e.replace(/^https?:\/\/(?:[a-z]+\.)?geonames.org\/([0-9]+).*$/,"http://sws.geonames.org/$1/")},goodreads:{hostname:"goodreads.com",match:[/^(https?:\/\/)?(www\.)?goodreads\.com/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?goodreads\.com\/(author|book|series)\/(?:[a-z]+\/)?([0-9]+).*$/,"https://www.goodreads.com/$1/show/$2"),validate(e,t){const s=/^https:\/\/www\.goodreads\.com\/(author|book|series)\/show\/[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"author"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"book"===e,target:d.ENTITY};case c.otherdatabases.series:return{result:"series"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},googleplay:{hostname:"play.google.com",match:[/^(https?:\/\/)?play\.google\.com\/store\/music\//i],clean:e=>e.replace(/^https?:\/\/play\.google\.com\/store\/music\/(artist|album)(?:\/[^?]*)?\?id=([^&#]+)(?:[&#].*)?$/,"https://play.google.com/store/music/$1?id=$2")},googleplus:{hostname:"plus.google.com",match:[/^(https?:\/\/)?([^/]+\.)?plus\.google\.com\//i],restrict:[c.socialnetwork],clean:e=>e.replace(/^(?:https?:\/\/)?plus\.google\.com\/(?:u\/[0-9]\/)?([0-9]+)(\/.*)?$/,"https://plus.google.com/$1")},hmikuwiki:{hostname:"atwiki.jp",match:[/^(https?:\/\/)?(?:www5\.|w\.)?atwiki\.jp\/hmiku\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www5\.|w\.)?atwiki\.jp\/([^#]+)(?:#.*)?$/,"https://w.atwiki.jp/$1"),validate:(e,t)=>/^https:\/\/w\.atwiki\.jp\/hmiku\/pages\/[1-9][0-9]*\.html$/.test(e)?t===c.otherdatabases.artist||t===c.otherdatabases.release_group||t===c.otherdatabases.work?{result:!0}:{result:!1,target:d.ENTITY}:{result:!1,target:d.URL}},hoick:{hostname:"hoick.jp",match:[/^(https?:\/\/)?([^/]+\.)?hoick\.jp\//i],restrict:[{...c.mailorder,...c.lyrics}],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?hoick\.jp\/(mdb\/detail\/\d+|mdb\/author|products\/detail\/\d+)\/([^/?#]+).*$/,"https://hoick.jp/$1/$2"),validate(e,t){const s=/^https:\/\/hoick\.jp\/(mdb|products)\/(author|detail)(\/\d+)?\/[^/?#]+$/.exec(e);if(s){const e=s[1],i=s[2],r=s[3];switch(t){case c.lyrics.artist:return{result:"mdb"===e&&"author"===i&&void 0===r,target:d.ENTITY};case c.mailorder.release:return{result:"products"===e&&"detail"===i&&void 0!==r,target:d.ENTITY};case c.lyrics.work:return{result:"mdb"===e&&"detail"===i&&void 0!==r,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},ibdb:{hostname:"ibdb.com",match:[/^(https?:\/\/)?(www\.)?ibdb\.com\//i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(https?:\/\/)?(?:www\.)?ibdb\.com/,"https://www.ibdb.com")},idref:{hostname:"idref.fr",match:[/^(https?:\/\/)?(www\.)?idref\.fr\//i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?idref\.fr/,"https://www.idref.fr"),validate(e,t){if(/^https:\/\/www\.idref\.fr\/[\dX]+?$/.exec(e)){switch(t){case c.otherdatabases.artist:case c.otherdatabases.genre:case c.otherdatabases.instrument:case c.otherdatabases.label:case c.otherdatabases.place:case c.otherdatabases.series:case c.otherdatabases.work:return{result:!0}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},imdb:{hostname:"imdb.*",match:[/^(https?:\/\/)?([^/]+\.)?imdb\./i],restrict:[c.imdb],clean:e=>e.replace(/^https?:\/\/(?:[^.]+\.)?imdb\.(?:com|de|it|es|fr|pt)\/(?:[a-z]{2}\/)?([a-z]+\/[a-z0-9]+)(?:\/.*)*$/,"https://www.imdb.com/$1/"),validate(e,t){const s=/^https:\/\/www\.imdb\.com\/(name\/nm|title\/tt|character\/ch|company\/co)[0-9]{7,}\/$/.exec(e);if(s){const e=s[1];switch(t){case c.imdb.artist:return{result:"name/nm"===e||"character/ch"===e||"company/co"===e,target:d.ENTITY};case c.imdb.label:case c.imdb.place:return{result:"company/co"===e,target:d.ENTITY};case c.imdb.recording:case c.imdb.release:case c.imdb.release_group:case c.imdb.series:case c.imdb.work:return{result:"title/tt"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},imslp:{hostname:"imslp.org",match:[/^(https?:\/\/)?(www\.)?imslp\.org\//i],restrict:[{...c.score,...c.imslp}],clean:e=>e.replace(/^https?:\/\/(?:www\.)?(.*)$/,"https://$1"),validate(e,t){switch(t){case c.imslp.artist:return/^https:\/\/imslp\.org\/wiki\/Category:/.test(e)?{result:!0}:{error:o("Only IMSLP “{category_url_pattern}” links are allowed\n               for artists. Please link work pages to the specific\n               work in question.",{category_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"Category:"})}),result:!1,target:d.ENTITY};case c.score.work:return/^https:\/\/imslp\.org\/wiki\/(?!Category:)/.test(e)?{result:!0}:{error:o("IMSLP “{category_url_pattern}” links are only allowed\n               for artists. Please link the specific work page to this\n               work instead, if available.",{category_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"Category:"})}),result:!1,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}},indiegogo:{hostname:"indiegogo.com",match:[/^(https?:\/\/)?(www\.)?indiegogo\.com\/(individuals|projects)\//i],restrict:[c.crowdfunding],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?indiegogo\.com\/individuals\/(\d+)(?:[/?#].*)?$/,"https://www.indiegogo.com/individuals/$1")).replace(/^(?:https?:\/\/)?(?:www\.)?indiegogo\.com\/projects\/([\w-]+)(?:[/?#].*)?$/,"https://www.indiegogo.com/projects/$1")},instagram:{hostname:"instagram.com",match:[/^(https?:\/\/)?([^/]+\.)?instagram\.com\//i],restrict:[{...c.streamingfree,...c.socialnetwork}],clean:e=>(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?instagram\.com\/(?:p|tv)\/([^/?#]+).*$/,"https://www.instagram.com/p/$1/"),/^https:\/\/www\.instagram\.com\/(explore|p)\//.test(e)||(e=(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?instagram\.com\/stories\/([^/?#]+).*$/,"https://www.instagram.com/$1/")).replace(/^(?:https?:\/\/)?(?:[^/]+\.)?instagram\.com\/([^/?#]+).*$/,"https://www.instagram.com/$1/")),e),validate(e,t){if(/^https:\/\/www\.instagram\.com\/explore\//.test(e))return{error:o("Instagram “{explore_url_pattern}” links are not allowed.\n             Please link to a profile instead, if there is one.",{explore_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/explore"})}),result:!1,target:d.URL};const s=/^https:\/\/www\.instagram\.com\/([^/]+)\/([^/?#]+\/)?$/.exec(e);if(s){const e=s[1],i=s[2];return t===c.streamingfree.recording||t===c.streamingfree.release?{result:"p"===e&&void 0!==i,target:d.RELATIONSHIP}:Object.values(c.socialnetwork).includes(t)?"p"===e?{error:o("Please do not link directly to images,\n                 link to the appropriate Instagram profile page instead.\n                 If you want to link to a video,\n                 {url|add a standalone recording} for it instead.",{url:{href:"/recording/create",target:"_blank"}}),result:!1,target:d.URL}:["accounts","accounts_center","direct","email","push","session"].includes(e)?{error:l("This is an internal Instagram page and should not be added."),result:!1,target:d.URL}:{result:/^(?!(?:explore|p|stories|tv)$)/.test(e)&&void 0===i,target:d.RELATIONSHIP}:{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},irishtune:{hostname:"irishtune.info",match:[/^(https?:\/\/)?(www\.)?irishtune\.info/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?irishtune\.info\/(album\/[A-Za-z+0-9]+|tune\/\d+)(?:[/?#].*)?$/,"https://www.irishtune.info/$1/"),validate(e,t){const s=/^https:\/\/www\.irishtune\.info\/(?:(album)\/[A-Za-z+0-9]+|(tune)\/\d+)\/$/.exec(e);if(s){const e=s[1]||s[2];switch(t){case c.otherdatabases.release_group:return{result:"album"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"tune"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},irombook:{hostname:"static.metabrainz.org",match:[/^https:\/\/static\.metabrainz\.org\/irombook\//],restrict:[c.image],validate:(e,t)=>({result:t===c.image.instrument,target:d.RELATIONSHIP})},itunes:{hostname:"itunes.apple.com",match:[/^(https?:\/\/)?([^/]+\.)?itunes\.apple\.com\//i],restrict:[c.downloadpurchase],clean:e=>e=(e=(e=e.replace(/^https?:\/\/(?:geo\.)?itunes\.apple\.com\/([a-z]{2}\/)?(artist|album|audiobook|author|music-video|podcast|preorder)\/(?:[^?#/]+\/)?(?:id)?([0-9]+)(?:\?.*)?$/,"https://itunes.apple.com/$1$2/id$3")).replace(/^(https:\/\/itunes\.apple\.com(?:\/[a-z]{2})?)\/author\//,"$1/artist/")).replace(/^(https:\/\/itunes\.apple\.com)\/([a-z-]{3,})\//,"$1/us/$2/"),validate(e,t){const s=/^https:\/\/itunes\.apple\.com\/[a-z]{2}\/([a-z-]{3,})\/id[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:return"artist"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.downloadpurchase.recording:return{result:"music-video"===e,target:d.ENTITY};case c.downloadpurchase.release:return{result:/^(album|audiobook|podcast|preorder)$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},jamendo:{hostname:"jamendo.com",match:[/^(https?:\/\/)?([^/]+\.)?jamendo\.com/i],restrict:[A(c.downloadfree,c.streamingfree)],clean:e=>e=(e=(e=e.replace(/jamendo\.com\/(?:\w\w\/)?(album|list|track)\/([^/]+)(\/.*)?$/,"jamendo.com/$1/$2")).replace(/img\.jamendo\.com\/albums\/(\d+)\/covers\/\d+\.\d+\.jpg/,"www.jamendo.com/album/$1/")).replace(/jamendo\.com\/\w\w\/artist\//,"jamendo.com/artist/")},jaxsta:{hostname:["jaxsta.com","jaxsta.io"],match:[/^(https?:\/\/)?(www\.)?jaxsta\.(com|io)/i],restrict:[c.otherdatabases,{work:[c.otherdatabases.work,c.lyrics.work]}],select(e,t){const s=/^https:\/\/jaxsta\.com\/(\w+)\/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}(?:\/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})?$/.exec(e);if(s){if("work"===s[1])if("work"===t)return c.otherdatabases.work}return!1},clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?jaxsta\.(?:com|io)\/([^#?]+).*$/,"https://jaxsta.com/$1")).replace(/^https:\/\/jaxsta\.com\/(\w+)\/([a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})(\/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})?.*$/,"https://jaxsta.com/$1/$2$3"),validate(e,t){const s=/^https:\/\/jaxsta\.com\/(\w+)\/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}(\/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12})?$/.exec(e);if(s){const e=s[1],i=Boolean(s[2]);switch(t){case c.otherdatabases.artist:case c.otherdatabases.label:return{result:"profile"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"recording"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"release"===e&&i,target:d.ENTITY};case c.lyrics.work:case c.otherdatabases.work:return{result:"work"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},jazzmusicarchives:{hostname:"jazzmusicarchives.com",match:[/^(https?:\/\/)?(www\.)?jazzmusicarchives\.com/i],restrict:[c.otherdatabases],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?jazzmusicarchives\.com\/([^#?]+).*$/,"https://www.jazzmusicarchives.com/$1")).replace(/\/+$/,""),validate(e,t){const s=/^https:\/\/www\.jazzmusicarchives\.com\/(\w+)\/(?:[\w%()-]+\/)?[\w%()-]*$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"artist"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"video"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"album"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},joysound:{hostname:"joysound.com",match:[/^(https?:\/\/)?([^/]+\.)?joysound\.com\//i],restrict:[c.lyrics],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?joysound\.com\/(web\/search\/(?:artist|song)\/\d+).*$/,"https://www.joysound.com/$1"),validate(e,t){const s=/^https:\/\/www.joysound\.com\/web\/search\/(artist|song)\/\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.lyrics.artist:return{result:"artist"===e,target:d.ENTITY};case c.lyrics.work:return{result:"song"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},junodownload:{hostname:"junodownload.com",match:[/^(?:https?:\/\/)?(?:www\.)?junodownload\.com/i],restrict:[c.downloadpurchase],clean:e=>e=(e=(e=e.replace(/^https?:\/\/(?:www\.)?junodownload\.com\/([^?#]+).*$/,"https://www.junodownload.com/$1")).replace(/^https:\/\/www\.junodownload\.com\/(artists|labels)\/([^/]+).*$/,"https://www.junodownload.com/$1/$2/")).replace(/^https:\/\/www\.junodownload\.com\/products\/(?:[\w\d-]+\/)?([\d-]+)(?:.htm)?.*$/,"https://www.junodownload.com/products/$1/"),validate(e,t){if(/https:\/\/www\.junodownload\.com\/search\//.test(e))return{error:g(),result:!1,target:d.URL};const s=/^https:\/\/www\.junodownload\.com\/(artists|labels|products)\/[\w\d+-]+\/$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:return{result:"artists"===e,target:d.ENTITY};case c.downloadpurchase.label:return{result:"labels"===e,target:d.ENTITY};case c.downloadpurchase.release:return{result:"products"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},kashinavi:{hostname:"kashinavi.com",match:[/^(https?:\/\/)?([^/]+\.)?kashinavi\.com\//i],restrict:[c.lyrics],clean(e){const t=/^(?:https?:\/\/)?(?:[^/]+\.)?kashinavi\.com\/(.*)$/.exec(e);if(t){let s=t[1];s=s.replace(/^(song_view\.html\?\d+).*$/,"$1"),s=s.replace(/^(kashu\.php\?).*(artist=\d+).*$/,"$1$2"),e="https://kashinavi.com/"+s}return e},validate(e,t){const s=/^https:\/\/kashinavi\.com\/(.+)$/.exec(e);if(s){const e=s[1];switch(t){case c.lyrics.artist:return{result:/^kashu\.php\?artist=\d+$/.test(e),target:d.ENTITY};case c.lyrics.work:return{result:/^song_view\.html\?\d+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},kbr:{hostname:"opac.kbr.be",match:[/^(https?:\/\/)?opac\.kbr\.be\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^https?:\/\/(?:www\.)?(.*)$/,"https://$1"),validate(e,t){const s=/^https:\/\/opac\.kbr\.be\/LIBRARY\/doc\/(AUTHORITY|SYRACUSE)\/[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:case c.otherdatabases.label:return{result:"AUTHORITY"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"SYRACUSE"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},kickstarter:{hostname:"kickstarter.com",match:[/^(https?:\/\/)?(www\.)?kickstarter\.com\/(profile|projects)\//i],restrict:[c.crowdfunding],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?kickstarter\.com\/profile\/([\w-]+)(?:[/?#].*)?$/,"https://www.kickstarter.com/profile/$1")).replace(/^(?:https?:\/\/)?(?:www\.)?kickstarter\.com\/projects\/(\d+)\/([\w-]+)(?:[/?#].*)?$/,"https://www.kickstarter.com/projects/$1/$2")},kofi:{hostname:"ko-fi.com",match:[/^(https?:\/\/)?(www\.)?ko-fi\.com\/(?!s\/)/i],restrict:[c.patronage],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?ko-fi\.com\/([^/?#]+).*$/,"https://ko-fi.com/$1")},laboiteauxparoles:{hostname:"laboiteauxparoles.com",match:[/^(https?:\/\/)?([^/]+\.)?laboiteauxparoles\.com/i],restrict:[c.lyrics],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?laboiteauxparoles\.com\/(auteur|editeur|interprete|titre)\/([^/?#]+).*$/,"https://laboiteauxparoles.com/$1/$2"),validate(e,t){const s=/^https:\/\/laboiteauxparoles\.com\/(auteur|editeur|interprete|titre)\//.exec(e);if(s){const e=s[1];switch(t){case c.lyrics.artist:return{result:/^(?:auteur|interprete)$/.test(e),target:d.ENTITY};case c.lyrics.label:return{result:"editeur"===e,target:d.ENTITY};case c.lyrics.work:return{result:"titre"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},lantis:{hostname:"lantis.jp",match:[/^(https?:\/\/)?(www\.)?lantis\.jp\/release-item2\.php\?id=[0-9a-f]{32}$/i,/^(https?:\/\/)?(www\.)?lantis\.jp\/release-item\/[A-Z]+-\d+(\.html)?$/i],restrict:[c.discographyentry],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?lantis\.jp\//,"https://www.lantis.jp/")).replace(/^(https:\/\/www\.lantis\.jp)\/release-item\/([A-Z]+-\d+)$/,"$1/release-item/$2.html")},lastfm:{hostname:["last.fm","lastfm.*"],match:[/^(https?:\/\/)?([^/]+\.)?(last\.fm|lastfm\.(com\.br|com\.tr|at|com|de|es|fr|it|jp|pl|pt|ru|se))\/([a-z]{2}\/)?(music|label|venue|event|festival)\//i],restrict:[c.lastfm],clean:e=>e=(e=e.replace(/^(https?:\/\/)?((www|cn|m)\.)?(last\.fm|lastfm\.(com\.br|com\.tr|at|com|de|es|fr|it|jp|pl|pt|ru|se))\/([a-z]{2}\/)?/,"https://www.last.fm/")).replace(/^https:\/\/www\.last\.fm\/(?:[a-z]{2}\/)?([a-z]+)\/([^?#]+).*$/,"https://www.last.fm/$1/$2")},lastfm_user:{hostname:["last.fm","lastfm.*"],match:[/^(https?:\/\/)?([^/]+\.)?(last\.fm|lastfm\.(com\.br|com\.tr|at|com|de|es|fr|it|jp|pl|pt|ru|se))\/user\//i],restrict:[c.socialnetwork],clean:e=>e.replace(/^(https?:\/\/)?((www|cn|m)\.)?(last\.fm|lastfm\.(com\.br|com\.tr|at|com|de|es|fr|it|jp|pl|pt|ru|se))/,"https://www.last.fm")},libraryofcongress:{hostname:"id.loc.gov",match:[/^(https?:\/\/)?id\.loc\.gov\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(id\.loc\.gov\/authorities\/names\/[a-z]+\d+)(?:[.#].*)?$/,"http://$1"),validate:(e,t)=>/^http:\/\/id\.loc\.gov\/authorities\/names\/[a-z]+\d+$/.test(e)?t===c.otherdatabases.artist||t===c.otherdatabases.label||t===c.otherdatabases.place||t===c.otherdatabases.series||t===c.otherdatabases.work?{result:!0}:{result:!1,target:d.ENTITY}:{result:!1,target:d.URL}},librarything:{hostname:"librarything.com",match:[/^(https?:\/\/)?(www\.)?librarything\.com/i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?librarything\.com\/(author|nseries|work)\/([0-9a-z-]+)(?:[/?#].*)?$/,"https://www.librarything.com/$1/$2"),validate(e,t){const s=/^https:\/\/www\.librarything\.com\/([a-z]+)\/[0-9a-z-]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"author"===e,target:d.ENTITY};case c.otherdatabases.series:return{result:"nseries"===e,target:d.ENTITY};case c.otherdatabases.release_group:case c.otherdatabases.work:return{result:"work"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},librivox:{hostname:"librivox.org",match:[/^(https?:\/\/)?(www\.)?librivox\.org/i],restrict:[c.downloadfree],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?librivox\.org\/((?:author|reader)\/[\d]+|[\w\d-]+).*$/,"https://librivox.org/$1"),validate(e,t){if(/^https:\/\/librivox\.org\/search$/.test(e))return{error:g(),result:!1,target:d.URL};const s=/^https:\/\/librivox\.org\/(?:author|reader)\/[\d]+$/.test(e),i=/^https:\/\/librivox\.org\/[\w\d-]+$/.test(e);if(s||i){switch(t){case c.downloadfree.artist:return{result:s,target:d.ENTITY};case c.downloadfree.release:return{result:i,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},license:{hostname:["artlibre.org","creativecommons.org"],match:[/^(https?:\/\/)?([^/]+\.)?artlibre\.org\/licence/i,/^(https?:\/\/)?([^/]+\.)?creativecommons\.org\/(licenses|publicdomain)\//i],restrict:[c.license],clean:e=>e=(e=(e=(e=(e=(e=(e=e.replace(/^(https?:\/\/)?([^/]+\.)?creativecommons\.org\//,"https://creativecommons.org/")).replace(/^https:\/\/creativecommons\.org\/(licenses|publicdomain)\/(.+)\/(?:(?:legalcode|deed)(?:[.-][A-Za-z_]+)?)?/,"https://creativecommons.org/$1/$2/")).replace(/^(https:\/\/creativecommons\.org\/licenses\/(?:by|(?:by-|)(?:nc|nc-nd|nc-sa|nd|sa)|(?:nc-|)sampling\+?)\/[0-9]+\.[0-9]+(?:\/(?:ar|au|at|be|br|bg|ca|cl|cn|co|cr|hr|cz|dk|ec|ee|fi|fr|de|gr|gt|hk|hu|in|ie|il|it|jp|lu|mk|my|mt|mx|nl|nz|no|pe|ph|pl|pt|pr|ro|rs|sg|si|za|kr|es|se|ch|tw|th|uk|scotland|us|vn)|))\/*$/,"$1/")).replace(/^(https:\/\/creativecommons\.org\/publicdomain\/zero\/[0-9]+\.[0-9]+)\/*$/,"$1/")).replace(/^(https:\/\/creativecommons\.org\/licenses\/publicdomain)\/*$/,"$1/")).replace(/^(https?:\/\/)?([^/]+\.)?artlibre\.org\//,"http://artlibre.org/")).replace(/^http:\/\/artlibre\.org\/licence\.php\/lal\.html/,"http://artlibre.org/licence/lal")},linkedin:{hostname:"linkedin.com",match:[/^(https?:\/\/)?([^/]+\.)?linkedin\.com\//i],restrict:[c.socialnetwork],clean:e=>e.replace(/^https?:\/\/(?:[^/]+\.)?linkedin\.com\/([^?#]+).*$/,"https://www.linkedin.com/$1")},livefans:{hostname:"livefans.jp",match:[/^(https?:\/\/)?(www\.)?livefans\.jp/i],restrict:[c.otherdatabases],clean:e=>(e=(e=e.replace(/(venues)\/(?:past|future)\//,"$1/")).replace(/(venues)\/facility\?.*v_id=([0-9]+).*$/,"$1/$2")).replace(/^(?:https?:\/\/)?(?:www\.)?livefans\.jp\/([^?#]+[^/?#])\/*(?:[?#].*)?$/,"https://www.livefans.jp/$1"),validate(e,t){const s=/^https:\/\/www\.livefans\.jp\/([a-z]+)\/[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"artists"===e,target:d.ENTITY};case c.otherdatabases.event:return{result:"events"===e,target:d.ENTITY};case c.otherdatabases.series:return{result:"groups"===e,target:d.ENTITY};case c.otherdatabases.place:return{result:"venues"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},livenation:{hostname:"livenation.*",match:[/^(https?:\/\/)?(?:(?:concerts|www)\.)?livenation\.(?:[a-z]{2,3}?\.)?[a-z]{2,4}\//i],restrict:[c.ticketing],clean:e=>e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?concerts\.livenation\.com\/(?:[\w\d-]+\/)?event\/([0-9A-F]+).*$/,"https://concerts.livenation.com/event/$1")).replace(/^(?:https?:\/\/)?(?:www\.)?livenation\.com\/(artist|event|venue)\/([\w-]+).*$/,"https://www.livenation.com/$1/$2")).replace(/^(?:https?:\/\/)?(?:www\.)?livenation\.((?:[a-z]{2,3}?\.)?[a-z]{2,4})\/(show|venue)\/([\w-]+).*$/,"https://www.livenation.$1/$2/$3")).replace(/^(?:https?:\/\/)?(?:www\.)?livenation\.((?:[a-z]{2,3}?\.)?[a-z]{2,4})\/artist-[\w\d-]+-([0-9]+).*$/,"https://www.livenation.$1/artist-$2"),validate(e,t){let s=/^https:\/\/(concerts|www)\.livenation\.(?:[a-z]{2,3}?\.)?[a-z]{2,4}\/(artist|event|show|venue)\/[\w-]+$/.exec(e);if(s||(s=/^https:\/\/(www)\.livenation\.(?:[a-z]{2,3}?\.)?[a-z]{2,4}\/(artist)-[0-9]+$/.exec(e)),s){const e=s[1],i=s[2];switch(t){case c.ticketing.artist:return"artist"===i&&"www"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.ticketing.event:return"event"===i||"show"===i?{result:!0}:{result:!1,target:d.ENTITY};case c.ticketing.place:return"venue"===i&&"www"===e?{result:!0}:{result:!1,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},loudr:{hostname:"loudr.fm",match:[/^(https?:\/\/)?loudr\.fm\//i],restrict:[c.downloadpurchase],clean:e=>e=e.replace(/^https?:\/\/loudr\.fm\/(artist|release)\/([a-zA-Z0-9_-]+)\/([a-zA-Z0-9_-]{5}).*$/,"https://loudr.fm/$1/$2/$3")},lyrics:{hostname:["directlyrics.com","lieder.net","j-lyric.net","muzikum.eu","gutenberg.org"],match:[/^(https?:\/\/)?([^/]+\.)?directlyrics\.com/i,/^(https?:\/\/)?([^/]+\.)?lieder\.net/i,/^(https?:\/\/)?([^/]+\.)?j-lyric\.net/i,/^(https?:\/\/)?([^/]+\.)?muzikum\.eu/i,/^(https?:\/\/)?([^/]+\.)?gutenberg\.org/i],restrict:[c.lyrics]},mainlynorfolk:{hostname:"mainlynorfolk.info",match:[/^(https?:\/\/)?(www\.)?mainlynorfolk\.info/i],restrict:[c.otherdatabases,{work:[c.otherdatabases.work,c.lyrics.work]}],select(e,t){const s=/^https:\/\/mainlynorfolk\.info\/(?:[^/]+)\/(records|songs)?/.exec(e);if(s){if("songs"===s[1])if("work"===t)return c.otherdatabases.work}return!1},clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?mainlynorfolk\.info\//,"https://mainlynorfolk.info/")).replace(/^https:\/\/mainlynorfolk\.info\/([^/]+)(?:\/index\.html)?$/,"https://mainlynorfolk.info/$1/"),validate(e,t){if(t===c.otherdatabases.artist)return{result:/^https:\/\/mainlynorfolk\.info\/(?:[^/]+)\/$/.test(e),target:d.RELATIONSHIP};const s=/^https:\/\/mainlynorfolk\.info\/(?:[^/]+)\/(records|songs)\/(?:[^/]+)$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.release:return{result:"records"===e,target:d.ENTITY};case c.lyrics.work:case c.otherdatabases.work:return{result:"songs"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},maniadb:{hostname:"maniadb.com",match:[/^(https?:\/\/)?(www\.)?maniadb\.com/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?maniadb\.com\/(?:index.php\/)?(album|artist)(?:\/|\.asp[?][ap]=)([0-9]+).*$/,"http://www.maniadb.com/$1/$2"),validate(e,t){const s=/^http:\/\/www\.maniadb\.com\/(album|artist)\/[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"artist"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"album"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},melon:{hostname:"melon.com",match:[/^(https?:\/\/)?((www|m2)\.)?melon\.com\//i],restrict:[A(c.downloadpurchase,c.streamingpaid),c.streamingpaid],select(e,t){const s=/^https:\/\/www\.melon\.com\/(album|artist|song|video)/.exec(e);if(s){switch(s[1]){case"album":if("release"===t)return[c.downloadpurchase.release,c.streamingpaid.release];break;case"artist":if("artist"===t)return[c.downloadpurchase.artist,c.streamingpaid.artist];break;case"song":if("recording"===t)return[c.downloadpurchase.recording,c.streamingpaid.recording];break;default:if("release"===t)return[c.downloadpurchase.release,c.streamingpaid.release];if("recording"===t)return[c.downloadpurchase.recording,c.streamingpaid.recording]}}return!1},clean:e=>e=(e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:(?:www|m2)\.)?melon\.com\//,"https://www.melon.com/")).replace(/^(https:\/\/www\.melon\.com\/album)\/(?:detail|music)\.htm\?(albumId=\d+)(?:[/#&].*)?$/,"$1/detail.htm?$2")).replace(/^(https:\/\/www\.melon\.com\/artist)\/(?:timeline|detail|song|album|video|photo|fan|hifi|song\/all|detail\/info|magazine)\.htm\?(artistId=\d+)(?:[/#&].*)?$/,"$1/detail.htm?$2")).replace(/^(https:\/\/www\.melon\.com\/song\/detail\.htm\?songId=\d+)(?:[/#&].*)?$/,"$1")).replace(/^(https:\/\/www\.melon\.com\/video)\/detail2?\.htm\?(mvId=\d+)(?:[/#&].*)?$/,"$1/detail2.htm?$2"),validate(e,t){if(/https:\/\/www\.melon\.com\/search\//.test(e))return{error:g(),result:!1,target:d.URL};const s=/^https:\/\/www\.melon\.com\/(album|artist|song|video)\/detail.htm\?(?:albumId|artistId|songId|mvId)=\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.release:case c.streamingpaid.release:return{result:"album"===e||"video"===e,target:d.ENTITY};case c.downloadpurchase.artist:case c.streamingpaid.artist:return{result:"artist"===e,target:d.ENTITY};case c.downloadpurchase.recording:case c.streamingpaid.recording:return{result:"song"===e||"video"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},metacritic:{hostname:"metacritic.com",match:[/^(https?:\/\/)?(www\.)?metacritic\.com/i],restrict:[c.review],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?metacritic\.com\/music\/([\w-]+\/[\w-]+).*$/,"https://www.metacritic.com/music/$1"),validate:(e,t)=>/^https:\/\/www\.metacritic\.com\/music\/[\w-]+\/[\w-]+$/.test(e)?{result:t===c.review.release_group,target:d.ENTITY}:{result:!1,target:d.URL}},metalarchives:{hostname:"metal-archives.com",match:[/^(https?:\/\/)?(www\.)?metal-archives\.com\//i],restrict:[{...c.otherdatabases,...c.review}],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?metal-archives\.com\/([a-z]+(?:\/[^/?#]+)+).*$/,"https://www.metal-archives.com/$1"),validate(e,t){const s=/^https:\/\/www\.metal-archives\.com\/([a-z]+)\/[^?#]+[^/?#]$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:/^(?:artists?|bands?)$/.test(e),target:d.ENTITY};case c.otherdatabases.label:return{result:"labels"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"albums"===e,target:d.ENTITY};case c.review.release_group:return{result:"reviews"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},metalmusicarchives:{hostname:"metalmusicarchives.com",match:[/^(https?:\/\/)?(www\.)?metalmusicarchives\.com/i],restrict:[c.otherdatabases],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?metalmusicarchives\.com\/([^#?]+).*$/,"https://www.metalmusicarchives.com/$1")).replace(/\/+$/,""),validate(e,t){const s=/^https:\/\/www\.metalmusicarchives\.com\/(\w+)\/(?:[\w%()-]+\/)?[\w%()-]*$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"artist"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"video"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"album"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},migumusic:{hostname:"migu.cn",match:[/^(https?:\/\/)?[^/]*music\.migu\.cn/i],restrict:[c.streamingfree],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:cdn|www\.)?music\.migu\.cn\/v3\/(live|(?:music|video)\/\w+)\/([^/?#]+).*$/,"https://music.migu.cn/v3/$1/$2")).replace(/\/digital_album\//,"/album/"),validate(e,t){const s=/^https:\/\/music\.migu\.cn\/v3\/(live|[a-z]+\/\w+)\/(?:[^/?#]+)$/.exec(e);if(s){const e=s[1];switch(t){case c.streamingfree.artist:return{result:"music/artist"===e,target:d.ENTITY};case c.streamingfree.recording:return{result:["live","music/song","video/mv"].includes(e),target:d.ENTITY};case c.streamingfree.release:return{result:"music/album"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},mixcloud:{hostname:"mixcloud.com",match:[/^(https?:\/\/)?([^/]+\.)?mixcloud\.com\//i],restrict:[c.socialnetwork],clean:e=>e.replace(/^https?:\/\/(?:[^/]+\.)?mixcloud\.com/,"https://www.mixcloud.com")},mobygames:{hostname:"mobygames.com",match:[/^(https?:\/\/)?(www\.)?mobygames\.com/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?mobygames\.com\/(company|person)\/([\d]+).*$/,"https://www.mobygames.com/$1/$2"),validate(e,t){const s=/^https:\/\/www\.mobygames\.com\/(company|person)\/[\d]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"person"===e,target:d.ENTITY};case c.otherdatabases.label:return{result:"company"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},mora:{hostname:"mora.jp",match:[/^(https?:\/\/)?([^/]+\.)?mora\.jp/i],restrict:[c.downloadpurchase],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^.]+\.)?mora\.jp\/package\/([0-9]+)\/([a-zA-Z0-9_-]+)(\/)?.*$/,"https://mora.jp/package/$1/$2/")},musicapopularcl:{hostname:"musicapopular.cl",match:[/^(https?:\/\/)?(www\.)?musicapopular\.cl/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?musicapopular\.cl((?:\/[^/?#]+){2})\/?(?:#.*)?$/,"http://www.musicapopular.cl$1/"),validate(e,t){const s=/^http:\/\/www\.musicapopular\.cl\/(artista|disco|grupo)\/[^/]+\/$/.exec(e);if(s){const e=s[1]||s[2];switch(t){case c.otherdatabases.artist:return{result:"artista"===e||"grupo"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"disco"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},musiksammler:{hostname:"musik-sammler.de",match:[/^(https?:\/\/)?(www\.)?musik-sammler\.de\//i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?musik-sammler\.de\/artist\/([0-9a-zA-Z-%]+)(?:[/?#].*)?$/,"https://www.musik-sammler.de/artist/$1/")).replace(/^(?:https?:\/\/)?(?:www\.)?musik-sammler\.de\/album\/(?:[^/]+-(?=[\d/]))?(\d+)(?:[/?#].*)?$/,"https://www.musik-sammler.de/album/$1/")).replace(/^(?:https?:\/\/)?(?:www\.)?musik-sammler\.de\/(?:media|release)\/(?:[^/]+-(?=[\d/]))?(\d+)(?:[/?#].*)?$/,"https://www.musik-sammler.de/release/$1/"),validate(e,t){const s=/^https:\/\/www\.musik-sammler\.de\/(\w+)\/[^?#]+\/$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"artist"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"release"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"album"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},musixmatch:{hostname:"musixmatch.com",match:[/^(https?:\/\/)?([^/]+\.)?musixmatch\.com\//i],restrict:[c.lyrics],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?musixmatch\.com\/(artist)\/([^/?#]+).*$/,"https://www.musixmatch.com/$1/$2")).replace(/^(?:https?:\/\/)?(?:[^/]+\.)?musixmatch\.com\/(album|lyrics)\/([^/?#]+)\/([^/?#]+).*$/,"https://www.musixmatch.com/$1/$2/$3"),validate(e,t){const s=/^https:\/\/www.musixmatch\.com\/(album|artist|lyrics)\/[^?#]+$/.exec(e);if(s){const e=s[1];switch(t){case c.lyrics.artist:return{result:"artist"===e,target:d.ENTITY};case c.lyrics.release_group:return"album"===e?{error:o("Musixmatch “{album_url_pattern}” pages are a bad match\n                   for MusicBrainz release groups, and linking to them\n                   is currently disallowed. Please consider adding Musixmatch\n                   links to the relevant artists and works instead.",{album_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/album"})}),result:!1,target:d.ENTITY}:{result:!1,target:d.ENTITY};case c.lyrics.work:return{result:"lyrics"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},musopen:{hostname:"musopen.org",match:[/^(https?:\/\/)?([^/]+\.)?musopen\.org\//i],restrict:[c.score],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?musopen\.org\/music\/(\d+).*$/,"https://musopen.org/music/$1/"),validate:e=>({result:/^https:\/\/musopen\.org\/music\/\d+\/$/.test(e),target:d.URL})},muziekweb:{hostname:"muziekweb.*",match:[/^(https?:\/\/)?www\.muziekweb\.(com|eu|nl)\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?muziekweb\.(?:com|eu|nl)\/(?:[a-z]{2}\/)?Link\/([A-Z]{1,3}\d+(?:\/(?:CLASSICAL(?:\/COMPOSER)?|POPULAR))?).*$/,"https://www.muziekweb.nl/Link/$1/"),validate(e,t){const s=/^https:\/\/www\.muziekweb\.nl\/Link\/(.*)\/$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:/^M\d{11}\/(CLASSICAL(?:\/COMPOSER)?|POPULAR)$/.test(e),target:d.ENTITY};case c.otherdatabases.label:return{result:/^L\d{11}$/.test(e),target:d.ENTITY};case c.otherdatabases.release:return{result:/^[A-Z]{2,3}\d{4,6}$/.test(e),target:d.ENTITY};case c.otherdatabases.work:return{result:/^U\d{11}\/(CLASSICAL|POPULAR)$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},myspace:{hostname:["myspace.com","myspace.de","myspace.fr"],match:[/^(https?:\/\/)?([^/]+\.)?myspace\.(com|de|fr)/i],restrict:[c.myspace],clean:e=>e.replace(/^(https?:\/\/)?([^.]+\.)?myspace\.(com|de|fr)/,"https://myspace.com"),validate:e=>({result:/^https:\/\/myspace\.com\//.test(e),target:d.URL})},napster:{hostname:"napster.com",match:[/^(https?:\/\/)?((app|www|[a-z]{2})\.)?napster\.com/i],restrict:[c.streamingpaid],clean:e=>e=(e=(e=e.replace(/^http:\/\//,"https://")).replace(/^https:\/\/((app|www)\.)?napster/,"https://us.napster")).replace(/[#?].*$/,""),validate(e,t){if(/\/(alb|art|tra)\.[\d]+/i.test(e))return{error:o("This is a redirect link. Please follow {redirect_url|your link}\n             and add the link it redirects to instead.",{redirect_url:{href:e,rel:"noopener noreferrer",target:"_blank"}}),result:!1,target:d.URL};switch(t){case c.streamingpaid.artist:return{result:/^https:\/\/[a-z]{2}\.napster\.com\/artist\/[\w-]+$/.test(e),target:d.ENTITY};case c.streamingpaid.recording:return{result:/^https:\/\/[a-z]{2}\.napster\.com\/artist\/[\w-]+\/album\/[\w-]+\/track\/[\w-]+$/.test(e),target:d.ENTITY};case c.streamingpaid.release:return{result:/^https:\/\/[a-z]{2}\.napster\.com\/artist\/[\w-]+\/album\/[\w-]+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.URL}}},ndlauth:{hostname:"id.ndl.go.jp",match:[/^(https?:\/\/)?id\.ndl\.go\.jp\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(id\.ndl\.go\.jp\/auth\/ndlna\/\d+)(?:[.#].*)?$/,"https://$1"),validate:(e,t)=>/^https:\/\/id\.ndl\.go\.jp\/auth\/ndlna\/\d+$/.test(e)?t===c.otherdatabases.artist?{result:!0}:{result:!1,target:d.RELATIONSHIP}:{result:!1,target:d.URL}},neyzen:{hostname:"neyzen.com",match:[/^(https?:\/\/)?(www\.)?neyzen\.com/i],restrict:[c.score]},niconicovideo:{hostname:"nicovideo.jp",match:[/^(https?:\/\/)?((?!commons)[^/]+\.)?(nicovideo\.jp\/)/i],restrict:[{...c.streamingfree,...c.videochannel}],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?ch\.nicovideo\.jp\/([^/]+).*$/,"https://ch.nicovideo.jp/$1")).replace(/^(?:https?:\/\/)?(?:[^/]+\.)?nicovideo\.jp\/(user\/[0-9]+|watch\/(?:sm|so|nm|ax|ca|cw|nl|z[a-d])[0-9]+).*$/,"https://www.nicovideo.jp/$1"),validate(e,t){const s=/^(?:https?:\/\/)?(ch|www)\.nicovideo\.jp\/(?:(user)\/[0-9]+|(watch)\/(?:sm|so|nm|ax|ca|cw|nl|z[a-d])[0-9]+|[^/]+)$/.exec(e);if(s){const e=s[1],i=s[2]||s[3];return Object.values(c.videochannel).includes(t)?"watch"===i?{error:m(),result:!1,target:d.ENTITY}:{result:"ch"===e||"user"===i,target:d.RELATIONSHIP}:"ch"===e||"user"===i?{error:f(),result:!1,target:d.ENTITY}:{result:"watch"===i,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},ocremix:{hostname:"ocremix.org",match:[/^(https?:\/\/)?(www\.)?ocremix\.org\//i],restrict:[c.otherdatabases],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?ocremix\.org\//,"https://ocremix.org/")).replace(/^https:\/\/ocremix\.org\/(album|artist|game|org|remix|song)\/([^/?#]+).*$/,"https://ocremix.org/$1/$2")},offiziellecharts:{hostname:"offiziellecharts.de",match:[/^(https?:\/\/)?([^/]+\.)?offiziellecharts\.de\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?offiziellecharts\.de\/(?:charts\/)?([^/?#]+).*$/,"https://www.offiziellecharts.de/charts/$1"),validate(e,t){const s=/^https:\/\/www\.offiziellecharts\.de\/charts\/(album|compilation|titel)-details-[\d]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.recording:return{result:"titel"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"album"===e||"compilation"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},onlinebijbel:{hostname:"online-bijbel.nl",match:[/^(https?:\/\/)?([^/]+\.)?online-bijbel\.nl\//i],restrict:[c.lyrics],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?online-bijbel\.nl\/(12gezang|gezang|psalm)\/(\d+).*$/,"http://www.online-bijbel.nl/$1/$2/"),validate:(e,t)=>/^http:\/\/www.online-bijbel\.nl\/(12gezang|gezang|psalm)\/\d+\/$/.test(e)?t===c.lyrics.work?{result:!0}:{result:!1,target:d.ENTITY}:{result:!1,target:d.URL}},onlinecommunity:{hostname:["last.fm","lastfm.*"],match:[/^(https?:\/\/)?([^/]+\.)?(last\.fm|lastfm\.(com\.br|com\.tr|at|com|de|es|fr|it|jp|pl|pt|ru|se))\/([a-z]{2}\/)?group\//i],restrict:[c.onlinecommunity],clean:e=>e=e.replace(/^(https?:\/\/)?((www|cn|m)\.)?(last\.fm|lastfm\.(com\.br|com\.tr|at|com|de|es|fr|it|jp|pl|pt|ru|se))\/([a-z]{2}\/)?/,"https://www.last.fm/")},openlibrary:{hostname:"openlibrary.org",match:[/^(https?:\/\/)?(www\.)?openlibrary\.org/i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?openlibrary\.org\/(?:authors|books|publishers|works)\/(OL[0-9]+A).*$/,"https://openlibrary.org/authors/$1")).replace(/^(?:https?:\/\/)?(?:www\.)?openlibrary\.org\/(?:authors|books|publishers|works)\/(OL[0-9]+M).*$/,"https://openlibrary.org/books/$1")).replace(/^(?:https?:\/\/)?(?:www\.)?openlibrary\.org\/(?:authors|books|publishers|works)\/(OL[0-9]+W).*$/,"https://openlibrary.org/works/$1")).replace(/^(?:https?:\/\/)?(?:www\.)?openlibrary\.org\/publishers\/([^/?#]+).*$/,"https://openlibrary.org/publishers/$1"),validate(e,t){let s=/^https:\/\/openlibrary\.org\/(authors|books|works)\/OL[0-9]+([AMW])$/.exec(e);if(s||(s=/^https:\/\/openlibrary\.org\/(publishers)\/[^/?#]+$/.exec(e)),s){const e=s[1],i=s[2]||"";switch(t){case c.otherdatabases.artist:return{result:"authors"===e&&"A"===i,target:d.ENTITY};case c.otherdatabases.label:return{result:"publishers"===e,target:d.ENTITY};case c.otherdatabases.release:return{result:"books"===e&&"M"===i,target:d.ENTITY};case c.otherdatabases.work:return{result:"works"===e&&"W"===i,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},operabase:{hostname:"operabase.com",match:[/^(https?:\/\/)?(www\.)?operabase\.com/i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?operabase\.com\//,"https://operabase.com/")).replace(/^https:\/\/operabase\.com\/(venues\/[\w-]+|works)\/(?:[^0-9]+)?([0-9]+).*$/,"https://operabase.com/$1/$2")).replace(/^https:\/\/operabase\.com\/artists\/(?:[^0-9]+)?([0-9]+).*$/,"https://operabase.com/a$1")).replace(/^https:\/\/operabase\.com\/[\w-]+(a|o)([0-9]+).*$/,"https://operabase.com/$1$2"),validate(e,t){const s=/^https:\/\/operabase\.com\/(?:(a|o)|(venues)\/[\w-]+\/|(works)\/)[0-9]+$/.exec(e);if(s){const e=s[1]||s[2]||s[3];switch(t){case c.otherdatabases.artist:return{result:"a"===e||"o"===e,target:d.ENTITY};case c.otherdatabases.place:return{result:"venues"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"works"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},otherdatabases:{hostname:["musicmoz.org","discografia.dds.it","encyclopedisque.fr","discosdobrasil.com.br","isrc.ncl.edu.tw","rolldabeats.com","psydb.net","spirit-of-metal.com","lortel.org","theatricalia.com","imvdb.com","vkdb.jp","ci.nii.ac.jp","iss.ndl.go.jp","finnmusic.net","fono.fi","pomus.net","stage48.net","big.or.jp","japanesemetal.gooside.com","tedcrane.com","thedancegypsy.com","bibliotekapiosenki.pl","finna.fi","castalbums.org","folkwiki.se","mvdbase.com","smdb.kb.se","operadis-opera-discography.org.uk","spirit-of-rock.com","tunearch.org","videogam.in"],match:[/^(https?:\/\/)?(www\.)?musicmoz\.org\//i,/^(https?:\/\/)?(www\.)?discografia\.dds\.it\//i,/^(https?:\/\/)?(www\.)?encyclopedisque\.fr\//i,/^(https?:\/\/)?((?:discografia|www)\.)?discosdobrasil\.com\.br\//i,/^(https?:\/\/)?(www\.)?isrc\.ncl\.edu\.tw\//i,/^(https?:\/\/)?(www\.)?rolldabeats\.com\//i,/^(https?:\/\/)?(www\.)?psydb\.net\//i,/^(https?:\/\/)?(www\.)?spirit-of-metal\.com\//i,/^(https?:\/\/)?(www\.)?lortel\.org\//i,/^(https?:\/\/)?(www\.)?theatricalia\.com\//i,/^(https?:\/\/)?(www\.)?imvdb\.com/i,/^(https?:\/\/)?(www\.)?vkdb\.jp/i,/^(https?:\/\/)?(www\.)?ci\.nii\.ac\.jp/i,/^(https?:\/\/)?(www\.)?iss\.ndl\.go\.jp\//i,/^(https?:\/\/)?(www\.)?finnmusic\.net/i,/^(https?:\/\/)?(www\.)?fono\.fi/i,/^(https?:\/\/)?(www\.)?pomus\.net/i,/^(https?:\/\/)?(www\.)?stage48\.net\/wiki\/index.php/i,/^(https?:\/\/)?(www22\.)?big\.or\.jp/i,/^(https?:\/\/)?(www\.)?japanesemetal\.gooside\.com/i,/^(https?:\/\/)?(www\.)?tedcrane\.com/i,/^(https?:\/\/)?(www\.)?thedancegypsy\.com/i,/^(https?:\/\/)?(www\.)?bibliotekapiosenki\.pl/i,/^(https?:\/\/)?(www\.)?finna\.fi/i,/^(https?:\/\/)?(www\.)?castalbums\.org/i,/^(https?:\/\/)?(www\.)?folkwiki\.se/i,/^(https?:\/\/)?(www\.)?mvdbase\.com/i,/^(https?:\/\/)?(www\.)?smdb\.kb\.se/i,/^(https?:\/\/)?(www\.)?operadis-opera-discography\.org\.uk/i,/^(https?:\/\/)?(www\.)?spirit-of-rock\.com/i,/^(https?:\/\/)?(www\.)?tunearch\.org/i,/^(https?:\/\/)?(www\.)?videogam\.in/i],restrict:[c.otherdatabases]},ototoy:{hostname:"ototoy.jp",match:[/^(https?:\/\/)?([^/]+\.)?ototoy\.jp/i],restrict:[c.downloadpurchase],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?ototoy\.jp\/(labels|_\/default\/[ap])\/(\d+).*$/,"https://ototoy.jp/$1/$2"),validate(e,t){const s=/^https:\/\/ototoy\.jp\/(labels|_\/default\/[ap])\/\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.label:return{result:"labels"===e,target:d.ENTITY};case c.downloadpurchase.release:return{result:/_\/default\/p/.test(e),target:d.ENTITY};case c.downloadpurchase.artist:return{result:/_\/default\/a/.test(e),target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},overture:{hostname:"overture.doremus.org",match:[/^(https?:\/\/)?overture\.doremus\.org\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?overture\.doremus\.org\//,"https://overture.doremus.org/"),validate(e,t){const s=/^https:\/\/overture\.doremus\.org\/(artist|expression|performance)\/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"artist"===e,target:d.ENTITY};case c.otherdatabases.event:return{result:"performance"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"expression"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},ozonru:{hostname:"ozon.ru",match:[/^(https?:\/\/)?(www\.)?ozon\.ru\/context\/detail\/id\//i],restrict:[c.mailorder]},patreon:{hostname:"patreon.com",match:[/^(https?:\/\/)?(www\.)?patreon\.com\/[^/?#]/i],restrict:[c.patronage],clean:e=>e=(e=e.replace(/^((?:https?:\/\/)?(?:www\.)?patreon\.com\/user)\/(?:community|posts)(\?u=\d+).*$/,"$1$2")).replace(/^(?:https?:\/\/)?(?:www\.)?patreon\.com\/(?:c\/)?(user\?u=\d+|(?!posts\/)\w+).*$/,"https://www.patreon.com/$1"),validate:e=>({result:/^https?:\/\/(?:www\.)?patreon\.com\/(?:user\?u=\d+|(?!posts$)\w+)$/.test(e),target:d.URL})},paypal:{hostname:"paypal.me",match:[/^(https?:\/\/)?(www\.)?paypal\.me\/[^/?#]/i],restrict:[c.patronage],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?paypal\.me\/([^/?#]+).*$/,"https://www.paypal.me/$1")},petitlyrics:{hostname:"petitlyrics.com",match:[/^(https?:\/\/)?([^/]+\.)?petitlyrics\.com\//i],restrict:[c.lyrics],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?petitlyrics\.com\/(lyrics(?:\/artist)?\/\d+|lyrics\/album\/[^?]+).*$/,"https://petitlyrics.com/$1"),validate(e,t){const s=/^https:\/\/petitlyrics\.com\/(lyrics(?:\/album|\/artist)?)\/.+$/.exec(e);if(s){const e=s[1];switch(t){case c.lyrics.artist:return{result:"lyrics/artist"===e,target:d.ENTITY};case c.lyrics.release_group:return{result:"lyrics/album"===e,target:d.ENTITY};case c.lyrics.work:return{result:"lyrics"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},pinterest:{hostname:"pinterest.com",match:[/^(https?:\/\/)?([^/]+\.)?pinterest\.com\//i],restrict:[c.socialnetwork],clean:e=>(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?pinterest\.com\/([^?#]*[^/?#])\/*(?:[?#].*)?$/,"https://www.pinterest.com/$1/")).replace(/\/(?:boards|pins|likes|followers|following)(?:\/.*)?$/,"/")},pixiv:{hostname:"pixiv.net",match:[/^(https?:\/\/)?(www\.)?pixiv\.net/i],restrict:[c.artgallery],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?pixiv\.net\/(?:[a-z]+\/)users\/([0-9]+).*$/,"https://www.pixiv.net/users/$1"),validate:e=>/^https:\/\/www\.pixiv\.net\/users\/([0-9]+)$/.test(e)?{result:!0}:{result:!1,target:d.URL}},progarchives:{hostname:"progarchives.com",match:[/^(https?:\/\/)?(www\.)?progarchives\.com/i],restrict:[c.otherdatabases],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?progarchives\.com\/([^#]+)(?:#.*)?$/,"https://www.progarchives.com/$1")).replace(/id=0*([1-9])/,"id=$1"),validate(e,t){const s=/^https:\/\/www\.progarchives\.com\/(\w+)\.asp\?id=[1-9]\d*$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"artist"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"video"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"album"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},purevolume:{hostname:"purevolume.com",match:[/^(https?:\/\/)?([^/]+\.)?purevolume\.com/i],restrict:[c.purevolume]},qobuz:{hostname:"qobuz.com",match:[/^(https?:\/\/)?(www\.)?qobuz\.com\//i],restrict:[c.downloadpurchase,c.streamingpaid,A(c.downloadpurchase,c.streamingpaid)],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?qobuz\.com\//,"https://www.qobuz.com/"),validate(e,t){const s=/^https:\/\/www\.qobuz\.com\/(?:[a-z]{2}-[a-z]{2}\/)?(album|interpreter|label)\/[\w\d-]+\/(?:[\w\d-]+\/)?[\w\d]+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:case c.streamingpaid.artist:return{result:"interpreter"===e,target:d.ENTITY};case c.downloadpurchase.label:case c.streamingpaid.label:return{result:"label"===e,target:d.ENTITY};case c.downloadpurchase.release:case c.streamingpaid.release:return{result:"album"===e,target:d.ENTITY}}}return{result:!1,target:d.URL}}},quebecinfomusique:{hostname:["qim.com","quebecinfomusique.com"],match:[/^(https?:\/\/)?(www\.)?(qim|quebecinfomusique)\.com/i],restrict:[c.otherdatabases],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?(?:qim|quebecinfomusique)\.com\/([^#]+).*$/i,"http://www.quebecinfomusique.com/$1")).replace(/^(http:\/\/www\.quebecinfomusique\.com\/artistes)\/(?:albums|oeuvres)\b/,"$1/biographie"),validate(e,t){const s=/^http:\/\/www\.quebecinfomusique\.com\/(\w+)\/(\w+)\.asp\?(.+)$/.exec(e);if(s){const[,e,i,r]=s;switch(t){case c.otherdatabases.artist:return{result:"artistes"===e&&"biographie"===i&&/^artistid=\d+$/.test(r),target:d.ENTITY};case c.otherdatabases.release_group:return{result:"albums"===e&&"description"===i&&/^albumid=\d+$/.test(r),target:d.ENTITY};case c.otherdatabases.work:return{result:"oeuvres"===e&&"oeuvre"===i&&/^oeuvreid=\d+&albumid=\d+$/.test(r),target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},rateyourmusic:{hostname:"rateyourmusic.com",match:[/^(https?:\/\/)?([^/]+\.)?rateyourmusic\.com\/(?!feature)/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?rateyourmusic\.com\/([^#?]+).*$/,"https://rateyourmusic.com/$1"),validate(e,t){const s=/^https:\/\/rateyourmusic\.com\/(\w+)\/(?:(\w+)\/)?/.exec(e);if(s){const e=s[1],i=s[2],r=["musicvideo","video"].includes(i);switch(t){case c.otherdatabases.artist:return{result:"artist"===e,target:d.ENTITY};case c.otherdatabases.event:return{result:"concert"===e,target:d.ENTITY};case c.otherdatabases.genre:return{result:"genre"===e,target:d.ENTITY};case c.otherdatabases.label:return{result:"label"===e,target:d.ENTITY};case c.otherdatabases.place:return{result:"venue"===e,target:d.ENTITY};case c.otherdatabases.recording:return"release"!==e||r?{result:"song"===e||"release"===e&&r,target:d.RELATIONSHIP}:{error:l("Only RYM music videos can be linked to recordings."),result:!1,target:d.RELATIONSHIP};case c.otherdatabases.release:case c.otherdatabases.release_group:return{result:"release"===e,target:d.ENTITY};case c.otherdatabases.series:return{result:"classifiers"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"work"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},rateyourmusicfeature:{hostname:"rateyourmusic.com",match:[/^(https?:\/\/)?(www\.)?rateyourmusic\.com\/feature/i],restrict:[c.interview],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?rateyourmusic\.com\//,"https://rateyourmusic.com/")},recochoku:{hostname:"recochoku.jp",match:[/^(https?:\/\/)?([^/]+\.)?recochoku\.jp/i],restrict:[c.downloadpurchase],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^.]+\.)?recochoku\.jp\/(album|artist|song)\/([a-zA-Z0-9]+)(\/)?.*$/,"https://recochoku.jp/$1/$2/")},residentadvisor:{hostname:["ra.co","residentadvisor.net"],match:[/^(https?:\/\/)?([^/]+\.)?ra\.co\/(?!exchange)/i,/^(https?:\/\/)?(www\.)?residentadvisor\.net\//i],restrict:[{...c.otherdatabases,...c.review,...c.discographyentry}],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?ra\.co\//,"https://ra.co/")).replace(/^https:\/\/ra\.co\/(clubs|dj|events|labels|podcast|reviews|tracks)\/([^/?#]+).*$/,"https://ra.co/$1/$2"),validate(e,t){if(/^https?:\/\/(?:www\.)?residentadvisor\.net\//.test(e))return{error:o("This is a link to the old Resident Advisor domain. Please\n             follow {ra_url|your link}, make sure the link it redirects\n             to is still the correct one and, if so, add that link instead.",{ra_url:{href:e,rel:"noopener noreferrer",target:"_blank"}}),result:!1,target:d.URL};const s=/^https:\/\/ra\.co\/([^/]+)/.exec(e);if(s){const e=s[1];switch(t){case c.discographyentry.release:return{result:"podcast"===e,target:d.ENTITY};case c.otherdatabases.artist:return{result:"dj"===e,target:d.ENTITY};case c.otherdatabases.event:return{result:"events"===e,target:d.ENTITY};case c.otherdatabases.label:return{result:"labels"===e,target:d.ENTITY};case c.otherdatabases.place:return{result:"clubs"===e,target:d.ENTITY};case c.otherdatabases.recording:return{result:"tracks"===e,target:d.ENTITY};case c.review.release_group:return{result:"reviews"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},residentadvisorexchange:{hostname:"ra.co",match:[/^(https?:\/\/)?(www\.)?ra\.co\/exchange/i],restrict:[c.shownotes],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?ra\.co\/exchange\/([^/?#]+).*$/,"https://ra.co/exchange/$1")},reverbnation:{hostname:"reverbnation.com",match:[/^(https?:\/\/)?([^/]+\.)?reverbnation\.com\//i],restrict:[c.socialnetwork],clean:e=>e=(e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:(?:www|m)\.)?reverbnation\.com(?:\/#!)?\//,"https://www.reverbnation.com/")).replace(/#.*$/,"")).replace(/([?&])(?:blog|current_active_tab|fb_og_[^=]+|kick|player_client_id|profile_tour|profile_view_source|utm_[^=]+)=(?:[^?&]*)/g,"$1")).replace(/([?&])&+/,"$1")).replace(/[?&]$/,"")},rism:{hostname:"rism.online",match:[/^(https?:\/\/)?(www\.)?rism\.online/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?rism\.online\/(\w+)\/(\d+).*$/,"https://rism.online/$1/$2"),validate(e,t){const s=/^https:\/\/rism\.online\/(\w+)\/(\d+)$/.exec(e);if(s){const e=s[1];return t===c.otherdatabases.artist?{result:"people"===e,target:d.ENTITY}:{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},rockcomar:{hostname:"rock.com.ar",match:[/^(https?:\/\/)?(www\.)?rock\.com\.ar/i],restrict:[c.otherdatabases],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?rock\.com\.ar\/([^#]+)(?:#.*)?$/,"http://rock.com.ar/$1")).replace(/^(http:\/\/rock\.com\.ar\/artistas\/[1-9][0-9]*)\/(?:[a-z]*|fotos\/[1-9][0-9]*)?$/,"$1"),validate(e,t){let s=/^http:\/\/rock\.com\.ar\/artistas\/[1-9][0-9]*(?:\/(discos|letras)\/[1-9][0-9]*)?$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:!e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"discos"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"letras"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}if(s=/^http:\/\/rock\.com\.ar\/(?:(bios|discos|letras)(?:\/[0-9]+){2}\.shtml|(artistas)\/.+)$/.exec(e),s){const e=s[1]||s[2];switch(t){case c.otherdatabases.artist:return{result:"artistas"===e||"bios"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"discos"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"letras"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},rockensdanmarkskort:{hostname:"rockensdanmarkskort.dk",match:[/^(https?:\/\/)?(www\.)?rockensdanmarkskort\.dk/i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?rockensdanmarkskort\.dk\/steder\/(.*)+$/,"http://www.rockensdanmarkskort.dk/steder/$1")},rockinchina:{hostname:"rockinchina.com",match:[/^(https?:\/\/)?((www|wiki)\.)?rockinchina\.com/i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:wiki|www)\.rockinchina\.com\/w\/(.*)+$/,"http://www.rockinchina.com/w/$1")},rockipedia:{hostname:"rockipedia.no",match:[/^(https?:\/\/)?(www\.)?rockipedia\.no/i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?rockipedia\.no\/(utgivelser|artister|plateselskap)\/(.+)\/.*$/,"https://www.rockipedia.no/$1/$2/")},rockit:{hostname:"rockit.it",match:[/^(https?:\/\/)?(www\.)?rockit\.it\/(?!recensione)/i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?rockit\.it\/([^#]+)(?:#.*)?$/,"https://www.rockit.it/$1")).replace(/^https:\/\/www\.rockit\.it\/professionista\/([^/]+).*$/,"https://www.rockit.it/professionista/$1")).replace(/^https:\/\/www\.rockit\.it\/(?!professionista)([^/]+)(\/album\/[^/]+\/\d+)?.*$/,"https://www.rockit.it/$1$2"),validate(e,t){switch(t){case c.otherdatabases.artist:return{result:/^https:\/\/www\.rockit\.it\/[^/]+$/.test(e)||/^https:\/\/www\.rockit\.it\/professionista\/[^/]+$/.test(e),target:d.ENTITY};case c.otherdatabases.event:case c.otherdatabases.label:case c.otherdatabases.place:case c.otherdatabases.series:return{result:/^https:\/\/www\.rockit\.it\/[^/]+$/.test(e),target:d.ENTITY};case c.otherdatabases.release_group:return{result:/^https:\/\/www\.rockit\.it\/[^/]+\/album\/[^/]+\/\d+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.URL}}},rockitreview:{hostname:"rockit.it",match:[/^(https?:\/\/)?(www\.)?rockit\.it\/recensione/i],restrict:[c.review],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?rockit\.it\/recensione\/([^#]+)(?:#.*)?$/,"https://www.rockit.it/recensione/$1")},runeberg:{hostname:"runeberg.org",match:[/^(https?:\/\/)?([^/]+\.)?runeberg\.org\//i],restrict:[c.lyrics],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?runeberg\.org\/(.*)$/,"http://runeberg.org/$1"),validate:(e,t)=>/^http:\/\/runeberg\.org\/[\w-/]+\/\d+\.html$/.test(e)?t===c.lyrics.work?{result:!0}:{result:!1,target:d.ENTITY}:{result:!1,target:d.URL}},secondhandsongs:{hostname:"secondhandsongs.com",match:[/^(https?:\/\/)?([^/]+\.)?secondhandsongs\.com\//i],restrict:[c.secondhandsongs],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?secondhandsongs\.com/,"https://secondhandsongs.com")).replace(/^(https:\/\/secondhandsongs\.com\/\w+\/[\d+]+)[/#?-].*$/,"$1"),validate(e,t){const s=/^https:\/\/secondhandsongs\.com\/(\w+)\/[\d+]+$/.exec(e);if(s){const e=s[1];switch(t){case c.secondhandsongs.artist:return{result:"artist"===e,target:d.ENTITY};case c.secondhandsongs.label:return{result:"label"===e,target:d.ENTITY};case c.secondhandsongs.recording:return{result:"performance"===e,target:d.ENTITY};case c.secondhandsongs.release:return{result:"release"===e,target:d.ENTITY};case c.secondhandsongs.work:return{result:"work"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},setlistfm:{hostname:"setlist.fm",match:[/^(https?:\/\/)?([^/]+\.)?setlist\.fm/i],restrict:[c.setlistfm],clean:e=>e.replace(/^http:\/\//,"https://"),validate(e,t){const s=/setlist\.fm\/([a-z]+)\//.exec(e);if(s){const e=s[1];switch(t){case c.setlistfm.artist:return{result:"setlists"===e,target:d.ENTITY};case c.setlistfm.event:return{result:"setlist"===e||"festival"===e,target:d.ENTITY};case c.setlistfm.place:return{result:"venue"===e,target:d.ENTITY};case c.setlistfm.series:return{result:"festivals"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},snac:{hostname:["snaccooperative.org","n2t.net"],match:[/^(https?:\/\/)?([^/]+\.)?snaccooperative\.org\//i,/^(https?:\/\/)?([^/]+\.)?n2t\.net\/ark:\/99166\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:\/+\.)?(?:n2t\.net|snaccooperative\.org)\/(ark:\/99166\/\w+)(?:[./?#].*)?$/,"http://snaccooperative.org/$1"),validate(e,t){switch(t){case c.otherdatabases.artist:case c.otherdatabases.label:case c.otherdatabases.place:return{result:/^http:\/\/snaccooperative\.org\/ark:\/99166\/[a-z0-9]+$/.test(e),target:d.URL}}return{result:!1,target:d.ENTITY}}},songfacts:{hostname:"songfacts.com",match:[/^(https?:\/\/)?([^/]+\.)?songfacts\.com\//i],restrict:[c.songfacts]},songkick:{hostname:"songkick.com",match:[/^(https?:\/\/)?([^/]+\.)?songkick\.com/i],restrict:[c.songkick],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?songkick\.com\//,"https://www.songkick.com/")).replace(/^(https:\/\/www\.songkick\.com\/[a-z]+\/[0-9]+)(?:-[\w-]*)?(\/id\/[0-9]+)?(?:[-/?#].*)?$/,"$1$2"),validate(e,t){const s=/^https:\/\/www\.songkick\.com\/([a-z]+)\/[0-9]+(?:\/(id)\/[0-9]+)?$/.exec(e);if(s){const e=s[1];if("id"===s[2]!=("festivals"===e))return{result:!1,target:d.URL};switch(t){case c.songkick.artist:return{result:"artists"===e,target:d.ENTITY};case c.songkick.event:return{result:"concerts"===e||"festivals"===e,target:d.ENTITY};case c.songkick.place:return{result:"venues"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},soundcloud:{hostname:"soundcloud.com",match:[/^(https?:\/\/)?([^/]+\.)?soundcloud\.com/i],restrict:[c.soundcloud,...x("recording",[c.downloadfree.recording,c.downloadpurchase.recording,c.streamingfree.recording,c.streamingpaid.recording]),...x("release",[c.downloadfree.release,c.downloadpurchase.release,c.streamingfree.release,c.streamingpaid.release])],clean:e=>e=(e=e.replace(/^(https?:\/\/)?((www|m)\.)?soundcloud\.com(\/#!)?/,"https://soundcloud.com")).replace(/^(https:\/\/soundcloud\.com\/)(?!(?:search|tags)[/?#])([^?]+).*$/,"$1$2"),validate:e=>({result:/^https:\/\/soundcloud\.com\/(?!(search|tags)[/?#])/.test(e),target:d.URL})},soundtrackcollector:{hostname:"soundtrackcollector.com",match:[/^(https?:\/\/)?(www\.)?soundtrackcollector\.com/i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?soundtrackcollector\.com\/(composer|title)\/([0-9]+).*$/,"http://soundtrackcollector.com/$1/$2/")).replace(/^(?:https?:\/\/)?(?:www\.)?soundtrackcollector\.com\/.*\?movieid=([0-9]+).*$/,"http://soundtrackcollector.com/title/$1/")).replace(/^(?:https?:\/\/)?(?:www\.)?soundtrackcollector\.com\/.*\?composerid=([0-9]+).*$/,"http://soundtrackcollector.com/composer/$1/"),validate(e,t){const s=/^http:\/\/soundtrackcollector\.com\/([a-z]+)\/[0-9]+\/$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"composer"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"title"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},spotify:{hostname:["spotify.com","spotify.link"],match:[/^(https?:\/\/)?(((?!(?:artists|shop))[^/])+\.)?(spotify\.(?:com|link))\/(?!(?:intl-[a-z]+\/)?user)/i],restrict:[c.podcastfeed,c.streamingfree],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?embed\.spotify\.com\/\?uri=spotify:([a-z]+):([a-zA-Z0-9_-]+)$/,"https://open.spotify.com/$1/$2")).replace(/^(?:https?:\/\/)?(?:play|open)\.spotify\.com\/(?:intl-[a-z]+\/)?([a-z]+)\/([a-zA-Z0-9_-]+)(?:[/?#].*)?$/,"https://open.spotify.com/$1/$2"),validate(e,t){if(/spotify\.link\//i.test(e))return{error:o("This is a redirect link. Please follow {redirect_url|your link}\n             and add the link it redirects to instead.",{redirect_url:{href:e,rel:"noopener noreferrer",target:"_blank"}}),result:!1,target:d.URL};const s=/^https:\/\/open\.spotify\.com\/([a-z]+)\/(?:[a-zA-Z0-9_-]+)$/.exec(e);if(s){const e=s[1];switch(t){case c.podcastfeed.series:return{result:"show"===e,target:d.ENTITY};case c.streamingfree.artist:return{result:"artist"===e,target:d.ENTITY};case c.streamingfree.release:return{result:"album"===e||"episode"===e||"prerelease"===e,target:d.ENTITY};case c.streamingfree.recording:return{result:"track"===e||"episode"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},spotifyshop:{hostname:"shop.spotify.com",match:[/^(https?:\/\/)?shop\.spotify\.com\//i],restrict:[c.downloadpurchase,c.mailorder],clean:e=>e=e.replace(/^(?:https?:\/\/)?shop\.spotify\.com\/([^?#]+)(?:[?#].*)?$/,"https://shop.spotify.com/$1"),validate(e,t){switch(t){case c.downloadpurchase.recording:case c.downloadpurchase.release:case c.mailorder.recording:case c.mailorder.release:return{result:/^https:\/\/shop\.spotify\.com\/[^?#]+$/.test(e),target:d.URL}}return{result:!1,target:d.ENTITY}}},spotifysongwriter:{hostname:"artists.spotify.com",match:[/^(https?:\/\/)?artists\.spotify\.com\//i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?artists\.spotify\.com\/songwriter\/(\w+).*$/,"https://artists.spotify.com/songwriter/$1"),validate:(e,t)=>t===c.otherdatabases.artist?{result:/^https:\/\/artists\.spotify\.com\/songwriter\/\w+$/.test(e),target:d.URL}:{result:!1,target:d.ENTITY}},spotifyuseraccount:{hostname:"spotify.com",match:[/^(https?:\/\/)?([^/]+\.)?(spotify\.com)\/(?:intl-[a-z]+\/)?user/i],restrict:[c.socialnetwork],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:play|open)\.spotify\.com\/(?:intl-[a-z]+\/)?user\/([^/?#]+)\/?(?:[?#].*)?$/,"https://open.spotify.com/user/$1"),validate:e=>({result:/^https:\/\/open\.spotify\.com\/user\/[^/?#]+$/.test(e),target:d.URL})},steamdb:{hostname:"steamdb.info",match:[/^(https?:\/\/)?(www\.)?steamdb\.info\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?steamdb\.info\/app\/(\d+).*$/,"https://steamdb.info/app/$1/"),validate:(e,t)=>t===c.otherdatabases.release?{result:/^https:\/\/steamdb\.info\/app\/\d+\/$/.test(e),target:d.URL}:{result:!1,target:d.ENTITY}},"stereo-ve-mono":{hostname:"stereo-ve-mono.com",match:[/^(https:\/\/)?(www\.)?stereo-ve-mono\.com\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^https?:\/\/(www\.)?/,"https://").replace(/\/discography(?:.*?)(?:[?&](artist=[^&#]*))?(?:&.*)?$/,"/discography?$1"),validate(e,t){switch(t){case c.otherdatabases.artist:return{result:/\/discography\?artist=[^&#]+$/.test(e),target:d.ENTITY};case c.otherdatabases.release_group:return{result:/\/[0-9]+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}},target:{hostname:"target.com",match:[/^(https?:\/\/)?((intl|www)\.)?target\.com\/(b|p)/i],restrict:[c.mailorder],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:intl\.|www\.)?target\.com\//,"https://www.target.com/")).replace(/^(https:\/\/www\.target\.com)\/(b|p)\/(?:.*\/)?([AN]-[^/?#]+).*$/,"$1/$2/-/$3"),validate(e,t){const s=/^https:\/\/www\.target\.com\/(b|p)\/-\/[AN]-\w+$/.exec(e);if(s){const e=s[1];switch(t){case c.mailorder.label:return{result:"b"===e,target:d.ENTITY};case c.mailorder.release:return{result:"p"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},thbwiki:{hostname:"thwiki.cc",match:[/^(https?:\/\/)?(www\.)?thwiki\.cc/i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=e.replace(/^(https?:\/\/)?(www\.)?thwiki\.cc\/$/,"https://thwiki.cc/")).replace(/^https:\/\/thwiki\.cc\/([^#]+)(?:[#].*)?$/,"https://thwiki.cc/$1")).replace(/^https:\/\/thwiki\.cc\/index\.php\?title=([^&]+).*/,"https://thwiki.cc/$1")},thesession:{hostname:"thesession.org",match:[/^(https?:\/\/)?(www\.)?thesession\.org/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?thesession\.org\/(tunes(?:\/composers)?|events|recordings(?:\/artists)?|sessions)(?:\/.*)?\/([0-9]+).*$/,"https://thesession.org/$1/$2"),validate(e,t){const s=/^https:\/\/thesession\.org\/([a-z/]+)\/[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"recordings/artists"===e||"tunes/composers"===e,target:d.ENTITY};case c.otherdatabases.event:return{result:"events"===e,target:d.ENTITY};case c.otherdatabases.place:return{result:"sessions"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"recordings"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"tunes"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},threads:{hostname:["threads.com","threads.net"],match:[/^(?:https?:\/\/)?(?:[^/]+\.)?threads\.(?:com|net)\//i],restrict:[{...c.streamingfree,...c.socialnetwork}],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?threads\.(?:com|net)(?:\/#!)?\/([^#?]+).*$/,"https://www.threads.com/$1")).replace(/^https:\/\/www\.threads\.(?:com|net)\/@[^/]+\/post\/([^/]+)/,"https://www.threads.com/t/$1"),validate(e,t){const s=/^https:\/\/www\.threads\.com\/@[^/]+$/.test(e),i=/^https:\/\/www\.threads\.com\/t\/[^/]+$/.test(e);return Object.values(c.streamingfree).includes(t)?{result:i&&t===c.streamingfree.recording,target:d.ENTITY}:i?{error:l("Please link to Threads profiles, not threads."),result:!1,target:d.ENTITY}:{result:s,target:d.URL}}},ticketmaster:{hostname:"ticketmaster.*",match:[/^(https?:\/\/)?(www\.)?ticketmaster\.(?:[a-z]{2,3}?\.)?[a-z]{2,4}/i],restrict:[c.ticketing],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?ticketmaster\.fr\/(?:[\w-]+\/)?(manifestation|salle)\/(?:[\w-]+\/)?(idmanif|idsite)\/([\w-]+).*$/,"https://www.ticketmaster.fr/$1/$2/$3")).replace(/^(?:https?:\/\/)?(?:www\.)?ticketmaster\.((?:[a-z]{2,3}?\.)?[a-z]{2,4})\/(?:[\w-]+\/)?(artist|event|venue)\/(?:[\w-]+\/)?([\w-]+).*$/,"https://www.ticketmaster.$1/$2/$3"),validate(e,t){const s=/^https:\/\/www\.ticketmaster\.(?:[a-z]{2,3}?\.)?[a-z]{2,4}\/(artist|event|manifestation\/idmanif|salle\/idsite|venue)\/[\w-]+$/.exec(e);if(s){const e=s[1];switch(t){case c.ticketing.artist:return"artist"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.ticketing.event:return"event"===e||"manifestation/idmanif"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.ticketing.place:return"venue"===e||"salle/idsite"===e?{result:!0}:{result:!1,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},tidal:{hostname:"tidal.com",match:[/^(https?:\/\/)?(([^/]+\.)*(desktop|listen|stage|www)\.)?tidal\.com\/.*(album|artist|track|video)\//i],restrict:[c.streamingpaid],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:(?:[^/]+\.)*(?:desktop|listen|stage|www)\.)?tidal\.com\/(?:#!\/)?([\w/]+).*$/,"https://tidal.com/$1")).replace(/^https:\/\/tidal\.com\/(?:[a-z]{2}\/)?(?:browse\/|store\/)?(?:[a-z]+\/\d+\/)?([a-z]+)\/(\d+)(?:\/[\w]*)?$/,"https://tidal.com/$1/$2"),validate(e,t){const s=/^https:\/\/tidal\.com\/([a-z]+)\/\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.streamingpaid.artist:return"artist"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.streamingpaid.release:return"album"===e||"video"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.streamingpaid.recording:return"track"===e||"video"===e?{result:!0}:{result:!1,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},tidalstore:{hostname:"store.tidal.com",match:[/^(https?:\/\/)?store\.tidal\.com\/(?:[a-z]{2}\/)?(album|artist)\//i],restrict:[c.downloadpurchase],clean:e=>e.replace(/^(?:https?:\/\/)?store\.tidal\.com\/(?:[a-z]{2}\/)?/,"https://store.tidal.com/"),validate(e,t){const s=/^https:\/\/store\.tidal\.com\/([a-z]+)\/\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:return"artist"===e?{result:!0}:{result:!1,target:d.ENTITY};case c.downloadpurchase.release:return"album"===e?{result:!0}:{result:!1,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},tiktok:{hostname:"tiktok.com",match:[/^(https?:\/\/)?(www\.)?tiktok\.com/i],restrict:[{...c.streamingfree,...c.socialnetwork}],clean:e=>e.replace(/^(?:https?:\/\/)(?:www\.)?tiktok\.com\/@([\w.]+(?:\/video\/\d+)?)(?:[/?#].*)?$/,"https://www.tiktok.com/@$1"),validate(e,t){const s=/^https:\/\/www\.tiktok\.com\/@[\w.]+(\/video\/\d+)?$/.exec(e);if(s){const e=null!=s[1];if(Object.values(c.streamingfree).includes(t))return{result:e&&t===c.streamingfree.recording,target:d.ENTITY};if(e)return{error:l("Please link to TikTok profiles, not videos."),result:!1,target:d.ENTITY};switch(t){case c.socialnetwork.artist:case c.socialnetwork.label:case c.socialnetwork.place:case c.socialnetwork.series:return{result:!0}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},tipeee:{hostname:"tipeee.com",match:[/^(https?:\/\/)?(?:[^/]+\.)?tipeee\.com\/[^/?#]/i],restrict:[c.patronage],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?tipeee\.com\/([^/?#]+).*$/,"https://www.tipeee.com/$1")},tmdb:{hostname:"themoviedb.org",match:[/^(https?:\/\/)?(www\.)?themoviedb\.org/i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?themoviedb\.org\/person\/([0-9]*)(?:[^0-9].*)?$/,"https://www.themoviedb.org/person/$1"),validate:(e,t)=>/^https:\/\/www\.themoviedb\.org\/person\/[0-9]*$/.exec(e)?t===c.otherdatabases.artist?{result:!0}:{result:!1,target:d.RELATIONSHIP}:{result:!1,target:d.URL}},tobarandualchais:{hostname:"tobarandualchais.co.uk",match:[/^(https?:\/\/)?([^/]+\.)?tobarandualchais\.co\.uk/i],restrict:[{artist:c.otherdatabases.artist},{recording:[c.otherdatabases.recording,c.streamingfree.recording]}],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?tobarandualchais\.co\.uk\/(person|track)\/([^/?#]+).*$/,"https://www.tobarandualchais.co.uk/$1/$2"),validate(e,t){const s=/^https:\/\/www\.tobarandualchais\.co\.uk\/(person|track)\/\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"person"===e,target:d.ENTITY};case c.otherdatabases.recording:case c.streamingfree.recording:return{result:"track"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},tower:{hostname:"tower.jp",match:[/^(https?:\/\/)?(www\.)?tower\.jp/i],restrict:[c.mailorder],clean:e=>e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?tower\.jp\/(artist|item)\/(\d+)(?:\/.*)?$/,"https://tower.jp/$1/$2")).replace(/^(?:https?:\/\/)?(?:[^/]+\.)?tower\.jp\/artist\/discography\/(\d+)(?:\/.*)?$/,"https://tower.jp/artist/$1")).replace(/^(?:https?:\/\/)?(?:[^/]+\.)?tower\.jp\/ec\/collection\/item\/summary\/(\d+)(?:\/.*)?$/,"https://tower.jp/item/$1"),validate(e,t){const s=/^https:\/\/tower\.jp\/(artist|item)\/\d+$/.exec(e);if(s){const e=s[1];switch(t){case c.mailorder.artist:return{result:"artist"===e,target:d.ENTITY};case c.mailorder.release:return{result:"item"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},traxsource:{hostname:"traxsource.com",match:[/^(https?:\/\/)?(www\.)?traxsource\.com/i],restrict:[c.downloadpurchase],clean:e=>e=e.replace(/^(?:https?:\/\/)(?:www\.)?traxsource\.com\/([a-z]+)\/([0-9]+).*$/,"https://www.traxsource.com/$1/$2"),validate(e,t){const s=/^https:\/\/www\.traxsource\.com\/([a-z]+)\/[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.artist:return{result:"artist"===e,target:d.ENTITY};case c.downloadpurchase.label:return{result:"label"===e,target:d.ENTITY};case c.downloadpurchase.recording:return{result:"track"===e,target:d.ENTITY};case c.downloadpurchase.release:return{result:"title"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},triplejunearthed:{hostname:["abc.net.au","triplejunearthed.com"],match:[/^(https?:\/\/)?(www\.)?abc\.net\.au\/triplejunearthed/i,/^(https?:\/\/)?(www\.)?triplejunearthed\.com/i],restrict:[c.otherdatabases],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?triplejunearthed\.com\//,"https://www.abc.net.au/triplejunearthed/")).replace(/^(?:https?:\/\/)?(?:www\.)?abc\.net\.au\/triplejunearthed\//,"https://www.abc.net.au/triplejunearthed/")},trove:{hostname:"nla.gov.au",match:[/^(https?:\/\/)?(www\.)?(trove\.)?nla\.gov\.au\//i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=e.replace(/^(?:https?:\/\/)?trove\.nla\.gov\.au\/work\/([^/?#]+).*$/,"https://trove.nla.gov.au/work/$1")).replace(/^(?:https?:\/\/)?trove\.nla\.gov\.au\/people\/([^/?#]+).*$/,"https://nla.gov.au/nla.party-$1")).replace(/^(?:https?:\/\/)?nla\.gov\.au\/(nla\.party-|anbd\.bib-an)([^/?#]+).*$/,"https://nla.gov.au/$1$2")},tsutaya:{hostname:"shop.tsutaya.co.jp",match:[/^(https?:\/\/)?shop\.tsutaya\.co\.jp\//i],restrict:[c.mailorder],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?shop\.tsutaya\.co\.jp\/cd\/product\/(\d+).*$/,"https://shop.tsutaya.co.jp/cd/product/$1/")).replace(/^(?:https?:\/\/)?shop\.tsutaya\.co\.jp\/dir_result\.html\?searchType=3&artistCd=(\d+).*$/,"https://shop.tsutaya.co.jp/dir_result.html?searchType=3&artistCd=$1"),validate(e,t){const s=/^https:\/\/shop\.tsutaya\.co.jp\/(?:(cd)\/product\/\d+\/|(dir_result)\.html\?searchType=3&artistCd=\d+)$/.exec(e);if(s){const e=s[1]||s[2];switch(t){case c.mailorder.artist:return{result:"dir_result"===e,target:d.ENTITY};case c.mailorder.release:return{result:"cd"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},twitch:{hostname:["twitch.tv","twitch.com"],match:[/^(https?:\/\/)?([^/]+\.)?twitch\.(?:com|tv)\//i],restrict:[{...c.streamingfree,...c.videochannel}],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:(?:m|www)\.)?twitch\.(?:com|tv)\/((?:videos\/)?[^/?#]+).*$/,"https://www.twitch.tv/$1"),validate(e,t){const s=/^https:\/\/www\.twitch\.tv\/(?:(videos\/)?[^/?#]+)$/.exec(e);if(s){const e=s[1];return Object.values(c.videochannel).includes(t)?"videos/"===e?{error:m(),result:!1,target:d.ENTITY}:{result:void 0===e}:"videos/"===e?{result:!0}:{error:f(),result:!0,target:d.ENTITY}}return{result:!1,target:d.URL}}},twitter:{hostname:["twitter.com","x.com"],match:[/^(https?:\/\/)?([^/]+\.)?(twitter|x)\.com\//i],restrict:[{...c.streamingfree,...c.socialnetwork}],clean:e=>(e=(e=e.replace(/^(?:https?:\/\/)?(?:(?:www|mobile)\.)?(?:twitter|x)\.com(?:\/#!)?\//,"https://twitter.com/")).replace(/^https:\/\/twitter\.com\/intent\/user\/?\?screen_name=([^/?#]+)/,"https://twitter.com/$1"),/twitter\.com\/i\/user/i.test(e)?e:e=e.replace(/^https:\/\/twitter\.com\/@?([^/?#]+(?:\/status\/\d+)?)(?:[/?#].*)?$/,"https://twitter.com/$1")),validate(e,t){if(/twitter\.com\/i\/user/i.test(e))return{error:o("This is a redirect link. Please follow {redirect_url|your link}\n             and add the link it redirects to instead.",{redirect_url:{href:e,rel:"noopener noreferrer",target:"_blank"}}),result:!1,target:d.URL};const s=/^https:\/\/twitter\.com\/([^/?#]+)(\/status\/\d+)?$/.exec(e);if(s){const e=s[1];if(["privacy","rules","tos"].includes(e))return{error:l("This is not a profile, but a Twitter documentation page."),result:!1};const i=null!=s[2];return Object.values(c.streamingfree).includes(t)?{result:i&&t===c.streamingfree.recording,target:d.ENTITY}:i?{error:l("Please link to Twitter profiles, not tweets."),result:!1,target:d.ENTITY}:{result:!0}}return{result:!1,target:d.URL}}},unwelcomeimages:{hostname:"i.discogs.com",match:[/^(https?:\/\/)?i\.discogs\.com\//i],restrict:[c.image],validate:()=>({error:l("This site does not allow direct links to their images."),result:!1,target:d.URL})},utaitedbvocadbtouhoudb:{hostname:["utaitedb.net","vocadb.net","touhoudb.com"],match:[/^(https?:\/\/)?(www\.)?((utaite|voca)db\.net|touhoudb\.com)/i],restrict:[c.otherdatabases],clean:e=>(e=(e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?(utaite|voca|touhou)db(\.net|\.com)\/((?:[A-Za-z]+\/){1,2}0*[1-9][0-9]*)(?:[/?#].*)?$/,"https://$1db$2/$3")).replace(/Artist\/(Details|Edit|Versions)/,"Ar")).replace(/Album\/(Details|DownloadTags|Edit|Related|Versions)/,"Al")).replace(/Event\/(Details|Edit|Versions)/,"E")).replace(/Event\/SeriesDetails/,"Es")).replace(/Song\/(Details|Edit|Related|Versions)/,"S"),validate(e,t){const s=/^https:\/\/(?:(?:utaite|voca)db\.net|touhoudb\.com)\/([A-Za-z]+(?:\/[A-Za-z]+)?)\/[1-9][0-9]*$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:case c.otherdatabases.label:return{result:"Ar"===e,target:d.ENTITY};case c.otherdatabases.event:return{result:"E"===e,target:d.ENTITY};case c.otherdatabases.recording:case c.otherdatabases.work:return{result:"S"===e,target:d.ENTITY};case c.otherdatabases.release_group:return{result:"Al"===e,target:d.ENTITY};case c.otherdatabases.series:return{result:"Es"===e,target:d.ENTITY};case c.otherdatabases.genre:return{result:"T"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},utanet:{hostname:"uta-net.com",match:[/^(https?:\/\/)?([^/]+\.)?uta-net\.com\//i],restrict:[c.lyrics],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?uta-net\.com\/(artist|composer|lyricist|song)\/(\d+).*$/,"https://www.uta-net.com/$1/$2/"),validate(e,t){const s=/^https:\/\/www\.uta-net\.com\/(artist|composer|lyricist|song)\/\d+\/$/.exec(e);if(s){const e=s[1];switch(t){case c.lyrics.artist:return{result:/^(artist|composer|lyricist)$/.test(e),target:d.ENTITY};case c.lyrics.work:return{result:"song"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},utaten:{hostname:"utaten.com",match:[/^(https?:\/\/)?([^/]+\.)?utaten\.com\//i],restrict:[c.lyrics],clean:e=>e.replace(/^(?:https?:\/\/)?utaten\.com\/(artist|songWriter|lyric\/.+)\/([^/?#]+).*$/,"https://utaten.com/$1/$2"),validate(e,t){const s=/^https:\/\/utaten\.com\/(artist|songWriter|lyric)\/.+$/.exec(e);if(s){const e=s[1];switch(t){case c.lyrics.artist:return{result:"artist"===e||"songWriter"===e,target:d.ENTITY};case c.lyrics.work:return{result:"lyric"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},vgmdb:{hostname:["vgmdb.net","vgmdb.com"],match:[/^(https?:\/\/)?vgmdb\.(net|com)\//i],restrict:[c.vgmdb],clean:e=>e.replace(/^(?:https?:\/\/)?vgmdb\.(?:net|com)\/(album|artist|event|org|product)\/([0-9]+).*$/,"https://vgmdb.net/$1/$2"),validate(e,t){const s=/^https:\/\/vgmdb\.net\/(album|artist|org|event|product)\/[1-9][0-9]*$/.exec(e);if(s){const e=s[1];switch(t){case c.vgmdb.artist:return{result:"artist"===e||"org"===e,target:d.ENTITY};case c.vgmdb.event:return{result:"event"===e,target:d.ENTITY};case c.vgmdb.label:return{result:"org"===e,target:d.ENTITY};case c.vgmdb.place:return{result:"artist"===e,target:d.ENTITY};case c.vgmdb.release:return{result:"album"===e,target:d.ENTITY};case c.vgmdb.work:return{result:"product"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},viaf:{hostname:"viaf.org",match:[/^(https?:\/\/)?([^/]+\.)?viaf\.org/i],restrict:[c.viaf],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?viaf\.org\/(?:[a-z]{2}\/)?viaf\/([0-9]+).*$/,"http://viaf.org/viaf/$1"),validate:e=>({result:/^http:\/\/viaf\.org\/viaf\/[1-9][0-9]*$/.test(e),target:d.URL})},vibe:{hostname:["vibe.naver.com","music.naver.com"],match:[/^(https?:\/\/)?vibe\.naver\.com\//i,/^(https?:\/\/)?music\.naver\.com\//i],restrict:[A(c.downloadpurchase,c.streamingpaid),c.streamingpaid],select(e,t){const s=/^https:\/\/vibe\.naver\.com\/(album|artist|track|video)/.exec(e);if(s){switch(s[1]){case"album":if("release"===t)return[c.downloadpurchase.release,c.streamingpaid.release];break;case"artist":if("artist"===t)return[c.downloadpurchase.artist,c.streamingpaid.artist];break;case"track":if("recording"===t)return[c.downloadpurchase.recording,c.streamingpaid.recording];break;default:if("release"===t)return c.streamingpaid.release;if("recording"===t)return c.streamingpaid.recording}}return!1},clean:e=>e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?music\.naver\.com\/album\/index\.nhn\?albumId=(\d+).*$/,"https://vibe.naver.com/album/$1")).replace(/^(?:https?:\/\/)?music\.naver\.com\/artist\/(?:\w+)\.nhn\?artistId=(\d+).*$/,"https://vibe.naver.com/artist/$1")).replace(/^(?:https?:\/\/)?music\.naver\.com\/video\/(?:\w+)\.nhn\?videoId=(\d+).*$/,"https://vibe.naver.com/video/$1")).replace(/^(?:https?:\/\/)?vibe\.naver\.com\/(album|artist|track|video)\/(\d+).*$/,"https://vibe.naver.com/$1/$2"),validate(e,t){if(/https:\/\/vibe\.naver\.com\/search/.test(e))return{error:g(),result:!1,target:d.URL};const s=/^https?:\/\/vibe\.naver\.com\/(album|artist|track|video)\/(\d+)/.exec(e);if(s){const e=s[1];switch(t){case c.downloadpurchase.release:case c.streamingpaid.release:return{result:"album"===e||"video"===e,target:d.ENTITY};case c.downloadpurchase.artist:case c.streamingpaid.artist:return{result:"artist"===e,target:d.ENTITY};case c.downloadpurchase.recording:case c.streamingpaid.recording:return{result:"track"===e||"video"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},vimeo:{hostname:"vimeo.com",match:[/^(https?:\/\/)?([^/]+\.)?vimeo\.com\/(?!(?:ondemand|store\/ondemand))/i],restrict:[{...c.streamingfree,...c.videochannel}],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?vimeo\.com/,"https://vimeo.com")).replace(/\?.*/,"")},vimeoondemand:{hostname:"vimeo.com",match:[/^(https?:\/\/)?([^/]+\.)?vimeo\.com\/(?:ondemand|store\/ondemand)/i],restrict:[c.downloadpurchase,c.streamingpaid,A(c.downloadpurchase,c.streamingpaid)],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?vimeo\.com\/ondemand\/([^/?#]+)(?:.*)$/,"https://vimeo.com/ondemand/$1"),validate(e,t){if(/vimeo\.com\/store\/ondemand/.test(e))return{error:o("Please link to the “{allowed_url_pattern}” page\n             rather than this “{current_url_pattern}” link.",{allowed_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/ondemand"}),current_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/store/ondemand"})}),result:!1,target:d.URL};switch(t){case c.downloadpurchase.recording:case c.downloadpurchase.release:case c.streamingpaid.recording:case c.streamingpaid.release:return{result:/^https:\/\/vimeo\.com\/ondemand\/([^/?#]+)*$/.test(e),target:d.URL}}return{result:!1,target:d.ENTITY}}},vine:{hostname:"vine.co",match:[/^(https?:\/\/)?([^/]+\.)?vine\.co\//i],restrict:[c.socialnetwork]},vk:{hostname:"vk.com",match:[/^(https?:\/\/)?([^/]+\.)?vk\.com\/(?!(?:artist|audio|music|video))/i],restrict:[c.socialnetwork],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?vk\.com/,"https://vk.com")},vkgy:{hostname:"vk.gy",match:[/^(https?:\/\/)?(www\.)?vk\.gy/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?vk\.gy\/(.*)$/,"https://vk.gy/$1"),validate(e,t){const s=/^https:\/\/vk\.gy\/(\w+)\/((?:[\w-]+\/){0,2}[\w-]+)\/$/.exec(e);if(s){const e=s[1],i=s[2];switch(t){case c.otherdatabases.artist:return{result:"artists"===e&&/^[\w-]+$/.test(i)||"musicians"===e&&/^[\d]+\/[\w-]+$/.test(i),target:d.ENTITY};case c.otherdatabases.event:return{result:"lives"===e&&/^[\d]+\/[\w-]+$/.test(i),target:d.ENTITY};case c.otherdatabases.label:return{result:"labels"===e&&/^[\w-]+$/.test(i),target:d.ENTITY};case c.otherdatabases.place:return{result:"livehouses"===e&&/^[\w-]+$/.test(i),target:d.ENTITY};case c.otherdatabases.release:return{result:"releases"===e&&/^[\w-]+\/[\d]+\/[\w-]+$/.test(i),target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},vkmusic:{hostname:"vk.com",match:[/^(https?:\/\/)?([^/]+\.)?vk\.com\/(?:artist|audio|music|video)/i],restrict:[c.streamingfree],clean:e=>e=(e=(e=(e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?vk\.com/,"https://vk.com")).replace(/([&?])(?:from|ref)=[^?&]*/g,"$1")).replace(/([&?])&+/,"$1")).replace(/[&?]$/,"")).replace(/^https:\/\/vk\.com\/(?:artist\/\w+\?z|audio\?act)=audio_playlist-(\d+_\d+).*$/,"https://vk.com/music/album/-$1")).replace(/^https:\/\/vk\.com\/artist\/\w+\?z=video-(\d+_\d+).*$/,"https://vk.com/video-$1")).replace(/^https:\/\/vk\.com\/((?:audio|video|music\/album\/)-\d+_\d+).*$/,"https://vk.com/$1"),validate(e,t){const s=/^https:\/\/vk\.com\/(?:(artist)\/\w+|(audio|video)-\d+_\d+|(music\/album)\/-\d+_\d+)$/.exec(e);if(s){const e=s[1]||s[2]||s[3];switch(t){case c.streamingfree.artist:return{result:"artist"===e,target:d.ENTITY};case c.streamingfree.recording:return{result:"audio"===e||"video"===e,target:d.ENTITY};case c.streamingfree.release:return{result:"music/album"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},vndb:{hostname:"vndb.org",match:[/^(https?:\/\/)?(www\.)?vndb\.org\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)(?:www\.)?vndb\.org\/((?:c|p|s)[0-9]+).*$/,"https://vndb.org/$1"),validate(e,t){const s=/^https:\/\/vndb\.org\/(c|p|s)[0-9]+$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:return{result:"c"===e||"s"===e,target:d.ENTITY};case c.otherdatabases.label:return{result:"p"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},weibo:{hostname:"weibo.com",match:[/^(https?:\/\/)?([^/]+\.)?weibo\.com\//i],restrict:[c.socialnetwork],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?weibo\.com\/(u\/)?([^/?#]+)(?:.*)$/,"https://www.weibo.com/$1$2")},whosampled:{hostname:"whosampled.com",match:[/^(https?:\/\/)?(www\.)?whosampled\.com/i],restrict:[c.otherdatabases],clean:e=>e.replace(/^(?:https?:\/\/)?(?:www\.)?whosampled\.com\/(.+)$/,"https://www.whosampled.com/$1"),validate(e,t){if(/[?#]/.test(e))return{error:l("There is an unencoded “?” or “#” character in this URL.\n             Please check whether it is useless and should be removed,\n             or whether it is an error and the URL is misencoded."),result:!1,target:d.URL};const s=/^https:\/\/www\.whosampled\.com(\/[^?#]+)$/.exec(e);if(s){const e=s[1],i=/^\/([^/]+)/.exec(e);if(i){const s=i[1];switch(s){case"cover":case"remix":case"sample":return{error:o("Please do not link directly to WhoSampled\n                   “{unwanted_url_pattern}” pages.\n                   Link to the appropriate WhoSampled artist, track\n                   or album page instead.",{unwanted_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/"+s})}),result:!1,target:d.URL};case"album":return t===c.otherdatabases.release_group?{result:!0}:{error:o("Please link WhoSampled “{album_url_pattern}” pages to\n                   release groups.",{album_url_pattern:(0,n.jsx)("span",{className:"url-quote",children:"/album"})}),result:!1,target:d.ENTITY};default:if(/^\/[^/]+(?:\/)?$/.test(e))return t===c.otherdatabases.artist?{result:!0}:{error:l("Please link WhoSampled artist pages to artists."),result:!1,target:d.ENTITY};if(/^\/[^/]+\/[^/]+(?:\/)?$/.test(e))return t===c.otherdatabases.recording?{result:!0}:{error:l("Please link WhoSampled track pages to recordings."),result:!1,target:d.ENTITY}}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},wikidata:{hostname:"wikidata.org",match:[/^(https?:\/\/)?([^/]+\.)?wikidata\.org/i],restrict:[c.wikidata],clean:e=>e.replace(/^(?:https?:\/\/)?(?:[^/]+\.)?wikidata\.org\/(?:wiki(?:\/Special:EntityPage)?|entity)\/(Q([0-9]+)).*$/,"https://www.wikidata.org/wiki/$1"),validate:e=>({result:/^https:\/\/www\.wikidata\.org\/wiki\/Q[1-9][0-9]*$/.test(e),target:d.URL})},wikimediacommons:{hostname:"wikimedia.org",match:[/^(https?:\/\/)?(commons\.(?:m\.)?wikimedia\.org|upload\.wikimedia\.org\/wikipedia\/commons\/)/i],restrict:[{...c.score,...c.image}],clean:e=>(e=h(e=(e=(e=(e=e.replace(/\/wiki\/[^#]+#(?:mediaviewer|\/media)\/(.*)/,"/wiki/$1")).replace(/^https?:\/\/upload\.wikimedia\.org\/wikipedia\/commons\/(?:thumb\/)?[0-9a-z]\/[0-9a-z]{2}\/([^/]+)(\/[^/]+)?$/,"https://commons.wikimedia.org/wiki/File:$1")).replace(/\?uselang=[a-z-]+$/,"")).replace(/#.*$/,""))).replace(/^https?:\/\/commons\.(?:m\.)?wikimedia\.org\/wiki\/(?:File|Image):/,"https://commons.wikimedia.org/wiki/File:"),validate:e=>({result:/^https:\/\/commons\.wikimedia\.org\/wiki\/File:[^?#]+$/.test(e),target:d.URL})},wikipedia:{hostname:["wikipedia.*","secure.wikimedia.*"],match:[/^(https?:\/\/)?(([^/]+\.)?wikipedia|secure\.wikimedia)\./i],restrict:[c.wikipedia],clean:e=>e=h(e=(e=(e=(e=(e=e.replace(/^https:\/\/secure\.wikimedia\.org\/wikipedia\/([a-z-]+)\/wiki\/(.*)/,"https://$1.wikipedia.org/wiki/$2")).replace(/^http:\/\/wikipedia\.org\/(.+)$/,"https://en.wikipedia.org/$1")).replace(/\.wikipedia\.org\/w\/index\.php\?title=([^&]+).*/,".wikipedia.org/wiki/$1")).replace(/\?oldformat=true$/,"")).replace(/^(?:https?:\/\/)?([a-z-]+)(?:\.m)?\.wikipedia\.org\/[a-z-]+\/([^?]+)$/,"https://$1.wikipedia.org/wiki/$2")),validate:(e,t)=>/^(https?:\/\/)?([^./]+\.)?wikipedia\.org\/.*#/.test(e)?{error:o("Links to specific sections of Wikipedia articles are not\n             allowed. Please remove “{fragment}” if still appropriate.\n             See the {url|guidelines}.",{fragment:(0,n.jsx)("span",{className:"url-quote",children:e.replace(/^(?:https?:\/\/)?(?:[^./]+\.)?wikipedia\.org\/[^#]*#(.*)$/,"#$1")}),url:{href:"/relationship/"+t,target:"_blank"}}),result:!1,target:d.URL}:/^(https?:\/\/)?([^./]+\.)?wikipedia\.org\/wiki\/User:.*/.test(e)?{error:l("Links to Wikipedia user pages are not allowed. Please link only\n             to actual Wikipedia articles."),result:!1,target:d.URL}:{result:/^https:\/\/[a-z]+\.wikipedia\.org\/wiki\//.test(e),target:d.URL}},wikisource:{hostname:"wikisource.org",match:[/^(https?:\/\/)?([^/]+\.)?wikisource\.org/i],restrict:[c.lyrics],clean:e=>e=h(e=e.replace(/^http:\/\/([a-z-]+\.)?wikisource\.org/,"https://$1wikisource.org")),validate:e=>({result:/^https:\/\/(?:[a-z-]+\.)?wikisource\.org\/wiki\//.test(e),target:d.URL})},worldcat:{hostname:["oclc.org","worldcat.org"],match:[/^(https?:\/\/)?(?:entities|id)\.oclc\.org\/worldcat\//i,/^(https?:\/\/)?(www\.)?worldcat\.org\//i],restrict:[c.otherdatabases],clean:e=>e=(e=(e=(e=e.replace(/^(?:https?:\/\/)?(?:entities|id)\.oclc\.org\/(worldcat\/entity\/[^./?&#]+).*$/,"https://id.oclc.org/$1")).replace(/^(?:https?:\/\/)?(?:www\.)?worldcat\.org/,"https://www.worldcat.org")).replace(/^https:\/\/www\.worldcat\.org(?:\/title\/[a-zA-Z0-9_-]+)?\/oclc\/([^&?]+)(?:.*)$/,"https://www.worldcat.org/oclc/$1")).replace(/^https:\/\/www\.worldcat\.org\/(?:wc)?identities\/([^&?/]+)(?:.*)$/,"https://www.worldcat.org/identities/$1/")},yandex:{hostname:"music.yandex.*",match:[/^(https?:\/\/)?music\.yandex\.(?:com|by|kz|ru|uz)\/(?!video)/i],restrict:[c.streamingfree],clean:e=>e=(e=(e=(e=e.replace(/^https?:\/\/music\.yandex\.(?:com|by|kz|ru|uz)\//,"https://music.yandex.com/")).replace(/^https:\/\/music\.yandex\.com\/(?:#!\/)?(album|artist|label)\/(\d+)(\/track\/\d+)?$/,"https://music.yandex.com/$1/$2$3")).replace(/^https:\/\/music\.yandex\.com\/iframe\/#album?\/(\d+)$/,"https://music.yandex.com/album/$1")).replace(/^https:\/\/music\.yandex\.com\/iframe\/#track?\/(\d+):(\d+)$/,"https://music.yandex.com/album/$2/track/$1"),validate(e,t){const s=/^https:\/\/music\.yandex\.com\/(album|artist|label)\/\d+(\/track\/\d+)?$/.exec(e);if(s){const e=s[1],i=Boolean(s[2]);switch(t){case c.streamingfree.artist:return{result:"artist"===e,target:d.ENTITY};case c.streamingfree.label:return{result:"label"===e,target:d.ENTITY};case c.streamingfree.release:return{result:"album"===e&&!i,target:d.ENTITY};case c.streamingfree.recording:return{result:"album"===e&&i,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},yesasia:{hostname:"yesasia.com",match:[/^(https?:\/\/)?(www\.)?yesasia\.com\//i],restrict:[c.mailorder],clean:e=>e=(e=e.replace(/^(?:https?:\/\/)?(?:www\.)?yesasia\.com\//,"https://www.yesasia.com/")).replace(/^(https:\/\/www\.yesasia\.com)\/(?:[^/]*\/)*([\w.-]+)(?:en|ja|zh_CN|zh_TW)\/((?:info|list).html)(?:#.*)?$/,"$1/$2en/$3"),validate(e,t){const s=/^https:\/\/www\.yesasia\.com\/(?:[\w.-]+)en\/(info|list).html$/.exec(e);if(s){const e=s[1];switch(t){case c.mailorder.artist:return{result:"list"===e,target:d.ENTITY};case c.mailorder.release:return{result:"info"===e,target:d.ENTITY}}return{result:!1,target:d.ENTITY}}return{result:!1,target:d.URL}}},youtube:{hostname:["youtube.com","youtu.be"],match:[/^(https?:\/\/)?(((?!music)[^/])+\.)?(youtube\.com\/|youtu\.be\/)/i],restrict:[{...c.streamingfree,...c.youtube}],clean:e=>e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/^(https?:\/\/)?([^/]+\.)?youtube\.com(?:\/#)?/,"https://www.youtube.com")).replace(/^https:\/\/www\.youtube\.com\/c\//,"https://www.youtube.com/")).replace(/\/(channel|user)\/([^/?#]+).*$/,"/$1/$2")).replace(/^https:\/\/www\.youtube\.com\/([a-zA-Z0-9_-]+)\/(?:about|channels|community|featured|playlists|videos)(?:[/?&#].*)?$/,"https://www.youtube.com/$1")).replace(/^https:\/\/www\.youtube\.com\/(@[a-zA-Z0-9_.-]{3,30}).*$/,"https://www.youtube.com/$1")).replace(/^(?:https?:\/\/)?(?:[^/]+\.)?youtu\.be\/([a-zA-Z0-9_-]+).*$/,"https://www.youtube.com/watch?v=$1")).replace(/^https:\/\/www\.youtube\.com\/.*[?&](v=[a-zA-Z0-9_-]+).*$/,"https://www.youtube.com/watch?$1")).replace(/^https:\/\/www\.youtube\.com\/(?:embed|v)\/([a-zA-Z0-9_-]+).*$/,"https://www.youtube.com/watch?v=$1")).replace(/^https:\/\/www\.youtube\.com\/playlist.*[?&](list=[a-zA-Z0-9_-]+).*$/,"https://www.youtube.com/playlist?$1"),validate(e,t){if(/https:\/\/www\.youtube\.com\/results\?/.test(e))return{error:g(),result:!1,target:d.URL};switch(t){case c.youtube.artist:case c.youtube.event:case c.youtube.label:case c.youtube.place:return/^https:\/\/www\.youtube\.com\/playlist\?list=[a-zA-Z0-9_-]+/.test(e)?{error:l("This is a playlist link, which isn’t a video channel and is\n                 not guaranteed to be officially approved. Please link to the\n                 official channel for this entity, if it exists, instead."),result:!1,target:d.URL}:/^https:\/\/www\.youtube\.com\/watch\?v=[a-zA-Z0-9_-]+$/.test(e)?{error:m(),result:!1,target:d.ENTITY}:{result:!0};case c.youtube.series:return/^https:\/\/www\.youtube\.com\/(?!watch\?v=[a-zA-Z0-9_-])/.test(e)?{result:!0}:{error:m(),result:!1,target:d.ENTITY};case c.streamingfree.recording:return/^https:\/\/www\.youtube\.com\/watch\?v=[a-zA-Z0-9_-]+$/.test(e)?{result:!0}:{error:f(),result:!1,target:d.ENTITY};case c.streamingfree.release:return/^https:\/\/www\.youtube\.com\/(watch\?v=[a-zA-Z0-9_-]+|playlist\?list=[a-zA-Z0-9_-]+)$/.test(e)?{result:!0}:{error:l("Only video and playlist links are allowed on releases."),result:!1,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}},youtubemusic:{hostname:"music.youtube.com",match:[/^(https?:\/\/)?music\.youtube\.com\//i],restrict:[c.youtubemusic,{recording:c.streamingfree.recording,release:c.streamingfree.release},{recording:c.streamingpaid.recording,release:c.streamingpaid.release}],clean:e=>e=(e=(e=(e=e.replace(/^(https?:\/\/)?music\.youtube\.com(?:\/#)?/,"https://music.youtube.com")).replace(/\/channel\/([^/?#]+).*$/,"/channel/$1")).replace(/^https:\/\/music\.youtube\.com\/.*[?&](v=[a-zA-Z0-9_-]+).*$/,"https://music.youtube.com/watch?$1")).replace(/^https:\/\/music\.youtube\.com\/playlist.*[?&](list=[a-zA-Z0-9_-]+).*$/,"https://music.youtube.com/playlist?$1"),validate(e,t){if(/https:\/\/music\.youtube\.com\/search\?/.test(e))return{error:g(),result:!1,target:d.URL};switch(t){case c.youtubemusic.artist:return/^https:\/\/www\.youtube\.com\/playlist\?list=[a-zA-Z0-9_-]+/.test(e)?{error:l("This is a release (playlist) link, not an artist channel.\n                 Please link to the artist channel instead."),result:!1,target:d.ENTITY}:/^https:\/\/www\.youtube\.com\/watch\?v=[a-zA-Z0-9_-]+$/.test(e)?{error:m(),result:!1,target:d.ENTITY}:{result:/^https:\/\/music\.youtube\.com\/channel\/[^/?#]+$/.test(e),target:d.URL};case c.streamingfree.recording:case c.streamingpaid.recording:return/^https:\/\/music\.youtube\.com\/watch\?v=[a-zA-Z0-9_-]+$/.test(e)?{result:!0}:{error:f(),result:!1,target:d.ENTITY};case c.streamingfree.release:case c.streamingpaid.release:if(/^https:\/\/music\.youtube\.com\/playlist\?list=[a-zA-Z0-9_-]+$/.test(e))return{result:!0};if(/^https:\/\/music\.youtube\.com\/watch\?v=[a-zA-Z0-9_-]+$/.test(e))return{error:l("Please link to a specific release (playlist) link. Add track\n                (video) links to the relevant recordings instead."),result:!1,target:d.ENTITY};if(/^https:\/\/music\.youtube\.com\/channel\/[^/?#]+$/.test(e))return{error:l("Please link to a specific release (playlist) link. Add\n                 channel links to the relevant artists instead."),result:!1,target:d.ENTITY};if(/^https:\/\/music\.youtube\.com\/browse\//.test(e))return{error:o("This is likely a redirect link. Please follow\n                 {redirect_url|your link} and add the release (playlist)\n                 link it redirects to instead.",{redirect_url:{href:e,rel:"noopener noreferrer",target:"_blank"}}),result:!1,target:d.URL}}return{result:!1,target:d.RELATIONSHIP}}},zamp:{hostname:"zamp.hr",match:[/^(https?:\/\/)?(www\.)?zamp\.hr/i],restrict:[c.otherdatabases],clean:e=>e=e.replace(/^(?:https?:\/\/)?(?:www\.)?zamp\.hr\/baza-autora\/(autor|djelo)\/pregled\/([0-9]+)(?:[^0-9].*)?$/,"https://www.zamp.hr/baza-autora/$1/pregled/$2"),validate(e,t){const s=/^https:\/\/www\.zamp\.hr\/baza-autora\/(autor|djelo)\/pregled\/[0-9]*$/.exec(e);if(s){const e=s[1];switch(t){case c.otherdatabases.artist:case c.otherdatabases.label:return{result:"autor"===e,target:d.ENTITY};case c.otherdatabases.work:return{result:"djelo"===e,target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}return{result:!1,target:d.URL}}},zemereshet:{hostname:"zemereshet.co.il",match:[/^(https?:\/\/)?(www\.)?zemereshet\.co\.il\//i],restrict:[c.otherdatabases],clean:e=>e.replace(/^https?:\/\/(www\.)?/,"https://www.").replace(/(?=\?)(?:.*?)(?:[?&](id=[^&#]*))?(?:&.*)?$/,"?$1"),validate(e,t){switch(t){case c.otherdatabases.work:return{result:/\/song.asp\?id=[0-9]+$/.test(e),target:d.ENTITY};case c.otherdatabases.artist:return{result:/\/artist.asp\?id=[0-9]+$/.test(e),target:d.ENTITY};case c.otherdatabases.release:return{result:/\/record.asp\?id=[0-9]+$/.test(e),target:d.ENTITY}}return{result:!1,target:d.RELATIONSHIP}}}};function w(e,t){const s=T[e];if(s)for(let e=0;e<s.length;e++){const i=s[e],r=i.match;for(let e=0;e<r.length;e++)if(r[e].test(t))return i}return null}const v=/^https?:\/\//;function _(e){const t=v.test(e)?e:"http://"+e,{domain:s,domainWithoutSuffix:r,hostname:n,subdomain:a}=(0,i.qg)(t);if(!s)return null;let o=w(s,t)||w(n,t)||w(r+".*",t);if(o)return o;if(a){const e=a.split(".");let i="";for(let n=e.length-1;n>=0;n--)if(i=e[n]+"."+i,o=w(i+s,t)||w(i+r+".*",t),o)return o}return null}const T=Object.values(y).reduce(((e,t)=>((Array.isArray(t.hostname)?t.hostname:[t.hostname]).forEach((s=>{let i=e[s];i||(i=[],e[s]=i),i.push(t)})),e)),Object.create(null)),k={};function x(e,t){const s=[],i=(1<<t.length)-1;for(let r=1;r<=i;r++){const i=t.filter(((e,t)=>r&1<<t));0!==i.length&&(1===i.length?s.push({[e]:i[0]}):s.push({[e]:i}))}return s}function A(){const e={};for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return s.forEach((function(t){for(const[s,i]of Object.entries(t))(e[s]||=[]).push(i)})),e}k.release=function(e){return/^(https?:\/\/)?([^./]+\.)?wikipedia\.org\//.test(e)?{error:l("Wikipedia normally has no entries for specific releases,\n         so adding Wikipedia links to a release is currently blocked.\n         Please add this Wikipedia link to the release group instead,\n         if appropriate."),result:!1,target:d.ENTITY}:/^(https?:\/\/)?([^./]+\.)?last\.fm\//.test(e)?{error:l("Last.fm release pages are very often generated from MusicBrainz\n         data to begin with, and usually a bad match for specific MusicBrainz\n         releases, so adding Last.fm links to releases is currently blocked."),result:!1,target:d.URL}:/^(https?:\/\/)?([^./]+\.)?wikidata\.org\//.test(e)?{error:l("Wikidata normally has no entries for specific releases,\n         so adding Wikidata links to a release is currently blocked.\n         Please add this Wikidata link to the release group instead,\n         if appropriate."),result:!1,target:d.ENTITY}:/^(https?:\/\/)?([^./]+\.)?genius\.com\//.test(e)?{error:b(),result:!1,target:d.ENTITY}:{result:!0}},k.release_group=function(e){return/^(https?:\/\/)?(((?!daily\.)[^/])+\.)?bandcamp\.com/.test(e)||/^(https?:\/\/)?vgmdb\.(?:net|com)/.test(e)?{result:!1,target:d.ENTITY}:{result:!0}};class E{constructor(e,t){this.url=e,this.entityType=t,this.cleanup=_(e)}guessType(){const e=this.cleanup,t=this.entityType,s=this.filterApplicableTypes();if(0===s.length)return!1;if(e&&e.select){const s=e.select(this.url,t);if(s)return s}return 1===s.length&&s[0]}getPossibleTypes(){const e=this.filterApplicableTypes();return 0!==e.length&&e}checkRelationship(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.entityType;const s=k[this.entityType];if(s){const e=s(this.url);if(!e.result)return e}const i=this.cleanup,r=this.filterApplicableTypes(t);if(i&&r.length>0){const t=i.validate?i.validate(this.url,e):{result:!0},s=r.some((t=>"string"==typeof t?t===e:t.includes(e)));return t.result&&=s,t}return{result:-1===u.indexOf(e),target:d.RELATIONSHIP}}checkRelationships(e,t){if(!t)return{result:!0};if(1===e.length){const s=e[0];return t.some((e=>e===s))?{result:!0}:{error:l("Some relationship types are missing for this URL."),result:!1,target:d.URL}}return t.some((t=>"object"==typeof t&&(0,r.r1)([...e].sort(),[...t].sort())))?{result:!0}:{error:l("This relationship type combination is invalid."),result:!1,target:d.URL}}filterApplicableTypes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.entityType;return this.cleanup&&this.cleanup.restrict?this.cleanup.restrict.reduce(((t,s)=>(s[e]&&t.push(s[e]),t.sort())),[]):[]}}function I(e){const t=_(e=e.trim().replace(/(%E2%80%8E|\u200E)$/,""));return t&&t.clean?t.clean(e):e}function N(e){function t(){const t=e.val(),s=I(t)||t;t.match(/^\w+\./)?e.val("http://"+t):t.trim()!==s&&e.val(s)}e.on("input",t).on("blur",(function(){this.value=this.value.trim()})).parents("form").on("submit",t)}},UIUB93B:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s("smZuR9W"),r=s("cGbttel"),n=s("8YlDuzw").A;const a=function(e){let{content:t,target:s}=e;const a=i.useRef(null);return i.useEffect((()=>{const e=a.current,t=e?.getElementsByTagName("a");if(t)for(let e=0;e<t.length;e++)t[e].setAttribute("target","_blank")}),[]),(0,r.jsxs)("span",{className:"tooltip-wrapper",children:[s,n(t)?(0,r.jsxs)("span",{className:"tooltip-container",ref:a,children:[(0,r.jsx)("span",{className:"tooltip-triangle"}),(0,r.jsx)("span",{className:"tooltip-content",children:t})]}):null]})}},"UQkXO+Y":(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("smZuR9W");function r(e){const t=i.useCallback((t=>{e({enabled:t.currentTarget.checked,type:"set-ended"})}),[e]),s=i.useCallback((t=>{e({action:t,type:"update-begin-date"})}),[e]),r=i.useCallback((t=>{e({action:t,type:"update-end-date"})}),[e]);return{beginDateDispatch:s,beginYearInputRef:i.useRef(null),endDateDispatch:r,endYearInputRef:i.useRef(null),handleDateCopy:()=>{e({type:"copy-date"})},handleEndedChange:t}}},Ui1Lssl:(e,t,s)=>{"use strict";s.d(t,{A:()=>r,E:()=>n});var i=s("8YlDuzw");function r(e){if(!e)throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Invariant Violation")}function n(e,t){return r(null!=e,"Expected a non-null value"+((0,i.A)(t)?" ({description})":"")),e}},UjtI3Zv:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s("LCA85s6"),r=s("8YlDuzw").A,n=s("wQarZSJ").mo,a=s("wQarZSJ").iD,o=s("2k2mX3K").RL;const l=function(e){return e.root_id===i.INSTRUMENT_ROOT_ID&&e.id!==i.INSTRUMENT_ROOT_ID?r(e.instrument_comment)?n(e.name,e.instrument_comment):a(e.name):o(e.name)}},UrXtmnd:(e,t,s)=>{"use strict";s.d(t,{DI:()=>y,px:()=>k,Fi:()=>x});s("60ocjtt"),s("TWjsZtY"),s("6g1DHTE"),s("NKd1yOY"),s("PkUg7wA"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("AsUdLGK"),r=s("LCA85s6"),n=s("RJljx4W"),a=s("52XjgTZ"),o=s("e3+xVn3");const l=new RegExp("^"+r.MBID_REGEXP.source+"$","i");function c(e){return 36===e.length&&l.test(e)}var u=s("HfEq/qN"),d=s("IX2y8RG"),h=s("8YlDuzw").A;function p(){const e=(0,u.Lr)("recentAutocompleteEntities");if(h(e))try{const t=JSON.parse(e);if(t&&"object"==typeof t)return t}catch(e){i.Cp(e)}return{}}function m(e){if(Object.hasOwn(e,"gid")){const t=e.gid;if("string"==typeof t)return t}if(Object.hasOwn(e,"id")){const t=e.id;if("number"==typeof t)return String(t)}return null}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p();const s=new Set,i=t[e];if(null!=i&&Array.isArray(i))for(const e of i){switch(typeof e){case"object":if(e){const t=m(e);null!=t&&s.add(t)}break;case"string":s.add(e)}if(s.size>=r.MAX_RECENT_ENTITIES)break}return s}function f(e){const t=[];for(const s of e)(c(s)||(0,o.A)(Number(s)))&&t.push(s);return t}function b(e,t){const s=p();s[e]=f("function"==typeof t?t(s):t),(0,u.Lr)("recentAutocompleteEntities",JSON.stringify(s))}function y(e){b(e,new Set),w.set(e,[])}const w=new Map;function v(e){let t=w.get(e);return null==t&&(t=[],w.set(e,t)),t}function _(e,t){return(s=>{if(("object"==typeof s&&null!==s||"function"==typeof s)&&"language"===s.entityType){const e=s;return(0,n.A)(e,t)}if(("object"==typeof s&&null!==s||"function"==typeof s)&&"link_type"===s.entityType){const e=s;return(0,d.U)(e)}return e.name})(e)}const T=new Map;function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;const s=g(t);let i=v(t),r=null;const n=e=>{null==r&&(r=[...i],w.set(t,r)),r.push(e)};for(const e of i){const t=m(e.entity);null!=t&&s.delete(t)}if(s.size){const i="language-lyrics"===t;for(const t of Array.from(s)){const r=a.Ay[e]?.[t];r&&(n({entity:r,id:String(r.id)+"-recent",name:_(r,i),type:"option"}),s.delete(t))}}if(s.size){const a=f(s),o=new Map;if(a.length){let l=T.get(t);return l||(l=fetch("/ws/js/entities/"+e+"/"+a.join("+")).then((e=>e.ok?e.json():null)).then((a=>{if(i=v(t),!a)return i;const l=a.results,u=new Set;for(const t of s){const s=l[t];s&&s.entityType===e?(c(t)&&t!==s.gid&&o.set(t,s.gid),u.has(s.id)||(n({entity:s,id:String(s.id)+"-recent",name:_(s),type:"option"}),u.add(s.id))):o.set(t,null)}return r??i})).finally((()=>{T.delete(t),o.size&&function(e,t){b(e,(s=>new Set(Array.from(g(e,s)).reduce(((e,s)=>{if(t.has(s)){const i=t.get(s);h(i)&&e.push(i)}else e.push(s);return e}),[]))))}(t,o)})),T.set(t,l),l)}}return Promise.resolve(i)}function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.entity.entityType;const s=m(e.entity),i=[...v(t)];if(w.set(t,i),null==s)return i;const n=new Set([s]);for(const e of g(t))if(n.add(e),n.size>=r.MAX_RECENT_ENTITIES)break;b(t,n);const a={...e,id:String(e.entity.id)+"-recent"};if(delete a.level,delete a.separator,i.length){const e=i.findIndex((e=>s===m(e.entity)));e>=0&&i.splice(e,1),i.unshift(a),i.length>r.MAX_RECENT_ENTITIES&&i.splice(r.MAX_RECENT_ENTITIES,i.length-r.MAX_RECENT_ENTITIES)}else i.push(a);return i}},"Uv+krL7":(e,t,s)=>{"use strict";s.d(t,{$8:()=>j,Ay:()=>C,C9:()=>c,Dh:()=>f,FP:()=>d,Ju:()=>b,Ne:()=>S,OA:()=>A,Sc:()=>k,WX:()=>T,Zb:()=>E,bo:()=>v,fP:()=>w,sY:()=>l,wk:()=>p,z3:()=>y});s("6g1DHTE"),s("DNaZxvn"),s("PkUg7wA");var i=s("AsUdLGK"),r=s("smZuR9W"),n=s("cGbttel"),a=s("8YlDuzw").I;class o{}const l=new o;function c(e){return e!==l}Object.freeze(o);let u=1;class d{constructor(e){this.data=e}get(e){return this.data[e]}getKey(e){return e+"-"+String(u++)}has(e){return Object.hasOwn(this.data,e)}}const h=Object.freeze({}),p={match:"",position:0,remainder:"",replacement:l,running:!1,source:""};function m(e){return"string"==typeof e?e:"number"==typeof e?String(e):""}function g(e,t){return r.isValidElement(e)?(0,n.jsx)(r.Fragment,{children:e},t):m(e)}function f(e,t){return Array.isArray(e)?e.map(((e,s)=>g(e,t+"-"+String(s)))):g(e,t)}function b(e){const t=p.remainder.match(e);if(t){const e=t[0];return p.match+=e,p.position+=e.length,p.remainder=p.remainder.slice(e.length),t.length>1?t[1]:e}return l}function y(e){return new Error(`Failed to parse string ${JSON.stringify(p.source)} at position ${p.position}: ${e}`)}function w(e){return function(t){const s=p.match;p.match="";const i=e(t);return p.match=s+p.match,i}}function v(e,t,s,i){let r=l,n=!0;for(;n;){n=!1;for(let i=0;i<e.length;i++){const a=e[i](t);if(c(a)){if(r=s(r,a),!p.remainder)break;n=!0}}}return c(r)?r:i}function _(e,t){return(c(e)?e:"")+t}function T(e,t){return v(e,t,_,"")}Object.seal(p);const k=(e,t)=>()=>{const s=b(e);return"string"!=typeof s?l:t(s)},x=/^\{([0-9A-z_]+)\}/,A=e=>w((function(t){const s=b(x);return"string"!=typeof s?l:t.has(s)?e(t.get(s),s):p.match})),E=A(m),I=/^\{([0-9A-z_]+):/,N=/^\|/,j=/^}/,S=(e,t)=>w((function(s){const i=b(I);if("string"!=typeof i)return l;const r=p.replacement;s.has(i)&&(p.replacement=f(s.get(i),i));const n=e(s);let a="";if(c(b(N))&&(a=t(s)),p.replacement=r,!c(b(j)))throw y("expected }");if(s.has(i)){return s.get(i)?n:a}return p.match}));function C(e,t,s){if(a(t))return"";let r,n;p.running&&(r={...p}),p.match="",p.position=0,p.remainder=t,p.replacement=l,p.running=!0,p.source=t;try{if(n=e(s??new d(h)),p.remainder)throw y("unexpected token")}catch(e){return console.error(e),i.Cp(e),t}finally{r?Object.assign(p,r):p.running=!1}return n}},"V+g2iDM":(e,t,s)=>{"use strict";s.d(t,{Ay:()=>p,C3:()=>c,SH:()=>d,zv:()=>u});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n"),s("DNaZxvn"),s("NKd1yOY");var i=s("smZuR9W"),r=s("nXnm+DU"),n=s("QpbAoda"),a=s("cGbttel"),o=s("oEgauXb").lp,l=s("oEgauXb").l;function c(e){return e.reduce(((e,t)=>{const s=t.autocomplete.selectedItem?.entity;return s&&e.push(s),e}),[])}function u(e,t,s){return e.map((e=>e.key===t?s(e):e))}function d(e,t,s){{const i=t;if(("object"!=typeof i||null===i)&&"function"!=typeof i||"add-value"!==i.type)if(("object"==typeof i&&null!==i||"function"==typeof i)&&"remove-value"===i.type&&"valueKey"in i){const t=i.valueKey;e.values=u(e.values,t,(e=>({...e,removed:!0})))}else{if(("object"!=typeof i||null===i)&&"function"!=typeof i||"update-value-autocomplete"!==i.type||!("action"in i)||!("valueKey"in i))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i);{const t=i.action,s=i.valueKey;e.values=u(e.values,s,(e=>({...e,autocomplete:(0,n.Ay)(e.autocomplete,t)})))}}else e.values=[...e.values.filter((e=>!e.removed)),s(e)]}}const h=i.memo((function(e){const{buildExtraChildren:t,dispatch:s,state:n}=e,c=i.useCallback((e=>{s({action:e,type:"update-value-autocomplete",valueKey:n.key})}),[s,n.key]),u=i.useCallback((()=>{s({type:"remove-value",valueKey:n.key})}),[s,n.key]);return(0,a.jsxs)("div",{className:"multiselect-value",children:[n.removed?o("[removed]","generic row"):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.A,{dispatch:c,state:n.autocomplete}),t?t(n):null]}),(0,a.jsx)("button",{"aria-disabled":n.removed,className:"remove-item icon",onClick:u,title:l("Remove"),type:"button"})]},n.key)}));const p=i.memo((function(e){let{addLabel:t,buildExtraValueChildren:s,dispatch:r,state:n}=e;const o=i.useCallback((()=>{r({type:"add-value"})}),[r]),l=n.values.reduce(((e,t)=>e+(t.removed?0:1)),0);return(0,a.jsxs)(a.Fragment,{children:[n.values.map((e=>(0,a.jsx)(h,{buildExtraChildren:s,dispatch:r,state:e},e.key))),null==n.max||n.max<l?(0,a.jsx)("button",{className:"add-item with-label",onClick:o,type:"button",children:" "+t}):null]})}))},VHUgtNR:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("LCA85s6");const r={Control:{},linkedEntities:s("52XjgTZ").Ay,relationshipEditor:{},utility:{},text:{},constants:i};globalThis.MB=r;const n=r},VNyMmCx:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>y,cC:()=>f,l0:()=>b});s("60ocjtt");var i=s("6Jrjhm9"),r=s("CJBfytL"),n=s("yBlPIGB"),a=s("e3+xVn3"),o=s("HfEq/qN"),l=s("KzhY9EY"),c=s("9azanlh"),u=s("osVXT12"),d=s("VVNXxwy"),h=s("SmhBGrr"),p=s("JCI6GvU"),m=s("Ui1Lssl").A;function g(e,t,s,o,l){const d=e+".rel."+o;(0,a.A)(s.id)&&l(d,"relationship_id",String(s.id)),s._status===c.QJ&&l(d,"removed","1");const m=(0,p.A)(s,t),g=m?s.entity0:s.entity1;g.gid&&l(d,"target",g.gid);const f=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=d+".attributes."+e;l(i,"type.gid",t.type.gid),s?l(i,"removed","1"):(null!=t.credited_as&&l(i,"credited_as",t.credited_as),null!=t.text_value&&l(i,"text_value",t.text_value))},b=s.attributes;let y=0;for(const e of i.A(b??r.A))f(y,e),y++;const w=s._original;if(w){const e=w.attributes;for(const t of i.A(e??r.A)){n.A(b??r.A,t,u.S1)||f(y++,t,!0),y++}}l(d,"entity0_credit",s.entity0_credit),l(d,"entity1_credit",s.entity1_credit);const v=(0,h.A)(s),_=!v||v.has_dates,T=_?s.begin_date:null,k=_?s.end_date:null;l(d,"period.begin_date.year",String(T?.year??"")),l(d,"period.begin_date.month",String(T?.month??"")),l(d,"period.begin_date.day",String(T?.day??"")),l(d,"period.end_date.year",String(k?.year??"")),l(d,"period.end_date.month",String(k?.month??"")),l(d,"period.end_date.day",String(k?.day??"")),l(d,"period.ended",_&&s.ended?"1":"0"),l(d,"backward",m?"1":"0"),null!=v&&(l(d,"link_type_id",String(v.id)),0!==v.orderable_direction&&l(d,"link_order",String(s.linkOrder)))}function f(e,t){const s=document.createDocumentFragment();let i=0;t(((e,t,r)=>{const n=document.createElement("input");n.type="hidden",n.name=e+"."+t,n.value=r,s.appendChild(n),++i}));const r=document.getElementById("page");m(r);const n=r.querySelector("button[type=submit");n&&(n.disabled=!0);const a=document.getElementById(e);m(a);const o=a.querySelectorAll("input[type=hidden]");for(const e of o)a.removeChild(e);return a.appendChild(s),i}function b(e){const t=(0,a.A)(e.id)?e.id:"new";return`relationshipEditorChanges_${e.entityType}_${t}`}function y(e,t){f("relationship-editor",(function(s){const i=(0,d.PK)(t.relationshipsBySource,t.entity),r=[];let n=0;for(const a of(0,d.Ic)(i))a._status!==c.wL&&(r.push(a),g(e,t.entity,a,n++,s));o.go&&o.HI.set(b(t.entity),JSON.stringify((0,l.d)(r)))}))}},VVNXxwy:(e,t,s)=>{"use strict";s.d(t,{$b:()=>v,Ic:()=>T,PK:()=>f,T$:()=>_,_B:()=>b,_u:()=>w,kr:()=>p,nl:()=>m,py:()=>y,uT:()=>k});var i=s("yBlPIGB"),r=s("CJBfytL"),n=s("6Jrjhm9"),a=s("oEgauXb"),o=s("93z9/8f"),l=s("ygekcr1"),c=s("osVXT12"),u=s("fnTvsuF"),d=s("JCI6GvU"),h=s("Ui1Lssl").A;function p(e,t){return(0,o.K)(e,t[0])}function m(e,t){return e.typeId-t.typeId||(e.backward?1:0)-(t.backward?1:0)}function g(e,t){return(0,a.UD)(e,t.textPhrase)}function f(e,t){const s=i.A(e,t,l.j8,null);return s?s[1]:r.A}function b(e,t,s){const n=i.A(e,s,p,null);return n?n[1]:r.A}function y(e,t,s){return i.A(e,{backward:s,typeId:t},m,null)}function w(e,t,s){const r=(0,d.A)(t,s),n=y(b(e,0,r?t.entity0.entityType:t.entity1.entityType),t.linkTypeID??0,r);return n?function(e,t){return i.A(e.phraseGroups,(0,u.A)(t,e.backward),g,null)}(n,t):null}function v(e,t,s){const r=w(e,t,s);return r?i.A(r.relationships,t,(0,c._V)((0,d.A)(t,s)),null):null}function*_(e){const[,t]=e;for(const e of n.A(t))for(const t of n.A(e.phraseGroups))yield*n.A(t.relationships)}function*T(e){for(const t of n.A(e))yield*_(t)}function*k(e,t,s){const r=i.A(e,t,p);if(r)for(const e of _(r)){const i=e[s];h(i.entityType===t),yield i}}},VVxqhIh:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s("smZuR9W"),r=s("/FT4qLG"),n=s("Ui1Lssl").A;function a(){const{user:e}=i.useContext(r.A9);return n(e,"user is not defined"),e}},Va8HfVl:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});s("6g1DHTE"),s("DNaZxvn");var i=s("oEgauXb");function r(e,t){let s,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return void 0!==e.value&&null!==e.value?String(e.value):i?"":(s=t.grouped?t.options[0].options[0].value:t.options[0].value,String(s))}var n=s("cGbttel");const a=(e,t)=>(0,n.jsx)("option",{value:e.value,children:(0,i.WQ)(e.label)},t),o=(e,t)=>(0,n.jsx)("optgroup",{label:e.optgroup,children:e.options.map(a)},t);const l=function(e){let{allowEmpty:t=!0,field:s,options:i,uncontrolled:l=!1,...c}=e;const u={...c};return void 0===u.className&&(u.className="with-button"),u.disabled=c.disabled||!1,u.id="id-"+s.html_name,u.name=s.html_name,l?(u.defaultValue=r(s,i,t),u.onChange=void 0):u.value=r(s,i,t),(0,n.jsxs)("select",{...u,children:[t?(0,n.jsx)("option",{value:"",children:" "}):null,i.grouped?i.options.map(o):i.options.map(a)]})}},"Vg37ZR/":(e,t,s)=>{"use strict";s.d(t,{A:()=>n,Z:()=>r});var i=s("8YlDuzw").I;function r(e){return!n(e)}function n(e){return null==e||i(e.year)&&i(e.month)&&i(e.day)}},VzgsghB:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>h,NN:()=>d,V:()=>u});var i=s("CJBfytL"),r=s("jKEtJbC"),n=s("6Jrjhm9"),a=s("YwtI3iV"),o=s("ygekcr1"),l=s("VVNXxwy"),c=s("XpzAzYy");function u(e,t){return(0,o.Yq)(e,t.work)}function*d(e,t){yield*(0,l.uT)((0,l.PK)(e.relationshipsBySource,t),"recording","entity0")}function h(e,t,s){const l=new Map;let h=i.A;for(const s of t)for(const t of d(e,s))h=r.Sg(h,t,o.um),l.set(t.id,r.Sg(l.get(t.id)??i.A,s,o.Yq));(0,c.Ay)(e,n.A(h),(e=>{let t=e.relatedWorks;const i=l.get(e.recording.id);if(i)for(const e of n.A(i))t=a.Ay(t,e,u,s,a.zo);return t!==e.relatedWorks?{isSelected:e.isSelected,recording:e.recording,relatedWorks:t,targetTypeGroups:e.targetTypeGroups}:e}))}},"WN/X9IS":(e,t,s)=>{"use strict";s.d(t,{NF:()=>d,ZH:()=>r,kW:()=>l,pN:()=>n,sl:()=>u});var i=s("dMORH1x");function r(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()}function n(e,t){let s=e;"string"==typeof s&&(s=Number.parseInt(s,10),Number.isNaN(s)&&(s=0));const i=s<0;return(i?"-":"")+String(i?-s:s).padStart(t,"0")}const a=/([a-z])([A-Z])/g,o=/[^0-9A-Za-z]+/g;function l(e){return e.replace(a,"$1-$2").replace(o,"-").toLowerCase()}const c=/[\u0300-\u036F]/g;function u(e){return e.normalize("NFD").replace(c,"")}function d(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+String((0,i.NF)())}},WfSoeLz:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("rAs4fSN");function r(e,t){const s=e.ended&&!function(e){const t=e?.year;if(null==e||null==t)return!1;const s=new Date,i=s.getUTCDate(),r=s.getUTCMonth()+1,n=s.getUTCFullYear();if(t>n)return!0;if(t===n){if(null==e.month)return!1;if(e.month>r)return!0;if(e.month===r){if(null==e.day)return!1;if(e.day>i)return!0}}return!1}(e.end_date);return"url"===t.entityType&&(s||(0,i.A)(t.href_url))}},WkqHeFz:(e,t,s)=>{"use strict";function i(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}s.d(t,{A:()=>i})},XcTwltC:(e,t,s)=>{"use strict";var i=s("AsUdLGK"),r=s("smZuR9W"),n=s("KBzdQ9I"),a=s("p1f4iM1"),o=s("L0H01fh"),l=s("cGbttel"),c=s("oEgauXb").l,u=s("HkNzj3j").l;(0,s("KBzdQ9I").A)("div.wikipedia-extract",(function(e){let{cachedWikipediaExtract:t,entity:s}=e;const[n,d]=r.useState(t);return r.useEffect((()=>{null==t&&function(e,t){const s=(0,a.A)(e,"/wikipedia-extract");fetch(s).then((e=>e.json())).then((e=>{try{t(e.wikipediaExtract)}catch(e){console.error(e),i.Cp(e)}})).catch(console.error)}(s,d)}),[s,t]),n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:"wikipedia",children:c("Wikipedia")}),(0,l.jsx)(o.A,{className:"wikipedia-extract",html:n.content}),(0,l.jsx)("a",{href:n.url,children:c("Continue reading at Wikipedia...")})," ",(0,l.jsx)("small",{children:u("Wikipedia content provided under the terms of the\n            {license_link|Creative Commons BY-SA license}",{license_link:"https://creativecommons.org/licenses/by-sa/3.0/"})})]}):null}),n.X)},XhfEA1D:(e,t,s)=>{"use strict";s.d(t,{ZC:()=>r});var i=s("GX9EKLY");const r=i.Yi("instrument_descriptions");i._J("instrument_descriptions"),i.A3("instrument_descriptions")},XpzAzYy:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>c,P5:()=>a,UY:()=>o});s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("YwtI3iV"),r=s("CJBfytL"),n=s("2Wx6B6n");function a(e,t){return e.position-t[0].position}function o(e,t){return e-t.recording.id}const l=()=>new Set;function c(e,t,s){const c=new Map;for(const s of t){const t=e.mediumsByRecordingId.get(s.id);if(t)for(const e of t)(0,n.A)(c,e,l).add(s)}for(const[t,n]of c){const l=e=>{const[t,a]=e;let l=a;for(const e of n)l=i.Ay(l,e.id,o,s,(()=>s({isSelected:!1,recording:e,relatedWorks:r.A,targetTypeGroups:r.A})));return l!==a?[t,l]:e};e.mediums=i.Ay(e.mediums,t,a,l,(()=>l([t,r.A])))}}},YDxZ9xi:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("6Rf1oks");function r(e,t){return e.ended===t.ended&&(0,i.A)(e.begin_date,t.begin_date)&&(0,i.A)(e.end_date,t.end_date)}},YRn3CNN:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("cGbttel");const r=function(e){let{forField:t,label:s,required:r}=e;return(0,i.jsx)("label",{className:r?"required":"",htmlFor:t?"id-"+t.html_name:null,children:s})}},YuKhb1Z:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("oEgauXb").l,r=s("SKGBikk").ln;const n=e=>0===e?i("Remove your rating"):r("Rate: {rating} star","Rate: {rating} stars",e,{rating:e})},"Z+0BPKL":(e,t,s)=>{"use strict";s.d(t,{Ay:()=>u,LI:()=>c,xB:()=>d});s("6g1DHTE"),s("AXfG3Yq");var i=s("EVdnBjI"),r=s.n(i),n=s("84yo5bY"),a=s.n(n),o=(s("HR1eHg2"),s("Af/Fa+9"));class l{targetEqualityComparer(e,t){return e===t}constructor(e){this.group=e||0,this.target=a().observable(null),this.target.equalityComparer=this.targetEqualityComparer,this.visible=a().observable(!1)}show(e,t){this.control=e,this.target(a().dataFor(e)),this.visible(!0);var s=this.$bubble;!1!==t&&r()(e).is(":button")&&(0,o.A)(":input:first",s);var i=this.activeBubbles[this.group];i&&i!==this&&i.hide(!1),this.activeBubbles[this.group]=this,setTimeout((function(){s.find("a").attr("target","_blank")}),1)}hide(e){this.visible(!1);var t=r()(this.control);this.control=null,!1!==e&&t.is(":button")&&t.focus(),this.activeBubbles[this.group]===this&&(this.activeBubbles[this.group]=null)}submit(){this.hide()}toggle(e){this.visible.peek()?this.hide():this.show(e)}canBeShown(){return!0}redraw(e){this.visible.peek()&&(0===r()(this.control).parents("html").length?this.hide(!1):this.show(this.control,Boolean(e),!0))}targetIs(e){return this.target()===e}}l.prototype.activeBubbles={};class c extends l{show(e,t){super.show(e,t);const s=this.$bubble,i=s.parent();s.addClass("left-tail").width(i.width()-24).position({my:"left top-30",at:"right center",of:e,collision:"fit none",within:i})}}function u(e,t,s,i){s||={};var n=new c;return i&&(n.canBeShown=i),a().applyBindingsToNode(r()(e)[0],{bubble:n},s),t&&r()(t).each(((e,t)=>{a().applyBindingsToNode(t,{controlsBubble:n},s)})),n}function d(e){const t=u(e);r()(document).on("focus","#external-links-editor-container .external-link-item input.value",(e=>t.show(e.target)))}a().bindingHandlers.show={update(e,t){e.style.display=a().unwrap(t())?"block":"none"}},a().bindingHandlers.bubble={init(e,t,s,i,n){var o=t();e.bubbleDoc=o,o.$bubble=r()(e);var l=n.createChildContext(o);return a().applyBindingsToNode(e,{show:o.visible},l),a().applyBindingsToDescendants(l,e),{controlsDescendantBindings:!0}}},a().bindingHandlers.controlsBubble={init(e,t,s,i){var r=t();e.bubbleDoc=r,i["bubbleControl"+r.group]=e,r.visible.peek()&&r.targetIs(i)&&(r.control=e),a().computed({read:()=>Boolean(r.canBeShown(i)),disposeWhenNodeIsRemoved:e}).subscribe((function(t){t!==r.visible()?r.toggle(e):t&&!r.targetIs(i)&&r.show(e)}))}},a().bindingHandlers.affectsBubble={init(e,t){if(!window.MutationObserver)return;let s=!1;var i=new MutationObserver((function(){s||(s=!0,setTimeout((function(){try{t().redraw()}finally{s=!1}}),100))}));i.observe(e,{childList:!0,subtree:!0}),a().utils.domNodeDisposal.addDisposeCallback(e,(function(){i.disconnect()}))}},r()("body").on("click focusin",(function(e){var t=e.target,s=t.bubbleDoc;if(s){var i=r()(t).is(":button"),n=i&&"click"===e.type,o=!i&&"focusin"===e.type,l=a().dataFor(t);if(s.canBeShown(l)){var c=s.visible()&&s.targetIs(l);n&&c?s.hide():(o||n&&!c)&&s.show(t)}return!1}})).on("keydown","div.bubble :input",(function(e){if(!e.isDefaultPrevented()){var t=r()(e.target),s=t.parents("div.bubble")[0].bubbleDoc;if(s){var i=27===e.which,n=13===e.which;(i||n&&t.is(":not(:button)"))&&(e.preventDefault(),t.trigger("change"),i?s.hide():n&&s.submit())}}}))},ZKqpbui:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s("p1f4iM1"),r=s("vtQteBO"),n=s("cGbttel"),a=s("8YlDuzw").I,o=s("8YlDuzw").A,l=s("CIf4Yly").ci;const c=function(e){let{className:t,country:s,withLink:c=!1}=e;const u=(0,r.A)(s);if(a(u))return null;const d="flag flag-"+u+(o(t)?" "+t:"");let h=(0,n.jsx)("abbr",{title:l(s.name),children:u});return c&&(h=(0,n.jsx)("a",{href:(0,i.A)(s),children:h})),(0,n.jsx)("span",{className:d,children:h})}},ZwFjpDV:(e,t,s)=>{"use strict";s.d(t,{L0:()=>d,R0:()=>l,RH:()=>u,Us:()=>g,ar:()=>c,c7:()=>o,eG:()=>m,md:()=>p,rZ:()=>h});var i=s("xNKEMJr"),r=s("yEXEwX7"),n=s("oEgauXb").g,a=s("oEgauXb").l;const o=1,l=2,c=3,u={type:"action",action:{type:"clear-recent-items"},id:"clear-recent-items",name:n("Clear recent items")},d={type:"header",id:"recent-items-header",name:n("Recent items"),disabled:!0},h={ERROR_TRY_AGAIN_DIRECT:{type:"action",action:r.We,id:"error-try-again-direct",name:n("Try again with direct search.")},ERROR_TRY_AGAIN_INDEXED:{type:"action",action:r.We,id:"error-try-again-indexed",name:n("Try again with indexed search.")},LOOKUP_ERROR:{type:"action",action:r.fr,id:"lookup-error",name:n("An error occurred while looking up the MBID you entered.")},LOOKUP_TYPE_ERROR:{type:"action",action:r.fr,id:"lookup-type-error",name:n("The type of entity you pasted isn’t supported here.")},NO_RESULTS:{type:"action",action:r.fr,id:"no-results",name:()=>(0,i.x)(a("No results"))},SEARCH_ERROR:{type:"action",action:r.Sp,id:"try-again",name:n("An error occurred while searching. Click here to try again."),separator:!0},SHOW_MORE:{type:"action",action:r.LD,id:"show-more",name:n("Show more..."),separator:!0},TRY_AGAIN_DIRECT:{type:"action",action:r.We,id:"try-again-direct",name:n("Not found? Try again with direct search."),separator:!0},TRY_AGAIN_INDEXED:{type:"action",action:r.We,id:"try-again-indexed",name:n("Slow? Switch back to indexed search."),separator:!0}},p=25,m={area:n("Search for an area"),artist:n("Search for an artist"),editor:n("Search for an editor"),event:n("Search for an event"),genre:n("Search for a genre"),instrument:n("Search for an instrument"),label:n("Search for a label"),link_attribute_type:()=>"",link_type:n("Search for a relationship type"),place:n("Search for a place"),recording:n("Search for a recording"),release:n("Search for a release"),release_group:n("Search for a release group"),series:n("Search for a series"),work:n("Search for a work")},g="undefined"!=typeof window&&window===window.top},"a+U3pwl":(e,t,s)=>{"use strict";s.d(t,{Ur:()=>C,Ay:()=>$,Ff:()=>L});s("60ocjtt"),s("6g1DHTE"),s("DNaZxvn"),s("NKd1yOY");var i=s("smZuR9W"),r=s("jKEtJbC"),n=s("CJBfytL"),a=s("oEgauXb"),o=s("HkNzj3j"),l=s("52XjgTZ"),c=s("9oisN5V"),u=s("dMORH1x"),d=s("WN/X9IS"),h=s("osVXT12"),p=s("cGbttel");const m=i.memo((function(e){let{dispatch:t,state:s}=e;return(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{checked:s.enabled,className:"boolean",id:(0,d.kW)(s.type.name)+"-checkbox",onChange:e=>{t(s.key,{enabled:e.currentTarget.checked,type:"toggle"})},type:"checkbox"})," ",s.type.l_name]})}));s("70YSc4n"),s("XteD3uf");var g=s("nXnm+DU"),f=s("LCA85s6"),b=s("UjtI3Zv"),y=s("V+g2iDM"),w=s("oEgauXb").lp,v=s("oEgauXb").l;function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t>=0&&s.push({entity:e,id:e.id,level:t,name:e.name,type:"option"}),e.children?.forEach((e=>{_(e,t+1,s)}))}const T=new Map;function k(e){const t=e.id;let s=T.get(t);return s||(s=[],_(e,-1,s),T.set(t,s),s)}function x(e){return[e.entity.l_name??"",...e.entity.instrument_aliases??[]]}function A(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=(0,u.NF)();return{autocomplete:(0,g.U)({entityType:"link_attribute_type",extractSearchTerms:x,id:"attribute-"+String(i),placeholder:(0,b.A)(e),recentItemsKey:"link_attribute_type-"+e.name,selectedItem:t?{entity:t,id:t.id,name:(0,b.A)(t),type:"option"}:null,staticItems:k(e)}),control:"multiselect-value",creditedAs:s,key:i,removed:!1}}const E=i.memo((function(e){let{dispatch:t,state:s}=e;const r=s.type,n=(a=r.id)===f.INSTRUMENT_ROOT_ID?w("Add instrument","interactive"):a===f.VOCAL_ROOT_ID?v("Add vocal"):w("Add another","relationship attribute");var a;const o=i.useCallback((e=>{t(s.key,e)}),[t,s.key]),l=i.useCallback((e=>{const t=e.autocomplete.selectedItem?.entity;return(0,p.jsx)("input",{"aria-label":v("Credited as"),className:"attribute-credit",disabled:!(t?t.creditable:s.type.creditable),onChange:t=>{o({creditedAs:t.currentTarget.value,type:"set-value-credit",valueKey:e.key})},placeholder:v("Credited as"),type:"text",value:e.creditedAs??""})}),[o,s.type.creditable]);return(0,p.jsx)(y.Ay,{addLabel:n,buildExtraValueChildren:l,dispatch:o,state:s})}));const I=i.memo((function(e){let{dispatch:t,inputId:s,state:i}=e;return(0,p.jsx)("input",{id:s,onChange:e=>{t(i.key,{textValue:e.currentTarget.value,type:"set-text-value"})},type:"text",value:i.textValue})}));var N=s("8YlDuzw").A,j=s("Ui1Lssl").A;const S={checkbox:1,multiselect:3,text:2};function C(e,t){const s=function(e,t){const s=[];if(e)for(const i in e.attributes){const r=e.attributes[Number(i)],n=l.Ay.link_attribute_type[i];let a;const o={error:"",key:(0,u.NF)(),max:r.max,min:r.min,type:n},c=t?.get(n.id);if(n.children)a={control:"multiselect",linkType:e,values:c?c.map((e=>A(n,e.type,e.credited_as))):[A(n,null)],...o};else if(n.free_text){const e=c?.length?c[0]:null;a={control:"text",textValue:e?.text_value??"",...o}}else a={control:"checkbox",enabled:1===c?.length,...o};s.push(a)}return s.sort(((e,t)=>(S[e.control]??0)-(S[t.control]??0)||(0,a.UD)(e.type.l_name??"",t.type.l_name??""))),s}(e,t);return{attributesList:s,resultingLinkAttributes:R(s)}}function R(e){return e.reduce(((e,t)=>{switch(t.control){case"checkbox":if(t.enabled){const s=t.type;return r.Ay(e,{type:{gid:s.gid},typeID:s.id,typeName:s.name},h.fx)}break;case"multiselect":{let s=e;for(const e of t.values){if(e.removed)continue;const t=e.autocomplete.selectedItem?.entity;t&&(s=r.Sg(s,{credited_as:(0,c.A)(e.creditedAs),type:{gid:t.gid},typeID:t.id,typeName:t.name},h.fx))}return s}case"text":{const s=t.type,i=(0,c.A)(t.textValue);if(N(i))return r.Ay(e,{text_value:i,type:{gid:s.gid},typeID:s.id,typeName:s.name},h.fx);break}}return e}),n.A)}function L(e,t){const s={...e};let i=!0;{const e=t;if(("object"==typeof e&&null!==e||"function"==typeof e)&&"update-boolean-attribute"===e.type&&"action"in e&&"rootKey"in e){const t=e.action,i=e.rootKey;s.attributesList=s.attributesList.map((e=>e.key===i?(j("checkbox"===e.control),function(e,t){const s={...e};{const e=t;if(("object"!=typeof e||null===e)&&"function"!=typeof e||"toggle"!==e.type||!("enabled"in e))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e);{const t=e.enabled;s.enabled=t}}return s}(e,t)):e))}else if(("object"==typeof e&&null!==e||"function"==typeof e)&&"update-multiselect-attribute"===e.type&&"action"in e&&"rootKey"in e){const t=e.action,r=e.rootKey,n=t;if("update-value-autocomplete"===n.type){const e=n.action;"type-value"!==e.type&&"select-item"!==e.type&&(i=!1)}s.attributesList=s.attributesList.map((e=>e.key===r?(j("multiselect"===e.control),function(e,t){const s={...e};{const i=t;if(("object"==typeof i&&null!==i||"function"==typeof i)&&"set-value-credit"===i.type&&"creditedAs"in i&&"valueKey"in i){const e=i.creditedAs,t=i.valueKey;s.values=(0,y.zv)(s.values,t,(t=>({...t,creditedAs:e})))}else{const t=i;(0,y.SH)(s,t,(()=>A(e.type,null)))}}const i=s.linkType.attributes[s.type.id];return null!=i.min&&i.min>0&&i.min>s.values.filter((e=>!e.removed)).length?s.error=v("This attribute is required."):s.error="",s}(e,n)):e))}else{if(("object"!=typeof e||null===e)&&"function"!=typeof e||"update-text-attribute"!==e.type||!("action"in e)||!("rootKey"in e))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e);{const t=e.action,i=e.rootKey;s.attributesList=s.attributesList.map((e=>e.key===i?(j("text"===e.control),function(e,t){const s={...e};{const e=t;if(("object"!=typeof e||null===e)&&"function"!=typeof e||"set-text-value"!==e.type||!("textValue"in e))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e);{const t=e.textValue;s.textValue=t}}return s}(e,t)):e))}}}if(i){const e=R(s.attributesList);(0,h.ER)(s.resultingLinkAttributes,e)||(s.resultingLinkAttributes=e)}return s}const P=(e,t,s)=>(0,p.jsxs)("div",{className:"attribute-container "+e.control+" "+(0,d.kW)(e.type.name),children:[t,e.error,s&&N(e.type.l_description)?(0,p.jsx)("div",{className:"ar-descr",children:(0,o.Ay)(e.type.l_description)}):null]},e.key);const $=i.memo((function(e){let{dispatch:t,isHelpVisible:s,state:r}=e;const n=i.useCallback(((e,s)=>{t({action:s,rootKey:e,type:"update-boolean-attribute"})}),[t]),a=i.useCallback(((e,s)=>{t({action:s,rootKey:e,type:"update-multiselect-attribute"})}),[t]),o=i.useCallback(((e,s)=>{t({action:s,rootKey:e,type:"update-text-attribute"})}),[t]),l={checkbox:[],multiselect:[],text:[]};for(const e of r.attributesList)switch(e.control){case"checkbox":l.checkbox.push([e,P(e,(0,p.jsx)(m,{dispatch:n,state:e}),s)]);break;case"multiselect":l.multiselect.push([e,P(e,(0,p.jsx)(E,{dispatch:a,state:e}),s)]);break;case"text":{const t="text-attribute-"+String(e.type.id);l.text.push([e,P(e,(0,p.jsx)(I,{dispatch:o,inputId:t,state:e}),s)]);break}}return(0,p.jsxs)(p.Fragment,{children:[l.checkbox.map((e=>{let[t,s]=e;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"section"}),(0,p.jsx)("td",{className:"fields",children:s})]},t.type.id)})),l.text.map((e=>{let[t,s]=e;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"section",children:(0,p.jsx)("label",{htmlFor:"text-attribute-"+String(t.type.id),children:(0,d.ZH)(t.type.l_name??t.type.name)})}),(0,p.jsx)("td",{className:"fields",children:s})]},t.type.id)})),l.multiselect.map((e=>{let[t,s]=e;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"section",children:(0,d.ZH)(t.type.l_name??t.type.name)}),(0,p.jsx)("td",{className:"fields",children:s})]},t.type.id)}))]})}))},ahVNJfT:(e,t,s)=>{"use strict";s.d(t,{Xk:()=>r,al:()=>n});var i=s("GX9EKLY");i.Yi("attributes"),i._J("attributes");const r=i.A3("attributes"),n=(e,t)=>()=>r(e,t)},"bOl/bpb":(e,t,s)=>{"use strict";s.d(t,{A:()=>l});s("6g1DHTE"),s("gdf1lGT");var i=s("84yo5bY"),r=s.n(i),n=s("LCA85s6");const a=/\W(baritone|cello|conductor|gamba|guitar|orch|orchestra|organ|piano|soprano|tenor|trumpet|vocals?|viola|violin): /,o=e=>n.PROBABLY_CLASSICAL_LINK_TYPES.includes(e.linkTypeID);function l(e){return a.test(r().unwrap(e.name))||(r().unwrap(e.relationships)?.some(o)??!1)}},brGU6uh:(e,t,s)=>{"use strict";function i(e){return e.entity0.entityType+"-"+e.entity1.entityType+"-"+String(e.id)}s.d(t,{A:()=>i})},c3X37P8:(e,t,s)=>{"use strict";s.d(t,{P3:()=>_,x3:()=>T,yj:()=>w});s("6g1DHTE"),s("Ei2Ajja"),s("XteD3uf"),s("DNaZxvn");var i=s("84yo5bY"),r=s.n(i),n=s("smZuR9W"),a=s("37TQ/RL"),o=s("pKdT8YG"),l=(s("cuuvB4V"),s("Imk573c")),c=s("EdqsaKW"),u=s("VHUgtNR"),d=s("cbdMZik"),h=s("ce/Fr6d"),p=s("Svj32CV"),m=s("zzNunOx"),g=s("PstwrNQ"),f=s("cGbttel"),b=s("H+29DOL").O,y=s("oEgauXb").l;const w=e=>{let{initialState:t,reducer:s}=e;const[i,r]=n.useReducer(s,t),a=i.entity,o=n.useRef(i.isOpen),l=n.useRef(a.artistCredit.peek());return n.useEffect((()=>(a.artistCreditDispatch=r,()=>{a.artistCreditDispatch=null})),[a,r]),n.useEffect((()=>{const e=(0,h.Et)(i.names);(0,c.Gd)(e,l.current)||(l.current=e,a.artistCredit(e)),o.current!==i.isOpen&&(o.current=i.isOpen,!i.isOpen&&"track"===a.entityType&&i.changeMatchingTrackArtists&&a.medium.release.mediums().flatMap((e=>e.tracks())).forEach((function(t){t!==a&&i.initialArtistCreditString===(0,c.R2)(t.artistCredit.peek())&&t.artistCredit(e)})))}),[a,i.isOpen,i.names,i.changeMatchingTrackArtists,i.initialArtistCreditString]),n.useEffect((()=>{const e=a.artistCredit.subscribe((e=>{e!==l.current&&r({artistCredit:e,type:"set-names-from-artist-credit"})}));return()=>{e.dispose()}}),[a.artistCredit,r]),(0,f.jsx)(p.Ay,{dispatch:r,state:i})},v=e=>{let{artistCreditField:t,initialState:s}=e;return(0,f.jsxs)(g.A,{children:[(0,f.jsx)("label",{className:"required",htmlFor:"ac-source-single-artist",children:b(y("Artist"))}),(0,f.jsx)(w,{initialState:s,reducer:p.Ff}),t?(0,f.jsx)(m.A,{field:t}):null]})};function _(e){const{artist_credit:t,artist_credit_field:s}=(0,d.tr)().stash,i=u.A.getSourceEntityInstance()??{name:""};i.uniqueID="source",i.artistCredit=r().observable({...t??{},names:(t?.names??[]).map((e=>{let t=e.artist;return t.id||(t={...(0,l.L$)({name:e.name??""}),...e.artist}),{artist:t,joinPhrase:e.joinPhrase??"",name:e.name??""}}))});const n=(0,p.Ur)({activeUser:window.__MB__.$c.user,artistCredit:t,entity:i,formName:e,id:"source"}),c=document.getElementById("artist-credit-editor"),h=o.H(c);(0,a.flushSync)((()=>{h.render((0,f.jsx)(v,{artistCreditField:s,initialState:n}))}))}function T(){let e=!1,t=!1;const s=document.querySelector("#page form");s.addEventListener("change",(()=>{e=!0})),s.addEventListener("submit",(()=>{t=!0})),window.addEventListener("beforeunload",(i=>!t&&(!(!e&&!s.querySelector(["#relationship-editor .rel-add","#relationship-editor .rel-edit","#relationship-editor .rel-remove","#external-links-editor .rel-add","#external-links-editor .rel-edit","#external-links-editor .rel-remove"].join(", ")))&&(i.returnValue=y("All of your changes will be lost if you leave this page."),i.returnValue))))}},cJF07Nt:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s("zzNunOx"),r=s("PstwrNQ"),n=s("cGbttel"),a=s("8YlDuzw").A;const o=function(e){let{disabled:t,field:s,hasNoLabel:o=!0,hasNoMargin:l=!1,help:c,label:u,...d}=e;const h={};d.uncontrolled?h.defaultChecked=s.value:(h.onChange=d.onChange,h.checked=s.value);const p=a(c);return(0,n.jsxs)(r.A,{hasNoLabel:o,hasNoMargin:l,children:[(0,n.jsxs)("label",{className:"inline",children:[(0,n.jsx)("input",{"aria-describedby":p?`field-help-${s.id}`:null,disabled:t,id:"id-"+String(s.html_name),name:s.html_name,type:"checkbox",value:"1",...h})," ",u]}),(0,n.jsx)(i.A,{field:s}),p?(0,n.jsx)("div",{className:"form-help",id:`field-help-${s.id}`,children:c}):null]})}},cbdMZik:(e,t,s)=>{"use strict";s.d(t,{F_:()=>o,Rz:()=>l,pc:()=>a,tr:()=>n});var i=s("Imk573c"),r=s("Ui1Lssl").A;function n(){const e=a();return r(e,"Catalyst context not found in GLOBAL_JS_NAMESPACE"),e}function a(){return globalThis.__MB__?.$c}function o(){return n().stash.source_entity??null}function l(){let e=o();return r(e,"Source entity data not found in global Catalyst stash"),e.isNewEntity&&(e=("object"!=typeof e||null===e)&&"function"!=typeof e||"series"!==e.entityType?(0,i.tg)(e.entityType,{name:e.name??""}):(0,i.vu)({orderingTypeID:parseInt(e.orderingTypeID,10)||1})),e}},"ce/Fr6d":(e,t,s)=>{"use strict";s.d(t,{D2:()=>u,Et:()=>a,Wi:()=>o,mE:()=>c});s("60ocjtt"),s("6g1DHTE"),s("Kqb1L/m"),s("70YSc4n"),s("NKd1yOY"),s("gdf1lGT"),s("LCA85s6");function i(e){return e.artist.selectedItem?.entity??null}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i(e);return e.name||(t?.name??"")}function n(e){return e.reduce(((e,t)=>{if(t.removed)return e;const s=i(t);return e.push({artist:s,joinPhrase:t.joinPhrase,name:r(t,s)}),e}),[])}function a(e){return{names:n(e)}}function o(e){return{names:n(e).filter((e=>null!=e.artist))}}const l=(e,t)=>e+(t.removed?"":r(t)+(t.joinPhrase??"")),c=e=>e.reduce(l,"");function u(e){return e.length>0&&e.every((e=>null!=i(e)?.id))}},cuuvB4V:(e,t,s)=>{"use strict";s.d(t,{A:()=>I});s("6g1DHTE"),s("70YSc4n"),s("DNaZxvn");var i=s("84yo5bY"),r=s.n(i),n=s("Gfg8pR3"),a=s("WN/X9IS");function o(e){return"LC "+(0,a.pN)(e,6)}var l=s("fXSuJi/"),c=s("bOl/bpb"),u=s("8alVwqN"),d=s("+5o7Rtt"),h=s("73Tm4xF"),p=s("B21npvo"),m=s("xNKEMJr"),g=s("cbdMZik"),f=s("9oisN5V"),b=s("vJ/3APv"),y=s("genvjY3"),w=s("LCA85s6"),v=s("EdqsaKW"),_=s("52XjgTZ"),T=s("VHUgtNR"),k=s("cGbttel"),x=s("H+29DOL").O,A=s("HkNzj3j").l,E=s("SKGBikk").l;!function(){class e{constructor(e){Object.assign(this,e),this.name||=""}toJSON(){const e={};for(const t in this)s(e,this[t],t);return e}renderArtistCredit(e){return e=r().unwrap(e),n.qV((0,k.jsx)(u.A,{artistCredit:e,target:"_blank"}))}isCompleteArtistCredit(e){return e=r().unwrap(e),(0,v.ch)(e)}entityTypeLabel(){return x(w.ENTITY_NAMES[this.entityType]())}html(){return n.qV(this.reactElement(...arguments))}}const t=/^(boolean|number|string)$/;function s(e,s,i){for(;r().isObservable(s);)s=s();s&&!t.test(typeof s)||(e[i]=s)}T.A.entity=function(t,s){if(!t)return null;if(t instanceof e)return t;s=(s||t.entityType||"").replace("-","_");const i=H[s];if(!i)throw"Unknown type of entity: "+s;let r=T.A.entityCache[t.gid];return"url"===s&&(r||=T.A.entityCache[t.name]),r||(r=new i(t),t.gid&&(T.A.entityCache[t.gid]=r),t.name&&"url"===s&&(T.A.entityCache[t.name]=r)),r},T.A._sourceEntityInstance=null,T.A.getSourceEntityInstance=function(){return null!=T.A._sourceEntityInstance||(T.A._sourceEntityInstance=T.A.entity((0,g.F_)())),T.A._sourceEntityInstance},T.A.entityCache={};class i extends e{constructor(e){super(e),this.relationships=r().observableArray([]),e.artistCredit&&(this.artistCredit=(0,b.v)(e.artistCredit)),this._afterCoreEntityCtor&&this._afterCoreEntityCtor(e)}reactElement(e){const t=this.toJSON();return this.gid?(e&&void 0!==e.creditedAs&&(t.creditedAs=e.creditedAs,delete e.creditedAs),(0,k.jsx)(p.A,{content:t.creditedAs,entity:{comment:t.comment,editsPending:t.editsPending,entityType:t.entityType,gid:t.gid,href_url:t.href_url,iso_3166_1_codes:t.iso_3166_1_codes,name:t.name,pretty_name:t.pretty_name,sort_name:t.sort_name,typeID:t.typeID,video:t.video},...e})):t.name}toJSON(){const e=super.toJSON();return this.artistCredit&&(e.artistCredit=r().unwrap(this.artistCredit)),e}canTakeName(e){return(e=(0,f.A)(e))&&e!==r().unwrap(this.name)}canTakeArtist(e){return e=r().unwrap(e),(0,v.ch)(e)&&!this.isArtistCreditEqual(e)}isArtistCreditEqual(e){return e=r().unwrap(e),(0,v.Gd)(r().unwrap(this.artistCredit),e)}}class a extends i{reactElement(){return(0,k.jsx)(h.A,{editor:{entityType:"editor",name:this.name}})}}a.prototype.entityType="editor";class I extends i{}I.prototype.entityType="artist";class N extends i{}N.prototype.entityType="event";class j extends i{}j.prototype.entityType="genre";class S extends i{}S.prototype.entityType="instrument";class C extends i{selectionMessage(){const e=this.label_code;return n.qV((0,k.jsxs)(k.Fragment,{children:[A("You selected {label}.",{label:this.reactElement({target:"_blank"})}),e?" "+(0,m.x)(E("Label code: {code}",{code:o(e)})):null]}))}}C.prototype.entityType="label";class R extends i{toJSON(){return Object.assign(super.toJSON(),{containment:this.containment||[],iso_3166_1_codes:this.iso_3166_1_codes||[],iso_3166_2_codes:this.iso_3166_2_codes||[],iso_3166_3_codes:this.iso_3166_3_codes||[]})}selectionMessage(){return n.qV(A("You selected {area}.",{area:(0,k.jsx)(d.A,{entity:this.toJSON(),target:"_blank"})}))}}R.prototype.entityType="area";class L extends i{}L.prototype.entityType="place";class P extends i{constructor(e){if(super(e),this.formattedLength=(0,y.A)(e.length),this.appearsOn){const e=this.appearsOn.entityType||"release_group";this.appearsOn.results=this.appearsOn.results.map((function(t){return T.A.entity(t,e)}))}this.artistCredit||(this.artistCredit={names:[]}),this.relatedArtists=(0,l.A)(e.relationships),this.isProbablyClassical=(0,c.A)(e),this._afterRecordingCtor&&this._afterRecordingCtor(e)}toJSON(){return Object.assign(super.toJSON(),{appearsOn:this.appearsOn,isrcs:this.isrcs})}}P.prototype.entityType="recording";class $ extends i{constructor(e){super(e),e.releaseGroup&&(this.releaseGroup=T.A.entity(e.releaseGroup,"release_group")),e.mediums&&(this.mediums=e.mediums.map((e=>new W(e)))),this.relatedArtists=(0,l.A)(e.relationships),this.isProbablyClassical=(0,c.A)(e)}toJSON(){const e=super.toJSON();return Array.isArray(this.events)&&(e.events=(0,b.t)(this.events)),Array.isArray(this.labels)&&(e.labels=(0,b.t)(this.labels)),e}}$.prototype.entityType="release";class D extends i{selectionMessage(){return n.qV(A("You selected {releasegroup}.",{releasegroup:(0,k.jsx)(d.A,{entity:this,target:"_blank"})}))}}D.prototype.entityType="release_group";class O extends i{constructor(e){super(e),this.type=r().observable(e.type),this.typeID=r().observable(e.type&&e.type.id),this.orderingTypeID=r().observable(e.orderingTypeID)}getSeriesItems(e){const t=this.type();if(!t)return[];const s=w.PART_OF_SERIES_LINK_TYPES[t.item_entity_type],i=_.Ay.link_type[s].id;return this.displayableRelationships(e)().filter((function(e){return e.linkTypeID()===i}))}toJSON(){return Object.assign(super.toJSON(),{orderingTypeID:this.orderingTypeID,type:this.type(),typeID:this.typeID})}}O.prototype.entityType="series";class z extends i{constructor(e){super(e),this.formattedLength=(0,y.A)(this.length),e.recording&&(this.recording=T.A.entity(e.recording,"recording"))}reactElement(e){const t=this.recording;if(!t)return super.reactElement(e);const s={comment:t.comment,editsPending:t.editsPending,entityType:"recording",gid:t.gid,name:t.name,video:t.video};return(0,k.jsx)(p.A,{content:this.name,entity:s,...e})}}z.prototype.entityType="track";class Y extends i{}Y.prototype.entityType="url";class U extends i{toJSON(){return Object.assign(super.toJSON(),{artists:this.artists})}}U.prototype.entityType="work";class W extends e{constructor(e){super(e),this.tracks=e.tracks?e.tracks.map((e=>new z(e))):[]}}T.A.entity.Area=R,T.A.entity.Artist=I,T.A.entity.CoreEntity=i,T.A.entity.Editor=a,T.A.entity.Entity=e,T.A.entity.Event=N,T.A.entity.Instrument=S,T.A.entity.Label=C,T.A.entity.Medium=W,T.A.entity.Place=L,T.A.entity.Recording=P,T.A.entity.Release=$,T.A.entity.ReleaseGroup=D,T.A.entity.Series=O,T.A.entity.Track=z,T.A.entity.URL=Y,T.A.entity.Work=U;const H={area:R,artist:I,editor:a,event:N,genre:j,instrument:S,label:C,place:L,recording:P,release:$,release_group:D,series:O,track:z,url:Y,work:U}}();const I=T.A.entity},"d/wSL5Q":(e,t,s)=>{"use strict";s.d(t,{A:()=>n,H:()=>a});var i=s("LCA85s6"),r=s("52XjgTZ");function n(e,t){return 1===e.orderable_direction&&!t||2===e.orderable_direction&&t}function a(e,t,s){const a=null==e?null:r.Ay.link_type[e];return!!a&&(n(a,s)&&!("series"===t.entityType&&t.orderingTypeID===i.SERIES_ORDERING_TYPE_AUTOMATIC))}},dL1OOKd:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});s("PkUg7wA");var i=s("+oFf+Pk"),r=s.n(i),n=s("hPBADqi"),a=s("iVi/iOV");const o=!r()&&"undefined"!=typeof document&&"undefined"!=typeof window&&"file:"!==window.location.protocol;const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o?function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e){const s=(0,a.parse)(e);if(Object.hasOwn(s,t))return s[t]}return s}(document.cookie,e,t):Object.hasOwn(n.A,e)?n.A[e]:t}},dMORH1x:(e,t,s)=>{"use strict";function i(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const i=(e.get(t)??0)+s;return e.set(t,i),i}s.d(t,{NF:()=>n,_P:()=>i,c7:()=>a});let r=1;function n(){return r++}function a(){return-1*n()}},"e3+xVn3":(e,t,s)=>{"use strict";s.d(t,{A:()=>r,b:()=>i});const i=2147483647;function r(e){return"number"==typeof e&&e>0&&e<=i}},e9zNTEF:(e,t,s)=>{"use strict";s.d(t,{y:()=>n});s("6g1DHTE"),s("70YSc4n"),s("AXfG3Yq");var i=s("EVdnBjI"),r=s.n(i);function n(e,t){let s=null;r()(t||"body").on("click",e,(function(t){const i=t.currentTarget,n=r()(e);if(t.shiftKey&&s&&s!==i){const e=n.index(s),t=n.index(i),a=r()(i).is(":checked");e>t?n.slice(t,e+1).filter(a?":not(:checked)":":checked").trigger("click"):t>e&&n.slice(e,t+1).filter(a?":not(:checked)":":checked").trigger("click")}s=i}))}r()((function(){r()("table.tbl").each((function(){!function(e){const t=r()(e),s=t.find('td input[type="checkbox"]'),i=t.find('th input[type="checkbox"]');i.toggle(s.length>0),i.change((function(){const e=r()(this);s.prop("checked",e.prop("checked"))})),n('td input[type="checkbox"]',t)}(this)}))}))},ee7wMFS:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("smZuR9W");function r(e,t,s,r){i.useEffect((()=>{const i=document.getElementById(t);function n(t){let i=t.target.value;r&&(i=r(i)),s({changes:{name:i},entityType:e,type:"update-entity"})}return i?.addEventListener("input",n),function(){i?.removeEventListener("input",n)}}),[e,t,s,r])}},"fXSuJi/":(e,t,s)=>{"use strict";s.d(t,{A:()=>n});s("60ocjtt"),s("6g1DHTE"),s("NKd1yOY");var i=s("84yo5bY"),r=s.n(i);function n(e){return e?r().unwrap(e).reduce(((e,t)=>("artist"===t.target.entityType&&e.push(t.target),e)),[]):[]}},fnTvsuF:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s("1nSlf59"),r=s("CJBfytL"),n=s("d/wSL5Q"),a=s("KmaOXyL"),o=s("SmhBGrr");const l=new WeakMap;function c(e,t){let s=l.get(e);const c=t?1:0;if(null!=s&&null!=s[c])return s[c];const u=(0,o.A)(e);if(!u)return"";null==s&&(s=[null,null]);const d=(0,a.B3)(u,i.A(e.attributes??r.A),t?"reverse_link_phrase":"link_phrase",(0,n.H)(u.id,t?e.entity1:e.entity0,t));return s[c]=d,l.set(e,s),d}},"g0LW/UV":(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("cGbttel");const r=function(e){return null!=e&&""!==e?(0,i.jsx)("bdi",{children:e}):""}},genvjY3:(e,t,s)=>{"use strict";function i(e){if(null==e||0===e)return arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?:??";if(e<1e3)return e+" ms";let t=Math.round(e/1e3);const s=Math.floor(t/3600);t%=3600;const i=Math.floor(t/60);t%=60;let r=("00"+t).slice(-2);return r=s>0?s+":"+("00"+i).slice(-2)+":"+r:i+":"+r,r}s.d(t,{A:()=>i})},"gklH9/w":(e,t,s)=>{"use strict";s.d(t,{H:()=>n,s:()=>a});s("60ocjtt"),s("6g1DHTE"),s("AXfG3Yq");var i=s("37TQ/RL"),r=s("YvcIHMv");function n(e,t){const s=(0,r.Kr)(e);return!0===t?s.find((e=>"A"!==e.nodeName))??null:s.length?s[0]:null}function a(e,t){let s=document.getElementById(e);const r=[];let a=s;for(;a;){const e=a.parentElement;e&&e instanceof HTMLElement&&r.push(e),a=e}if((0,i.flushSync)(t),s=document.getElementById(e),s)s!==document.activeElement&&s.focus();else for(const e of r)if(e.isConnected){const t=n(e,!1);if(t){t.focus();break}}}},"gm/df1j":(e,t,s)=>{"use strict";s.d(t,{FZ:()=>n,J$:()=>r,zT:()=>a});var i=s("GX9EKLY");const r=i.Yi("statistics"),n=i._J("statistics"),a=i.A3("statistics")},gooNfJx:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>T,H0:()=>f,Xb:()=>y});s("6g1DHTE"),s("70YSc4n"),s("DNaZxvn"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("oEgauXb"),r=s("cbdMZik"),n=s("9oisN5V"),a=s("dMORH1x"),o=s("2Wx6B6n"),l=s("WN/X9IS"),c=s("8YlDuzw").A,u=s("Ui1Lssl").A;const d=new WeakMap,h=new WeakMap;function p(e){const t=(0,r.pc)(),s=t?t.stash.current_language.replace("_","-"):"en";return(0,n.A)(e).toLocaleLowerCase(s)}const m=6;function*g(e){const t=function(e){return(0,l.sl)(e).toLowerCase()}(e),s=t.length;for(let e=0;e<s;e++){let i="";for(let r=0;r<m&&e<s-r;r++)i+=t[e+r],yield i}}function f(e){return[(0,i.WQ)(e.name)]}const b=()=>new Set;function y(e,t){if(d.has(e))return;const s=new Map;for(const i of e)if("option"===i.type&&!0!==i.disabled){const e=t(i).map(p).filter(c);u(e.length,"No search terms were returned for indexing"),h.set(i,e);for(const t of e)for(const e of g(t))(0,o.A)(s,e,b).add(i)}d.set(e,s)}function w(e){const t={...e[0]};return delete t.level,t}function v(e,t){return t[1]-e[1]}function _(e,t){const s=e[0],i=h.get(s);u(null!=i,"The item to be weighted has not been indexed");const r=e[1];return Math.max(...i.map((e=>{const s=e.length,i=p(t),n=e.indexOf(i);let a=r;return n>=0&&(a*=1+(s-n)/s,a*=1+i.length/s*2),a})))}function T(e,t){if(!t)return e;const s=d.get(e);u(s,"The items to be searched have not been indexed");const i=new Map,r=(e,t)=>{for(const s of t)(0,a._P)(i,s,e)};for(const e of g(t)){const t=s.get(e);t&&r(e.length,t)}let n=Array.from(i.entries()).map((e=>[e[0],_(e,t)])).sort(v);if(n.length){const e=n[0][1];n=n.filter((t=>t[1]/e>=.25))}return n.map(w)}},gtppAbj:(e,t,s)=>{"use strict";s.d(t,{uJ:()=>c,Pz:()=>o,y1:()=>l});const i=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]];var r=s("nHYa21o"),n=s("8YlDuzw").A,a=s("8YlDuzw").I;function o(e){let{year:t,month:s,day:a}=e;return t="number"==typeof t?t:n(t)?(0,r.A)(t):null,s="number"==typeof s?s:n(s)?(0,r.A)(s):null,a="number"==typeof a?a:n(a)?(0,r.A)(a):null,!(isNaN(t)||isNaN(s)||isNaN(a))&&(!(null!==t&&t<1)&&((null===s||!(s<1||s>12))&&(null===a||!(a<1||a>31||null!=t&&null!=s&&a>(o=t,l=s,i[function(e){return!(e%400&&(!(e%100)||e%4))}(o)?1:0][l-1])))));var o,l}function l(e){return null===e||""===e||4===e.length}function c(e,t){if(!o(e)||!o(t))return!1;const{year:s,month:i,day:r}=e,{year:n,month:l,day:c}=t;return!!(a(s)||a(n)||Number(s)<Number(n))||!(Number(n)<Number(s))&&(!!(a(i)||a(l)||Number(i)<Number(l))||!(Number(l)<Number(i))&&(!!(a(r)||a(c)||Number(r)<Number(c))||!(Number(c)<Number(r))))}},"h+Vp9e2":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r,_:()=>n});s("60ocjtt");var i=s("l8ZfC6+");function r(e,t){const s=e.read(),r=s.last_index+1;e.set("last_index",r).get("field").write().push((0,i.Fv)(s.html_name+"."+String(r),t))}function n(e,t){const s=e.read(),r=s.last_index+1,n=s.html_name+"."+String(r);e.set("last_index",r).get("field").write().push((0,i.tN)(n,t))}},hJIxiGq:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const i=/([.*+?^=!:${}()|[\]/\\])/g;function r(e){return e.replace(i,"\\$1")}},hPBADqi:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});const i={}},hUx2q3D:(e,t,s)=>{"use strict";function i(e){return"English"===e||"French"===e||"Sentence"===e||"Turkish"===e}s.d(t,{A:()=>i})},hpDWElX:(e,t,s)=>{"use strict";s.d(t,{Lm:()=>_,S:()=>T,Ay:()=>D,V_:()=>$});s("60ocjtt");var i=s("CJBfytL"),r=s("YwtI3iV"),n=s("pu3FCox"),a=s("oEgauXb"),o=s("93z9/8f"),l=s("2Wx6B6n"),c=s("9aqWJYz"),u=s("ygekcr1"),d=s("osVXT12"),h=s("fnTvsuF"),p=(s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO"),s("jKEtJbC")),m=s("6Jrjhm9"),g=s("kavM0dI"),f=s("VVNXxwy"),b=s("XpzAzYy"),y=s("VzgsghB"),w=s("Ui1Lssl").A;function v(e,t){return(0,y.NN)(e,t).next().done}const _=1,T=2;function k(e,t){return(0,a.UD)(e.textPhrase,t.textPhrase)}function x(e,t){return e.linkTypeId-t.typeId||(e.backward?1:0)-(t.backward?1:0)}function A(e,t){return(0,o.K)(e.targetType,t[0])}function E(e,t){return(0,u.j8)(e.source,t)}const I=e=>C({relationships:i.A,textPhrase:e.textPhrase},e),N=e=>R({backward:e.backward,phraseGroups:i.A,typeId:e.linkTypeId},e),j=e=>L([e.targetType,i.A],e),S=e=>P([e.source,i.A],e),C=(e,t)=>{let s=e.relationships;const i=(0,d._V)(t.phraseGroupUpdates.backward);for(const e of t.updates){const t=e;if(("object"==typeof t&&null!==t||"function"==typeof t)&&"type"in t&&t.type===_){const e=t;s=r.Ay(s,e.relationship,i,e.onConflict??r.ET,r.gT)}else{if(("object"!=typeof t||null===t)&&"function"!=typeof t||!("type"in t)||t.type!==T)throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t);{const e=t,{relationship:r,throwIfNotExists:a}=e;s=(a?n.m4:n.GR)(s,r,i)}}}if(s===e.relationships)return e;const a=(0,c.GR)(e);return a.relationships=s,a},R=(e,t)=>{let s=e.phraseGroups;for(const e of t.relationshipUpdatesMap.values())s=r.Ay(s,e,k,C,e.createLinkPhraseGroup?I:r.zo);if(s===e.phraseGroups)return e;const i=(0,c.dg)(e);return i.phraseGroups=s,i},L=(e,t)=>{const[s,i]=e;let n=i;for(const e of t.linkPhraseGroupUpdatesMap.values())n=r.Ay(n,e,x,R,e.createLinkTypeGroup?N:r.zo);return n===i?e:[s,n]},P=(e,t)=>{const[s,i]=e;let n=i;for(const e of t.linkTypeGroupUpdatesMap.values())n=r.Ay(n,e,A,L,e.createTargetTypeGroup?j:r.zo);return n===i?e:[s,n]};function $(e,t){return e<<1|(t?1:0)}function D(e,t){const s=new Map,a="release"===e.entity.entityType?[]:null;let o=!1;for(const e of t){const t=e.relationship,i=t.entity0,r=t.entity1;for(const[n,a,o]of[[i,r.entityType,!1],[r,i.entityType,!0]]){const i=(0,l.A)(s,n.entityType+String(n.id),(()=>({createSourceGroup:!1,linkTypeGroupUpdatesMap:new Map,source:n}))),r=(0,l.A)(i.linkTypeGroupUpdatesMap,a,(()=>({createTargetTypeGroup:!1,linkPhraseGroupUpdatesMap:new Map,targetType:a,targetTypeGroupUpdates:i}))),c=t.linkTypeID??0,u=(0,l.A)(r.linkPhraseGroupUpdatesMap,$(c,o),(()=>({backward:o,createLinkTypeGroup:!1,linkTypeGroupUpdates:r,linkTypeId:c,relationshipUpdatesMap:new Map}))),d=(0,h.A)(t,o),p=(0,l.A)(u.relationshipUpdatesMap,d,(()=>({createLinkPhraseGroup:!1,phraseGroupUpdates:u,textPhrase:d,updates:[]})));p.updates.push(e),e.type===_&&(i.createSourceGroup=!0,r.createTargetTypeGroup=!0,u.createLinkTypeGroup=!0,p.createLinkPhraseGroup=!0)}a&&a.push(e),o=!0}for(const t of s.values())e.relationshipsBySource=r.Ay(e.relationshipsBySource,t,E,P,t.createSourceGroup?S:r.zo);return"release"===e.entity.entityType&&a?.length&&function(e,t){w("release"===e.entity.entityType);let s=i.A;for(const i of t){const t=i.relationship,r=t.entity0,n=t.entity1;switch(r.entityType){case"recording":s=p.Sg(s,r,u.um);break;case"work":for(const t of(0,y.NN)(e,r))s=p.Sg(s,t,u.um)}switch(n.entityType){case"recording":s=p.Sg(s,n,u.um);break;case"work":for(const t of(0,y.NN)(e,n))s=p.Sg(s,t,u.um)}}let a=i.A;(0,b.Ay)(e,m.A(s),(function(t){let s=t.relatedWorks;const o=(0,f.PK)(e.relationshipsBySource,t.recording),l=new Set;for(const t of(0,f.uT)(o,"work","entity1")){l.add(t.id);const n=s=>{const i=(0,f.PK)(e.relationshipsBySource,t);return i!==s.targetTypeGroups?{isSelected:s.isSelected,targetTypeGroups:i,work:s.work}:s};s=r.Ay(s,t,y.V,n,(()=>n({isSelected:!1,targetTypeGroups:i.A,work:t})))}for(const t of m.A(s))0!==t.targetTypeGroups.size&&l.has(t.work.id)||(s=n.Ay(s,t,u.N7),t.isSelected&&v(e,t.work)&&(a=p.Sg(a,t.work,u.Yq)));return o!==t.targetTypeGroups||s!==t.relatedWorks?{isSelected:t.isSelected,recording:t.recording,relatedWorks:s,targetTypeGroups:o}:t})),a.size&&(e.selectedWorks=g.A(e.selectedWorks,a,u.Yq))}(e,a),o}},iXHz6UZ:(e,t,s)=>{"use strict";var i=s("AsUdLGK"),r=s("smZuR9W"),n=s("KBzdQ9I"),a=s("p1f4iM1"),o=s("cGbttel"),l=s("oEgauXb").l;(0,s("KBzdQ9I").A)("div.commons-image",(function(e){let{cachedImage:t,entity:s}=e;const[n,c]=r.useState(t);return r.useEffect((()=>{null==t&&function(e,t){const s=(0,a.A)(e,"/commons-image");fetch(s).then((e=>e.json())).then((e=>{try{t(e.image)}catch(e){console.error(e),i.Cp(e)}})).catch(console.error)}(s,c)}),[s,t]),n?(0,o.jsxs)("div",{className:"picture",children:[(0,o.jsx)("img",{src:n.thumb_url}),(0,o.jsx)("br",{}),(0,o.jsx)("span",{className:"picture-note",children:(0,o.jsx)("a",{href:n.page_url,children:l("Image from Wikimedia Commons")})})]}):null}),n.X)},iYLrIsN:(e,t,s)=>{"use strict";var i=s("EVdnBjI"),r=s.n(i);r()((function(){r()("body").on("click",".ui-dialog",(function(e){e.stopPropagation()}))}))},jXceOIy:(e,t,s)=>{"use strict";s.d(t,{A:()=>a,i:()=>n});var i=s("cGbttel"),r=s("oEgauXb").l;function n(e){let{disabled:t,field:s,inputProps:n}=e;return(0,i.jsx)("div",{className:"row no-label",children:(0,i.jsx)("div",{className:"auto-editor",children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{className:"make-votable",disabled:t,name:s.html_name,type:"checkbox",value:"1",...n}),r("Make all edits votable.")]})})})}const a=function(e){let{children:t,childrenFirst:s=!1,disabled:a=!1,form:o,...l}=e;const c=o.field.make_votable.value,u={};return l.controlled?(u.checked=c,u.onChange=l.onChange):u.defaultChecked=c,(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n,{disabled:a,field:o.field.make_votable,inputProps:u}),(0,i.jsxs)("div",{className:"row no-label buttons",children:[s?t:null,(0,i.jsx)("button",{className:"submit positive",disabled:a,type:"submit",children:r("Enter edit")}),s?null:t]})]})}},jhqsV7L:(e,t,s)=>{"use strict";s.d(t,{A:()=>a,k:()=>o});var i=s("LCA85s6");const r=Object.freeze({begin_date:i.EMPTY_PARTIAL_DATE,end_date:i.EMPTY_PARTIAL_DATE,ended:!1});function n(e,t){return null==e?null==t?0:-1:null==t?1:e-t}function a(e,t){const s=e??i.EMPTY_PARTIAL_DATE,r=t??i.EMPTY_PARTIAL_DATE;return n(s.year,r.year)||n(s.month,r.month)||n(s.day,r.day)}function o(e,t){const s=e??r,a=t??r,o=s.begin_date??i.EMPTY_PARTIAL_DATE,l=a.begin_date??i.EMPTY_PARTIAL_DATE,c=s.end_date??i.EMPTY_PARTIAL_DATE,u=a.end_date??i.EMPTY_PARTIAL_DATE;return n(o.year,l.year)||n(c.year,u.year)||n(o.month,l.month)||n(c.month,u.month)||n(o.day,l.day)||n(c.day,u.day)||(s.ended?0:1)-(a.ended?0:1)}},jo8QszJ:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});s("60ocjtt"),s("6g1DHTE"),s("70YSc4n"),s("AXfG3Yq"),s("XteD3uf"),s("DNaZxvn"),s("gdf1lGT"),s("PkUg7wA");var i=s("ktc5u1E"),r=s.n(i),n=s("EVdnBjI"),a=s.n(n),o=s("84yo5bY"),l=s.n(o),c=s("37TQ/RL"),u=s("pKdT8YG"),d=(s("HR1eHg2"),s("A9mh/A7")),h=s("UrXtmnd"),p=s("LCA85s6"),m=s("cuuvB4V"),g=s("TZv5lnH"),f=s("RJljx4W"),b=s("EdqsaKW"),y=s("xrv16+S"),w=s("xNKEMJr"),v=s("9oisN5V"),_=s("uFqCnKH"),T=s("yUJAgX5"),k=s("genvjY3"),x=s("79P3cHQ"),A=s("vtQteBO"),E=s("JWGIi2B"),I=s("cGbttel"),N=s("oEgauXb").l,j=s("H+29DOL").O,S=s("SKGBikk").l,C=s("ahVNJfT").Xk,R=s("XhfEA1D").ZC,L=s("oEgauXb").lp;a().widget("mb.entitylookup",a().ui.autocomplete,{mbidRegex:/[a-f\d]{8}-[a-f\d]{4}-[a-f\d]{4}-[a-f\d]{4}-[a-f\d]{12}/,options:{minLength:1,allowEmpty:!0,showStatus:!0,focus:()=>!1,source(e,t){var s=this;e.term!=this.pageTerm&&(this._resetPage(),this.pageTerm=e.term),this.xhr&&this.xhr.abort(),this.xhr=a().ajax(this.options.lookupHook({url:"/ws/js/"+this.entity,data:{q:e.term,page:this.currentPage,direct:!this.indexedSearch},dataType:"json",success:a().proxy(this._lookupSuccess,this,t),error(){t([{label:N("An error occurred while searching. Click here to try again."),action:s._searchAgain.bind(s)},{label:s.indexedSearch?N("Try with direct search instead."):N("Try with indexed search instead."),action:s._searchAgain.bind(s,!0)}])}}))},resultHook:e=>e,lookupHook:e=>e},_create(){this._super(),this.currentResults=[],this.currentPage=1,this.totalPages=1,this.pageTerm="",this.indexedSearch=!0,this.changeEntity(this.options.entity),this.setObservable(this.options.currentSelection||l().observable({name:this._value()})),this.$input=this.element,this.$search=this.element.closest("span.autocomplete").find("img.search"),this.element.attr("placeholder",N("Type to search, or paste an MBID"));var e=this;this.options.open=function(t){e.menu.focus(t,e.menu.element.children("li:eq(0)"))},this.options.select=function(t,s){var i=e._dataToEntity(s.item);return e.currentSelection(i),e.element.trigger("lookup-performed",[i]),!1},this.element.on("input",(function(){var t=e.currentSelection.peek();t&&t.name!==this.value&&e.clearSelection(!1)})),this.element.on("blur",(function(){e.cancelSearch=!0;var t=e.currentSelection.peek();t&&t.name!==e._value()&&e.clear(!1)})),this.element.on("keyup focus click",(function(t){if(void 0===t.originalEvent)return;if("keyup"===t.type&&![8,40].includes(t.keyCode))return;const s=e.entityType(),i=this;(0,h.px)(s).then((t=>{!i.value&&t&&t.length&&!e.menu.active&&(e.term="",e._suggest([...t.map((e=>e.entity)),{label:N("Clear recent items"),action(){(0,h.DI)(s),e.clear()}}]))}))})),this.$search.on("click.mb",(function(){e.element.is(":enabled")&&(e.element.focus(),e._value()&&e._searchAgain())})),this.menu.element.on("click",(function(e){e.stopPropagation()}))},_dataToEntity(e){try{return this.options.entityConstructor?new this.options.entityConstructor(e):(0,m.A)(e,this.entity)}catch(t){return e}},_getAddEntityContainer(){let e=a()("#add-entity-dialog-container");return e.length||(e=a()("<div>").attr("id","add-entity-dialog-container").appendTo("body")),e},close(e){this._super(e),this._resetPage()},clear(e){this.clearSelection(e),this.close()},clearSelection(e){var t=e?"":this._value(),s=this.currentSelection.peek();s.id||s.gid?this.currentSelection(this._dataToEntity({name:t})):s.name!==t&&(s.name=t,this.currentSelection.notifySubscribers(s)),this.element.trigger("cleared",[e])},_resetPage(){this.currentPage=1,this.currentResults=[]},_searchAgain(e){e&&(this.indexedSearch=!this.indexedSearch),this._resetPage(),this.term=this._value(),this._search(this.term)},_showMore(){this.currentPage+=1,this._search(this._value())},setSelection(e){e||={};var t=l().unwrap(e.name)||"",s=Boolean(e.id||e.gid);if(this._value()!==t&&this._value(t),this.options.showStatus){var i=!(t||s||this.options.allowEmpty);this.element.toggleClass("error",i).toggleClass("lookup-performed",s)}this.term=t||"",this.selectedItem=e,s&&(0,h.Fi)({entity:"function"==typeof e.toJSON?e.toJSON():e,id:e.id,name:e.name,type:"option"})},setObservable(e){this._selectionSubscription&&this._selectionSubscription.dispose(),this.currentSelection=e,e&&(this._selectionSubscription=e.subscribe(this.setSelection,this),this.setSelection(e.peek()))},_searchTimeout(e){var t=this._value();if((0,x.A)(t))return clearTimeout(this.searching),void this.close();var s=t.match(this.mbidRegex);if(s)return clearTimeout(this.searching),void this._lookupMBID(s[0]);var i=this.term;this.menu.element.is(":visible")&&(t=(0,v.A)(t),i=(0,v.A)(i)),i!==t&&this.completedTerm!==t&&(clearTimeout(this.searching),this.completedTerm=i,this.searching=this._delay((function(){delete this.completedTerm,this.selectedItem=null,this.search(null,e)}),this.options.delay))},_lookupMBID(e){var t=this;this.close(),this.xhr&&this.xhr.abort(),this.xhr=a().ajax({url:"/ws/js/entity/"+e,dataType:"json",success(e){var s=t.entity.replace("-","_");if(e.entityType!==s){var i=t.options.setEntity;if(!i||!1===i(e.entityType))return void t.clear()}t.options.select(null,{item:e})},error:this.clear.bind(this)})},_lookupSuccess(e,t){var s=this,i=(0,y.HV)(t),r=this.currentResults.length;t=this.options.resultHook(t.slice(0,-1));var n=this.currentResults=this.currentResults.filter((function(e){return!e.action}));n.push(...t),this.currentPage=parseInt(i.current,10),this.totalPages=parseInt(i.pages,10),0===n.length&&n.push({label:"("+N("No results")+")",action:this.close.bind(this)}),this.currentPage<this.totalPages&&n.push({label:N("Show more..."),action:this._showMore.bind(this)}),n.push({label:this.indexedSearch?N("Not found? Try again with direct search."):N("Slow? Switch back to indexed search."),action:this._searchAgain.bind(this,!0)});const a=this.entity.replace("-","_"),o=window===window.top,l=window.__MB__?.$c.user;let h=!1;if(o&&(h="area"===a?(0,E.Tu)(l):"instrument"!==a||(0,E.CD)(l)),h&&d.e[a]){const e=d.e[a]();n.push({label:e,action(){const e=s._getAddEntityContainer()[0];let t=null;const i=()=>{t&&(t.unmount(),t=null),s.element.focus()};t=u.H(e),(0,c.flushSync)((()=>{t.render((0,I.jsx)(d.A,{callback:e=>{s.options.select(null,{item:e}),i()},close:i,entityType:a,name:s._value()}))}))}})}e(n),this._delay((function(){var e=this.menu,t=e.element;e.active&&e.active.children("a").removeClass("ui-state-focus");var s=e.active=t.children("li:eq("+r+")");s.children("a").addClass("ui-state-focus"),this.currentPage>1&&t.scrollTop(s.position().top+t.scrollTop())}))},_renderAction:(e,t)=>a()("<li>").css("text-align","center").append(a()("<a>").text(t.label)).appendTo(e),_renderItem(e,t){if(t.action)return this._renderAction(e,t);var s=P[this.entity]?this.entity:"generic";return P[s](e,t)},changeEntity(e){this.entity=e.replace("_","-"),"event"===e&&(this.indexedSearch=!1)},entityType(){return this.entity.replace("-","_")}}),a().widget("ui.menu",a().ui.menu,{_selectAction(e){var t=(this.active||a()(e.target).closest(".ui-menu-item")).data("ui-autocomplete-item");return!t||!a().isFunction(t.action)||(t.action(),e.stopPropagation(),e.preventDefault(),!1)},_create(){this._super(),this._on({"click .ui-menu-item > a":this._selectAction})},select(e){this._selectAction(e)&&this._super(e),this.mouseHandled=!1}});const P={generic(e,t){var s,i=a()("<a>").text(t.name),n=[];return t.primaryAlias&&t.primaryAlias!=t.name&&n.push(t.primaryAlias),t.sort_name&&(s=t.name,/[^\u0000-\u02ff\u1E00-\u1EFF\u2000-\u207F]/.test(s))&&t.sort_name!=t.name&&!t.primaryAlias&&n.push(t.sort_name),t.comment&&n.push(t.comment),n.length&&i.append(' <span class="autocomplete-comment">'+r().escape((0,w.x)((0,g.n)(n)))+"</span>"),a()("<li>").append(i).appendTo(e)},recording(e,t){var s=a()("<a>").text(t.name);if(t.length&&s.prepend('<span class="autocomplete-length">'+(0,k.A)(t.length)+"</span>"),t.comment&&s.append('<span class="autocomplete-comment">'+r().escape((0,w.x)(t.comment))+"</span>"),t.video){const e=r().escape(N("This recording is a video"));s.prepend(a()(`<span class="video" title="${e}"></span>`))}if(s.append('<br /><span class="autocomplete-comment">by '+r().escape(t.artist)+"</span>"),t.appearsOn&&t.appearsOn.hits>0){var i=[];a().each(t.appearsOn.results,(function(e,t){i.push(t.name)})),t.appearsOn.hits>t.appearsOn.results.length&&i.push("..."),s.append('<br /><span class="autocomplete-appears">'+r().escape(j(N("appears on")))+" "+r().escape((0,g.n)(i))+"</span>")}else t.appearsOn&&0===t.appearsOn.hits&&s.append('<br /><span class="autocomplete-appears">'+r().escape(N("standalone recording"))+"</span>");return t.isrcs&&t.isrcs.length&&s.append('<br /><span class="autocomplete-isrcs">'+r().escape(j(N("ISRCs")))+" "+r().escape((0,g.n)(t.isrcs.map((e=>e.isrc))))+"</span>"),a()("<li>").append(s).appendTo(e)},release(e,t){var s=this.generic(e,t),i=s.children("a");if(D(i,r().escape((0,b.R2)(t.artistCredit))),t.events&&t.events.forEach((function(e){var t=e.country,s="";if(t){const e=(0,A.A)(t);s=`<span class="flag flag-${e}"><abbr title="${t.name}">${e}</abbr></span>`}const r=(0,_.A)(e.date);D(i,r+(s?$(s,r):""))})),t.labels)for(const[e,s]of(0,y.$z)(t.labels,O)){const t=(0,y.Kc)(s,z).sort();if(t.length>2)D(i,e+$((0,y.$1)(t)+" … "+(0,y.HV)(t),e));else for(const e of s){const t=O(e);D(i,t+$(z(e),t))}}return t.barcode&&D(i,t.barcode),s},"release-group"(e,t){var s=a()("<a>").text(t.name);return t.firstReleaseDate&&s.append('<span class="autocomplete-comment">'+(0,w.x)(t.firstReleaseDate)+"</span>"),t.comment&&s.append('<span class="autocomplete-comment">'+r().escape((0,w.x)(t.comment))+"</span>"),t.typeName?s.append('<br /><span class="autocomplete-comment">'+r().escape(S("{release_group_type} by {artist}",{artist:t.artist,release_group_type:t.l_type_name}))+"</span>"):s.append('<br /><span class="autocomplete-comment">'+r().escape(S("Release group by {artist}",{artist:t.artist}))+"</span>"),a()("<li>").append(s).appendTo(e)},series(e,t){var s=a()("<a>").text(t.name);return t.comment&&s.append('<span class="autocomplete-comment">'+r().escape((0,w.x)(t.comment))+"</span>"),t.type&&s.append(' <span class="autocomplete-comment">'+r().escape((0,w.x)(C(t.type.name,"series_type")))+"</span>"),a()("<li>").append(s).appendTo(e)},work(e,t){var s=a()("<a>").text(t.name),i=[];function n(e,t){if(t&&t.hits>0){var i=t.results;t.hits>i.length&&i.push("..."),s.append('<br /><span class="autocomplete-comment">'+e+": "+r().escape((0,g.n)(i))+"</span>")}}return t.languages&&t.languages.length&&s.prepend('<span class="autocomplete-language">'+r().escape((0,g.n)(t.languages.map((e=>(0,f.A)(e.language,!0)))))+"</span>"),t.primaryAlias&&t.primaryAlias!=t.name&&i.push(t.primaryAlias),t.comment&&i.push(t.comment),i.length&&s.append(' <span class="autocomplete-comment">'+r().escape((0,w.x)((0,g.n)(i)))+"</span>"),t.typeName&&s.append('<br /><span class="autocomplete-comment">'+r().escape(j(N("Type"))+" "+C(t.typeName,"work_type"))+"</span>"),t.related_artists&&(n(N("Authors"),t.related_artists.authors),n(N("Artists"),t.related_artists.artists)),a()("<li>").append(s).appendTo(e)},area(e,t){var s=a()("<a>").text(t.name);if(t.comment&&s.append('<span class="autocomplete-comment">'+r().escape((0,w.x)(t.comment))+"</span>"),t.typeName||t.containment&&t.containment.length){var i=[];t.typeName&&i.push(C(t.typeName,"area_type")),t.containment&&t.containment.length&&i.push(Y(t)),s.append('<br /><span class="autocomplete-comment">'+r().escape((0,g.n)(i))+"</span>")}return a()("<li>").append(s).appendTo(e)},place(e,t){var s=a()("<a>").text(t.name),i=[];t.primaryAlias&&t.primaryAlias!=t.name&&i.push(t.primaryAlias),t.comment&&i.push(t.comment),i.length&&s.append(' <span class="autocomplete-comment">'+r().escape((0,w.x)((0,g.n)(i)))+"</span>");var n=t.area;if(t.typeName||n){var o=[];t.typeName&&o.push(C(t.typeName,"place_type")),n&&(o.push(n.name),n.containment&&n.containment.length&&o.push(Y(n))),s.append('<br /><span class="autocomplete-comment">'+r().escape((0,g.n)(o))+"</span>")}return a()("<li>").append(s).appendTo(e)},instrument(e,t){var s=a()("<a>").text(t.name),i=[];return t.primaryAlias&&t.primaryAlias!=t.name&&i.push(t.primaryAlias),t.comment&&i.push(t.comment),t.typeName&&i.push(C(t.typeName,"instrument_type")),i.length&&s.append(' <span class="autocomplete-comment">'+r().escape((0,w.x)((0,g.n)(i)))+"</span>"),t.description&&s.append('<br /><span class="autocomplete-comment">'+r().escape(a()("<div/>").html(R(t.description)).text())+"</span>"),a()("<li>").append(s).appendTo(e)},event(e,t){var s=a()("<a>").text(t.name),i=[];function n(e,t){if(t&&t.hits>0){var i=t.results;t.hits>i.length&&i.push("..."),s.append('<br /><span class="autocomplete-comment">'+e+": "+r().escape((0,g.n)(i))+"</span>")}}return t.primaryAlias&&t.primaryAlias!=t.name&&i.push(t.primaryAlias),t.comment&&i.push(t.comment),i.length&&s.append(' <span class="autocomplete-comment">'+r().escape((0,w.x)((0,g.n)(i)))+"</span>"),t.typeName&&s.append(' <span class="autocomplete-comment">'+r().escape((0,w.x)(C(t.typeName,"event_type")))+"</span>"),(t.begin_date||t.time)&&s.append('<br /><span class="autocomplete-comment">'+(t.begin_date?(0,T.A)(t)+" ":"")+(t.time?t.time:"")+"</span>"),t.related_entities&&(n(N("Performers"),t.related_entities.performers),n(L("Location","event location"),t.related_entities.places)),a()("<li>").append(s).appendTo(e)}};function $(e,t){return t?` (${e})`:e}function D(e,t){return e.append(`<br /><span class="autocomplete-comment">${t}</span>`)}function O(e){return e.label?e.label.name:""}function z(e){return e.catalogNumber||""}function Y(e){return e.containment?(0,g.n)(e.containment.map((e=>e.name))):""}function U(e){var t=e.inputs||a()(),s=e.input||t.find("input.name");e.entity||Object.keys(p.ENTITIES).some((function(s){return s=s.replace(/_/g,"-"),!!t.hasClass(s)&&(e.entity=s,!0)})),s.entitylookup(e);var i=s.data("mb-entitylookup");return i.currentSelection((0,m.A)({name:s.val(),id:t.find("input.id").val(),gid:t.find("input.gid").val()},e.entity)),i.currentSelection.subscribe((function(e){var s=t.find("input[type=hidden]").val("");for(const t in e)Object.hasOwn(e,t)&&s.filter("input."+t).val(e[t]).trigger("change")})),i}l().bindingHandlers.autocomplete={init(e,t){var s=t();a()(e).entitylookup(s).data("mb-entitylookup").menu.element[0].setAttribute("data-input-id",e.id)}}},kuYEmyQ:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>g,Ur:()=>p,WH:()=>m});var i=s("smZuR9W"),r=s("Vg37ZR/"),n=s("1OgwVw9"),a=s("zzNunOx"),o=s("cJF07Nt"),l=s("6xVzkbe"),c=s("UQkXO+Y"),u=s("l8ZfC6+"),d=s("cGbttel"),h=s("oEgauXb").l;function p(e){const{begin_date:t,end_date:s,ended:i}=e;return{field:(0,u.Kw)("period",{begin_date:(0,u.Kw)("period.begin_date",{day:(0,u.Fv)("period.begin_date.day",t?.day??null),month:(0,u.Fv)("period.begin_date.month",t?.month??null),year:(0,u.Fv)("period.begin_date.year",t?.year??null)}),end_date:(0,u.Kw)("period.end_date",{day:(0,u.Fv)("period.end_date.day",s?.day??null),month:(0,u.Fv)("period.end_date.month",s?.month??null),year:(0,u.Fv)("period.end_date.year",s?.year??null)}),ended:(0,u.Fv)("period.ended",i)}),result:{begin_date:t,end_date:s,ended:i}}}function m(e,t){const s={...e},i=e.field,r=(0,n.Ff)(s.field,t);s.field=r;const a=r.field.begin_date,o=r.field.end_date,l=r.field.ended.value,c=i.field.begin_date.field!==a.field,u=i.field.end_date.field!==o.field,d=i.field.ended.value!==l;if(c||u||d)a.errors.length||a.pendingErrors?.length||o.errors.length||o.pendingErrors?.length||(s.result={begin_date:c?(0,n.sm)(a):e.result.begin_date,end_date:u?(0,n.sm)(o):e.result.end_date,ended:l});else if(r===i)return e;return s}const g=i.memo((function(e){let{dispatch:t,isHelpVisible:s,state:i}=e;const u=(0,c.A)(t),p=i.field,{begin_date:m,end_date:g}=p.field,f=(0,n.sm)(g);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"section",children:(0,d.jsx)("label",{htmlFor:"id-"+m.field.year.html_name,children:h("Begin date")})}),(0,d.jsxs)("td",{className:"fields",children:[(0,d.jsx)(l.A,{dispatch:u.beginDateDispatch,field:m,yearInputRef:u.beginYearInputRef}),(0,d.jsx)("button",{className:"icon copy-date",onClick:u.handleDateCopy,title:h("Copy to end date"),type:"button"}),(0,d.jsx)(a.A,{field:m})]})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"section",children:(0,d.jsx)("label",{htmlFor:"id-"+g.field.year.html_name,children:h("End date")})}),(0,d.jsxs)("td",{className:"fields end-date",children:[(0,d.jsx)(l.A,{dispatch:u.endDateDispatch,field:g,yearInputRef:u.endYearInputRef}),(0,d.jsx)(a.A,{field:g}),(0,d.jsx)("br",{}),(0,d.jsx)(o.A,{disabled:(0,r.Z)(f),field:p.field.ended,hasNoLabel:!1,label:h("This relationship has ended."),onChange:u.handleEndedChange}),(0,d.jsx)(a.m,{errors:p.errors,hasHtmlErrors:!1})]})]}),s?(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{}),(0,d.jsx)("td",{children:(0,d.jsxs)("div",{className:"ar-descr",children:[(0,d.jsx)("p",{children:h("If you want to set the relationship as happening on one\n                    specific date, just set the same end date and start date.\n                    You can use the arrow button to copy the begin date to\n                    the end date.")}),(0,d.jsx)("p",{children:h("If you do not know the end date, but you know the\n                    relationship has ended and this seems like useful\n                    information to store (for example, if someone is no\n                    longer a member of a band), you can indicate it with the\n                    checkbox above.")})]})})]}):null]})}))},"l8ZfC6+":(e,t,s)=>{"use strict";s.d(t,{Fv:()=>a,Kw:()=>n,tN:()=>r});s("6g1DHTE"),s("DNaZxvn");let i=99999;function r(e,t){return{errors:[],field:Object.fromEntries(Object.entries(t).map((t=>{let[s,i]=t;return[s,a(e+"."+s,i)]}))),has_errors:!1,html_name:e,id:++i,type:"compound_field"}}function n(e,t){return{errors:[],field:t,has_errors:!1,html_name:e,id:++i,type:"compound_field"}}function a(e,t){return{errors:[],has_errors:!1,html_name:e,id:++i,type:"field",value:t}}},"lIm5/JO":(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s("AsUdLGK"),r=s("smZuR9W"),n=s("cGbttel");class a extends r.Component{static getDerivedStateFromError(e){return{errorMessage:e.message??String(e)}}constructor(e){super(e),this.state={errorMessage:""}}componentDidCatch(e,t){i.v4((function(s){s.setExtra("componentStack",t.componentStack),i.Cp(e)}))}render(){const e=this.state.errorMessage;return e?(0,n.jsx)("div",{className:"error",children:e}):this.props.children}}},ldVMy18:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("dMORH1x");function r(e){return e?.id??-(0,i.NF)()}},n4qWIJf:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});const i=s.p+"open_edits_for_entity-236c84b.svg";var r=s("p1f4iM1"),n=s("UIUB93B"),a=s("cGbttel"),o=s("8YlDuzw").A,l=s("HkNzj3j").l,c=s("oEgauXb").l;const u=function(e){let{entity:t}=e;const s=Boolean(t.editsPending),u=(0,r.A)(t,"/open_edits");return s&&o(u)?(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)(n.A,{content:l("This entity has {edits_link|open edits}.",{edits_link:u}),target:(0,a.jsx)("img",{alt:c("This entity has open edits."),className:"info",height:16,src:i,style:{verticalAlign:"middle"}})})]}):null}},nHYa21o:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});const i=/^[0-9]+$/;function r(e){return i.test(e)?parseInt(e,10):NaN}},"nXnm+DU":(e,t,s)=>{"use strict";s.d(t,{U:()=>N,A:()=>C});s("6g1DHTE"),s("AXfG3Yq"),s("DNaZxvn"),s("PkUg7wA");var i=s("ICHIme/"),r=s("AsUdLGK"),n=s("smZuR9W"),a=s("GXDjtXZ"),o=s("A9mh/A7"),l=s("LCA85s6");const c=new Map;function u(e,t,s,i){if("undefined"==typeof document)return;const r=function(e){const t=c.get(e);if(t)return t;const s=new Map;return c.set(e,s),document.addEventListener(e,(e=>{const t=e.target;if(t instanceof Node)for(const[i,r]of Array.from(s.entries())){if(null==r)continue;if(!document.contains(t))break;const s=i.current;s&&!s.contains(t)&&r(e)}})),s}(e);(0,n.useEffect)((()=>(r.set(t,s),()=>{r.delete(t),i&&i()})),[s,i,r,t])}var d=s("oEgauXb"),h=s("9oisN5V"),p=s("dL1OOKd"),m=s("79P3cHQ"),g=s("yEXEwX7"),f=s("ZwFjpDV"),b=s("IX2y8RG"),y=s("UrXtmnd"),w=s("QpbAoda"),v=s("gooNfJx"),_=s("cGbttel"),T=s("8YlDuzw").A,k=s("Ui1Lssl").A,x=s("oEgauXb").l,A=s("H+29DOL").O;function E(e){e.preventDefault()}const I=Object.freeze([]);function N(e){const{disabled:t=!1,entityType:s,extractSearchTerms:i=v.H0,inputValue:r,recentItemsKey:n,required:a=!1,selectedItem:o,staticItems:l,...c}=e,u=r??(null==o?null:(0,d.WQ)(o.name))??"";l&&(0,v.Xb)(l,i);let h=l??null;h&&T(u)&&(h=(0,v.Ay)(h,u));const m={disabled:t,entityType:s,error:0,highlightedIndex:-1,indexedSearch:!0,inputValue:u,isInputFocused:!1,isOpen:!1,items:I,page:1,pendingSearch:null,recentItems:null,recentItemsKey:n??s,required:a,results:h,selectedItem:o??null,showDescriptions:"false"!==(0,p.A)("show_autocomplete_descriptions"),staticItems:l,statusMessage:"",totalPages:null,...c};return m.items=(0,w.WF)(m),m.statusMessage=(0,w.r)(m),m}const j=n.memo((function(e){let{autocompleteId:t,dispatch:s,formatOptions:i,index:r,isHighlighted:n,isSelected:a,item:o,selectItem:l}=e;const c=`${t}-item-${o.id}`,u=!0===o.disabled,d=!0===o.separator;return(0,_.jsx)("li",{"aria-disabled":u?"true":"false","aria-selected":n?"true":"false",className:(u?"disabled ":"")+(n?"highlighted ":"")+(a?"selected ":"")+(d?"separator ":"")+(null!=o.level&&o.level>0?`level${o.level} `:"")+`${o.type}-item `,id:c,onClick:function(){u||l(o)},onMouseDown:E,onMouseOver:function(){!0!==o.disabled&&s({index:r,type:"highlight-index"})},role:"option",children:(0,b.A)(o,i)},o.id)}));const S=n.memo((function(e){const{dispatch:t,state:s}=e,{canChangeType:c,containerClass:d,disabled:p=!1,entityType:b,highlightedIndex:w,htmlName:v,id:E,inputChangeHook:I,inputRef:N,inputValue:S,isAddEntityDialogOpen:C=!1,isOpen:R,items:L,pendingSearch:P,selectedItem:$,staticItems:D,statusMessage:O}=s,z=n.useRef(null),Y=n.useRef(null),U=(0,i.SV)([Y,N]),W=n.useRef(null),H=n.useRef(null),M=n.useRef(null),B=n.useRef(!1),F=n.useRef(!1),G=w>=0?L[w]??null:null;function X(){H.current&&(clearTimeout(H.current),H.current=null)}const K=n.useCallback((()=>{z.current&&(z.current.abort(),z.current=null),X(),T(P)&&t(g.Od)}),[t,P]),V=n.useCallback((e=>{if(!(!0===e.disabled)){if(K(),"option"===e.type){const s=e.entity.entityType;if(s!==b){if(!c?.(s))return!1;t({entityType:s,type:"change-entity-type"})}}return t({item:e,type:"select-item"}),!0}return!1}),[K,b,c,t]);function q(e,s){const i=s.match(l.MBID_REGEXP);if(i){if(K(),D){const e=D.find((e=>"option"===e.type&&Object.hasOwn(e.entity,"gid")&&e.entity.gid===i[0]));return void(e&&V(e))}const e=new XMLHttpRequest;z.current=e,e.addEventListener("load",(()=>{if(z.current=null,200!==e.status)return void t(g.ix);const s=JSON.parse(e.responseText),i={entity:s,id:s.id,name:s.name,type:"option"};V(i)||t(g.hk)})),e.open("GET","/ws/js/entity/"+i[0].toLowerCase()),e.send()}else e!==s&&(K(),t({searchTerm:(0,h.A)(s),type:"search-after-timeout"}))}function Z(){L.length?t(g.q$):(0,m.A)(S)||q("",S)}function J(e){switch(e.key){case"ArrowDown":e.preventDefault(),R?(F.current=!0,t(g.No)):Z();break;case"ArrowUp":R&&(e.preventDefault(),F.current=!0,t(g.Lx));break;case"Enter":case"Tab":R&&G&&(e.preventDefault(),e.stopPropagation(),V(G));break;case"Escape":K(),R&&(e.preventDefault(),e.stopPropagation(),t(g.fr))}}const Q=n.useCallback((()=>{K(),R&&t(g.fr)}),[K,R,t]),ee=n.useCallback((()=>{t(g.Cm),setTimeout((function(){const e=Y.current;e&&e.focus()}),1)}),[t,Y]),te=n.useCallback((e=>{k(e?.entityType===b,"Wrong type of entity received");const s={entity:e,id:e.id,name:e.name,type:"option"};t({item:s,type:"select-item"}),ee()}),[ee,t,b]),se=G?`${E}-item-${G.id}`:null,ie=`${E}-label`,re=`${E}-menu`,ne=`${E}-status`;var ae;u("mouseup",M,Q,ae),n.useEffect((()=>{let e=!1;return(0,y.px)(b,s.recentItemsKey).then((i=>e?[]:(i!==s.recentItems&&setTimeout((()=>{t({items:i,type:"set-recent-items"})}),1),i))).catch((e=>{console.error(e),r.Cp(e)})),()=>{e=!0}}),[t,b,s.recentItemsKey,s.recentItems]),n.useEffect((()=>(D||!T(P)||H.current||z.current||(H.current=setTimeout((()=>{H.current=null;const e=(0,h.A)(P);T(e)&&e===(0,h.A)(S)&&function(e,t,s){const i=new XMLHttpRequest;s.current=i,i.addEventListener("load",(()=>{if(s.current=null,200!==i.status)return void e(g.oV);const t=JSON.parse(i.responseText),r=t.pop(),n=parseInt(r.current,10),a=parseInt(r.pages,10);e({entities:t,page:n,totalPages:a,type:"show-ws-results"})}));const r="editor"===t.entityType?"editor":a.A[t.entityType].url;if(null==r)throw new Error("Can't build a web service URL for "+JSON.stringify(t.entityType)+" entities.");const n="/ws/js/"+r+"/?q="+encodeURIComponent(t.inputValue||"")+"&page="+String(t.page)+"&direct="+(t.indexedSearch?"false":"true");i.open("GET",n),i.send()}(t,s,z)}),300)),X))),n.useEffect((()=>{const e=R&&!B.current||F.current;B.current=R,e&&(!function(e){const t=document.getElementById(e);if(!t)return;const s=t.querySelector("li[aria-selected=true]")??t.querySelector("li");if(!s)return;const i=s.offsetTop+s.offsetHeight/2-t.scrollTop,r=t.offsetHeight/2;i<r&&(t.scrollTop-=r-i),i>r&&(t.scrollTop+=i-r)}(re),F.current=!1)}));const oe=n.useMemo((()=>L.map(((e,i)=>(0,_.jsx)(j,{autocompleteId:E,dispatch:t,formatOptions:"link_attribute_type"===b||"link_type"===b?{showDescriptions:s.showDescriptions}:void 0,index:i,isHighlighted:null!=G&&e.id===G.id,isSelected:null!=$&&"option"===e.type&&e.entity.id===$.id,item:e,selectItem:V},e.id)))),[t,b,G,E,L,V,$,s.showDescriptions]),le=null==s.isLookupPerformed?null!=$:s.isLookupPerformed,ce=(0,_.jsxs)("div",{className:"autocomplete2"+(T(d)?" "+d:""),onBlur:function(){R&&setTimeout((()=>{const e=M.current;e&&!e.contains(document.activeElement)&&(K(),t(g.fr))}),1)},ref:e=>{M.current=e},style:T(s.width)?{width:s.width}:null,children:[(0,_.jsxs)("div",{"aria-expanded":R&&!p?"true":"false","aria-haspopup":"listbox","aria-owns":re,className:s.required?"required":void 0,role:"combobox",children:[(0,_.jsx)("input",{"aria-activedescendant":se,"aria-autocomplete":"list","aria-controls":re,"aria-labelledby":ie,"aria-required":s.required?"true":"false",autoComplete:"off",className:(null==s.inputClass?"":s.inputClass+" ")+(le?"lookup-performed":s.required?"required":""),disabled:p,id:E,name:T(v)?v+".name":null,onBlur:function(){t({isFocused:!1,type:"set-input-focus"})},onChange:function(e){const i=e.currentTarget.value;t({type:"type-value",value:i}),(0,m.A)(i)?K():null!=I&&I(i,s,V)||q(S,i)},onFocus:function(){t({isFocused:!0,type:"set-input-focus"})},onKeyDown:J,placeholder:T(s.placeholder)?s.placeholder:x("Type to search, or paste an MBID"),ref:U,type:"text",value:S}),(0,_.jsx)("button",{"aria-activedescendant":se,"aria-controls":re,"aria-haspopup":"true","aria-label":x("Search"),className:"search"+(!T(P)||p||D?"":" loading"),"data-toggle":"true",disabled:p,onClick:function(){Y.current?.focus(),K(),R?t(g.fr):Z()},onKeyDown:J,ref:W,role:"button",tabIndex:-1,title:x("Search"),type:"button"}),e.children]}),(0,_.jsx)("ul",{"aria-controls":ne,"aria-labelledby":ie,id:re,onMouseDown:function(e){e.preventDefault()},role:"listbox",tabIndex:-1,children:p?null:oe}),(0,_.jsx)("div",{"aria-live":"assertive","aria-relevant":"additions text",id:ne,role:"status",children:O}),T(v)?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("input",{name:v+".id",type:"hidden",value:$?$.entity.id:""}),(0,_.jsx)("input",{name:v+".gid",type:"hidden",value:$?$.entity.gid:""})]}):null,C?(0,_.jsx)(o.A,{callback:te,close:ee,entityType:b,name:S}):null]}),ue=(0,_.jsx)("label",{className:"autocomplete2-label"+(!0===s.showLabel?" visible":"")+(s.required?" required":""),htmlFor:E,id:ie,children:A(T(s.label)?s.label:T(s.placeholder)?s.placeholder:f.eG[b]())});return(0,_.jsxs)(_.Fragment,{children:[ue,ce]})})),C=S},nyvE9PA:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});s("PkUg7wA");var i=s("AsUdLGK"),r=s("tpyBDsx");function n(e){return(t,s)=>{let n=null;try{return e(t,s)}catch(e){n=(0,r.A)(e),Object.hasOwn(n,"doNotLogToSentry")&&!0===n.doNotLogToSentry||i.Cp(n)}return{...t,reducerError:n}}}},oEgauXb:(e,t,s)=>{"use strict";s.d(t,{UD:()=>p,WQ:()=>c,en:()=>l,g:()=>o,l:()=>r,ln:()=>n,lp:()=>a});var i=s("GX9EKLY");const r=i.Yi("mb_server"),n=i._J("mb_server"),a=i.A3("mb_server"),o=e=>()=>r(e),l=(e,t)=>()=>a(e,t),c=e=>"function"==typeof e?e():e;let u="en";if("undefined"!=typeof document){const e=document.documentElement;e&&(u=e.lang||u)}const d={numeric:!0},h="undefined"==typeof Intl?null:new Intl.Collator(u,d);function p(e,t){return h?h.compare(e,t):e.localeCompare(t,u,d)}},osVXT12:(e,t,s)=>{"use strict";s.d(t,{ER:()=>T,S1:()=>v,_r:()=>w,fx:()=>_,_V:()=>D});s("6g1DHTE"),s("DNaZxvn");var i=s("1ISrENV"),r=s("CJBfytL"),n=s("avYcuY4"),a=s("6Jrjhm9"),o=s("LCA85s6"),l=s("oEgauXb"),c=s("52XjgTZ"),u=s("93z9/8f"),d=s("jhqsV7L"),h=s("/DEQ4/f");const p=()=>new WeakMap;function m(e,t){const s=function(e){return function(e,t){const s=t();return function(t){let i=s.get(t);return null!=i||(i=e(t),s.set(t,i)),i}}(e,p)}(e);return function(e){return null==e?t:s(e)}}var g=s("WN/X9IS"),f=s("9azanlh"),b=s("Ui1Lssl").A,y=s("8YlDuzw").A;function w(e,t){const s=c.Ay.link_attribute_type[e.typeID],i=c.Ay.link_attribute_type[t.typeID];return s.root_id-i.root_id}function v(e,t){return w(e,t)||e.typeID-t.typeID}function _(e,t){let s=v(e,t);if(s)return s;const i=c.Ay.link_attribute_type[e.typeID],r=c.Ay.link_attribute_type[i.root_id];return r.creditable&&(s=(0,u.K)(e.credited_as??"",t.credited_as??""),s)||r.free_text&&(s=(0,u.K)(e.text_value??"",t.text_value??""),s)?s:0}function T(e,t){return i.A(e??r.A,t??r.A,h.lQ)}function k(e,t){return null==e&&null==t?0:null==e?-1:null==t?1:v(e,t)}function x(e,t){return e.date}function A(e,t){return e.catalogNumber||""}const E=m((e=>{const t=e.events?.map(x).sort(d.A);return t?.length?t[0]:null}),null),I=m((e=>{const t=e.labels?.map(A).sort(u.K);return t?.length?t[0]:""}),""),N=/^\d+$/,j=/(\d+)/,S=m((e=>{for(const t of a.A(e.attributes??r.A))if(t.type.gid===o.SERIES_ORDERING_ATTRIBUTE){const e=(t.text_value||"").split(j);for(let t=0;t<e.length;t++){const s=e[t];N.test(s)&&(e[t]=(0,g.pN)(s,10))}return e.join("")}return""}),""),C=m((e=>{for(const t of a.A(e.attributes??r.A))if(t.type.gid===o.TIME_ATTRIBUTE)return t.text_value||"";return""}),"");function R(e,t,s){return 802===e?(b("event"===t.entityType),b("event"===s.entityType),function(e,t){const s=(0,d.k)(e,t);if(s)return s;return(0,u.K)(e?e.time:"",t?t.time:"")||0}(t,s)):741===e?(b("release"===t.entityType),b("release"===s.entityType),function(e,t){const s=(0,d.A)(E(e),E(t));if(s)return s;return(0,u.K)(I(e),I(t))||0}(t,s)):742===e?(b("release_group"===t.entityType),b("release_group"===s.entityType),(0,u.K)(t.firstReleaseDate||"",s.firstReleaseDate||"")):0}function L(e,t,s){if(e===t)return 0;const i=e.linkTypeID,a=null!=i&&o.PART_OF_SERIES_LINK_TYPE_IDS.includes(i),c=s?e.entity1:e.entity0,h=s?e.entity0:e.entity1,p=s?t.entity0:t.entity1,m=h.id-p.id,g=e._status===f.jU||t._status===f.jU,b=e._status===f.Ar||t._status===f.Ar,w=a&&(g||b);if("series"===c.entityType&&c.orderingTypeID===o.SERIES_ORDERING_TYPE_AUTOMATIC&&null!=i&&a){const s=(0,u.K)(S(e),S(t))||(0,d.k)(e,t)||(m?R(i,h,p):0);if(s)return s}else if(0===m&&"series"===h.entityType&&h.orderingTypeID===o.SERIES_ORDERING_TYPE_AUTOMATIC&&null!=i&&a){const s=(0,u.K)(S(e),S(t))||(0,d.k)(e,t);if(s)return s}const v=e.linkOrder-t.linkOrder;if(v&&!w)return v;const _=(0,d.k)(e,t);if(_)return _;const T=(0,u.K)(C(e),C(t));if(T)return T;const x=s?e.entity0_credit:e.entity1_credit,A=s?t.entity0_credit:t.entity1_credit;if(m)return(0,l.UD)(h?y(h.sort_name)?h.sort_name:x||h.name:"",p?y(p.sort_name)?p.sort_name:A||p.name:"")||m;const E=function(e,t){for(const[s,i]of n.A(e??r.A,t??r.A)){const e=k(s,i);if(e)return e}return 0}(e.attributes,t.attributes);return E||0}function P(e,t){return L(e,t,!1)}function $(e,t){return L(e,t,!0)}function D(e){return e?$:P}},p1f4iM1:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s("84yo5bY"),r=s.n(i),n=s("LCA85s6"),a=s("8YlDuzw").A;const o=/^\/?(.*)/;function l(e,t,s,i){let r="/"+e+"/";if(r+=encodeURIComponent(t),a(s)){const e=s.replace(o,"$1");e&&(r+="/"+e)}return a(i)&&i&&(r+="#"+i),r}const c=function(e,t,s){const i=n.ENTITIES[e.entityType],o=i.url;let c="";e:{const t=e;if(("object"==typeof t&&null!==t||"function"==typeof t)&&"isrc"===t.entityType&&"isrc"in t){c=t.isrc}else if(("object"==typeof t&&null!==t||"function"==typeof t)&&"iswc"===t.entityType&&"iswc"in t){c=t.iswc}else if(("object"!=typeof t||null===t)&&"function"!=typeof t||"cdstub"!==t.entityType&&"cdtoc"!==t.entityType||!("discid"in t)){if(("object"!=typeof t||null===t)&&"function"!=typeof t||"editor"!==t.entityType||!("name"in t)){const e=t;i.mbid&&a(e.gid)&&(c=r().unwrap(e.gid));break e}c=t.name}else{c=t.discid}}return l(o,c,t,s)}},pTCUvY3:(e,t,s)=>{"use strict";s.d(t,{A:()=>L});var i=s("dL1OOKd"),r=(s("60ocjtt"),s("6g1DHTE"),s("NKd1yOY"),s("LCA85s6")),n=s("hJIxiGq");const a={acronym:!1,acronym_split:!1,colon:!1,ellipsis:!1,forceCaps:!1,hyphen:!1,number:!1,numberSplitChar:null,numberSplitExpect:!1,openBrackets:[],openedSingleQuote:!1,openingBracket:!1,singlequote:!1,slurpExtraTitleInformation:!1,spaceNextWord:!1,whitespace:!1};function o(){a.acronym_split=!1,a.colon=!1,a.ellipsis=!1,a.hyphen=!1,a.openingBracket=!1,a.singlequote=!1,a.whitespace=!1}function l(){return a.openBrackets.length>0}function c(){const e=h();return a.openBrackets.pop(),e}const u=new RegExp("^["+(0,n.A)(r.BRACKET_PAIRS.flat().join(""))+"]$"),d=r.BRACKET_PAIRS.reduce(((e,t)=>{let[s,i]=t;return e[s]=i,e[i]=s,e}),{});function h(){const e=a.openBrackets[a.openBrackets.length-1];return e?(t=e,u.test(t)?d[t]:""):null;var t}var p=s("hUx2q3D"),m=s("NMqEMXR"),g=s("9oisN5V");function f(e){return(0,g.A)(e).replace(/([([])\s+/,"$1").replace(/\s+([)\]])/,"$1")}s("DNaZxvn");var b=s("NyxMRXU"),y=s("8YlDuzw").A;const w=class{constructor(e,t,s,i){this.modeName=e,this.regexes=t,this.input=s,this.output=i,this.specialCaseValues={NOT_A_SPECIALCASE:-1,SPECIALCASE_CROWD_NOISE:33,SPECIALCASE_DATA_TRACK:30,SPECIALCASE_DIALOGUE:35,SPECIALCASE_GUITAR_SOLO:34,SPECIALCASE_SILENCE:31,SPECIALCASE_UNKNOWN:10,SPECIALCASE_UNTITLED:32}}checkSpecialCase(){return this.specialCaseValues.NOT_A_SPECIALCASE}isSpecialCase(e){return e!==this.specialCaseValues.NOT_A_SPECIALCASE}getSpecialCaseFormatted(e,t){switch(t){case this.specialCaseValues.SPECIALCASE_DATA_TRACK:return"[data track]";case this.specialCaseValues.SPECIALCASE_SILENCE:return"[silence]";case this.specialCaseValues.SPECIALCASE_UNTITLED:return"[untitled]";case this.specialCaseValues.SPECIALCASE_UNKNOWN:return"[unknown]";case this.specialCaseValues.SPECIALCASE_CROWD_NOISE:return"[crowd noise]";case this.specialCaseValues.SPECIALCASE_GUITAR_SOLO:return"[guitar solo]";case this.specialCaseValues.SPECIALCASE_DIALOGUE:return"[dialogue]";case this.specialCaseValues.NOT_A_SPECIALCASE:default:return e}}getWordsForProcessing(e){return this.input.splitWordsAndPunctuation(e)}process(e){for(this.input.init(this.getWordsForProcessing(e),this.output);!this.input.isIndexAtEnd();)this.processWord();return m[this.modeName].runPostProcess(this.output.getOutput())}processWord(){if(!this.doWhiteSpace()){let e=!1;this.regexes.SPECIALCASES||(this.regexes.SPECIALCASES=/(&|¿|¡|\?|!|;|:|'|‘|’|‹|›|"|“|”|„|“|«|»|-|‐|\+|,|\*|\.|#|%|\/|\(|\)|\{|\}|\[|\])/),this.input.matchCurrentWord(this.regexes.SPECIALCASES)&&(e=this.doDoubleQuote()||this.doSingleQuote()||this.doOpeningBracket()||this.doClosingBracket()||this.doComma()||this.doPeriod()||this.doLineStop()||this.doAmpersand()||this.doSlash()||this.doColon()||this.doHyphen()||this.doInvertedMarks()||this.doPlus()||this.doAsterisk()||this.doDiamond()||this.doPercent()),e||this.doDigits()||this.doAcronym()||this.doWord()}this.input.nextIndex()}doWord(){return!0}doNormalWord(){this.output.appendSpaceIfNeeded(),this.input.capitalizeCurrentWord(),this.output.appendCurrentWord(),o(),a.forceCaps=!1,a.spaceNextWord=!0}doWhiteSpace(){return this.regexes.WHITESPACE||(this.regexes.WHITESPACE=/^ $/),!!this.input.matchCurrentWord(this.regexes.WHITESPACE)&&(a.whitespace=!0,a.spaceNextWord=!0,a.openingBracket&&(a.spaceNextWord=!1),!0)}doColon(){if(this.regexes.COLON||(this.regexes.COLON=/^:$/),this.input.matchCurrentWord(this.regexes.COLON)){const e=this.output.getLength()-3,t=this.output.getLastWord();a.slurpExtraTitleInformation&&e>0&&"feat."===this.output.getWordAtIndex(e)&&y(t)?this.output.setWordAtIndex(this.output.getLength()-1,t.toLowerCase()):this.output.capitalizeLastWord(!m[this.modeName].isSentenceCaps());let s=!1;const i=this.input.getCursorPosition();if(i<this.input.getLength()-2){const e=this.input.getWordAtIndex(i+1),t=this.input.getWordAtIndex(i+2);null!=e&&e.match(this.regexes.OPENBRACKET)&&(s=!0,a.spaceNextWord=!0),this.input.isNextWord(" ")&&null!=t&&t.match(this.regexes.OPENBRACKET)&&(a.spaceNextWord=!0,s=!0,this.input.nextIndex())}return s||(this.output.appendCurrentWord(),o(),a.forceCaps=!0,a.colon=!0,a.spaceNextWord=this.input.isNextWord(" ")),!0}return!1}doAsterisk(){return this.regexes.ASTERISK||(this.regexes.ASTERISK=/^\*$/),!!this.input.matchCurrentWord(this.regexes.ASTERISK)&&(this.output.appendWordPreserveWhiteSpace(!0),o(),!0)}doDiamond(){return this.regexes.DIAMOND||(this.regexes.DIAMOND=/^#$/),!!this.input.matchCurrentWord(this.regexes.DIAMOND)&&(this.output.appendWordPreserveWhiteSpace(!0),o(),!0)}doPercent(){return this.regexes.PERCENT||(this.regexes.PERCENT=/^%$/),!!this.input.matchCurrentWord(this.regexes.PERCENT)&&(this.output.appendWordPreserveWhiteSpace(!0),o(),!0)}doAmpersand(){return this.regexes.AMPERSAND||(this.regexes.AMPERSAND=/^&$/),!!this.input.matchCurrentWord(this.regexes.AMPERSAND)&&(o(),a.forceCaps=!0,this.output.appendSpace(),a.spaceNextWord=!0,this.output.appendCurrentWord(),!0)}doLineStop(){return this.regexes.LINESTOP||(this.regexes.LINESTOP=/[?!;]/),!!this.input.matchCurrentWord(this.regexes.LINESTOP)&&(o(),this.output.capitalizeLastWord(!m[this.modeName].isSentenceCaps()),a.forceCaps=!0,a.spaceNextWord=!0,this.output.appendCurrentWord(),!0)}doHyphen(){return this.regexes.HYPHEN||(this.regexes.HYPHEN=/^[-‐]$/),!!this.input.matchCurrentWord(this.regexes.HYPHEN)&&(this.output.appendWordPreserveWhiteSpace(!0),o(),a.forceCaps=!m[this.modeName].isSentenceCaps(),a.hyphen=!0,!0)}doInvertedMarks(){return this.regexes.INVERTEDMARKS||(this.regexes.INVERTEDMARKS=/(¿|¡)/),!!this.input.matchCurrentWord(this.regexes.INVERTEDMARKS)&&(this.output.appendWordPreserveWhiteSpace(!1),o(),a.forceCaps=!0,!0)}doPlus(){return this.regexes.PLUS||(this.regexes.PLUS=/^\+$/),!!this.input.matchCurrentWord(this.regexes.PLUS)&&(this.output.appendWordPreserveWhiteSpace(!0),o(),!0)}doSlash(){return this.regexes.SLASH||(this.regexes.SLASH=/[\\/]/),!!this.input.matchCurrentWord(this.regexes.SLASH)&&(this.output.appendWordPreserveWhiteSpace(!0),o(),a.forceCaps=!0,!0)}doDoubleQuote(){return this.regexes.DOUBLEQUOTE||(this.regexes.DOUBLEQUOTE=/["“”„“«»]/),!!this.input.matchCurrentWord(this.regexes.DOUBLEQUOTE)&&(this.output.appendWordPreserveWhiteSpace(!1),o(),a.forceCaps=!this.input.isNextWord(" "),!0)}doSingleQuote(){if(this.regexes.SINGLEQUOTE||(this.regexes.SINGLEQUOTE=/['‘’‹›]/),this.input.matchCurrentWord(this.regexes.SINGLEQUOTE)){a.forceCaps=!1;const e=this.input.isPreviousWord(" "),t=this.input.isNextWord(" "),s=a.openedSingleQuote;return e&&!t?(this.output.appendSpace(),a.openedSingleQuote=!0,a.forceCaps=!0):!e&&t&&(s&&(a.forceCaps=!0,a.openedSingleQuote=!1),this.output.capitalizeLastWord()),a.spaceNextWord=t,this.output.appendCurrentWord(),o(),s===a.openedSingleQuote&&(a.forceCaps=!1),a.singlequote=!0,!0}return!1}doOpeningBracket(){this.regexes.OPENBRACKET||(this.regexes.OPENBRACKET=/[([{<]/);const e=this.input.getCurrentWord();if(null!=e&&e.match(this.regexes.OPENBRACKET)){this.output.capitalizeLastWord(!m[this.modeName].isSentenceCaps()),t=e,a.openBrackets.push(t);const s=h();let i=!1;const r=this.input.getCursorPosition()+1;for(let e=r;e<this.input.getLength();e++){const t=this.input.getWordAtIndex(e)||"";if(" "!==t&&(((0,b.gO)(t)||null!=t.match(/^featuring$|^ft$|^feat$/i))&&(a.slurpExtraTitleInformation=!0,e===r&&(i=!0)),t===s))break}return this.output.appendSpace(),o(),a.spaceNextWord=!1,a.openingBracket=!0,a.forceCaps=!i,this.output.appendCurrentWord(),!0}var t;return!1}doClosingBracket(){return this.regexes.CLOSEBRACKET||(this.regexes.CLOSEBRACKET=/[)\]}>]/),!!this.input.matchCurrentWord(this.regexes.CLOSEBRACKET)&&(this.output.capitalizeLastWord(),l()&&(c(),a.slurpExtraTitleInformation=!1),o(),a.forceCaps=!m[this.modeName].isSentenceCaps(),a.spaceNextWord=!0,this.output.appendCurrentWord(),!0)}doComma(){return this.regexes.COMMA||(this.regexes.COMMA=/^,$/),!!this.input.matchCurrentWord(this.regexes.COMMA)&&(","!==this.output.getLastWord()&&(o(),a.spaceNextWord=!0,a.forceCaps=!1,this.output.appendCurrentWord()),!0)}doPeriod(){if(this.regexes.PERIOD||(this.regexes.PERIOD=/^\.$/),this.input.matchCurrentWord(this.regexes.PERIOD)){if("."===this.output.getLastWord()){if(!a.ellipsis){for(this.output.appendWord("..");this.input.isNextWord(".");)this.input.nextIndex();o(),a.ellipsis=!0}a.forceCaps=!0,a.spaceNextWord=!0}else this.input.hasMoreWords()&&"."===this.input.getNextWord()||this.output.capitalizeLastWord(),this.output.appendWord("."),o(),a.forceCaps=!0,a.spaceNextWord=this.input.isNextWord(" ");return!0}return!1}doAcronym(){this.regexes.ACRONYM||(this.regexes.ACRONYM=/^\w$/);let e=this.input.getCursorPosition()+1;const t=[],s=this.input.getCurrentWord();if(null!=s&&s.match(this.regexes.ACRONYM)){t.push(s.toUpperCase());let i=!1,r=!1;e:for(;e<this.input.getLength();){const s=this.input.getWordAtIndex(e);if(!i||null==s||!s.match(this.regexes.ACRONYM)){"."!==s||r?r&&" "===s?i=!0:"."!==t[t.length-1]&&(t.pop(),e--):(t[t.length]=".",r=!0,i=!0);break e}t.push(s.toUpperCase()),i=!1,r=!1,e++}}if(t.length>2){let s=t.join("");return s=s.replace(/(\.)*$/,"."),this.output.appendSpaceIfNeeded(),this.output.appendWord(s),o(),a.acronym=!0,a.spaceNextWord=!0,a.forceCaps=!1,this.input.setCursorPosition(e-1),!0}return!1}doDigits(){this.regexes.DIGITS||(this.regexes.DIGITS=/^\d+$/,this.regexes.DIGITS_NUMBERSPLIT=/[,.]/,this.regexes.DIGITS_DUPLE=/^\d\d$/,this.regexes.DIGITS_TRIPLE=/^\d\d\d$/,this.regexes.DIGITS_NTUPLE=/^\d\d\d\d+$/);let e=this.input.getCursorPosition()+1;const t=[];if(this.input.matchCurrentWord(this.regexes.DIGITS)){t.push(this.input.getCurrentWord()),a.numberSplitExpect=!0;e:for(;e<this.input.getLength();){if(a.numberSplitExpect){if(!this.input.matchWordAtIndex(e,this.regexes.DIGITS_NUMBERSPLIT))break e;t.push(this.input.getWordAtIndex(e)),a.numberSplitExpect=!1}else{if(!this.input.matchWordAtIndex(e,this.regexes.DIGITS_TRIPLE)){this.input.matchWordAtIndex(e,this.regexes.DIGITS_DUPLE)?t.length>2&&a.numberSplitChar!==t[t.length-1]?t.push(this.input.getWordAtIndex(e++)):(t.pop(),e--):this.input.matchWordAtIndex(e,this.regexes.DIGITS_NTUPLE)?t.push(this.input.getWordAtIndex(e++)):(t.pop(),e--);break e}null==a.numberSplitChar&&(a.numberSplitChar=t[t.length-1]),t.push(this.input.getWordAtIndex(e)),a.numberSplitExpect=!0}e++}return this.input.setCursorPosition(e-1),this.output.appendSpaceIfNeeded(),this.output.appendWord(t.join("")),o(),a.forceCaps=!1,a.number=!0,!0}return!1}doIgnoreWords(){return"dB"===this.input.getCurrentWord()&&(this.output.appendSpaceIfNeeded(),this.output.appendCurrentWord(),!0)}doFeaturingArtistStyle(){this.regexes.FEAT||(this.regexes.FEAT=/^featuring$|^f$|^ft$|^feat$/i,this.regexes.FEAT_F=/^f$/i,this.regexes.FEAT_FEAT=/^feat$/i);const e=this.input.getCurrentWord();if(null==e)return!1;if(e.match(this.regexes.FEAT)){const t=this.input.getNextWord();if(e.match(this.regexes.FEAT_F)&&null!=t&&!t.match(/^[/.]$/))return!1;if(this.input.getCursorPosition()<this.input.getLength()-2){const t=this.input.getNextWord(),s=e+(null==t||"."!==t&&"/"!==t?e.match(this.regexes.FEAT_FEAT)?".":"":t);if(a.openingBracket||l())this.output.appendWord(" ");else{if(l())for(;l();){const e=c();this.output.appendWord(e),this.input.getWordAtIndex(this.input.getLength()-1)===e&&this.input.dropLastWord()}const e=this.input.getCursorPosition(),t=this.input.getLength();let s=e;for(;s<t&&"("!==this.input.getWordAtIndex(s);s++);s!==e&&s<t-1&&this.input.insertWordsAtIndex(s,[")"," "]),this.input.updateCurrentWord("("),this.doOpeningBracket()}return this.output.appendWord(s),o(),a.forceCaps=!0,a.openingBracket=!1,a.spaceNextWord=!0,a.slurpExtraTitleInformation=!0,(this.input.isNextWord(".")||this.input.isNextWord("/"))&&this.input.nextIndex(),!0}}return!1}moveArticleToEnd(e){return f(e).replace(/^(The|Los) (.+)$/,(function(e,t,s){return s+", "+t}))}sortCompoundName(e,t){const s=f(e);let i=" and ";return i=-1===s.indexOf(" + ")?i:" + ",i=-1===s.indexOf(" & ")?i:" & ",s.split(i).map((e=>t(e,this.regexes))).join(i)}};const v=class extends w{doWord(){return this.doIgnoreWords()||this.doFeaturingArtistStyle()||m[this.modeName].doWord()||this.doNormalWord(),a.number=!1,!0}guessSortName(e){return f(e)}};s("70YSc4n");const _=class extends w{checkSpecialCase(e){if(null!=e){if(this.regexes.ARTIST_EMPTY||(this.regexes.ARTIST_EMPTY=/^\s*$/i,this.regexes.ARTIST_UNKNOWN=/^[([]?\s*Unknown\s*[)\]]?$/i,this.regexes.ARTIST_NONE=/^[([]?\s*none\s*[)\]]?$/i,this.regexes.ARTIST_NOARTIST=/^[([]?\s*no[\s-]+artist\s*[)\]]?$/i,this.regexes.ARTIST_NOTAPPLICABLE=/^[([]?\s*not[\s-]+applicable\s*[)\]]?$/i,this.regexes.ARTIST_NA=/^[([]?\s*n\s*[\\/]\s*a\s*[)\]]?$/i),e.match(this.regexes.ARTIST_EMPTY))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.ARTIST_UNKNOWN))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.ARTIST_NONE))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.ARTIST_NOARTIST))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.ARTIST_NOTAPPLICABLE))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.ARTIST_NA))return this.specialCaseValues.SPECIALCASE_UNKNOWN}return this.specialCaseValues.NOT_A_SPECIALCASE}doWord(){return this.output.appendSpaceIfNeeded(),this.input.capitalizeCurrentWord(),this.output.appendCurrentWord(),o(),a.number=!1,a.forceCaps=!1,a.spaceNextWord=!0,!0}guessSortName(e,t){return this.sortCompoundName(e,(function(e,s){if(e){let i=f(e),r="";s.SORTNAME_SR||(s.SORTNAME_SR=/,\s*Sr\.?$/i,s.SORTNAME_JR=/,\s*Jr\.?$/i),i.match(s.SORTNAME_SR)?(i=i.replace(s.SORTNAME_SR,""),r=", Sr."):i.match(s.SORTNAME_JR)&&(i=i.replace(s.SORTNAME_JR,""),r=", Jr.");let n=i.split(" "),a=!1;s.SORTNAME_DJ||(s.SORTNAME_DJ=/^DJ$/i,s.SORTNAME_THE=/^The$/i,s.SORTNAME_LOS=/^Los$/i,s.SORTNAME_DR=/^Dr\.$/i);const o=n[0];if(o.match(s.SORTNAME_DJ)?(r=", DJ"+r,n.shift()):o.match(s.SORTNAME_THE)?(r=", The"+r,n.shift()):o.match(s.SORTNAME_LOS)?(r=", Los"+r,n.shift()):o.match(s.SORTNAME_DR)?(r=", Dr."+r,n.shift(),a=!0):a=!0,t||(a=!1),a){const e=[];if(n.length>1){for(let t=0;t<n.length-1;t++)t===n.length-2&&"St."===n[t]?n[t+1]=n[t]+" "+n[t+1]:n[t]&&(e[t+1]=n[t]);e[0]=n[n.length-1],e.length>1&&(e[0]+=","),n=e}}return f(n.filter(Boolean).join(" ")+(r||""))}return""}))}};const T=class extends w{checkSpecialCase(e){if(null!=e){if(this.regexes.LABEL_EMPTY||(this.regexes.LABEL_EMPTY=/^\s*$/i,this.regexes.LABEL_UNKNOWN=/^[([]?\s*Unknown\s*[)\]]?$/i,this.regexes.LABEL_NONE=/^[([]?\s*none\s*[)\]]?$/i,this.regexes.LABEL_NOLABEL=/^[([]?\s*no[\s-]+label\s*[)\]]?$/i,this.regexes.LABEL_NOTAPPLICABLE=/^[([]?\s*not[\s-]+applicable\s*[)\]]?$/i,this.regexes.LABEL_NA=/^[([]?\s*n\s*[\\/]\s*a\s*[)\]]?$/i),e.match(this.regexes.LABEL_EMPTY))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.LABEL_UNKNOWN))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.LABEL_NONE))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.LABEL_NOLABEL))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.LABEL_NOTAPPLICABLE))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.LABEL_NA))return this.specialCaseValues.SPECIALCASE_UNKNOWN}return this.specialCaseValues.NOT_A_SPECIALCASE}doWord(){return this.output.appendSpaceIfNeeded(),this.input.capitalizeCurrentWord(),this.output.appendCurrentWord(),o(),a.number=!1,a.forceCaps=!1,a.spaceNextWord=!0,!0}guessSortName(e){return this.sortCompoundName(e,(e=>this.moveArticleToEnd(e)))}};const k=class extends w{doWord(){return this.doIgnoreWords()||m[this.modeName].doWord()||this.doNormalWord(),a.number=!1,!0}guessSortName(e){return this.sortCompoundName(e,(e=>this.moveArticleToEnd(e)))}};const x=class extends w{checkSpecialCase(e){return null!=e&&(this.regexes.RELEASE_UNTITLED||(this.regexes.RELEASE_UNTITLED=/^([([]?\s*untitled\s*[)\]]?)$/i),e.match(this.regexes.RELEASE_UNTITLED))?this.specialCaseValues.SPECIALCASE_UNTITLED:this.specialCaseValues.NOT_A_SPECIALCASE}process(e){return m[this.modeName].fixVinylSizes(super.process(e))}getWordsForProcessing(e){const t=m[this.modeName].preProcessTitles(e);return m[this.modeName].prepExtraTitleInfo(this.input.splitWordsAndPunctuation(t))}doWord(){return this.doFeaturingArtistStyle()||m[this.modeName].doWord()||this.doNormalWord(),a.number=!1,!0}guessSortName(e){return this.moveArticleToEnd(e)}};const A=class extends w{removeBonusInfo(e){return e.replace(/[([]?bonus(\s+track)?s?\s*[)\]]?$/i,"").replace(/[([]?retail(\s+version)?\s*[)\]]?$/i,"")}process(e){return m[this.modeName].fixVinylSizes(super.process(e))}getWordsForProcessing(e){const t=m[this.modeName].preProcessTitles(this.removeBonusInfo(e));return m[this.modeName].prepExtraTitleInfo(this.input.splitWordsAndPunctuation(t))}checkSpecialCase(e){if(null!=e){if(this.regexes.TRACK_DATATRACK||(this.regexes.TRACK_DATATRACK=/^([([]?\s*data(\s+track)?\s*[)\]]?$)/i,this.regexes.TRACK_SILENCE=/^([([]?\s*(silen(t|ce)|blank)(\s+track)?\s*[)\]]?)$/i,this.regexes.TRACK_UNTITLED=/^([([]?\s*untitled(\s+track)?\s*[)\]]?)$/i,this.regexes.TRACK_UNKNOWN=/^([([]?\s*(unknown|bonus|hidden)(\s+track)?\s*[)\]]?)$/i,this.regexes.TRACK_MYSTERY=/^\?+$/i),e.match(this.regexes.TRACK_DATATRACK))return this.specialCaseValues.SPECIALCASE_DATA_TRACK;if(e.match(this.regexes.TRACK_SILENCE))return this.specialCaseValues.SPECIALCASE_SILENCE;if(e.match(this.regexes.TRACK_UNTITLED))return this.specialCaseValues.SPECIALCASE_UNTITLED;if(e.match(this.regexes.TRACK_UNKNOWN))return this.specialCaseValues.SPECIALCASE_UNKNOWN;if(e.match(this.regexes.TRACK_MYSTERY))return this.specialCaseValues.SPECIALCASE_UNKNOWN}return this.specialCaseValues.NOT_A_SPECIALCASE}doWord(){return this.doIgnoreWords()||this.doFeaturingArtistStyle()||m[this.modeName].doWord()||(this.input.matchCurrentWord(/7in/i)?(this.output.appendSpaceIfNeeded(),this.output.appendWord('7"'),o(),a.spaceNextWord=!1,a.forceCaps=!1):this.input.matchCurrentWord(/12in/i)?(this.output.appendSpaceIfNeeded(),this.output.appendWord('12"'),o(),a.spaceNextWord=!1,a.forceCaps=!1):(this.output.appendSpaceIfNeeded(),this.input.capitalizeCurrentWord(),this.output.appendCurrentWord(),o(),a.spaceNextWord=!0,a.forceCaps=!1)),a.number=!1,!0}guessSortName(e){return this.moveArticleToEnd(e)}};const E=class extends w{checkSpecialCase(e){return null!=e&&(this.regexes.RELEASE_UNTITLED||(this.regexes.RELEASE_UNTITLED=/^([([]?\s*untitled\s*[)\]]?)$/i),e.match(this.regexes.RELEASE_UNTITLED))?this.specialCaseValues.SPECIALCASE_UNTITLED:this.specialCaseValues.NOT_A_SPECIALCASE}getWordsForProcessing(e){const t=m[this.modeName].preProcessTitles(e);return m[this.modeName].prepExtraTitleInfo(this.input.splitWordsAndPunctuation(t))}doWord(){return this.doIgnoreWords()||this.doFeaturingArtistStyle()||m[this.modeName].doWord()||this.doNormalWord(),a.number=!1,!0}guessSortName(e){return this.moveArticleToEnd(e)}};var I=s("8YlDuzw").I,N=s("8YlDuzw").A;const j=function(e,t,s,i,r,n){if(I(s))return"";const o=m[i],c=null==n?a.forceCaps:n,u=e.getLength();let d,h=e.getCursorPosition();h===u&&(h=u-1,e.setCursorPosition(h));let p=o.toLowerCase(s),g=o.toUpperCase(s);if(s===g&&s.length>1&&r)d=g;else if(1===p.length&&(0,b.KC)(e.getPreviousWord()))d=p;else if("English"===o.name&&(0,b.KC)(e.getPreviousWord())&&p.match(/^(?:all|ve|ll|cha|re|mon)$/i))d=p;else if("English"===o.name&&(0,b.KC)(e.getPreviousWord())&&"Ev"===e.getWordAtIndex(h-2))d=p;else if("English"===o.name&&p.match(/^[coy]$/i)&&(0,b.KC)(e.getNextWord()))d=g;else{d=function(e,t,s,i,r){if(I(i))return"";let n=s.toLowerCase(i);const o=t.getLength();let l="";o>1&&(l=t.getWordAtIndex(o-2));const c=r||!s.isSentenceCaps()||a.slurpExtraTitleInformation||a.openingBracket||e.isFirstWord()||(0,b.I5)(l);if(c){const e=n.split("");e[0]=s.toUpperCase(e[0]),i.length>2&&"mc"===i.substring(0,2)&&(e[2]=s.toUpperCase(e[2])),n=e.join("")}return n}(e,t,o,p,c),p=o.toLowerCase(d),g=o.toUpperCase(d);const s=e.getNextWord(),i=N(s)&&1===s.length&&(0,b.Nb)(s),r=N(s)&&1===s.length&&(0,b.KC)(s);c||!o.isLowerCaseWord(p)||i?!o.isRomanNumber(p)||r||l()&&(0,b.gO)(p)?o.isUpperCaseWord(p)?d=g:l()&&(0,b.gO)(p)&&(d=p):d=g:d=p}return d};const S=class{constructor(e,t,s,i){this.CFG_KEEP_UPPERCASED=s,this.modeName=t,this.regexes=i,this.source=e||"",this.wordList=[],this.wordIndex=0}init(e,t){this.output=t,this.wordList=e||[]}getLength(){return this.wordList.length}isEmpty(){return 0===this.getLength()}getCursorPosition(){return this.wordIndex}setCursorPosition(e){e>=0&&e<this.getLength()&&(this.wordIndex=e)}getWordAtIndex(e){return this.wordList[e]||null}getNextWord(){return this.getWordAtIndex(this.wordIndex+1)}getCurrentWord(){return this.getWordAtIndex(this.wordIndex)}getPreviousWord(){return this.getWordAtIndex(this.wordIndex-1)}isFirstWord(){return 0===this.wordIndex}isLastWord(){return this.getLength()===this.wordIndex-1}isNextWord(e){return this.hasMoreWords()&&this.getNextWord()===e}isPreviousWord(e){return!this.isFirstWord()&&this.getPreviousWord()===e}matchCurrentWord(e){return this.matchWordAtIndex(this.getCursorPosition(),e)}matchWordAtIndex(e,t){const s=this.getWordAtIndex(e)||"";let i;return i="string"==typeof t?t===s:null!=s.match(t),i}hasMoreWords(){return 0===this.wordIndex&&this.getLength()>0||this.wordIndex-1<this.getLength()}isIndexAtEnd(){return this.wordIndex===this.getLength()}nextIndex(){this.wordIndex++}dropLastWord(){this.getLength()>0&&(this.wordList.pop(),this.isIndexAtEnd()&&this.wordIndex--)}insertWordsAtIndex(e,t){const s=this.wordList.slice(0,e),i=this.wordList.slice(e,this.wordList.length);this.wordList=s.concat(t).concat(i)}capitalizeCurrentWord(){const e=this.getCurrentWord();if(null==e)return null;const t=j(this,this.output,e,this.modeName,this.CFG_KEEP_UPPERCASED);return e!==t&&this.updateCurrentWord(t),t}updateCurrentWord(e){this.wordIndex<this.wordList.length&&(this.wordList[this.wordIndex]=e)}splitWordsAndPunctuation(e){let t=e;t=t.replace(/^\s\s*/,""),t=t.replace(/\s\s*$/,""),t=t.replace(/\s\s*/g," ");const s=t.split(""),i=[];let r=[];this.regexes.SPLITWORDSANDPUNCTUATION||(this.regexes.SPLITWORDSANDPUNCTUATION=/[^!¿¡"%&'´`‘’‹›“”„“«»()[\]{}*+‐\-,./:;<=>?\s#]/);for(let e=0;e<s.length;e++)s[e].match(this.regexes.SPLITWORDSANDPUNCTUATION)?r.push(s[e]):(r.length>0&&i.push(r.join("")),i.push(s[e]),r=[]);return r.length>0&&i.push(r.join("")),i}};const C=class{constructor(e,t,s){this.CFG_KEEP_UPPERCASED=s,this.modeName=t,this.input=e,this.wordList=[]}getLength(){return this.wordList.length}isEmpty(){return 0===this.getLength()}appendCurrentWord(){const e=this.input.getCurrentWord();null!=e&&this.appendWord(e)}appendWord(e){" "===e?this.appendSpace():""!==e&&null!=e&&this.wordList.push(e)}appendSpace(){this.wordList.push(" ")}appendSpaceIfNeeded(){a.spaceNextWord&&this.appendSpace()}getWordAtIndex(e){return this.wordList[e]?this.wordList[e]:null}setWordAtIndex(e,t){this.getWordAtIndex(e)&&(this.wordList[e]=t)}getLastWord(){return this.isEmpty()?null:this.wordList[this.wordList.length-1]}capitalizeWordAtIndex(e,t){const s=null==t?a.forceCaps:t;if((!m[this.modeName].isSentenceCaps()||s)&&!this.isEmpty()){const t=this.getWordAtIndex(e);if(null!=t){let i=t;if(null==t.match(/^\w\..*/)){const r=f(t.toLowerCase());if(!s&&l()&&(0,b.gO)(r));else if(!s&&m[this.modeName].isUpperCaseWord(r));else{const n=this.input.getCursorPosition();let a=n-1;for(;a>=0;){const e=this.input.getWordAtIndex(a);if(null==e||f(e.toLowerCase())===r)break;a--}this.input.setCursorPosition(a),i=j(this.input,this,t,this.modeName,this.CFG_KEEP_UPPERCASED,s),this.input.setCursorPosition(n),t!==i&&this.setWordAtIndex(e,i)}}}}}capitalizeLastWord(e){this.capitalizeWordAtIndex(this.getLength()-1,e)}getOutput(){return a.forceCaps=!m[this.modeName].isSentenceCaps(),this.capitalizeLastWord(),this.closeOpenBrackets(),f(this.wordList.join(""))}closeOpenBrackets(){const e=[];for(;l();)e[e.length]=c();this.appendWord(e.join(""))}appendWordPreserveWhiteSpace(e){const t={after:this.input.isNextWord(" "),before:this.input.isPreviousWord(" ")};e&&this.capitalizeLastWord(!m[this.modeName].isSentenceCaps()),t.before&&this.appendSpace(),this.appendCurrentWord(),a.spaceNextWord=t.after}},R={area:v,artist:_,event:E,label:T,place:k,recording:A,release:x,release_group:x,series:E,track:A,work:E};const L=new class{constructor(){const e=(0,i.A)("guesscase_mode");this.modeName=(0,p.A)(e)?e:"English",this.CFG_KEEP_UPPERCASED="false"!==(0,i.A)("guesscase_keepuppercase"),this.regexes={SERIES_NUMBER:/^(\d+|[ivx]+)$/i,SPACES_DOTS:/\s|\./i},this.entities={area:{guess:this.guess("area","process"),sortname:this.guess("area","guessSortName")},artist:{guess:this.guess("artist","process"),sortname:this.guess("artist","guessSortName")},event:{guess:this.guess("event","process"),sortname:this.guess("event","guessSortName")},genre:{guess:this.guess("genre","process"),sortname:this.guess("genre","guessSortName")},instrument:{guess:this.guess("instrument","process"),sortname:this.guess("instrument","guessSortName")},label:{guess:this.guess("label","process"),sortname:this.guess("label","guessSortName")},place:{guess:this.guess("place","process"),sortname:this.guess("place","guessSortName")},recording:{guess:this.guess("recording","process"),sortname:this.guess("recording","guessSortName")},release:{guess:this.guess("release","process"),sortname:this.guess("release","guessSortName")},release_group:{guess:this.guess("release_group","process"),sortname:this.guess("release_group","guessSortName")},series:{guess:this.guess("series","process"),sortname:this.guess("series","guessSortName")},track:{guess:this.guess("track","process"),sortname:this.guess("track","guessSortName")},work:{guess:this.guess("work","process"),sortname:this.guess("work","guessSortName")}}}guess(e,t){if("genre"===e||"instrument"===e)return e=>this.lowercaseEntityName(e);const s=this.regexes;return function(r){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const l=(0,i.A)("guesscase_mode"),c=(0,p.A)(l)?l:"English",u="false"!==(0,i.A)("guesscase_keepuppercase");a.forceCaps=!0,a.spaceNextWord=!1,a.openBrackets=[],a.slurpExtraTitleInformation=!1,o(),a.acronym=!1,a.number=!1,a.openedSingleQuote=!1,a.numberSplitChar=null,a.numberSplitExpect=!1;const d=new S(r,c,u,s),h=new C(d,c,u),m=new R[e](c,s,d,h),g=m.checkSpecialCase(r);let f;return f=m.isSpecialCase(g)?m.getSpecialCaseFormatted(r,g):m instanceof _&&"guessSortName"===t?m[t](r,n):m[t](r),f}}lowercaseEntityName(e){return e.toLowerCase()}}},pqBraHq:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var i=s("smZuR9W");function r(e){return i.useCallback((t=>{13!==t.keyCode||t.isDefaultPrevented()||t.target instanceof HTMLButtonElement||(t.preventDefault(),e())}),[e])}},pwhh0pv:(e,t,s)=>{"use strict";var i=s("/FT4qLG"),r=s("KuiXX4f");function n(e){return{avatar:e.avatar,deleted:e.deleted,entityType:"editor",id:e.id,name:e.name,privileges:(t=e.privileges,9131&t)};var t}var a=s("p1f4iM1"),o=s("L0H01fh"),l=s("73Tm4xF"),c=s("cGbttel"),u=s("8YlDuzw").I,d=s("oEgauXb").l,h=s("HkNzj3j").l,p=s("oEgauXb").lp,m=s("SKGBikk").l;(0,s("KBzdQ9I").A)("div.annotation",(function(e){let{annotation:t,collapse:s=!1,entity:n,numberOfRevisions:g,showChangeLog:f=!1,showEmpty:b=!1}=e;const y=u(t?.text);if(!t||y&&!b)return null;const w=n.latest_annotation;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:"annotation",children:d("Annotation")}),b&&y?(0,c.jsx)("div",{className:"annotation-body small",children:d("This annotation is empty.")}):s?(0,c.jsx)(o.A,{className:"annotation",html:t.html}):(0,c.jsx)("div",{className:"annotation-body",dangerouslySetInnerHTML:{__html:t.html}}),f?(0,c.jsxs)("p",{children:[(0,c.jsx)("strong",{children:d("Changelog:")})," ",t.changelog||d("(no changelog)")]}):null,(0,c.jsx)(i.A9.Consumer,{children:e=>(0,c.jsx)("div",{className:"annotation-details",children:e.user?w&&t.id===w.id?(0,c.jsxs)(c.Fragment,{children:[h("Annotation last modified by {user} on {date}.",{date:(0,r.A)(e,t.creation_date),user:(0,c.jsx)(l.A,{editor:t.editor})})," ",g&&g>1?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("a",{href:(0,a.A)(n,"/annotations"),children:d("View annotation history")})," | "]}):null,(0,c.jsx)("a",{href:(0,a.A)(n,"edit_annotation"),children:p("Edit annotation","interactive")})]}):h("This is an {history|old revision} of this annotation,\n                  as edited by {user} on {date}.\n                  {current|View current revision}.",{current:(0,a.A)(n,"/annotation"),date:(0,r.A)(e,t.creation_date),history:(0,a.A)(n,"/annotations"),user:(0,c.jsx)(l.A,{editor:t.editor})}):m("Annotation last modified on {date}.",{date:(0,r.A)(e,t.creation_date)})})})]})}),(function(e){const t={...e},s=e.entity,i=e.annotation;if(i&&i.editor){const e={...i};e.editor=n(i.editor),t.annotation=e}const r={entityType:s.entityType,gid:s.gid},a=s.latest_annotation;return a&&a.editor&&(r.latest_annotation={...a,editor:n(a.editor)}),t.entity=r,t}))},r1ucMe4:(e,t,s)=>{"use strict";s.r(t),s.d(t,{buildOptionsTree:()=>g,initializeTooShortYearChecks:()=>y,linkTypeOptions:()=>f,setDisabledOption:()=>b});s("60ocjtt"),s("6g1DHTE"),s("AXfG3Yq"),s("DNaZxvn");var i=s("EVdnBjI"),r=s.n(i),n=s("84yo5bY"),a=s.n(n),o=s("oEgauXb"),l=s("VHUgtNR"),c=s("xrv16+S"),u=s("zs4VVmN"),d=s("KmaOXyL"),h=s("2k2mX3K").RL;function p(e,t){return e.data.child_order-t.data.child_order||(0,o.UD)(e.text,t.text)}const m={buildOptionsTree(e,t,s){var i=[],r=String.fromCharCode(160);return function e(n,a){const o=n.children;if(!o)return;const l=[];let c,u=0;for(;c=o[u++];){var d={};d.value=c[s],d.text=r.repeat(2*a)+("function"==typeof t?t(c):c[t]),d.data=c,l.push(d)}l.sort(p);for(let t=0;t<l.length;t++){const s=l[t];i.push(s),e(s.data,a+1)}}(e,0),i},linkTypeOptions(e,t){for(var s,i=m.buildOptionsTree(e,(function(e){return(0,d.Av)(e,h(t?e.reverse_link_phrase:e.link_phrase))}),"id"),r=0,n=i.length;r<n;r++)(s=i[r])&&!s.data.description&&(s.disabled=!0);return i},setDisabledOption(e,t){t&&t.disabled&&(e.disabled=!0)}};a().bindingHandlers.loop={init(e,t,s,i,r){const n=t(),o=n.items;if(!a().isObservable(o)||!o.cacheDiffForKnownOperation)throw new Error("items must an an observableArray");const l=n.id,u=n.elements||{},d=[],h=Array.from(a().virtualElements.childNodes(e));for(const e of h)e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.COMMENT_NODE||d.push(e);for(var p=e;p.nodeType!==Node.ELEMENT_NODE;)p=p.parentNode;function m(t){const s=document.activeElement,i=o.peek(),n=[];for(let s,o,b=0;s=t[b];b++){var h=s.status;if("retained"===h)continue;const t=s.value,b=t[l];let y,w,v,_=u[b];if("added"===h){if(void 0===s.moved){var m=r.createChildContext(t);if(!_){y=document.createElement("div");for(let e=0;o=d[e];e++)y.appendChild(o.cloneNode(!0));a().applyBindingsToDescendants(m,y),_=Array.from(y.childNodes),u[b]=_,y=null}}}else if("deleted"===h){if(void 0===s.moved)for(let e=0;o=_[e];e++)o.parentNode&&o.parentNode.removeChild(o),n.push({node:o,itemID:b});continue}if(1===_.length)w=_[0];else{w=document.createDocumentFragment();for(let e=0;o=_[e];e++)w.appendChild(o)}for(var g,f=s.index-1;g=i[f];f--)if(v=u[g[l]],v){if(p.contains(v[0]))break;v=null}a().virtualElements.insertAfter(e,w,(0,c.HV)(v))}setTimeout((function(){for(var e,t=0;e=n[t];t++)document.body.contains(e.node)||(a().cleanNode(e.node),delete u[e.itemID])}),100),p.contains(s)&&s.focus()}a().virtualElements.emptyNode(e);var g=o.subscribe(m,null,"arrayChange");return a().utils.domNodeDisposal.addDisposeCallback(e,(function t(){a().utils.domNodeDisposal.removeDisposeCallback(e,t),g.dispose()})),m(o.peek().map((function(e,t){return{status:"added",value:e,index:t}}))),{controlsDescendantBindings:!0}}},a().virtualElements.allowedBindings.loop=!0,a().utils.__findMovesInArrayComparison=a().utils.findMovesInArrayComparison,a().utils.findMovesInArrayComparison=function(e,t){a().utils.__findMovesInArrayComparison(e,t,!1)},a().bindingHandlers.withLabel={update(e,t,s,i,n){var a=t()+"-"+n.$index();r()(e).attr("id",a).parents("td").prev("td").find("label").attr("for",a)}};const g=m.buildOptionsTree,f=m.linkTypeOptions,b=m.setDisabledOption;l.A.initializeTooShortYearChecks=function(e){function t(){const t=r()(`#id-edit-${e}\\.period\\.begin_date\\.year`).val(),s=!t||4===t.trim().length;r()(".submit").prop("disabled",!s),r()("#too_short_begin_year").toggle(!s)}function s(){const t=r()(`#id-edit-${e}\\.period\\.end_date\\.year`).val(),s=null===t||""===t||4===t.length;r()(".submit").prop("disabled",!s),r()("#too_short_end_year").toggle(!s)}r()(`#id-edit-${e}\\.period\\.begin_date\\.year`).keyup((0,u.A)(t,500)).change((0,u.A)(t,500)),t(),r()(`#id-edit-${e}\\.period\\.end_date\\.year`).keyup((0,u.A)(s,500)).change((0,u.A)(s,500)),s()};const y=l.A.initializeTooShortYearChecks},rAs4fSN:(e,t,s)=>{"use strict";s.d(t,{A:()=>n,Q:()=>r});s("6g1DHTE"),s("gdf1lGT");const i=["starzik\\.com"].map((e=>new RegExp("^https?://(?:[^/]+\\.)?"+e+"(?:/.*)?$","i")));function r(e){return i.some((function(t){return null!==e.match(t)}))}function n(e){return r(e)}},t0v1nGy:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});s("60ocjtt"),s("6g1DHTE"),s("AXfG3Yq");var i=s("EVdnBjI"),r=s.n(i),n=s("84yo5bY"),a=s.n(n),o=(s("HR1eHg2"),s("iYLrIsN"),s("127s6Wg")),l=s("Bb4NJH1"),c=s("NMqEMXR"),u=s("pTCUvY3"),d=s("oEgauXb").l;function h(e,t){t=t?t+"\\.":"";var s=r()("#"+t+"name"),i=r()("#guesscase-options");i.length&&!i.data("ui-dialog")&&(i.dialog({title:d("Guess case options"),autoOpen:!1}),a().applyBindingsToNode(i[0],{guessCase:()=>{}}),i[0].style.display="unset");var n=u.A.entities[e];function o(e,t){e.val(t).trigger("change"),e.removeData("orig-value"),e.removeClass("preview")}function l(e,t){const s=e.val();t!==s&&(e.val(t),e.data("orig-value",s),e.addClass("preview"))}function c(e){const t=e.data("orig-value");void 0!==t&&(e.val(t),e.removeData("orig-value"),e.removeClass("preview"))}s.parent().find("button.guesscase-title").on("click",(()=>o(s,n.guess(s.val())))).on("mouseenter",(e=>{0===e.originalEvent.buttons&&l(s,n.guess(s.val()))})).on("mouseleave",(()=>c(s))).end().find("button.guesscase-options").on("click",(function(){i.dialog("open")}));var h=r()("#"+t+"sort_name"),p=r()("#id-edit-artist\\.type_id");function m(){var t=[s.val()];return"artist"===e&&t.push(2!=p.val()),n.sortname(...t)}h.parent().find("button.guesscase-sortname").on("click",(()=>o(h,m()))).on("mouseenter",(e=>{0===e.originalEvent.buttons&&l(h,m())})).on("mouseleave",(()=>c(h))).end().find("button.sortname-copy").on("click",(function(){o(h,s.val())}))}var p={modeName:a().observable(),keepUpperCase:a().observable(),upperCaseRoman:a().observable()},m=a().computed({read(){var e=p.modeName();return e!==u.A.modeName&&(u.A.modeName=e,(0,l.A)("guesscase_mode",e)),c[e]},deferEvaluation:!0});p.help=a().computed({read:()=>m().description,deferEvaluation:!0}),p.keepUpperCase.subscribe((function(e){u.A.CFG_KEEP_UPPERCASED=e,(0,l.A)("guesscase_keepuppercase",e)})),p.upperCaseRoman.subscribe((function(e){(0,l.A)("guesscase_roman",e)})),a().bindingHandlers.guessCase={init(e,t,s,i,r){p.modeName.peek()||p.modeName(u.A.modeName),p.keepUpperCase.peek()||p.keepUpperCase(u.A.CFG_KEEP_UPPERCASED),p.upperCaseRoman.peek()||p.upperCaseRoman((0,o.A)("guesscase_roman"));var n={...p};n.guessCase=t().bind(n);var l=r.createChildContext(n);return a().applyBindingsToDescendants(l,e),{controlsDescendantBindings:!0}}},a().virtualElements.allowedBindings.guessCase=!0},tpyBDsx:(e,t,s)=>{"use strict";function i(e){return e instanceof Error?e:new Error(String(e))}s.d(t,{A:()=>i})},uFqCnKH:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var i=s("84yo5bY"),r=s.n(i),n=s("WN/X9IS"),a=s("8YlDuzw").A;const o=function(e){if(!e)return"";const t=r().unwrap(e.year??null),s=r().unwrap(e.month??null),i=r().unwrap(e.day??null);let o="";return a(t)?o+=(0,n.pN)(t,4):null==s&&null==i||(o="????"),null!=s?o+="-"+(0,n.pN)(s,2):null!=i&&(o+="-??"),null!=i&&(o+="-"+(0,n.pN)(i,2)),o}},uHKJth3:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s("Va8HfVl"),r=s("zzNunOx"),n=s("YRn3CNN"),a=s("PstwrNQ"),o=s("cGbttel");const l=function(e){let{field:t}=e;return(0,o.jsx)("input",{name:t.html_name,type:"hidden",value:t.value})};const c=function(e){let{allowEmpty:t=!1,disabled:s=!1,field:c,frozen:u=!1,hasHtmlErrors:d,helpers:h,label:p,onChange:m,onFocus:g,options:f,required:b=!1,rowRef:y,uncontrolled:w=!1}=e,v=b;return t||(v=!1),(0,o.jsxs)(a.A,{rowRef:y,children:[(0,o.jsx)(n.A,{forField:c,label:p,required:v}),(0,o.jsx)(i.A,{allowEmpty:t,disabled:s||u,field:c,onChange:m,onFocus:g,options:f,required:v,uncontrolled:w}),u?(0,o.jsx)(l,{field:c}):null,h,(0,o.jsx)(r.A,{field:c,hasHtmlErrors:d})]})}},"vJ/3APv":(e,t,s)=>{"use strict";s.d(t,{t:()=>n,v:()=>o});s("60ocjtt"),s("PkUg7wA");function i(e,t){if(null!=e&&"object"==typeof e){const s=t.get(e);return s||(Array.isArray(e)?r(e,t):a(e,t))}return e}function r(e,t){const s=[];t.set(e,s);const r=e.length;for(let n=0;n<r;n++)s.push(i(e[n],t));return s}function n(e){return r(e,new WeakMap)}function a(e,t){const s=Object.create(Object.getPrototypeOf(e));t.set(e,s);for(const r in e)Object.hasOwn(e,r)&&(s[r]=i(e[r],t));return s}function o(e){return a(e,new WeakMap)}},vn6DNBJ:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});const i=s.p+"warning-a23357c.png";var r=s("cGbttel"),n=s("oEgauXb").l;const a=function(){return(0,r.jsx)("img",{alt:n("Warning"),className:"warning",src:i})}},vtQteBO:(e,t,s)=>{"use strict";function i(e){return 1===e.iso_3166_1_codes.length?e.iso_3166_1_codes[0]:1===e.iso_3166_2_codes.length?e.iso_3166_2_codes[0]:1===e.iso_3166_3_codes.length?e.iso_3166_3_codes[0]:null}s.d(t,{A:()=>i})},wPS9XeD:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("smZuR9W"),r=s("Ui1Lssl").A;function n(e){const t=i.useRef(null),s=i.useRef(!1);return i.useCallback((function(i){if(s.current)return;const n=i.target,a=i.currentTarget;if(n instanceof HTMLInputElement&&"checkbox"===n.type&&n.classList.contains(e)){if(null!==t.current&&t.current!==n&&i.shiftKey){const i=a.querySelectorAll("input."+e),o=n.checked;let l=-1,c=-1,u=-1;for(const e of i)if(++u,e===t.current){if(l=u,c>=0)break}else if(e===n&&(c=u,l>=0))break;r(l>=0&&c>=0&&l!==c);let d=-1,h=-1;for(l>c?(d=c+1,h=l):(d=l,h=c-1),u=d;u<=h;++u){const e=i[u];e.checked!==o&&(s.current=!0,e.click(),s.current=!1)}}t.current=n}}),[e])}},wQarZSJ:(e,t,s)=>{"use strict";s.d(t,{iD:()=>r,mo:()=>n});var i=s("GX9EKLY");const r=i.Yi("instruments"),n=(i._J("instruments"),i.A3("instruments"))},x3Cm3nN:(e,t,s)=>{"use strict";function i(e){return(e+1)%2==0?"even":"odd"}s.d(t,{A:()=>i})},x5U3UhS:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>d,LI:()=>c,au:()=>l,j7:()=>u});s("60ocjtt");var i=s("EVdnBjI"),r=s.n(i),n=s("84yo5bY"),a=s.n(n),o=s("9oisN5V");const l=a().observableArray([]);function c(e){const t=a().isObservable(e)?e:a().computed(e);return l.push(t),t}const u=a().computed((function(){const e=l();for(let t=0,s=e.length;t<s;t++)if(e[t]())return!0;return!1}));function d(){u.subscribe((function(e){r()("#page form button[type=submit]").prop("disabled",e)})),r()(document).on("submit","#page form",(function(e){u()&&e.preventDefault()})),r()((function(){r()("#page form :input[required]").each((function(){const e=r()(this);if(e.is(".artist-credit-input"))return;const t=c(a().observable(!(0,o.A)(e.val())));e.on("input change",(function(){t(!(0,o.A)(this.value))}))}))}))}},x6u2RKf:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>A,PB:()=>T,Ur:()=>v,Xv:()=>w,bF:()=>_});s("60ocjtt"),s("6g1DHTE"),s("NKd1yOY");var i=s("smZuR9W"),r=s("nXnm+DU"),n=s("IX2y8RG"),a=s("QpbAoda"),o=s("LCA85s6"),l=s("HkNzj3j"),c=s("52XjgTZ"),u=s("79P3cHQ"),d=s("KmaOXyL"),h=s("a+U3pwl"),p=s("cGbttel"),m=s("oEgauXb").l,g=s("2k2mX3K").RL,f=s("Ui1Lssl").A,b=s("HkNzj3j").l;function y(e,t){if(!e)return"";if(!e.description)return m("Please select a subtype of the currently selected relationship\n       type. The selected relationship type is only used for grouping\n       subtypes.");if(e.deprecated)return m("This relationship type is deprecated and should not be used.");if("series"===t.entityType&&o.PART_OF_SERIES_LINK_TYPE_IDS.includes(e.id)){const s=null==t.typeID?null:c.Ay.series_type[t.typeID];if(s){const t="series"===e.type0?e.type1:e.type0;if(s.item_entity_type!==t)return m("This relationship type is not allowed with the current\n           series type.")}}return""}function w(e){const t=e.entity;return[t.l_name??"",(0,d.Av)(t,t.l_link_phrase??""),(0,d.Av)(t,t.l_reverse_link_phrase??"")]}function v(e){const{disabled:t=!1,id:s,initialFocusRef:i,linkType:a,linkTypeOptions:o,source:l,targetType:c}=e;return{autocomplete:(0,r.U)({containerClass:"relationship-type",disabled:t,entityType:"link_type",extractSearchTerms:w,id:"relationship-type-"+s,inputClass:"relationship-type",inputRef:i,inputValue:null==a?"":(0,n.U)(a),placeholder:m("Type or click to search"),recentItemsKey:"link_type-"+l.entityType+"-"+c,required:!0,selectedItem:a?{entity:a,id:a.id,name:g(a.name),type:"option"}:null,staticItems:o}),error:y(a,l)}}function _(e,t,s){t.linkType=function(e,t){const s={...e};{const i=t;if(("object"!=typeof i||null===i)&&"function"!=typeof i||"update-autocomplete"!==i.type||!("action"in i)||!("source"in i))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i);{const t=i.action,r=i.source;s.autocomplete=(0,a.Ay)(e.autocomplete,t);const n=s.autocomplete.selectedItem?.entity;s.error=y(n,r)}}return s}(t.linkType,s.action);const i=e.linkType.autocomplete.selectedItem?.entity,r=t.linkType.autocomplete.selectedItem?.entity;return i!==r&&(T(t,r??null),!0)}function T(e,t){e.attributes=(0,h.Ur)(t??null,e.attributes.attributesList.reduce(k,new Map))}function k(e,t){const s=t.type,i=s.id;f(i===s.root_id);let r=e.get(i);null==r&&(r=[],e.set(i,r));{const e=t;if(("object"==typeof e&&null!==e||"function"==typeof e)&&"multiselect"===e.control&&"values"in e){const t=e.values;for(const e of t)e.removed||r.push({credited_as:e.creditedAs,type:e.autocomplete.selectedItem?.entity??null})}else if(("object"==typeof e&&null!==e||"function"==typeof e)&&"checkbox"===e.control&&"enabled"in e&&"type"in e){const t=e.enabled,s=e.type;t&&r.push({type:s})}else{if(("object"!=typeof e||null===e)&&"function"!=typeof e||"text"!==e.control||!("textValue"in e)||!("type"in e))throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e);{const t=e.textValue,s=e.type;(0,u.A)(t)||r.push({text_value:t,type:s})}}}return e}const x=r.A;const A=i.memo((function(e){let{dispatch:t,isHelpVisible:s,source:r,state:n,targetType:a}=e;const{autocomplete:o,error:c}=n,u=i.useCallback((e=>{t({action:e,source:r,type:"update-autocomplete"})}),[t,r]),d=o.selectedItem?.entity;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"required section",children:m("Relationship type")}),(0,p.jsxs)("td",{className:"fields",children:[(0,p.jsx)(x,{dispatch:u,state:o}),(0,p.jsx)("div",{"aria-atomic":"true",className:"error",role:"alert",children:c}),s?(0,p.jsx)("div",{className:"ar-descr",children:void 0===d?(0,p.jsx)(p.Fragment,{children:b("Please select a relationship type.\n                   ({url|more documentation})",{url:{href:"/relationships/"+[r.entityType,a].sort().join("-"),target:"_blank"}})}):(0,p.jsx)(p.Fragment,{children:b("{description} ({url|more documentation})",{description:(0,l.Ay)(d?.l_description??""),url:{href:"/relationship/"+d.gid,target:"_blank"}})})}):null]})]})}))},xBG5L4l:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s("07/sqP2"),r=s("cGbttel");const n=function(e){return(0,r.jsx)(i.A,{size:47,...e})}},xNKEMJr:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,x:()=>c});var i=s("HkNzj3j"),r=s("SKGBikk"),n=s("oEgauXb").l,a=s("8YlDuzw").I;function o(e){const t=e?e.type:void 0;return n("[]"===t?"[{text}]":"({text})")}function l(e,t){return a(e)?"":(0,i.Ay)(o(t),{text:e})}function c(e,t){return a(e)?"":(0,r.Ay)(o(t),{text:e})}},"xrv16+S":(e,t,s)=>{"use strict";s.d(t,{$1:()=>h,$z:()=>d,B8:()=>c,DZ:()=>o,HV:()=>m,Kc:()=>n,NM:()=>u,eG:()=>l,hS:()=>g,jm:()=>a,pY:()=>p,r1:()=>r});s("60ocjtt"),s("6g1DHTE"),s("DNaZxvn"),s("NKd1yOY"),s("2e4JtF2"),s("ik8bNVf"),s("APt52BH"),s("pjNe0gE"),s("Sew0me/"),s("D3Q32+k"),s("v/7u+RO");var i=s("93z9/8f");function r(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;const i=e.length;if(i!==t.length)return!1;for(let r=0;r<i;r++)if(!s(e[r],t[r]))return!1;return!0}function n(e,t){return e.reduce((function(e,s){const i=t(s);return i&&e.push(i),e}),[])}function a(e,t,s){const[i,r]=l(e,t,s);return r?e[i]:(e.splice(i,0,t),t)}function o(e,t,s){const i=t.length;for(let r=0;r<i;r++)a(e,t[r],s)}function l(e,t,s){let i,r,n=0,a=e.length;for(;n<a;)i=Math.floor((n+a)/2),r=s(e[i],t),r<0?n=i+1:a=i;return void 0!==i&&a!==i&&a<e.length&&(r=s(e[a],t)),[a,0===r]}function c(e,t,s){const r=e.map(((e,s)=>[s,t(e)])),n=s??i.S;return r.sort(((e,t)=>n(e[1],t[1]))),r.map((t=>e[t[0]]))}function u(e,t,s){const r=e.map(((e,s)=>[s,t(e)])),n=s??i.K;return r.sort(((e,t)=>n(e[1],t[1]))),r.map((t=>e[t[0]]))}function d(e,t){return e.reduce((function(e,s){const i=t(s);let r=e.get(i);return null==r&&(r=[],e.set(i,r)),r.push(s),e}),new Map)}function h(e){return e?.length?e[0]:void 0}function p(e,t){return e.reduce((function(e,s){return e.set(t(s),s),e}),new Map)}function m(e){return e?.length?e[e.length-1]:void 0}function g(e,t){const s=new Set;return e.reduce((function(e,i){const r=t(i);return s.has(r)||(s.add(r),e.push(i)),e}),[])}},y3N8SZS:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});const i=function(e){return e.replace(/<\//g,"<\\/")}},yEXEwX7:(e,t,s)=>{"use strict";s.d(t,{Cm:()=>g,LD:()=>o,Lx:()=>n,No:()=>r,Od:()=>h,SR:()=>m,Sp:()=>l,We:()=>p,fr:()=>i,hk:()=>u,ix:()=>c,oV:()=>d,q$:()=>a});const i={type:"set-menu-visibility",value:!1},r={type:"highlight-next-item"},n={type:"highlight-previous-item"},a={type:"set-menu-visibility",value:!0},o={type:"show-more-results"},l={type:"search-after-timeout"},c={type:"show-lookup-error"},u={type:"show-lookup-type-error"},d={type:"show-search-error"},h={type:"stop-search"},p={type:"toggle-indexed-search"},m={isOpen:!0,type:"toggle-add-entity-dialog"},g={isOpen:!1,type:"toggle-add-entity-dialog"}},yUJAgX5:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var i=s("84yo5bY"),r=s.n(i),n=s("uFqCnKH"),a=s("oEgauXb").l,o=s("SKGBikk").l;const l=function(e){const t=(0,n.A)(e.begin_date),s=(0,n.A)(e.end_date),i=r().unwrap(e.ended);return t||s?t===s?t:t&&s?o("{begin_date} – {end_date}",{begin_date:t,end_date:s}):t?s?"":o(i?"{begin_date} – ????":"{begin_date} –",{begin_date:t}):o("– {end_date}",{end_date:s}):i?a(" – ????"):""}},ygekcr1:(e,t,s)=>{"use strict";s.d(t,{N7:()=>l,Yq:()=>o,j8:()=>a,um:()=>n});var i=s("oEgauXb"),r=s("93z9/8f");function n(e,t){return e.id-t.id}function a(e,t){let[s]=t;return(0,r.K)(e.entityType,s.entityType)||e.id-s.id}function o(e,t){return(0,i.UD)(e.name,t.name)||e.id-t.id}function l(e,t){return o(e.work,t.work)}},zs4VVmN:(e,t,s)=>{"use strict";s.d(t,{A:()=>n,B:()=>a});var i=s("84yo5bY"),r=s.n(i);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=null;return function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];s&&clearTimeout(s),s=setTimeout((()=>{s=null,e(...r)}),t)}}function a(e,t){return r().isObservable(e)||(e=r().computed(e)),e.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:t||500}})}},zx42Bmz:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s("6Rf1oks"),r=s("xNKEMJr"),n=s("uFqCnKH"),a=s("Vg37ZR/"),o=s("SKGBikk").l,l=s("oEgauXb").l;function c(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const s=e.begin_date,c=e.end_date;if((0,a.Z)(s))return(0,a.Z)(c)?(0,i.A)(s,c)?null!=s.day?o("on {date}",{date:(0,n.A)(s)}):o("in {date}",{date:(0,n.A)(s)}):o("from {begin_date} until {end_date}",{begin_date:(0,n.A)(s),end_date:(0,n.A)(c)}):e.ended?o("from {date} to ????",{date:(0,n.A)(s)}):o("from {date} to present",{date:(0,n.A)(s)});if((0,a.Z)(c))return o("until {date}",{date:(0,n.A)(c)});if(e.ended){let e=l("ended");return t&&(e=(0,r.x)(e)),e}return""}},zzNunOx:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,m:()=>o});s("6g1DHTE"),s("DNaZxvn");var i=s("HkNzj3j"),r=s("NwGYEf3"),n=s("cGbttel");const a=(e,t,s)=>t?(0,n.jsx)("li",{children:(0,i.Ay)(e)},s):(0,n.jsx)("li",{children:e},s);function o(e){let{errors:t,hasHtmlErrors:s}=e;return t?.length?(0,n.jsx)("ul",{className:"errors",children:t.map((function(e,t){return a(e,s,t)}))}):null}const l=function(e){let{field:t,hasHtmlErrors:s=!1,includeSubFields:i=!0}=e;if(!t)return null;const a=i?(0,r.Ay)(t):t.errors;return(0,n.jsx)(o,{errors:a,hasHtmlErrors:s})}}}]);
//# sourceMappingURL=common-chunks-6f0bb51.js.map